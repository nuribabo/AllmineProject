(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{242:function(e,t,n){"use strict";n.d(t,"a",function(){return T}),n.d(t,"g",function(){return k}),n.d(t,"c",function(){return w}),n.d(t,"b",function(){return C}),n.d(t,"e",function(){return S}),n.d(t,"f",function(){return A}),n.d(t,"d",function(){return b});var a=n(0),i=n.n(a),r=n(1),o=n.n(r),s=n(6),c=n.n(s),u=n(3),l=n.n(u),h=n(9),p=n.n(h),d=n(7),m=n.n(d),f=n(8),g=n(99),v=n(10),y=n(31),E=n(11),I=n(227),T=function(e){function t(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return i()(this,t),(n=c()(this,l()(t).call(this))).itemRows=[],n.typeKey=e,n.clazz=a,n}return m()(t,e),o()(t,[{key:"onCreateView",value:function(){p()(l()(t.prototype),"onCreateView",this).call(this)}},{key:"render",value:function(){var e=document.createElement("div");e.setAttribute("data-type",this.typeKey),e.className="".concat(f.a.ITEM_TOOLS," ").concat(this.clazz);var t=document.createElement("ul");t.className=f.a.TOOLS_CONTENTS_WRAPPER,e.appendChild(t);var n=null,a=null;this.itemRows.forEach(function(e){null==n&&e.scrollMaxHeight>0&&(n=document.createElement("div"),a=new g.a(!1,!0,e.scrollMaxHeight+"px")),n?n.appendChild(e.getContainer()):t.appendChild(e.getContainer())}),n&&a&&t.appendChild(a.render(n));var i=document.createElement("footer");i.className=f.a.TOOLS_FOOTER;var r=document.createElement("button");r.setAttribute("type","button");var o=document.createElement("i");o.innerText="insert_emoticon",r.appendChild(o),i.appendChild(r),r.style.visibility="hidden";var s=document.createElement("input");return s.setAttribute("type","text"),i.appendChild(s),e.appendChild(i),this.wrap=e,this.styleBox=s,e}}]),t}(y.a),k=function(e){function t(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"li";return i()(this,t),(n=c()(this,l()(t).call(this,!0,void 0,a))).rendererList=[],n.active=!0,n.isFlex=!1,n.hasBorderTop=!1,n.hasBorderBottom=!1,n.hasMarginTop=!1,n.hasMarginBottom=!1,n.customClassList=[],n.scrollMaxHeight=0,n.title=e,n}return m()(t,e),o()(t,[{key:"onCreateView",value:function(){if(this.title){var e=document.createElement("label");e.className=f.a.ROW_TITLE,e.appendChild(document.createTextNode(this.title||"")),this.container.appendChild(e)}}},{key:"getContainer",value:function(){var e=this;return this.onCreateViewIfNotCreated(),this.container.className=this.getStyleClass(f.a.TOOLS_ROW).toLowerCase(),this.rendererList.forEach(function(t){return e.container.appendChild(t.getContainer())}),this.customStyle&&this.container.setAttribute("style",this.customStyle),this.container}},{key:"getStyleClass",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t=t.concat(this.customClassList),this.isFlex&&t.push(f.a.ROW_FLEX),this.hasBorderTop&&t.push(f.a.ROW_BORDER_TOP),this.hasBorderBottom&&t.push(f.a.ROW_BORDER_BOTTOM),this.hasMarginTop&&t.push(f.a.ROW_MARGIN_TOP),this.hasMarginBottom&&t.push(f.a.ROW_MARGIN_BOTTOM),t.join(" ")}},{key:"add",value:function(){for(var e=this,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return n.forEach(function(t){return e.rendererList.push(t)}),this}},{key:"addCustomClass",value:function(){for(var e=this,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return n.forEach(function(t){return e.customClassList.push(t)}),this}},{key:"removeCustomClass",value:function(){for(var e=this,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return n.forEach(function(t){var n=e.customClassList.indexOf(t);-1!==n&&e.customClassList.splice(n,1)}),this}},{key:"setFlex",value:function(){return this.isFlex=!0,this}},{key:"setBorderTop",value:function(){return this.hasBorderTop=!0,this}},{key:"setBorderBottom",value:function(){return this.hasBorderBottom=!0,this}},{key:"setMarginTop",value:function(){return this.hasMarginTop=!0,this}},{key:"setMarginBottom",value:function(){return this.hasMarginBottom=!0,this}},{key:"setScrollStart",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.scrollMaxHeight=e,this}},{key:"addCustomStyle",value:function(e){return this.customStyle=e,this}},{key:"updateUI",value:function(e){this.active=!0===e}}]),t}(y.a),w=function(e){function t(e,n,a,r){var o;return i()(this,t),(o=c()(this,l()(t).call(this,e))).rendered=!1,o.title=e,o.listener=n,o.subTitle=a,o.forceVisible=r,o}return m()(t,e),o()(t,[{key:"onCreateView",value:function(){this.makeElement()}},{key:"makeElement",value:function(){var e=this;this.btnPrev=Object(v.setToolsIcon)(this.container,v.ToolsIcon.GREATER_THAN,!0,"left",180);var t="accordionVisible"+E.b.random(25),n=document.createElement("input");this.accordionVisibleCheckbox=n,n.type="checkbox",n.className=f.a.ACCORDION_VISIBLE,n.id=t,null!=this.forceVisible&&(n.checked=this.forceVisible);var a=this.subTitle?" - "+this.subTitle:"",i=document.createElement("label");if(i.appendChild(document.createTextNode(this.title+a||"")),i.setAttribute("for",t),i.className=f.a.ACCORDION_TITLE,this.container.appendChild(n),this.container.appendChild(i),this.listener){var r="labelUniqueActive"+E.b.random(27);this.accordionActiveCheckbox=document.createElement("input"),this.accordionActiveCheckbox.className=f.a.ACCORDION_ACTIVE,this.accordionActiveCheckbox.type="checkbox",this.accordionActiveCheckbox.id=r,this.container.appendChild(this.accordionActiveCheckbox),this.accordionActiveCheckbox.addEventListener("change",function(){e.accordionVisibleCheckbox.checked=e.accordionActiveCheckbox.checked,e.listener(e.accordionActiveCheckbox.checked)});var o=document.createElement("label");o.id=t,o.setAttribute("for",r),this.boxOn=Object(v.setToolsIcon)(o,v.ToolsIcon.CHECK),this.container.appendChild(o)}else Object(v.setToolsIcon)(i,v.ToolsIcon.GREATER_THAN,!0);var s=document.createElement("div");s.className=f.a.ACCORDION_LIST;var c=document.createElement("div");c.className=f.a.ACCORDION_CONTENTS_WRAP,this.contestsWrap=c,s.appendChild(c),this.container.appendChild(s)}},{key:"setPrevCallback",value:function(e){this.prevCallback=e}},{key:"getContainer",value:function(){var e=this;return this.onCreateViewIfNotCreated(),this.rendered=!0,this.prevCallback&&this.btnPrev.addEventListener("click",this.prevCallback),this.container.className=this.getStyleClass(f.a.TOOLS_ACCORDION_ROW),this.accordionVisibleCheckbox.addEventListener("change",function(){e.accordionActiveCheckbox&&(e.accordionActiveCheckbox.checked=e.accordionVisibleCheckbox.checked,e.listener(e.accordionActiveCheckbox.checked))}),this.rendererList.forEach(function(t){return e.contestsWrap.appendChild(t.getContainer())}),this.container}},{key:"updateUI",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.rendered){if(!0===t){var n=!0,a=!1,i=void 0;try{for(var r,o=this.container.children[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){var s=r.value;s.style.opacity="0.3",s.style.cursor="default"}}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}}else{var c=!0,u=!1,l=void 0;try{for(var h,p=this.container.children[Symbol.iterator]();!(c=(h=p.next()).done);c=!0){var d=h.value;d.style.opacity="",d.style.cursor="pointer"}}catch(e){u=!0,l=e}finally{try{c||null==p.return||p.return()}finally{if(u)throw l}}}if(this.accordionActiveCheckbox&&this.accordionVisibleCheckbox){var m=!0===e;this.accordionActiveCheckbox.checked=m,this.accordionVisibleCheckbox.checked=m}}}},{key:"appendElement",value:function(e){return this.onCreateViewIfNotCreated(),this.container.appendChild(e),this}}]),t}(k),C=function(e){function t(e,n){var a;return i()(this,t),(a=c()(this,l()(t).call(this,void 0,"div"))).rowMap=new Map,a.title=e,a.customClass=n,a.container.className=f.a.TOOLS_SECTION_BUTTONS_WRAP,a}return m()(t,e),o()(t,[{key:"onCreateView",value:function(){this.accordionRow=new w(this.title,null,null,!0).setScrollStart(250).addCustomClass(this.customClass).setBorderBottom()}},{key:"getSectionRowWrap",value:function(e){if(this.rowMap.get(e)){var t=this.rowMap.get(e).rowWrap;return t.style.display="block",t}return null}},{key:"setSectionRowWrap",value:function(e){if(this.rowMap.get(e)){var t=this.rowMap.get(e);t.rowWrap&&!this.accordionRow.contestsWrap.contains(t.rowWrap)&&(this.accordionRow.contestsWrap.appendChild(t.rowWrap),t.rowWrap.style.display=t.rowVisible?"block":"none")}}},{key:"getContainer",value:function(){var e=this;return this.onCreateViewIfNotCreated(),this.accordionRow.getContainer(),this.accordionRow.contestsWrap.appendChild(this.container),this.rowMap.forEach(function(t,n){var a=document.createElement("div");a.classList.add(f.a.ROW_WRAP,n),t.rows.forEach(function(e){a.appendChild(e.getContainer())}),a.style.display=t.rowVisible?"block":"none",e.accordionRow.contestsWrap.appendChild(a),t.rowWrap=a}),this.addEventListener(),this.accordionRow.container}},{key:"updateAccordionUI",value:function(){var e=this;this.onCreateViewIfNotCreated(),p()(l()(t.prototype),"updateUI",this).call(this,!0),this.accordionRow.updateUI(!0),this.rowMap.forEach(function(t){t.rowWrap&&e.enableStyle(I.a.getUserSetting().adminMode,t.rowWrap,f.a.ADMIN_MODE)})}},{key:"addEventListener",value:function(){var e=this;$(this.container).on("click",".".concat(f.a.TOOLS_SECTION_BUTTON),function(n){$(e.container.childNodes).addClass(f.a.DISABLE);var a=n.currentTarget;a.classList.remove(f.a.DISABLE);var i=a.getAttribute(t.SECTION_KEY);e.rowMap.forEach(function(e,t){var n=t===i;e.rowVisible=n,e.rowWrap.style.display=n?"block":"none"})})}},{key:"addSection",value:function(e,n,a,i){var r=0===this.rowMap.size,o=t.makeButton(a,i);o.setAttribute(t.SECTION_KEY,n),r||o.classList.add(f.a.DISABLE),this.rowMap.set(n,{rowVisible:r,rows:e}),this.container.appendChild(o)}},{key:"setRowsVisible",value:function(e){this.rowVisible=e}}],[{key:"makeButton",value:function(e,t){var n=document.createElement("button");n.className=f.a.TOOLS_SECTION_BUTTON;var a=document.createElement("span");return a.innerText=e,n.appendChild(a),Object(v.setToolsIcon)(n,t),n}}]),t}(k);C.SECTION_KEY="sectionKey";var S=function(e){function t(e,n){var a;return i()(this,t),(a=c()(this,l()(t).call(this,e))).listener=n,a}return m()(t,e),o()(t,[{key:"onCreateView",value:function(){}},{key:"setPrevCallback",value:function(e){this.prevCallback=e}},{key:"getContainer",value:function(){var e=this;this.onCreateViewIfNotCreated(),this.container.className=this.getStyleClass(f.a.TOOLS_ACCORDION_ROW),this.btnPrev=Object(v.setToolsIcon)(this.container,v.ToolsIcon.GREATER_THAN,!0,"left",180),this.prevCallback&&this.btnPrev.addEventListener("click",this.prevCallback);var t="accordionVisible"+E.b.random(25),n=document.createElement("input");this.accordionVisibleCheckbox=n,n.type="checkbox",n.className=f.a.ACCORDION_VISIBLE,n.id=t;var a=document.createElement("label");if(a.appendChild(document.createTextNode(this.title||"")),a.setAttribute("for",t),a.className=f.a.ACCORDION_TITLE,this.container.appendChild(n),this.container.appendChild(a),n.addEventListener("change",function(){e.accordionActiveCheckbox&&(e.accordionActiveCheckbox.checked=n.checked,e.listener(e.accordionActiveCheckbox.checked))}),this.listener){var i="labelUniqueActive"+E.b.random(27);this.accordionActiveCheckbox=document.createElement("input"),this.accordionActiveCheckbox.className=f.a.ACCORDION_ACTIVE,this.accordionActiveCheckbox.type="checkbox",this.accordionActiveCheckbox.id=i,this.container.appendChild(this.accordionActiveCheckbox),this.accordionActiveCheckbox.addEventListener("change",function(){n.checked=e.accordionActiveCheckbox.checked,e.listener(e.accordionActiveCheckbox.checked)});var r=document.createElement("label");r.id=t,r.setAttribute("for",i),this.container.appendChild(r),Object(v.setToolsIcon)(r,v.ToolsIcon.CHECK)}return this.rendererList.forEach(function(t){var n=t.getContainer();e.container.appendChild(n)}),this.container}},{key:"updateUI",value:function(e){if(this.accordionActiveCheckbox&&this.accordionVisibleCheckbox){var t=!0===e;this.accordionActiveCheckbox.checked=t,this.accordionVisibleCheckbox.checked=t}}}]),t}(k),A=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:49,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.01;return i()(this,t),(e=c()(this,l()(t).call(this,!0))).rendererList=[],e.customClassList=[],e.widthPercent=n,e.grow=a,e}return m()(t,e),o()(t,[{key:"onCreateView",value:function(){}},{key:"getContainer",value:function(){var e=this;return this.onCreateViewIfNotCreated(),this.container.className=this.getStyleClass(f.a.TOOLS_COLUMN).toLowerCase(),this.widthPercent&&(this.container.style.flexBasis=this.widthPercent+"%"),this.grow&&(this.container.style.flexGrow=""+this.grow),this.rendererList.forEach(function(t){return e.container.appendChild(t.getContainer())}),this.container}},{key:"add",value:function(){for(var e=this,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return n.forEach(function(t){return e.rendererList.push(t)}),this}},{key:"addCustomClass",value:function(){for(var e=this,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return n.forEach(function(t){return e.customClassList.push(t)}),this}},{key:"getStyleClass",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.concat(this.customClassList).join(" ")}}]),t}(y.a),b=function(e){function t(e){var n,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return i()(this,t),(n=c()(this,l()(t).call(this,!0,void 0,"div",e))).rowVisible=a,n}return m()(t,e),t}(y.a)},251:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var a=n(0),i=n.n(a),r=n(1),o=n.n(r),s=n(8),c=n(10),u=n(225),l=n(224),h=n(67),p=function(){function e(){i()(this,e)}return o()(e,null,[{key:"makeToolboxTopContentsWrapper",value:function(){var e=document.createElement("div");return e.className="mobile_tools_wrapper",e}},{key:"setContentsVisible",value:function(e,t){e&&(t?e.classList.remove(s.a.HIDE):e.classList.add(s.a.HIDE))}},{key:"setContentsDisable",value:function(e,t){e&&(t?e.classList.add(s.a.DISABLE):e.classList.remove(s.a.DISABLE))}},{key:"makeIconContents",value:function(e,t){var n=document.createElement("div");return n.className="icon_contents",n.innerText=e,Object(c.setToolsIcon)(n,t),n}},{key:"makePopupWrapper",value:function(e){var t=document.createElement("div");return t.className="tools_popup_inline_wrapper",t.classList.add(e),t}},{key:"makeLabelContents",value:function(e){var t=document.createElement("div");return t.className="label_contents",t.innerText=e,t}},{key:"makeButtonShowToolsButtonRow",value:function(t,n){var a=e.makeLabelContents(t);return a.addEventListener("click",function(t){t.stopPropagation();var i=a.classList.contains("is_selected");e.toggleActiveMenuAction(n.container,i),e.toggleSelectedMenuAction(a)}),a}},{key:"makeButtonShowToolsAccordionRow",value:function(t,n){var a=e.makeLabelContents(t);return a.addEventListener("click",function(t){t.stopPropagation();var i=a.classList.contains("is_selected");e.toggleActiveMenuAction(n.container,i),e.toggleSelectedMenuAction(a)}),a}},{key:"setEventListener",value:function(t,n,a){t.addEventListener("click",function(i){if(i.stopPropagation(),n){var r=t.classList.contains("is_selected");e.toggleActiveMenuAction(n.container,r)}e.toggleSelectedMenuAction(t),a&&a()})}},{key:"makeIconButtonShowToolsRow",value:function(t,n,a){var i=e.makeIconContents("",t);return e.setEventListener(i,n,a),i}},{key:"makeFontShowToolsRow",value:function(t,n){var a=document.createElement("div");return a.className="font_contents",Object(c.setToolsIcon)(a,c.ToolsIcon.GREATER_THAN,!0,"right",90),e.setEventListener(a,t,n),a}},{key:"makeFontSizeToolsRow",value:function(t){var n=document.createElement("div");return n.className="font_size_contents",Object(c.setToolsIcon)(n,c.ToolsIcon.GREATER_THAN,!0,"right",90),e.setEventListener(n,t,null),n}},{key:"makeButtonShowToolsRow",value:function(t,n,a){var i=e.makeLabelContents(t);return e.setEventListener(i,n,a),i}},{key:"toggleActiveMenuAction",value:function(e,t){e&&e.parentElement&&e.parentElement.childNodes.forEach(function(n){n!==e||t?(n.classList.remove("mobile_active"),n.childNodes.forEach(function(e){e.classList.contains("tools_popup")&&e.classList.add(s.a.HIDE)})):e.classList.add("mobile_active")})}},{key:"setEventColorPopup",value:function(t,n,a){t.addEventListener("click",function(i){if(a.container&&h.a.isMobilePortraitSize()){for(i.stopPropagation();a.container.hasChildNodes();)a.container.removeChild(a.container.lastChild);n.classList.add("color_picker_row_wrap"),a.container.appendChild(n),a&&e.toggleActiveMenuAction(a.container,!1),t.classList.remove("is_selected"),e.toggleSelectedMenuAction(t)}})}},{key:"setEventColorTool",value:function(t,n){e.setEventColorPopup(t.container,t.getColorPickerPopup(),n)}},{key:"setEventSvgColorTool",value:function(t,n){e.setEventColorPopup(t.container,t.getColorPickerPopup(),n)}},{key:"toggleSelectedMenuAction",value:function(e){e.parentElement&&e.parentElement.parentElement&&e.parentElement.parentElement.childNodes.forEach(function(t){t.classList.contains(s.a.HIDE)||t.childNodes.forEach(function(t){t!==e&&t.classList.remove("is_selected")})}),u.a.instance.dispatch(new l.c(function(t,n,a){e.classList.toggle("is_selected"),a.itemToolsRenderer.setToolsExpend(e.classList.contains("is_selected"))}))}}]),e}()},261:function(e,t,n){"use strict";var a;n.d(t,"a",function(){return a}),function(e){e.WRAP="download_progress_wrap",e.POPUP="progress_popup",e.POPUP_CLOSE_BTN="popup_close_btn",e.CHARACTER="character",e.CHARACTER_VIEW="character_view",e.MAIN_TITLE="main_title",e.SUB_TITLE="sub_title",e.INFORMATION_WRAP="information_wrap",e.INFORMATION="information",e.BTN_AREA="btn_area",e.SCREEN_OUT="screen_out",e.EASTER_EGG="easter_egg",e.BTN_CONFIRM="btn_confirm",e.EXPAND_HEIGHT="expand_height",e.CONTENT="content",e.CONTENT_WRAP="content_wrap",e.RUNNING="running",e.RUNNING_PROGRESS="progress",e.RUNNING_PROGRESS_BAR="progress_bar",e.RUNNING_PROGRESS_BAR_BACKGROUND="progress_bar_bg",e.RUNNING_PROGRESS_BAR_CHARACTER="bar_character",e.RUNNING_TIP="tip",e.RUNNING_TIP_HIGHLIGHT="tip_highlight",e.RUNNING_OVERTIME_INFORMATION="overtime_information",e.RUNNING_BTN_DIVIDE_PAGE="btn_divide_page",e.RUNNING_BTN_RECEIVE_EMAIL="btn_receive_email",e.RUNNING_LINK_ACTIVE="link_active",e.SUCCESS="success",e.SUCCESS_CHARACTER_LEFT_HAND="left_hand",e.SUCCESS_CHARACTER_RIGHT_HAND="right_hand",e.SUCCESS_CHARACTER_CLAP_EFFECT="clap_effect",e.SUCCESS_BTN_CLOSE="btn_close",e.SUCCESS_BTN_DOWNLOAD="btn_download",e.FAILURE="failure",e.FAILURE_CHARACTER_CRYING="crying",e.FAILURE_BTN_CONFIRM="btn_confirm",e.EMAIL_RECEIVE_SUCCESS="email_receive_success",e.EMAIL_RECEIVE_SUCCESS_CHARACTER="email_receive_success_character",e.EMAIL_RECEIVE_FAILURE="email_receive_failure",e.EMAIL_RECEIVE_FAILURE_CHARACTER="email_receive_failure_character"}(a||(a={}))},262:function(e,t,n){"use strict";var a,i=n(2),r=n.n(i),o=n(4),s=n.n(o),c=n(0),u=n.n(c),l=n(1),h=n.n(l);!function(e){e.APPLICATION_JSON="application/json"}(a||(a={}));var p=n(37),d=n(19),m=n(44),f=n(20),g=n(513),v=n(41),y=n(136);n.d(t,"a",function(){return E});var E=function(){function e(){u()(this,e)}var t,n,i,o,c,l,E,I,T,k,w,C,S,A,b,L,P,x,_,R,N,M;return h()(e,[{key:"getTemplateSizeList",value:(M=s()(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.templateSizeList){e.next=6;break}return"/api/template/size",e.next=4,f.b.get("/api/template/size");case 4:t=e.sent,this.templateSizeList=t.data.list;case 6:return e.abrupt("return",this.templateSizeList);case 7:case"end":return e.stop()}},e,this)})),function(){return M.apply(this,arguments)})},{key:"getTemplateTypeList",value:(N=s()(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.templateTypeList){e.next=6;break}return"/api/template/type",e.next=4,f.b.get("".concat("/api/template/type","?").concat($.param({sortType:"RATIO",openType:v.b.ADMIN})));case 4:t=e.sent,this.templateTypeList=t.data.list;case 6:return e.abrupt("return",this.templateTypeList);case 7:case"end":return e.stop()}},e,this)})),function(){return N.apply(this,arguments)})},{key:"createTemplateProject",value:(R=s()(r.a.mark(function e(t){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/template/project",e.next=3,f.b.post("/api/template/project",{traditional:!0,data:t});case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}},e)})),function(e){return R.apply(this,arguments)})},{key:"findTemplateProject",value:(_=s()(r.a.mark(function e(t){var n,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="/api/template/project/${idx}".replace("${idx}",String(t)),e.next=3,f.b.get(n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}},e)})),function(e){return _.apply(this,arguments)})},{key:"updateTemplateProject",value:(x=s()(r.a.mark(function e(t,n){var a,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="/api/template/project/${idx}/update".replace("${idx}",String(t)),e.next=3,f.b.post(a,{traditional:!0,data:n});case 3:return i=e.sent,e.abrupt("return",i.data);case 5:case"end":return e.stop()}},e)})),function(e,t){return x.apply(this,arguments)})},{key:"getTemplateProjectList",value:(P=s()(r.a.mark(function e(t){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/template/project",e.next=3,f.b.get("".concat("/api/template/project","?").concat(t));case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}},e)})),function(e){return P.apply(this,arguments)})},{key:"createTemplatePageList",value:(L=s()(r.a.mark(function e(t,n){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="/api/template/project/${idx}/page".replace("${idx}",String(t)),e.next=3,f.b.post(a,{traditional:!0,data:JSON.stringify(n),contentType:"application/json"});case 3:case"end":return e.stop()}},e)})),function(e,t){return L.apply(this,arguments)})},{key:"getTemplatePageList",value:(b=s()(r.a.mark(function e(t,n){var a,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="/api/template/project/${idx}/page".replace("${idx}",String(t)),e.next=3,f.b.get("".concat(a,"?").concat($.param(n)));case 3:return i=e.sent,e.abrupt("return",i.data);case 5:case"end":return e.stop()}},e)})),function(e,t){return b.apply(this,arguments)})},{key:"getDeletedTemplatePageList",value:(A=s()(r.a.mark(function e(t,n,a){var i,o,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i="/api/template/project/${idx}/page".replace("${idx}",String(t)),o={status:g.a.DELETED,page:1,pageSize:9999},n===a?o.ratio=n:(o.minRatio=n,o.maxRatio=a),e.next=5,f.b.get("".concat(i,"?").concat($.param(o)));case 5:return s=e.sent,e.abrupt("return",s.data);case 7:case"end":return e.stop()}},e)})),function(e,t,n){return A.apply(this,arguments)})},{key:"getTemplatePageHistory",value:(S=s()(r.a.mark(function e(t){var n,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="/api/template/page/${idx}/history".replace("${idx}",String(t)),e.next=3,f.b.get(n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}},e)})),function(e){return S.apply(this,arguments)})},{key:"updateTemplatePage",value:(C=s()(r.a.mark(function e(t,n){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="/api/template/page/${idx}/update".replace("${idx}",String(t)),e.next=3,f.b.post(a,{traditional:!0,data:n});case 3:case"end":return e.stop()}},e)})),function(e,t){return C.apply(this,arguments)})},{key:"deleteTemplatePage",value:(w=s()(r.a.mark(function e(t){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="/api/template/page/${idx}/delete".replace("${idx}",String(t)),e.next=3,f.b.post(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)})),function(e){return w.apply(this,arguments)})},{key:"deleteMultiTemplatePage",value:(k=s()(r.a.mark(function e(t){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/template/page",e.next=3,f.b.delete("/api/template/page",{data:JSON.stringify(t),contentType:a.APPLICATION_JSON});case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}},e)})),function(e){return k.apply(this,arguments)})},{key:"recoveryTemplatePage",value:(T=s()(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/template/page/recovery",e.next=3,f.b.put("/api/template/page/recovery",{data:JSON.stringify(t),contentType:a.APPLICATION_JSON});case 3:case"end":return e.stop()}},e)})),function(e){return T.apply(this,arguments)})},{key:"findTemplatePage",value:(I=s()(r.a.mark(function e(t){var n,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="/api/template/page/${idx}".replace("${idx}",String(t)),e.next=3,f.b.get(n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}},e)})),function(e){return I.apply(this,arguments)})},{key:"getTemplateList",value:(E=s()(r.a.mark(function e(t,n){var a,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="/api/template/project/${idx}/template".replace("${idx}",String(t)),e.next=3,f.b.get("".concat(a,"?").concat($.param(n)));case 3:return i=e.sent,e.abrupt("return",i.data);case 5:case"end":return e.stop()}},e)})),function(e,t){return E.apply(this,arguments)})},{key:"findTemplate",value:(l=s()(r.a.mark(function e(t){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.findOneTemplate(t);case 2:if(!(n=e.sent)){e.next=7;break}return e.next=6,this.getLinkedTemplate(t);case 6:n.linkedTemplate=e.sent;case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}},e,this)})),function(e){return l.apply(this,arguments)})},{key:"createTemplate",value:(c=s()(r.a.mark(function e(t,n){var a,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="/api/template/project/${idx}/template".replace("${idx}",String(t)),e.next=3,f.b.post(a,{traditional:!0,data:JSON.stringify(n),contentType:"application/json"});case 3:return i=e.sent,e.abrupt("return",i.data);case 5:case"end":return e.stop()}},e)})),function(e,t){return c.apply(this,arguments)})},{key:"updateTemplate",value:(o=s()(r.a.mark(function e(t,n){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.updateTemplate(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),function(e,t){return o.apply(this,arguments)})},{key:"insertTemplateLink",value:(i=s()(r.a.mark(function e(t,n){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.a.getURL("/servlet/api/miridih/miricanvas/template/link"),e.next=3,m.a.post(f.a,a,{data:{designIdx:n,miricanvasTemplateIdx:t}});case 3:case"end":return e.stop()}},e)})),function(e,t){return i.apply(this,arguments)})},{key:"deleteTemplateLink",value:(n=s()(r.a.mark(function e(t){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.a.getURL("/servlet/api/miridih/miricanvas/template/link/delete"),e.next=3,m.a.post(f.a,n,{data:{miricanvasTemplateIdx:t}});case 3:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})},{key:"getLinkedTemplate",value:(t=s()(r.a.mark(function e(t){var n,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="/servlet/api/miridih/miricanvas/template/link/design?miricanvasTemplateIdx=${templateIdx}".replace("${templateIdx}",String(t)),e.next=3,m.a.get(f.a,d.a.getURL(n));case 3:return a=e.sent,e.abrupt("return",p.a.isEmpty(a.data)?null:a.data[0]);case 5:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})}]),e}();E.instance=new E},273:function(e,t,n){"use strict";n.d(t,"a",function(){return T});var a,i=n(0),r=n.n(i),o=n(1),s=n.n(o),c=n(6),u=n.n(c),l=n(3),h=n.n(l),p=n(9),d=n.n(p),m=n(7),f=n.n(m),g=n(8),v=n(248),y=n(226),E=n(241),I=n(67),T=function(e){function t(e,n,i,o,s){var c,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",p=arguments.length>6&&void 0!==arguments[6]?arguments[6]:function(e){return Math.round(e)};return r()(this,t),(c=u()(this,h()(t).call(this,"div",[g.a.RANGE_ITEM]))).lastValidValue=0,c.rangeInputChangeType=a.NONE,c.listener=e,c.titleKey=n,c.min=i,c.max=o,c.step=s,c.suffix=l,c.customRound=p,c}return f()(t,e),s()(t,[{key:"onCreateView",value:function(){d()(h()(t.prototype),"onCreateView",this).call(this);var e=document.createElement("label");e.innerText=this.titleKey;var n=document.createElement("div");n.className=g.a.CUSTOM_RANGE_WRAP;var a=document.createElement("div"),i=document.createElement("div");i.className="".concat(g.a.CUSTOM_RANGE_LINE," ").concat(g.a.CUSTOM_RANGE_BACKGROUND_LINE),a.className="".concat(g.a.CUSTOM_RANGE_LINE," ").concat(g.a.CUSTOM_RANGE_VALUE_LINE),this.range=document.createElement("input"),this.range.type="range",this.range.min=""+this.min,this.range.max=""+this.max,this.range.step=""+this.step,i.appendChild(a),this.bgLine=i,n.appendChild(i),n.appendChild(this.range),this.inputBox=document.createElement("input"),this.inputBox.type="text",this.inputBox.size=3;var r=document.createElement("div");r.appendChild(this.inputBox);var o=document.createElement("h6");o.className=g.a.ITEM_SUFFIX,o.innerText=this.suffix,r.appendChild(o),this.container.appendChild(e),this.container.appendChild(n),this.container.appendChild(r),this.addEventListener(),this.valueSpan=a}},{key:"updateUI",value:function(e){this.onCreateViewIfNotCreated(),null!=e.active&&(this.active=!0===e.active),this.active?(this.range.removeAttribute("disabled"),this.inputBox.removeAttribute("disabled"),this.container.classList.remove(g.a.DISABLE)):(this.range.disabled=!0,this.inputBox.disabled=!0,this.container.classList.add(g.a.DISABLE)),this.setValue(e.value,!1)}},{key:"setValue",value:function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=Number(e);if(Number.isNaN(a))this.setValue(this.lastValidValue,!1);else{a=this.customRound(a);var i,r=Math.min(1,(a-this.min)/(this.max-this.min)),o=a;1===(r=r<0?0:r)?o=this.max:o<this.min&&(o=this.min),a===t.UNKNOWN_MULTI_VALUE?(r=1,o=this.max,i="?"):i=o.toString(),this.valueSpan.style.transform="scaleX(".concat(r,")"),this.inputBox.value=i,this.range.value=o.toString(),n&&this.listener(o),this.lastValidValue=o}}},{key:"setRangeBgCustomClass",value:function(e){this.onCreateViewIfNotCreated(),this.bgLine.classList.add(e)}},{key:"addEventListener",value:function(){var e=this,t=I.a.isMobileDevice()&&I.a.isIOS(),n=function(t){var n,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t.stopPropagation(),a){if(e.range.disabled)return;var i=8,r=t.touches[0].clientX-$(e.range).offset().left,o=(r-i)/(e.range.offsetWidth-2*i);n=e.customRound(o*(e.max-e.min)+e.min),n=e.customRound(Math.max(e.min,Math.min(n,e.max)))}else n=e.customRound(Number(e.range.value));e.setValue(n)},i=this,r=this.range;function o(e){t?(y.a.instance.mouseAction.mode=E.a.MODE_MOVE_CHANGE_VALUE,n(e,t)):i.rangeInputChangeType=a.MOVE}function s(){y.a.instance.mouseAction.mode=E.a.MODE_NONE,$(r).off("mousemove touchmove",o),$(r).off("mouseup touchend",s)}I.a.isIEBrowser()?r.addEventListener("change",n):r.addEventListener("input",function(t){e.rangeInputChangeType===a.DOWN?y.a.instance.mouseAction.mode=E.a.MODE_DOWN_CHANGE_VALUE:y.a.instance.mouseAction.mode=E.a.MODE_MOVE_CHANGE_VALUE,n(t)}),$(r).on("mousedown touchstart",function(i){e.rangeInputChangeType=a.DOWN,$(r).on("mousemove touchmove",o),$(r).on("mouseup touchend",s),t&&(y.a.instance.mouseAction.mode=E.a.MODE_DOWN_CHANGE_VALUE,n(i,t))}),this.inputBox.addEventListener("change",function(t){t.stopPropagation(),e.setValue(e.inputBox.value)}),this.inputBox.addEventListener("keypress",function(t){13===t.keyCode&&e.inputBox.blur()}),this.inputBox.addEventListener("focus",function(){return e.inputBox.select()})}}]),t}(v.a);T.UNKNOWN_MULTI_VALUE=Number.MIN_VALUE,function(e){e[e.NONE=0]="NONE",e[e.DOWN=1]="DOWN",e[e.MOVE=2]="MOVE"}(a||(a={}))},276:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a,i=n(226),r=n(46);!function(e){var t=new Map;function n(e){var t={repositoryType:e.repositoryType,resourceType:e.resourceType,key:e.key||e.referenceKey};return i.a.instance.editorMainVC.leftPanelMainVC.getActivePanel().getGTMItemData(t)}e.sendClick=function(e){try{var t=n(e);if(null==t)return;r.a.sendEECClick(t);var a=i.a.instance.editorMainVC.leftPanelMainVC.getActivePanel();r.a.sendItemUseEvent(a.getItemUseEventData(),t);var o=e.key||e.referenceKey;r.a.sendItemUseDetailEvent(t,a.getItemUseEventData(),o,t.position)}catch(e){}},e.sendDetailClick=function(e){try{var a=n(e);if(null==a)return;var i="".concat(a.id).concat(a.list," "),o=t.get(i)||0;0===o&&r.a.sendEECDetailClick(a),o++,t.set(i,o)}catch(e){}},e.sendImpressions=function(e){try{r.a.sendImpressions(e.items.map(function(t,n){var a=n+1+(e.pageNo-1)*e.pageSize;return t.getEECItemData(e.category,e.listTitle,a)}))}catch(e){}}}(a||(a={}))},277:function(e,t,n){"use strict";n.d(t,"d",function(){return w}),n.d(t,"e",function(){return C}),n.d(t,"c",function(){return S}),n.d(t,"b",function(){return A}),n.d(t,"a",function(){return b});var a=n(9),i=n.n(a),r=n(6),o=n.n(r),s=n(3),c=n.n(s),u=n(7),l=n.n(u),h=n(2),p=n.n(h),d=n(4),m=n.n(d),f=n(0),g=n.n(f),v=n(1),y=n.n(v),E=n(226),I=n(233),T=n(241),k=n(405),w=function(e){function t(e,n,a,i,r){var s,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],h=arguments.length>7?arguments[7]:void 0;return g()(this,t),(s=o()(this,c()(t).call(this,h))).changeDesign=function(){return!0},s.isLastSavedAction=!1,s.isSameAction=!1,s.mouseActionMode=T.a.MODE_NONE,s.concat=function(e){return e instanceof t&&(s.newValue=e.newValue,!0)},s.actionType=e,s.groupName=n,s.propName=a,s.newValue=i,s.updateUI=r,s.timeout=u,s.isRender=l,s.mouseActionMode=E.a.instance.mouseAction.mode,s}return l()(t,e),y()(t,[{key:"getProps",value:function(e){return e.props}},{key:"commitProps",value:function(e,t){this.groupName?this.commitGroupPropAction(e,t):this.commitPropAction(e,t)}},{key:"commitAction",value:function(e,t){this.commitProps(e,t),t.editorMainVC.renderLayerThumb(this.items)}},{key:"rollbackProps",value:function(e,t){var n=this.newValue;this.newValue=this.oldValue,this.groupName?this.commitGroupPropAction(e,t):this.commitPropAction(e,t),this.newValue=n}},{key:"rollbackAction",value:function(e,t){null!=this.oldValue&&(this.rollbackProps(e,t),t.editorMainVC.renderLayerThumb(this.items))}},{key:"isActionGroupEquals",value:function(e){return 0!==this.timeout&&(null!=e&&e.actionType===this.actionType&&e instanceof t&&(this.items[0].tbpeId===e.items[0].tbpeId&&(E.a.instance.mouseAction.mode!==T.a.MODE_NONE&&(this.isSameAction=e.mouseActionMode===T.a.MODE_MOVE_CHANGE_VALUE),this.isSameAction)))}},{key:"recycle",value:function(){this.groupName=null,this.actionType=null,this.propName=null,this.oldValue=null,this.newValue=null,this.propsArray=[]}},{key:"commitPropAction",value:function(e,n){var a=this,i=t.getPropGetter(this.propName,this.newValue),r=t.getPropSetter(this.propName);this.propsArray.forEach(function(e){if(!(i in e))throw Error("속성의 getFunction 네이밍이 다음과 같아야함:  ".concat(i));if(!(r in e))throw Error("속성의 setFunction 네이밍이 다음과 같아야함 : ".concat(r));a.oldValue=e[i](),e[r](a.newValue)})}},{key:"commitGroupPropAction",value:function(e,n){var a=this,i=t.getGroupPropGetter(this.groupName,this.propName,this.newValue),r=t.getGroupPropSetter(this.groupName,this.propName);this.propsArray.forEach(function(e){if(!(i in e))throw Error("그룹속성의 getFunction 네이밍이 다음과 같아야함:  ".concat(i));if(!(r in e))throw Error("그룹속성의 setFunction 네이밍이 다음과 같아야함 : ".concat(r));a.oldValue=e[i](),e[r](a.newValue)})}}],[{key:"getPropGetter",value:function(e,n){return t.getPrefixString(n)+t.firstCharUpperCase(e)}},{key:"getPropSetter",value:function(e){return"set"+t.firstCharUpperCase(e)}},{key:"getGroupPropGetter",value:function(e,n,a){return"active"===n?"isActive"+t.firstCharUpperCase(e):t.getPrefixString(a)+t.firstCharUpperCase(e)+t.firstCharUpperCase(n)}},{key:"getPrefixString",value:function(e){return!0===e||!1===e?"is":"get"}},{key:"getGroupPropSetter",value:function(e,n){if("active"===n)return"setActive"+t.firstCharUpperCase(e);var a=t.firstCharUpperCase(e),i=t.firstCharUpperCase(n);return"set".concat(a).concat(i)}},{key:"firstCharUpperCase",value:function(e){return e[0].toUpperCase()+e.slice(1)}}]),t}(function(){function e(t){var n=this;if(g()(this,e),this.doSaveQueue=!0,this.updateUI=!0,this.isLastSavedAction=!1,this.items=[],this.propsArray=[],this.isRender=!0,this.concat=function(e){return!1},this.commit=function(){var e=m()(p.a.mark(function e(t,a,i){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.propsArray=[],n.items.forEach(function(e){n.propsArray.push(n.getProps(e))}),!n.propsArray.some(function(e){return null===e})){e.next=4;break}return e.abrupt("return");case 4:if(n.commitAction(t,a),!n.isRender){e.next=8;break}return e.next=8,i.renderAuto(t,a);case 8:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}(),this.rollback=function(){var e=m()(p.a.mark(function e(t,a,i){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.items.length){e.next=4;break}return n.rollbackAction(t,a),e.next=4,i.renderAuto(t,a);case 4:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}(),t&&t.length)this.items=t;else{var a=E.a.instance.activeItems.slice();a.length>0?this.items=a:this.doSaveQueue=!1}}return y()(e,[{key:"isActionGroupEquals",value:function(e){return!1}},{key:"recycle",value:function(){this.items=[]}}]),e}()),C=function(e){function t(){var e,n;g()(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=o()(this,(e=c()(t)).call.apply(e,[this].concat(i)))).ltrbs=[],n}return l()(t,e),y()(t,[{key:"commitAction",value:function(e,n){if(i()(c()(t.prototype),"commitAction",this).call(this,e,n),this.isRender&&0===this.ltrbs.length){var a=!0,r=!1,o=void 0;try{for(var s,u=this.items[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var l=s.value,h=l.getLTRBCoordinate();this.ltrbs.push(h),l.setLTRBCoordinate(h.clone())}}catch(e){r=!0,o=e}finally{try{a||null==u.return||u.return()}finally{if(r)throw o}}}}},{key:"rollbackAction",value:function(e,n){i()(c()(t.prototype),"rollbackAction",this).call(this,e,n);for(var a=0;a<this.ltrbs.length;a++){var r=this.ltrbs[a];this.items[a].setLTRBCoordinate(r)}}}]),t}(w),S=function(){function e(t,n,a,i,r){var o=this,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],u=arguments.length>7?arguments[7]:void 0,l=arguments.length>8?arguments[8]:void 0,h=arguments.length>9?arguments[9]:void 0,p=arguments.length>10?arguments[10]:void 0;g()(this,e),this.changeDesign=function(){return!0},this.isLastSavedAction=!1,this.doSaveQueue=!0,this.doComminAction=!0,this.isSameAction=!1,this.mouseActionMode=T.a.MODE_NONE,this.concat=function(t){return t instanceof e&&(o.newValue=t.newValue,!0)},this.actionType=t,this.groupName=n,this.propName=a,this.newValue=i,this.updateUI=r,this.timeout=s,this.isRender=c,this.param1=u,this.param2=l,this.callBack=p;var d=E.a.instance.activeItems.slice();d.length>0?h?this.item=h:I.b.isSameGroup(d)?this.item=I.b.getRootGroup(d[0].groupId).getSelectedItem():this.item=d[0]:this.doSaveQueue=!1,this.item?this.props=this.item.props:(this.doSaveQueue=!1,this.doComminAction=!1),this.mouseActionMode=E.a.instance.mouseAction.mode}var t;return y()(e,[{key:"commit",value:(t=m()(p.a.mark(function e(t,n,a){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.doComminAction){e.next=5;break}if(this.groupName?this.commitGroupPropAction(t,n):this.commitPropAction(t,n),!this.isRender){e.next=5;break}return e.next=5,a.renderAuto(t,n,this.callBack);case 5:case"end":return e.stop()}},e,this)})),function(e,n,a){return t.apply(this,arguments)})},{key:"rollback",value:function(e,t,n){null!=this.oldValue&&(k.a.setOriginFont(this.oldValue[0][0]),this.groupName?this.rollbackGroupPropAction(e,t):this.rollbackPropAction(e,t))}},{key:"isActionGroupEquals",value:function(t){return 0!==this.timeout&&(null!=t&&t.actionType===this.actionType&&t instanceof e&&(this.item.tbpeId===t.item.tbpeId&&(E.a.instance.mouseAction.mode!==T.a.MODE_NONE&&(this.isSameAction=t.mouseActionMode===T.a.MODE_MOVE_CHANGE_VALUE),this.isSameAction)))}},{key:"recycle",value:function(){this.groupName=null,this.actionType=null,this.propName=null,this.oldValue=null,this.newValue=null,this.props=null,this.param1=null,this.param2=null}},{key:"commitPropAction",value:function(t,n){var a=e.getPropGetter(this.propName,this.newValue),i=a+"s",r=e.getPropSetter(this.propName);if(!(a in this.props))throw Error("속성의 getFunction 네이밍이 다음과 같아야함:  ".concat(a));if(!(r in this.props))throw Error("속성의 setFunction 네이밍이 다음과 같아야함 : ".concat(r));this.oldValue=this.props[i](this.param1,this.param2),this.props[r](this.newValue,this.param1,this.param2)}},{key:"commitGroupPropAction",value:function(t,n){var a=e.getGroupPropGetter(this.groupName,this.propName,this.newValue),i=a+"s",r=e.getGroupPropSetter(this.groupName,this.propName);if(!(a in this.props))throw Error("그룹속성의 getFunction 네이밍이 다음과 같아야함:  ".concat(a));if(!(r in this.props))throw Error("그룹속성의 setFunction 네이밍이 다음과 같아야함 : ".concat(r));this.oldValue=this.props[i](this.param1,this.param2),this.props[r](this.newValue,this.param1,this.param2)}},{key:"rollbackPropAction",value:function(t,n){var a=e.getPropGetter(this.propName,this.newValue),i=e.getPropSetter(this.propName);if(!(a in this.props))throw Error("속성의 getFunction 네이밍이 다음과 같아야함:  ".concat(a));if(!(i in this.props))throw Error("속성의 setFunction 네이밍이 다음과 같아야함 : ".concat(i));this.props[i](this.oldValue,this.param1,this.param2)}},{key:"rollbackGroupPropAction",value:function(t,n){var a=e.getGroupPropGetter(this.groupName,this.propName,this.newValue),i=e.getGroupPropSetter(this.groupName,this.propName);if(!(a in this.props))throw Error("그룹속성의 getFunction 네이밍이 다음과 같아야함:  ".concat(a));if(!(i in this.props))throw Error("그룹속성의 setFunction 네이밍이 다음과 같아야함 : ".concat(i));this.props[i](this.oldValue,this.param1,this.param2)}}],[{key:"getPropGetter",value:function(t,n){return e.getPrefixString(n)+e.firstCharUpperCase(t)}},{key:"getPropSetter",value:function(t){return"set"+e.firstCharUpperCase(t)}},{key:"getGroupPropGetter",value:function(t,n,a){return"active"===n?"isActive"+e.firstCharUpperCase(t):e.getPrefixString(a)+e.firstCharUpperCase(t)+e.firstCharUpperCase(n)}},{key:"getPrefixString",value:function(e){return!0===e||!1===e?"is":"get"}},{key:"getGroupPropSetter",value:function(t,n){return"active"===n?"setActive"+e.firstCharUpperCase(t):"set"+e.firstCharUpperCase(t)+e.firstCharUpperCase(n)}},{key:"firstCharUpperCase",value:function(e){return e[0].toUpperCase()+e.slice(1)}}]),e}(),A=function(e){function t(e,n,a,i,r,s,u){var l,h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;return g()(this,t),(l=o()(this,c()(t).call(this,a,i,r,s,u,h,!1,e))).items=e,l.renderitems=n,l.actionType=a,l.groupName=i,l.propName=r,l.newValue=s,l.updateUI=u,l.timeout=h,l}return l()(t,e),y()(t,[{key:"commitAction",value:function(e,n){i()(c()(t.prototype),"commitAction",this).call(this,e,n),n.editorMainVC.renderCanvas(e,n,this.renderitems),this.updateUI&&n.editorMainVC.renderItemToolsByItem(this.renderitems,n)}},{key:"rollbackAction",value:function(e,n){i()(c()(t.prototype),"rollbackAction",this).call(this,e,n),n.editorMainVC.renderCanvas(e,n,this.renderitems)}}]),t}(w),b=function(e){function t(e,n,a,i,r,s){var u,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,h=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],p=arguments.length>8?arguments[8]:void 0,d=arguments.length>9?arguments[9]:void 0,m=arguments.length>10?arguments[10]:void 0,f=arguments.length>11?arguments[11]:void 0;g()(this,t),(u=o()(this,c()(t).call(this,n,a,i,r,s,l,h,p,d,m,f))).gridItem=e,u.rowThickness=[],u.colThickness=[];var v=!0,y=!1,E=void 0;try{for(var I,T=u.gridItem.rows[Symbol.iterator]();!(v=(I=T.next()).done);v=!0){var k=I.value;u.rowThickness.push(k.thickness)}}catch(e){y=!0,E=e}finally{try{v||null==T.return||T.return()}finally{if(y)throw E}}var w=!0,C=!1,S=void 0;try{for(var A,b=u.gridItem.cols[Symbol.iterator]();!(w=(A=b.next()).done);w=!0){var L=A.value;u.colThickness.push(L.thickness)}}catch(e){C=!0,S=e}finally{try{w||null==b.return||b.return()}finally{if(C)throw S}}return u}var n;return l()(t,e),y()(t,[{key:"commit",value:(n=m()(p.a.mark(function e(n,a,r){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i()(c()(t.prototype),"commit",this).call(this,n,a,r);case 2:return this.gridItem.adjustColThickness(),this.gridItem.adjustRowThickness(),this.gridItem.adjustSize(),this.gridItem.updateThicknessRatio(),this.isRender&&(r.renderCanvas(n,a,[this.gridItem]),r.renderHandler(n,a)),e.abrupt("return",null);case 8:case"end":return e.stop()}},e,this)})),function(e,t,a){return n.apply(this,arguments)})},{key:"rollback",value:function(e,n,a){var r=this;i()(c()(t.prototype),"rollback",this).call(this,e,n,a),this.gridItem.cols.forEach(function(e,t){e.thickness=r.colThickness[t]}),this.gridItem.rows.forEach(function(e,t){e.thickness=r.rowThickness[t]}),this.gridItem.adjustSize(),this.gridItem.updateThicknessRatio(),this.isRender&&(a.renderCanvas(e,n,[this.gridItem]),a.renderHandler(e,n))}}]),t}(S)},288:function(e,t,n){"use strict";var a,i,r,o;n.d(t,"b",function(){return a}),n.d(t,"a",function(){return i}),n.d(t,"c",function(){return r}),function(e){e.JPG="jpg",e.PNG="png",e.PDF="pdf",e.PPTX="pptx"}(a||(a={})),function(e){e.QUICK="quick",e.HIGH_RESOLUTION="high_resolution"}(i||(i={})),function(e){e.WEB="web",e.PRINT="print"}(r||(r={})),function(e){e.WIDTH="width",e.HEIGHT="height"}(o||(o={}))},289:function(e,t,n){"use strict";n.d(t,"c",function(){return G}),n.d(t,"a",function(){return V}),n.d(t,"b",function(){return F});var a=n(6),i=n.n(a),r=n(3),o=n.n(r),s=n(7),c=n.n(s),u=n(2),l=n.n(u),h=n(4),p=n.n(h),d=n(0),m=n.n(d),f=n(1),g=n.n(f),v=n(275),y=n(110),E=n(46),I=n(11),T=n(41),k=n(236),w=n(344),C=n(305),S=n(317),A=n(329),b=n(474),L=n(426),P=n(227),x=n(224),_=n(427),R=n(226),N=n(225),M=n(279),D=n(451),O=n(229),U=n(520),B=n(252),G=function(){function e(t,n,a){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];m()(this,e),this.actionType=x.a.TEMPLATE_LOAD,this.doSaveQueue=!0,this.isActionGroupEquals=function(e){return!1},this.concat=function(e){return!1},this.changeDesign=function(){return!0},this.isLastSavedAction=!1,this.designParam=t,this.pageSize=n,this.templateType=a,this.keepSheetSize=i}var t,n,a;return g()(e,[{key:"commit",value:(a=p()(l.a.mark(function e(t,n,a){var i,r,o,s,c,u;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.undoStatus=this.makeStatus(t,n),!this.redoStatus){e.next=6;break}return this.setStatus(this.redoStatus,t),e.next=5,this.render(t,n,a);case 5:return e.abrupt("return");case 6:return i=!1,L.a.open("디자인을 불러오고 있습니다.<br/>잠시만 기다려주세요.","적용 취소",function(){return i=!0}),e.prev=8,r=S.a.makeDesignDC(this.designParam),e.next=12,r.load(C.b.LOADING_ITEM);case 12:if((o=e.sent).templateType=this.templateType,w.a.setTemplateTypeList([new T.c(this.templateType?this.templateType.id:null,void 0,void 0,void 0,this.templateType?this.templateType.title:null)]),!i){e.next=17;break}return e.abrupt("return");case 17:return this.keepSheetSize&&this.keepAllPagesSheetSize(t,o),R.a.setMetaData(o),this.pageSize&&!isNaN(this.pageSize.width)&&!isNaN(this.pageSize.height)&&this.pageSize.unit?(s=this.pageSize.getPixelLimitMax(A.a.getMaxSheetSize(P.a.getUserSetting().devMode)),c=this.getItemArrangeType(r,s),o.pages.forEach(function(e){return e.changeSheetSize(s,c)}),R.a.instance.setDesignSize(this.pageSize)):this.keepSheetSize||(r instanceof A.d&&!I.b.isEmpty(r.designBean.sizeOption)?R.a.instance.option.initByDesignBean(r.designBean):R.a.instance.option.initSizeByMeta(o)),a.canvasAreaVC.printout.clearAllAlertGuide(),a.showPrintoutConfirmView(!1),e.next=24,this.render(o,n,a);case 24:return e.next=26,B.a.fetchDesignDocResource();case 26:try{u=o.pages[0].reference,w.a.setRefTemplateKey(u.templateKey),E.a.sendEvent("템플릿 선택","템플릿 선택","".concat(u.templateRepositoryType," - ").concat(u.templateKey),!0)}catch(e){}e.next=32;break;case 29:throw e.prev=29,e.t0=e.catch(8),e.t0;case 32:return e.prev=32,L.a.close(),e.finish(32);case 35:case"end":return e.stop()}},e,this,[[8,29,32,35]])})),function(e,t,n){return a.apply(this,arguments)})},{key:"keepAllPagesSheetSize",value:function(e,t){var n=e.pages,a=t.pages;t.changeSheetSize(n[0].sheetSize,v.a.FIT),n.length<=a.length?a.splice(n.length,a.length):D.a.appendNewEmptyPagesUntilCountBaseOnOldPage(n[0],a,n.length-a.length),this.resetPageTitles(a)}},{key:"resetPageTitles",value:function(e){}},{key:"getItemArrangeType",value:function(e,t){return e instanceof A.c?e.getItemArrangeType(t.width,t.height):v.a.FIT}},{key:"render",value:(n=p()(l.a.mark(function e(t,n,a){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.canvasAreaVC.updatePagingManager(),a.canvasAreaVC.updateZoomFitAfterRender(),e.next=4,a.renderAll(t,n);case 4:N.a.instance.dispatch(new M.g),b.a.applyPresetToMeta(t);case 6:case"end":return e.stop()}},e)})),function(e,t,a){return n.apply(this,arguments)})},{key:"rollback",value:(t=p()(l.a.mark(function e(t,n,a){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.redoStatus=this.makeStatus(t,n),this.setStatus(this.undoStatus,t),e.next=4,this.render(t,n,a);case 4:case"end":return e.stop()}},e,this)})),function(e,n,a){return t.apply(this,arguments)})},{key:"setStatus",value:function(e,t){t.pages=e.pages,R.a.setMetaData(t),R.a.instance.renderPageIdx=e.renderPageIdx,R.a.instance.setDesignSize(e.pageSize),_.a.clear(),k.a.unselectAllItems()}},{key:"makeStatus",value:function(e,t){return{pages:e.pages,renderPageIdx:t.renderPageIdx,pageSize:t.option.pageSize}}},{key:"recycle",value:function(){this.undoStatus=null,this.redoStatus=null}}]),e}(),V=function(e){function t(){return m()(this,t),i()(this,o()(t).apply(this,arguments))}return c()(t,e),g()(t,[{key:"resetPageTitles",value:function(e){O.a.getEditorOpenOption().setPageTitlesWithGlobalTitles(e)}}]),t}(G),F=function(e){function t(e,n,a){var r;return m()(this,t),(r=i()(this,o()(t).call(this))).actionType=x.a.CHANGE_PAGE_SIZE,r.changeDesign=function(){return!0},r.rollbackBgSizeList=new Map,r.redoBgSizeList=new Map,r.commitAction=function(){var e=p()(l.a.mark(function e(t,n,a){var i,o,s,c;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r.oriTemplateType=t.templateType,t.templateType=r.templateType,k.a.unselectAllItems(),!r.redoPages){e.next=11;break}return r.setSizeOption(),t.pages=r.redoPages,a.canvasAreaVC.updateZoomFitAfterRender(),a.canvasAreaVC.updatePagingManager(),e.next=10,a.renderAll(t,n);case 10:return e.abrupt("return");case 11:return r.rollbackSizeOption=R.a.instance.option.pageSize,r.setSizeOption(),i=new y.a(t.pages[0].sheetSize.width,t.pages[0].sheetSize.height),o=r.sheetSize.width/r.sheetSize.height==i.width/i.height,s=!0,r.rollbackPages=[],r.rollbackBgSizeList.clear(),t.pages.forEach(function(e,n){s=s&&0===e.items.length,e.guidelineManager&&(e.guidelineFactoryInfos=e.guidelineManager.getGuidelineFactoryInfos()),r.rollbackPages.push(e);var a=e.clone();a.changeSheetSize(r.sheetSize),t.replacePage(a,n)}),c=new U.a(i,!0,n.renderPageIdx,v.a.FIT),(o||s)&&(c.selectedType=v.a.FIT),U.b.setAlignConfig(c),e.next=24,U.b.alignItems(!0,!0);case 24:if(o||r.calledByItemFitMode||!t.hasItems()||U.b.openPopup(r.sheetSize,i),r.templateType)try{b.a.applyPresetToMeta(t),U.b.updateOriginalPagesGuideLineInfo()}catch(e){console.error("guide line preset error.",e)}case 26:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}(),r.rollbackAction=function(e,t,n){e.templateType=r.oriTemplateType,r.setSizeOption(r.rollbackSizeOption),r.redoPages=e.pages,e.pages=r.rollbackPages,k.a.unselectAllItems(),n.canvasAreaVC.updatePagingManager(),n.canvasAreaVC.updateZoomFitAfterRender(),n.renderAll(e,t)},r.recycle=function(){r.rollbackPages=null,r.redoPages=null},r.pageSize=e,r.templateType=n,r.calledByItemFitMode=a,r.sheetSize=e.getPixelLimitMax(A.a.getMaxSheetSize(P.a.getUserSetting().devMode)),r.renderAuto=!1,r}return c()(t,e),g()(t,[{key:"setSizeOption",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pageSize;R.a.instance.setDesignSize(e)}}]),t}(x.b)},300:function(e,t,n){"use strict";n.d(t,"d",function(){return G}),n.d(t,"e",function(){return V}),n.d(t,"a",function(){return F}),n.d(t,"g",function(){return z}),n.d(t,"b",function(){return H}),n.d(t,"h",function(){return K}),n.d(t,"i",function(){return W}),n.d(t,"f",function(){return q}),n.d(t,"c",function(){return Y});var a=n(2),i=n.n(a),r=n(4),o=n.n(r),s=n(0),c=n.n(s),u=n(1),l=n.n(u),h=n(6),p=n.n(h),d=n(3),m=n.n(d),f=n(7),g=n.n(f),v=n(255),y=n(236),E=n(228),I=n(231),T=n(239),k=n(286),w=n(303),C=n(230),S=n(319),A=n(166),b=n(266),L=n(341),P=n(280),x=n(224),_=n(226),R=n(225),N=n(467),M=n(295),D=n(227),O=n(237),U=n(37),B=function(e){function t(e,n,a){var r;return c()(this,t),(r=p()(this,m()(t).call(this))).doSaveQueue=!0,r.actionType=x.a.DELETE_ITEM,r.isActionGroupEquals=function(e){return!1},r.concat=function(e){return!1},r.changeDesign=function(){return!0},r.rollbackAction=function(){var e=o()(i.a.mark(function e(t,n,a){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.imageframeItem.changePhoto(r.oldPhotoKey,r.oldOrgType,!1,!1,r.oldRatioId);case 2:R.a.instance.dispatch(new b.c(r.imageframeItem)),r.imageframeItem.innerPhotoItem.setLTRBCoordinate(r.backupRect),r.imageframeItem.innerPhotoItem.itemPosition=r.backupImgRect.clone(),r.imageframeItem.setStatus(E.g.CHANGE),a.renderLayerThumb([r.imageframeItem]),a.renderCanvas(t,n);case 8:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}(),r.recycle=function(){r.imageframeItem=null},r.imageframeItem=e,r.photoKey=n,r.resourceType=a,r.oldPhotoKey=e.innerPhotoItem.props.getPhotoKey(),r.oldRatioId=e.innerPhotoItem.skinRatioId,r.backupRect=e.innerPhotoItem.getLTRBCoordinate(),r.backupImgRect=e.innerPhotoItem.itemPosition,r}return g()(t,e),l()(t,[{key:"resourceTypeToOriginType",value:function(e){switch(e){case C.a.PHOTO:return I.b.Photo;case C.a.PIXABAY:return I.b.Pixabay;case C.a.IMAGE:case C.a.BITMAP:return I.b.Sticker;default:return null}}}]),t}(x.b),G=function(e){function t(){var e,n;c()(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=p()(this,(e=m()(t)).call.apply(e,[this].concat(r)))).commitAction=function(){var e=o()(i.a.mark(function e(t,a,r){var o,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.oldOrgType=n.imageframeItem.innerPhotoItem.orgType,n.resourceType!==C.a.PHOTO){e.next=18;break}if(!A.b.hasData(n.photoKey)){e.next=5;break}e.next=16;break;case 5:if(!D.a.getUserSetting().devMode){e.next=11;break}return e.next=8,v.b.fetchKeyList([n.photoKey],"original");case 8:o=P.a.getOriginalPhotoUrl(n.photoKey),e.next=14;break;case 11:return e.next=13,v.b.fetchKeyList([n.photoKey],"forEditing");case 13:o=P.a.getForEditingPhotoUrl(n.photoKey);case 14:return e.next=16,A.b.setUrlImage(n.photoKey,o);case 16:e.next=27;break;case 18:if(n.resourceType!==C.a.BITMAP&&n.resourceType!==C.a.IMAGE){e.next=27;break}if(!A.b.hasData(n.photoKey)){e.next=22;break}e.next=27;break;case 22:return e.next=24,S.a.from(t.getRepositoryType(),!0).getStickerData(n.photoKey);case 24:return s=e.sent.thumb800url,e.next=27,A.b.setUrlImage(n.photoKey,s);case 27:return e.next=29,n.imageframeItem.changePhoto(n.photoKey,n.resourceTypeToOriginType(n.resourceType),!1,!1,n.oldRatioId);case 29:R.a.instance.dispatch(new b.c(n.imageframeItem)),n.imageframeItem.setStatus(E.g.CHANGE),r.renderLayerThumb([n.imageframeItem]),r.renderCanvas(t,a);case 33:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}(),n}return g()(t,e),t}(B),V=function(e){function t(){var e,n;c()(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=p()(this,(e=m()(t)).call.apply(e,[this].concat(r)))).commitAction=function(){var e=o()(i.a.mark(function e(t,a,r){var o,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.oldOrgType=n.imageframeItem.innerPhotoItem.orgType,o=L.a.getFileIDWithKey(n.photoKey),e.next=4,w.d.requestToDownloadPixabayImage(o);case 4:if(s=w.b.get(o),A.b.hasData(n.photoKey)){e.next=8;break}return e.next=8,A.b.setUrlImage(n.photoKey,s.webformatURL);case 8:return e.next=10,n.imageframeItem.changePhoto(n.photoKey,I.b.Pixabay,!1,!1,n.oldRatioId);case 10:R.a.instance.dispatch(new b.c(n.imageframeItem)),n.imageframeItem.setStatus(E.g.CHANGE),r.renderLayerThumb([n.imageframeItem]),r.renderCanvas(t,a);case 14:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}(),n}return g()(t,e),t}(B),F=function(e){function t(e){var n;return c()(this,t),(n=p()(this,m()(t).call(this))).doSaveQueue=!0,n.actionType=x.a.DELETE_ITEM,n.isActionGroupEquals=function(e){return!1},n.concat=function(e){return!1},n.changeDesign=function(){return!0},n.commitAction=function(){var e=o()(i.a.mark(function e(t,a,r){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.backupImgRect=n.imageframeItem.innerPhotoItem.itemPosition.clone(),n.oldPhotoKey=n.imageframeItem.innerPhotoItem.props.getPhotoKey(),n.oldRatioId=n.imageframeItem.innerPhotoItem.skinRatioId,n.oldProps=n.imageframeItem.innerPhotoItem.props.clone(),n.oldOrgType=n.imageframeItem.innerPhotoItem.orgType,e.next=7,n.imageframeItem.changePhoto(n.imageframeItem.DROP_IMAGE_KEY,I.b.Photo,!1,!1,n.oldRatioId);case 7:R.a.instance.dispatch(new b.c(n.imageframeItem)),n.imageframeItem.setStatus(E.g.CHANGE),r.renderCanvas(t,a,[n.imageframeItem]),r.renderLayerThumb([n.imageframeItem]);case 11:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}(),n.rollbackAction=function(){var e=o()(i.a.mark(function e(t,a,r){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.imageframeItem.changePhoto(n.oldPhotoKey,n.oldOrgType,!1,!1,n.oldRatioId);case 2:R.a.instance.dispatch(new b.c(n.imageframeItem)),n.imageframeItem.innerPhotoItem.setProps(n.oldProps.clone()),n.imageframeItem.innerPhotoItem.itemPosition=n.backupImgRect,n.imageframeItem.setStatus(E.g.CHANGE),r.renderLayerThumb([n.imageframeItem]),r.renderCanvas(t,a,[n.imageframeItem]);case 8:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}(),n.recycle=function(){n.imageframeItem=null},n.imageframeItem=e,n}return g()(t,e),t}(x.b),z=function(e){function t(e){var n;return c()(this,t),(n=p()(this,m()(t).call(this))).doSaveQueue=!0,n.actionType=x.a.DELETE_ITEM,n.isActionGroupEquals=function(e){return!1},n.concat=function(e){return!1},n.changeDesign=function(){return!0},n.commitAction=function(){var e=o()(i.a.mark(function e(t,a,r){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.backupImgRect=n.imageframeItem.innerPhotoItem.itemPosition.clone(),n.oldPhotoKey=n.imageframeItem.innerPhotoItem.props.getPhotoKey(),n.oldRatioId=n.imageframeItem.innerPhotoItem.skinRatioId,n.oldProps=n.imageframeItem.innerPhotoItem.props.clone(),n.oldFlipHor=n.imageframeItem.originPhotoFlipHor,n.oldFlipVer=n.imageframeItem.originPhotoFlipVer,e.next=8,n.imageframeItem.changePhoto(n.oldPhotoKey,n.imageframeItem.innerPhotoItem.orgType,!1,!1,n.oldRatioId);case 8:R.a.instance.dispatch(new b.c(n.imageframeItem)),n.imageframeItem.setStatus(E.g.CHANGE),r.renderLayerThumb([n.imageframeItem]),r.renderCanvas(t,a,[n.imageframeItem]);case 12:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}(),n.rollbackAction=function(){var e=o()(i.a.mark(function e(t,a,r){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.imageframeItem.changePhoto(n.oldPhotoKey,n.imageframeItem.innerPhotoItem.orgType,n.oldFlipHor,n.oldFlipVer,n.oldRatioId);case 2:R.a.instance.dispatch(new b.c(n.imageframeItem)),n.imageframeItem.innerPhotoItem.setProps(n.oldProps.clone()),n.imageframeItem.innerPhotoItem.itemPosition=n.backupImgRect,n.imageframeItem.setStatus(E.g.CHANGE),r.renderLayerThumb([n.imageframeItem]),r.renderCanvas(t,a,[n.imageframeItem]);case 8:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}(),n.recycle=function(){n.imageframeItem=null},n.imageframeItem=e,n}return g()(t,e),t}(x.b),H=function(e){function t(e){var n;return c()(this,t),(n=p()(this,m()(t).call(this))).doSaveQueue=!0,n.actionType=x.a.DELETE_ITEM,n.isActionGroupEquals=function(e){return!1},n.concat=function(e){return!1},n.changeDesign=function(){return!0},n.commitAction=function(){var e=o()(i.a.mark(function e(t,a,r){var o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.backupPage?n.backupPage:n.backupPage=k.a.getItemIncludedPage(t.pages,n.imageframeItem)){e.next=3;break}return e.abrupt("return");case 3:return o.addItem(n.newPhotoItem),n.oldOrgType=n.imageframeItem.innerPhotoItem.orgType,n.oldCanInsertPhotoItemProp=n.imageframeItem.props.canInsertPhotoItem,e.next=8,n.imageframeItem.clearInnerPhotoItem();case 8:R.a.instance.dispatch(new b.c(n.imageframeItem)),n.imageframeItem.setStatus(E.g.CHANGE),y.a.selectItem(n.newPhotoItem),r.renderCanvas(t,a),r.renderHandler(t,a),r.renderLayerThumb([n.imageframeItem]);case 14:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}(),n.rollbackAction=function(){var e=o()(i.a.mark(function e(t,a,r){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.backupPage.removeItem(n.newPhotoItem),e.next=3,n.imageframeItem.changePhoto(n.newPhotoItem.props.getPhotoKey(),n.oldOrgType,n.newPhotoItem.props.isFlipH(),n.newPhotoItem.props.isFlipV(),n.newPhotoItem.skinRatioId);case 3:n.imageframeItem.props.canInsertPhotoItem=n.oldCanInsertPhotoItemProp,R.a.instance.dispatch(new b.c(n.imageframeItem)),n.imageframeItem.innerPhotoItem.setProps(n.newPhotoItem.props.clone()),n.imageframeItem.innerPhotoItem.setLTRBCoordinate(n.backupRect),n.imageframeItem.innerPhotoItem.itemPosition=n.backupImgRect.clone(),n.imageframeItem.setStatus(E.g.CHANGE),y.a.selectItem(n.imageframeItem),r.renderCanvas(t,a),r.renderHandler(t,a),r.renderLayerThumb([n.imageframeItem]);case 13:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}(),n.recycle=function(){n.imageframeItem=null,n.newPhotoItem=null,n.backupImgRect=null,n.backupRect=null},n.imageframeItem=e,n.newPhotoItem=n.imageframeItem.innerPhotoItem.clone(),n.newPhotoItem.belongsTo=I.c.INDEPENDENT,n.newPhotoItem.photoCrop.isCropped=!1,n.backupRect=n.newPhotoItem.getLTRBCoordinate(),n.backupImgRect=n.newPhotoItem.itemPosition.clone(),n.newPhotoItem.setLTRBCoordinate(n.backupImgRect),n.newPhotoItem.itemPosition=n.backupImgRect.clone(),n}return g()(t,e),t}(x.b),K=function(e){function t(e){var n;return c()(this,t),(n=p()(this,m()(t).call(this))).doSaveQueue=!1,n.actionType=x.a.CROP_PHOTO,n.isActionGroupEquals=function(e){return!1},n.concat=function(e){return!1},n.changeDesign=function(){return!0},n.commitAction=function(){var e=o()(i.a.mark(function e(t,a,r){var o,s,c,u;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.imageframeItem.isDefaultImage()){e.next=2;break}return e.abrupt("return");case 2:return(o=n.imageframeItem.innerPhotoItem).photoCrop.isCropped=!0,s=a.pageController.getItemRenderer(o),e.next=7,s.renderAutoAsync(a.pageEditScale);case 7:c=k.a.getItemIncludedPage(t.pages,n.imageframeItem),a.pageController.getItemRenderer(n.imageframeItem).tempChangeImageDom(""),u=N.a.getImageframeCropParam(a,c),R.a.instance.dispatch(new M.b(o,u)),r.renderCanvas(t,a),r.renderHandler(t,a),n.imageframeItem=null;case 15:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}(),n.rollbackAction=function(){var e=o()(i.a.mark(function e(t,n,a){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}(),n.recycle=function(){},n.imageframeItem=e,n}return g()(t,e),t}(x.b),W=function(e){function t(){var e;return c()(this,t),(e=p()(this,m()(t).call(this))).doSaveQueue=!1,e.isPossibleInCropMode=!0,e.actionType=x.a.CROP_PHOTO_APPLY,e.isActionGroupEquals=function(e){return!1},e.concat=function(e){return!1},e.changeDesign=function(){return!0},e.commitAction=function(){var t=o()(i.a.mark(function t(n,a,r){var o,s,c,u,l,h,p,d;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:R.a.instance.dispatch(new M.c(e.photoItem)),r.renderHandler(n,a),s=n.pages[a.renderPageIdx],c=!0,u=!1,l=void 0,t.prev=6,h=s.getAllSingleItems()[Symbol.iterator]();case 8:if(c=(p=h.next()).done){t.next=16;break}if(d=p.value,!e.isValieFrame(d)){t.next=13;break}return o=d,t.abrupt("break",16);case 13:c=!0,t.next=8;break;case 16:t.next=22;break;case 18:t.prev=18,t.t0=t.catch(6),u=!0,l=t.t0;case 22:t.prev=22,t.prev=23,c||null==h.return||h.return();case 25:if(t.prev=25,!u){t.next=28;break}throw l;case 28:return t.finish(25);case 29:return t.finish(22);case 30:y.a.selectItem(o),o.setStatus(E.g.CHANGE),r.renderCanvas(n,a,[o]),r.renderHandler(n,a),r.renderLayerThumb([o]),e.photoItem=null;case 36:case"end":return t.stop()}},t,null,[[6,18,22,30],[23,,25,29]])}));return function(e,n,a){return t.apply(this,arguments)}}(),e.rollbackAction=function(){var e=o()(i.a.mark(function e(t,n,a){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}(),e.recycle=function(){},e.photoItem=_.a.instance.activeItems[0],e}return g()(t,e),l()(t,[{key:"isValieFrame",value:function(e){return e instanceof T.b&&e.innerPhotoItem.tbpeId===this.photoItem.tbpeId}}]),t}(x.b),q=function(e){function t(e){var n;return c()(this,t),(n=p()(this,m()(t).call(this))).actionType=x.a.SVG_DATA_UPDATE,n.doSaveQueue=!1,n.changeDesign=function(){return!0},n.commitAction=function(){var e=o()(i.a.mark(function e(t){var a,r,o,s,c,u,l,h,p,d,m,f,g,v,y,E,I;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=!0,r=!1,o=void 0,e.prev=3,s=t.pages[Symbol.iterator]();case 5:if(a=(c=s.next()).done){e.next=48;break}u=c.value,l=u.getAllSingleItems(),h=!0,p=!1,d=void 0,e.prev=11,m=l[Symbol.iterator]();case 13:if(h=(f=m.next()).done){e.next=31;break}if(!((g=f.value)instanceof T.b&&g.data.key===n.svgData.key)){e.next=28;break}return v=g.svgScale,y=new T.b(g.tbpeId,n.svgData,new O.a(g.props.getLeft(),g.props.getTop(),n.svgData.width*v,n.svgData.height*v),g.props.getRotate(),g.props.isFlipH(),g.props.isFlipV()),E=l.indexOf(g),I=g.innerPhotoItem,y.initFramePosition(),e.next=23,y.changePhoto(I.props.getPhotoKey(),I.orgType,g.originPhotoFlipHor,g.originPhotoFlipVer,I.skinRatioId);case 23:return R.a.instance.dispatch(new b.c(g)),e.next=26,y.initPhoto();case 26:u.removeItem(g),u.addItem(y,E);case 28:h=!0,e.next=13;break;case 31:e.next=37;break;case 33:e.prev=33,e.t0=e.catch(11),p=!0,d=e.t0;case 37:e.prev=37,e.prev=38,h||null==m.return||m.return();case 40:if(e.prev=40,!p){e.next=43;break}throw d;case 43:return e.finish(40);case 44:return e.finish(37);case 45:a=!0,e.next=5;break;case 48:e.next=54;break;case 50:e.prev=50,e.t1=e.catch(3),r=!0,o=e.t1;case 54:e.prev=54,e.prev=55,a||null==s.return||s.return();case 57:if(e.prev=57,!r){e.next=60;break}throw o;case 60:return e.finish(57);case 61:return e.finish(54);case 62:case"end":return e.stop()}},e,null,[[3,50,54,62],[11,33,37,45],[38,,40,44],[55,,57,61]])}));return function(t){return e.apply(this,arguments)}}(),n.rollbackAction=function(){},n.recycle=function(){},n.svgData=e,n}return g()(t,e),t}(x.b),Y=function(e){function t(){var e,n;c()(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=p()(this,(e=m()(t)).call.apply(e,[this].concat(i)))).actionType=x.a.LOCK_PHOTO,n.doSaveQueue=!0,n.changeDesign=function(){return!0},n.renderAuto=!1,n.commitAction=function(e,t,n){if(!(U.a.isEmpty(t.activeItems)||t.activeItems.length>1)){var a=t.activeItems[0];a instanceof T.b&&(a.props.canInsertPhotoItem=!a.props.canInsertPhotoItem,n.renderItemTools(e,t,void 0,!0))}},n.rollbackAction=function(){},n.recycle=function(){},n}return g()(t,e),t}(x.b)},310:function(e,t,n){"use strict";n.d(t,"b",function(){return E}),n.d(t,"a",function(){return I});var a=n(0),i=n.n(a),r=n(1),o=n.n(r),s=n(6),c=n.n(s),u=n(3),l=n.n(u),h=n(9),p=n.n(h),d=n(7),m=n.n(d),f=n(8),g=n(46),v=n(31),y=n(37),E=function(e){function t(e,n){var a,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f.a.RADIO_TOOL;return i()(this,t),(a=c()(this,l()(t).call(this,!0))).disabled=!1,a.changeAction=e,a.radioItems=n,a.className=r,a}return m()(t,e),o()(t,[{key:"onCreateView",value:function(){var e=this;p()(l()(t.prototype),"onCreateView",this).call(this),this.container.classList.add(this.className),$(this.container).off("click").on("click","button",function(t){var n=t.currentTarget.getAttribute("data-value");e.disabled||e.selectedValue&&e.selectedValue===n||e.select(n)}),y.a.isEmpty(this.radioItems)||this.radioItems.forEach(function(t){return e.addBtn(t)})}},{key:"addBtn",value:function(e){var n=t.renderBtn(e);return e.selected&&(this.clearSelect(),this.selectedValue=e.id,n.classList.add(f.a.ACTIVE)),this.container.appendChild(n),this}},{key:"updateUI",value:function(e){this.container.innerHTML="";var t=!0,n=!1,a=void 0;try{for(var i,r=e[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var o=i.value;this.addBtn(o)}}catch(e){n=!0,a=e}finally{try{t||null==r.return||r.return()}finally{if(n)throw a}}}},{key:"setValue",value:function(e){this.radioItems.forEach(function(t){t.selected=e===t.id}),this.updateUI(this.radioItems)}},{key:"clearSelect",value:function(){this.selectedValue="",$(this.container).children("button").removeClass(f.a.ACTIVE)}},{key:"getValue",value:function(){return this.selectedValue}},{key:"select",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.getButtonElement(e);n&&(this.clearSelect(),n.classList.add(f.a.ACTIVE),this.selectedValue=e,t&&this.changeAction(this.selectedValue))}},{key:"getButtonElement",value:function(e){return $(this.container).find('button[data-value="'.concat(e,'"]'))[0]}},{key:"getSelectedButtonElement",value:function(){return this.getButtonElement(this.selectedValue)}},{key:"setDisable",value:function(){this.container.classList.add(f.a.DISABLE),this.disabled=!0}},{key:"hideButton",value:function(e){var t=$(this.container).find('button[data-value="'.concat(e,'"]'));0!==t.length&&t.hide()}},{key:"showButton",value:function(e){var t=$(this.container).find('button[data-value="'.concat(e,'"]'));0!==t.length&&t.show()}},{key:"setGtmData",value:function(e){for(var t=0,n=this.container.childElementCount;t<n;t++)g.a.setGTMValue(this.container.children.item(t),e)}}],[{key:"renderBtn",value:function(e){var t=document.createElement("button");return t.type="button",e.labelElement?t.appendChild(e.labelElement):t.innerText=e.label,t.setAttribute("data-value",e.id),t}}]),t}(v.a),I=function e(t,n,a,r){i()(this,e),this.label=t,this.id=n,this.selected=a,this.labelElement=r}},313:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return b});var a,i,r=n(6),o=n.n(r),s=n(3),c=n.n(s),u=n(7),l=n.n(u),h=n(62),p=n.n(h),d=n(2),m=n.n(d),f=n(4),g=n.n(f),v=n(0),y=n.n(v),E=n(1),I=n.n(E),T=n(434),k=n(19),w=n(44),C=n(32),S=n(20),A=n(227);!function(e){e[e.IMAGE=3011]="IMAGE",e[e.ILLUST=3012]="ILLUST",e[e.ICON=3013]="ICON",e[e.FIGURE=3014]="FIGURE",e[e.BACKGROUND=14820]="BACKGROUND",e[e.ETC=3015]="ETC"}(a||(a={})),function(e){e[e.SIZE_43=43]="SIZE_43",e[e.SIZE_50=50]="SIZE_50",e[e.SIZE_60=60]="SIZE_60",e[e.SIZE_90=90]="SIZE_90",e[e.SIZE_100=100]="SIZE_100",e[e.SIZE_150=150]="SIZE_150",e[e.SIZE_196=196]="SIZE_196",e[e.SIZE_200=200]="SIZE_200",e[e.SIZE_400=400]="SIZE_400"}(i||(i={}));var b=function(){function e(){y()(this,e)}var t,n,r;return I()(e,null,[{key:"getThumbnail",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.SIZE_400;return k.b.getImageServerURL("/web1/__TBPE.STIKERS".concat("/",e.substring(0,4),"/").concat(e,"/thumb").concat(t,".png"))}},{key:"getList",value:function(e){var t=this,n=[];return e&&0!==e.length?(e.forEach(function(e){n.push({id:e,thumbImgUrl:t.getThumbnail(e)})}),n):n}},{key:"selectOne",value:(r=g()(m.a.mark(function e(t){var n,a,i,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.cache.has(t)){e.next=2;break}return e.abrupt("return",this.cache.get(t));case 2:return n="/servlet/api/miridih/sticker?id=${id}".replace("${id}",encodeURIComponent(t)),a=k.a.getURL(n),k.c.isInit()&&(a=k.c.getURL("")+"/res?url="+encodeURIComponent(a)),e.next=7,w.a.get(L,a);case 7:return i=e.sent,null!=(r=i.stickerInfo)&&this.cache.set(t,r),e.abrupt("return",r);case 11:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"insert",value:(n=g()(m.a.mark(function e(t){var n,i,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(A.a.getUserSetting().adminMode){e.next=2;break}return e.abrupt("return");case 2:return n={fileKey:t.fileKey,stickerId:t.stickerId,stickerName:t.stickerName,fileName:t.fileName,designerId:t.designerId,licenseCode:t.license.code,deployType:T.a.getBit.apply(T.a,p()(t.deployTypeList)),categoryId:a.ETC,active:t.stickerStatus},"/sticker/upload",e.next=6,S.b.post("/sticker/upload",{data:n});case 6:if(i=e.sent,200===(r=JSON.parse(i.data)).result_code){e.next=10;break}throw Error(r.msg);case 10:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})},{key:"update",value:(t=g()(m.a.mark(function e(t){var n,a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(A.a.getUserSetting().adminMode){e.next=2;break}return e.abrupt("return");case 2:return n={id:t.stickerId,name:t.stickerName,deployType:String(T.a.getBit.apply(T.a,p()(t.deployTypeList))),active:t.stickerStatus,licenseCode:String(t.license.code),designerId:t.designerId,keywordList:t.keywordList?t.keywordList.join(","):"",categoryList:t.categoryList?t.categoryList.join(","):""},a=JSON.stringify(n),e.next=6,S.b.put("/sticker",{data:a,contentType:"application/json"});case 6:if("403"!==e.sent.resultCode){e.next=9;break}throw Error();case 9:this.cache.delete(t.stickerId);case 10:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})}]),e}();b.cache=new Map;var L=function(e){function t(){return y()(this,t),o()(this,c()(t).apply(this,arguments))}return l()(t,e),I()(t,[{key:"getErrorMsg",value:function(){return""}},{key:"setData",value:function(e){this._stickerInfo=e.data}},{key:"stickerInfo",get:function(){return this._stickerInfo}}]),t}(C.b)},314:function(e,t,n){"use strict";n.d(t,"f",function(){return _}),n.d(t,"d",function(){return R}),n.d(t,"i",function(){return N}),n.d(t,"g",function(){return M}),n.d(t,"e",function(){return D}),n.d(t,"h",function(){return O}),n.d(t,"c",function(){return U}),n.d(t,"b",function(){return B}),n.d(t,"a",function(){return G});var a=n(2),i=n.n(a),r=n(4),o=n.n(r),s=n(0),c=n.n(s),u=n(1),l=n.n(u),h=n(6),p=n.n(h),d=n(3),m=n.n(d),f=n(7),g=n.n(f),v=n(224),y=n(226),E=n(268),I=n(260),T=n(301),k=n(353),w=n(320),C=n(236),S=n(239),A=n(335),b=n(241),L=n(296),P=n(11),x=n(237),_=function(e){function t(e,n,a,i){var r,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return c()(this,t),(r=p()(this,m()(t).call(this,e,a,i,o,L.b.NO_RENDER_LAYER))).svg=n,r.actionType=v.a.ADD_SVG,r}var n,a;return g()(t,e),l()(t,[{key:"getImageSize",value:(a=o()(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{imgWidth:this.svg.width,imgHeight:this.svg.height});case 1:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"createNewItem",value:(n=o()(i.a.mark(function e(t,n){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new T.a(t,this.svg,n.toRect()));case 1:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})}]),t}(I.j),R=function(e){function t(e,n,a,i){var r,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return c()(this,t),(r=p()(this,m()(t).call(this,e,a,i,o))).svg=n,r.actionType=v.a.ADD_SVG,r}var n,a;return g()(t,e),l()(t,[{key:"getImageSize",value:(a=o()(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{imgWidth:this.svg.width,imgHeight:this.svg.height});case 1:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"createNewItem",value:(n=o()(i.a.mark(function e(t,n){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new k.a(t,this.svg,n.toRect()));case 1:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})}]),t}(I.j),N=function(e){function t(e,n,a,i){var r,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return c()(this,t),(r=p()(this,m()(t).call(this,e,a,i,o))).svg=n,r.actionType=v.a.ADD_SVG,r}var n,a;return g()(t,e),l()(t,[{key:"getImageSize",value:(a=o()(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{imgWidth:this.svg.width,imgHeight:this.svg.height});case 1:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"createNewItem",value:(n=o()(i.a.mark(function e(t,n){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new A.a(t,this.svg,n.toRect()));case 1:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})}]),t}(I.j),M=function(e){function t(e,n,a,i){var r,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return c()(this,t),(r=p()(this,m()(t).call(this,e,a,i,o,L.b.NO_RENDER_LAYER))).svg=n,r.actionType=v.a.ADD_SVG,r}var n,a;return g()(t,e),l()(t,[{key:"getImageSize",value:(a=o()(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{imgWidth:this.svg.width,imgHeight:this.svg.height});case 1:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"createNewItem",value:(n=o()(i.a.mark(function e(t,n){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=new S.b(t,this.svg,n.toRect()),e.next=3,a.initFramePosition();case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})}]),t}(I.j),D=function(e){function t(e,n,a){var i;return c()(this,t),(i=p()(this,m()(t).call(this))).actionType=v.a.SVG_LAYER_COLOR_LINK,i.timeout=3e3,i.changeDesign=function(){return!0},i.renderAuto=!1,i.commitAction=function(e,t,n){i.doSaveQueue&&(i.props.setCurrentOriginColor(i.originColor),i.props.setColor(i.newColor),i.item.svgElements.changeColor(i.originColor,i.newColor),n.renderCanvas(e,t,[i.item]),n.renderItemTools(e,t,!1,!0))},i.rollbackAction=function(e,t,n){i.props.setCurrentOriginColor(i.originColor),i.props.setColor(i.oldColor),i.item.svgElements.changeColor(i.originColor,i.oldColor),n.renderCanvas(e,t,[i.item]),n.renderItemTools(e,t,!1,!0)},i.isActionGroupEquals=function(e){return e&&e.actionType===i.actionType&&e instanceof t&&i.item.tbpeId===e.item.tbpeId&&e.commitTime-i.commitTime<=i.timeout},i.recycle=function(){i.item=null,i.newColor=null,i.oldColor=null},i.originColor=e,i.newColor=n,i.item=a,a&&a.props.getColorMap().has(e.toLowerCase())?(i.props=a.props,i.props.setCurrentOriginColor(i.originColor),i.oldColor=i.props.getColor()):i.doSaveQueue=!1,i.commitTime=(new Date).getTime(),i}return g()(t,e),t}(v.b),O=(v.b,function(e){function t(e,n){var a;return c()(this,t),(a=p()(this,m()(t).call(this))).actionType=v.a.SVG_PATTERN_SIZE,a.changeDesign=function(){return!0},a.renderAuto=!1,a.isSameAction=!1,a.mouseActionMode=b.a.MODE_NONE,a.oldPatternRatio=0,a.commitAction=function(e,t,n){a.item&&(a.item.initScaleAndLayers(),a.oldPatternRatio=a.item.props.patternCountRatio,a.item.updatePatternByRatio(a.patternCountRatio),n.renderCanvas(e,t,[a.item]))},a.rollbackAction=function(e,t,n){a.item.initScaleAndLayers(),a.item.updatePatternByRatio(a.oldPatternRatio),n.renderCanvas(e,t,[a.item])},a.recycle=function(){a.item=null},a.isActionGroupEquals=function(e){return!!(e&&e.actionType===a.actionType&&e instanceof t)&&(y.a.instance.mouseAction.mode!==b.a.MODE_NONE&&(a.isSameAction=e.mouseActionMode===b.a.MODE_MOVE_CHANGE_VALUE),a.isSameAction)},a.item=e,a.patternCountRatio=n,a.mouseActionMode=y.a.instance.mouseAction.mode,a}return g()(t,e),t}(v.b)),U=function(e){function t(e,n){var a;return c()(this,t),(a=p()(this,m()(t).call(this))).actionType=v.a.SVG_PATTERN_SIZE,a.doSaveQueue=!1,a.renderAuto=!1,a.changeDesign=function(){return!0},a.commitAction=function(){var e=o()(i.a.mark(function e(t,n,r){var o,s,c,u,l,h,p,d,m;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=a.svgGraphicData,s=a.item.getLTRBCoordinate(),c=s.getWidth(),u=s.getHeight(),l=c/a.item.svgData.width,h=u/a.item.svgData.height,p=Math.min(l,h),P.b.isEmpty(o.name)&&(o.name=w.a.getPureFileName(a.item.svgData.name)),d=new T.a("".concat((new Date).getTime(),"-").concat(P.b.random()),o,new x.a(s.left,s.top,a.item.svgData.width*p,a.item.svgData.height*p),a.item.props.getRotate()),C.a.selectItem(d),r.renderItemTools(t,n),!((m=t.pages[n.renderPageIdx]).items.indexOf(a.item)>-1)){e.next=19;break}return m.addItem(d),m.removeItem(a.item),a.item=null,e.next=18,r.canvasAreaVC.renderAuto(t,n);case 18:r.renderHandler(t,n);case 19:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}(),a.rollbackAction=function(){},a.recycle=function(){},a.item=e,a.svgGraphicData=n,a}return g()(t,e),t}(v.b),B=function(e){function t(e,n){var a;return c()(this,t),(a=p()(this,m()(t).call(this))).actionType=v.a.SVG_PATTERN_SIZE,a.doSaveQueue=!1,a.renderAuto=!1,a.changeDesign=function(){return!1},a.commitAction=function(){var e=o()(i.a.mark(function e(t,n,r){var o,s,c,u,l,h,p,d,m;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=a.imageframeData,s=a.item.getLTRBCoordinate(),c=s.getWidth(),u=s.getHeight(),l=c/a.item.svgData.width,h=u/a.item.svgData.height,p=Math.min(l,h),P.b.isEmpty(o.name)&&(o.name=w.a.getPureFileName(a.item.svgData.name)),d=new S.b("".concat((new Date).getTime(),"-").concat(P.b.random()),o,new x.a(s.left,s.top,a.item.svgData.width*p,a.item.svgData.height*p),a.item.props.getRotate()),C.a.selectItem(d),r.renderItemTools(t,n),!((m=t.pages[n.renderPageIdx]).items.indexOf(a.item)>-1)){e.next=20;break}return d.initFramePosition(),m.addItem(d),m.removeItem(a.item),a.item=null,e.next=19,r.canvasAreaVC.renderAuto(t,n);case 19:r.renderHandler(t,n);case 20:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}(),a.rollbackAction=function(){},a.recycle=function(){},a.item=e,a.imageframeData=n,a}return g()(t,e),t}(v.b),G=function(e){function t(e){var n;return c()(this,t),(n=p()(this,m()(t).call(this))).actionType=v.a.SVG_DATA_UPDATE,n.doSaveQueue=!1,n.changeDesign=function(){return!0},n.commitAction=function(e){var t=!0,a=!1,i=void 0;try{for(var r,o=e.pages[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var s=r.value,c=s.getAllSingleItems(),u=!0,l=!1,h=void 0;try{for(var p,d=c[Symbol.iterator]();!(u=(p=d.next()).done);u=!0){var m=p.value;if(m instanceof E.a&&m.data.key===n.svgData.key){var f=m.svgScale,g=new T.a(m.tbpeId,n.svgData,new x.a(m.props.getLeft(),m.props.getTop(),n.svgData.width*f,n.svgData.height*f),m.props.getRotate(),m.props.isFlipH(),m.props.isFlipV()),v=c.indexOf(m);s.removeItem(m),s.addItem(g,v)}}}catch(e){l=!0,h=e}finally{try{u||null==d.return||d.return()}finally{if(l)throw h}}}}catch(e){a=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(a)throw i}}},n.rollbackAction=function(){},n.recycle=function(){},n.svgData=e,n}return g()(t,e),t}(v.b)},315:function(e,t,n){"use strict";n.d(t,"a",function(){return v});var a=n(0),i=n.n(a),r=n(1),o=n.n(r),s=n(6),c=n.n(s),u=n(3),l=n.n(u),h=n(7),p=n.n(h),d=n(10),m=n(8),f=n(242),g=n(11),v=function(e){function t(e,n,a){var r;return i()(this,t),(r=c()(this,l()(t).call(this,e))).title=e,r.showListener=n,r.applyListener=a,r}return p()(t,e),o()(t,[{key:"onCreateView",value:function(){}},{key:"getContainer",value:function(){var e=this;this.onCreateViewIfNotCreated(),this.container.className=this.getStyleClass(m.a.TOOLS_ACCORDION_ROW),this.container.classList.add("tools_effect_row"),this.btnShow=Object(d.setToolsIcon)(this.container,d.ToolsIcon.GREATER_THAN),this.showListener&&this.container.addEventListener("click",function(t){t.stopPropagation(),e.showListener()});var t="accordionVisible"+g.b.random(25),n=document.createElement("label");if(n.appendChild(document.createTextNode(this.title)),n.setAttribute("for",t),n.className=m.a.ACCORDION_TITLE,this.container.appendChild(n),this.applyListener){var a="labelUniqueActive"+g.b.random(27);this.accordionActiveCheckbox=document.createElement("input"),this.accordionActiveCheckbox.className=m.a.ACCORDION_ACTIVE,this.accordionActiveCheckbox.type="checkbox",this.accordionActiveCheckbox.id=a,this.container.appendChild(this.accordionActiveCheckbox);var i=document.createElement("label");i.id=t,i.setAttribute("for",a),i.addEventListener("click",function(t){t.stopPropagation(),t.preventDefault(),e.accordionActiveCheckbox.checked=!e.accordionActiveCheckbox.checked,e.applyListener(e.accordionActiveCheckbox.checked)}),this.boxOn=Object(d.setToolsIcon)(i,d.ToolsIcon.CHECK),this.container.appendChild(i)}else Object(d.setToolsIcon)(n,d.ToolsIcon.GREATER_THAN,!0);return this.container}},{key:"setVisible",value:function(e){this.container&&(e?this.container.classList.remove(m.a.HIDE):this.container.classList.add(m.a.HIDE))}},{key:"updateUI",value:function(e){this.container&&this.accordionActiveCheckbox&&(this.accordionActiveCheckbox.checked=e)}}]),t}(f.g)},318:function(e,t,n){"use strict";var a,i=n(340),r=n.n(i),o=n(2),s=n.n(o),c=n(4),u=n.n(c),l=n(0),h=n.n(l),p=n(1),d=n.n(p),m=n(400),f=n(330),g=n(435),v=n(6),y=n.n(v),E=n(3),I=n.n(E),T=n(7),k=n.n(T),w=n(309),C=n(86),S=n(230),A=n(244),b=n(313),L=n(259),P=n(19),x=n(44),_=n(20);(a||(a={})).create=function(e,t){switch(e){case S.a.MOCKUP:case S.a.GRID:case S.a.TEXT:case S.a.COMBINATION:case S.a.STYLE:return new D;case S.a.BITMAP:case S.a.IMAGE:case S.a.BACKGROUND_IMAGE:return new V;case S.a.TEMPLATE:return O.create(t);case S.a.GRAPHIC:case S.a.LINE:case S.a.FIGURE:case S.a.ILLUST:case S.a.BACKGROUND_PATTERN:return new F;case S.a.TEMPLATE_STYLE:return new G;case S.a.FRAME:return new z}return console.log("can not find my collection api client. resourceType : ".concat(e,", repositoryType : ").concat(t)),null};var R=function(){function e(t,n){h()(this,e),this.url=t,this.requestGet=n}var t;return d()(e,[{key:"request",value:(t=u()(s.a.mark(function e(t){var n,a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(this.url,"?").concat($.param(this.getParam(t),!0)),e.next=3,this.requestGet(n);case 3:return a=e.sent,e.next=6,this.getList(a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})}],[{key:"toNumberList",value:function(e){var t=[],n=!0,a=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){var s=r.value,c=Number(s);if(isNaN(c))throw new Error("key is NaN. - "+s);t.push(c)}}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return t}}]),e}(),N=function(e){function t(e){return h()(this,t),y()(this,I()(t).call(this,e,_.b.get))}return k()(t,e),t}(R),M=function(e){function t(e){return h()(this,t),y()(this,I()(t).call(this,e,x.a.getDefault))}return k()(t,e),t}(R),D=function(e){function t(){return h()(this,t),y()(this,I()(t).call(this,"/api/template/design"))}return k()(t,e),d()(t,[{key:"getParam",value:function(e){var t={statusList:[w.b.ACTIVE],paging:!1};return Object.assign(t,{idxList:R.toNumberList(e)}),t}},{key:"getList",value:function(e){return e.data.list}}]),t}(N),O=function(){function e(){h()(this,e)}return d()(e,null,[{key:"create",value:function(e){if(e===C.a.UNICORN)return new B;if(e===C.a.BIZHOWS)return new U;throw Error("잘못된 repository type : ".concat(e))}}]),e}(),U=function(e){function t(){return h()(this,t),y()(this,I()(t).call(this,P.a.getURL("/servlet/com.sure.smilecat.design.DesignApiServlet")))}return k()(t,e),d()(t,[{key:"getParam",value:function(e){return{cmd:"get_design_list_by_idxes",idxList:R.toNumberList(e)}}},{key:"getList",value:function(e){return e.data.data}}]),t}(M),B=function(e){function t(){return h()(this,t),y()(this,I()(t).call(this,"/api/template/favorite-list"))}return k()(t,e),d()(t,[{key:"getParam",value:function(e){return{idxList:R.toNumberList(e)}}},{key:"getList",value:function(e){return e.data}}]),t}(N),G=function(e){function t(){return h()(this,t),y()(this,I()(t).call(this,"/api/templates/style"))}return k()(t,e),d()(t,[{key:"getParam",value:function(e){return{idxList:e}}},{key:"getList",value:function(e){return e.data.list}}]),t}(N),V=function(){function e(){h()(this,e)}var t;return d()(e,[{key:"request",value:(t=u()(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",b.a.getList(t));case 1:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})}]),e}(),F=function(){function e(){h()(this,e)}var t;return d()(e,[{key:"request",value:(t=u()(s.a.mark(function e(t){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.c.getSvgDataResponse({keyList:t,pageSize:30});case 2:return n=e.sent,e.abrupt("return",n.svgDataList);case 4:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})}]),e}(),z=function(){function e(){h()(this,e)}var t;return d()(e,[{key:"request",value:(t=u()(s.a.mark(function e(t){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.c.getImageframeDataResponse({keyList:t,pageSize:30});case 2:return n=e.sent,e.abrupt("return",n.imageframeDataList);case 4:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})}]),e}(),H=n(37),K=n(12),W=n(46),q=function(){function e(t,n,a){h()(this,e),this.pk=t,this.resourceData=n,this.favorite=a}var t,n;return d()(e,[{key:"registerFavorite",value:(n=u()(s.a.mark(function e(){var t,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(K.a.getUser().isLogin()){e.next=2;break}throw new Error("로그인 정보가 존재하지 않습니다");case 2:if(!this.favorite){e.next=4;break}throw new Error("이미 찜 되어 있습니다.");case 4:return e.next=6,g.a.insert(this.pk);case 6:try{(t=Object(S.c)(this.pk.resourceType))&&(n=this.pk.resourceType===S.a.TEMPLATE?"템플릿":"요소",W.a.sendEvent(n+" 찜하기",t+" 찜하기",this.pk.referenceKey))}catch(e){}this.favorite=!0,j.triggerRegisterListener(this.pk);case 9:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"unregisterFavorite",value:(t=u()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(K.a.getUser().isLogin()){e.next=2;break}throw new Error("로그인 정보가 존재하지 않습니다");case 2:if(this.favorite){e.next=4;break}throw new Error("이미 찜 해제되어 있습니다.");case 4:return e.next=6,g.a.delete(this.pk);case 6:this.favorite=!1;case 7:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"isFavorite",value:function(){return this.favorite}},{key:"hasResourceData",value:function(){return!!this.resourceData}},{key:"getResourceData",value:function(){return this.resourceData}}]),e}(),Y=function(){function e(){h()(this,e),this.DATA_MAP=new Map,this.SIZE_MAP=new Map,this.registerListenerMap=new Map,this.unregisterListenerMap=new Map,this.dataInitListeners=[],K.a.addOnLoginListener(this.onLogin.bind(this))}var t,n,i,o,c,l,p,v;return d()(e,[{key:"onLogin",value:function(e){this.DATA_MAP.clear(),this.dataInitListeners.forEach(function(e){return e()})}},{key:"initSizeMap",value:(v=u()(s.a.mark(function e(t){var n=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.SIZE_MAP.clear(),K.a.getUser().isLogin()){e.next=4;break}return t&&t(),e.abrupt("return");case 4:return"/api/my-collection/size-by-resource-type",e.next=7,_.b.get("/api/my-collection/size-by-resource-type");case 7:e.sent.data.forEach(function(e){return n.SIZE_MAP.set(e.resourceType,e.size)}),t&&t();case 10:case"end":return e.stop()}},e,this)})),function(e){return v.apply(this,arguments)})},{key:"hasFavorite",value:function(e){if(e)return this.SIZE_MAP.get(e)>0;var t=!0,n=!1,a=void 0;try{for(var i,r=this.SIZE_MAP.values()[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){if(i.value>0)return!0}}catch(e){n=!0,a=e}finally{try{t||null==r.return||r.return()}finally{if(n)throw a}}return!1}},{key:"isFavorite",value:function(e){return this.has(e)&&this.get(e).isFavorite()}},{key:"set",value:function(e,t,n){var a=new q(e,t,n);return this.DATA_MAP.set(this.getPkStr(e),a),a}},{key:"get",value:function(e){return this.DATA_MAP.get(this.getPkStr(e))}},{key:"has",value:function(e){return this.DATA_MAP.has(this.getPkStr(e))}},{key:"setListItem",value:(p=u()(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.setListItems([t]));case 1:case"end":return e.stop()}},e,this)})),function(e){return p.apply(this,arguments)})},{key:"setListItems",value:(l=u()(s.a.mark(function e(t){var n,a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!H.a.isEmpty(t)){e.next=2;break}return e.abrupt("return");case 2:return n=t[0].listItemData.myCollectionPk.resourceType,a=t[0].listItemData.myCollectionPk.repositoryType,e.next=6,this.setResourceDataList(t.map(function(e){return e.listItemData.resourceData}),n,a);case 6:return e.abrupt("return",t);case 7:case"end":return e.stop()}},e,this)})),function(e){return l.apply(this,arguments)})},{key:"setResourceDataList",value:(c=u()(s.a.mark(function e(t,n,a){var i,r,o,c=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(K.a.getUser().isLogin()){e.next=2;break}return e.abrupt("return");case 2:if(i=m.a.createInstance(n,a),t=t.filter(function(e){return!c.has({referenceKey:i.getKey(e),resourceType:n,repositoryType:a})}),!H.a.isEmpty(t)){e.next=6;break}return e.abrupt("return");case 6:return r=t.map(function(e){return i.getKey(e)}),e.next=9,g.a.getListByReferenceKeyList(Array.from(new Set(r)),n,a);case 9:o=e.sent,t.forEach(function(e){var t=i.getKey(e),r={referenceKey:t,resourceType:n,repositoryType:a},s=o.some(function(e){return e.referenceKey===String(t)});c.set(r,e,s)});case 11:case"end":return e.stop()}},e)})),function(e,t,n){return c.apply(this,arguments)})},{key:"setMyCollectionPk",value:(o=u()(s.a.mark(function e(t){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.has(t)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,g.a.findOne(t);case 4:n=e.sent,this.set(t,null,!!n);case 6:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"setMyCollectionList",value:(i=u()(s.a.mark(function e(t){var n,i,o,c,u,l,h,p,d=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=t.filter(function(e){return e.resourceType!==S.a.PHOTO}).filter(function(e){var t=d.makeMyCollectionPk(e);return!d.has(t)||!d.get(t).hasResourceData()}),n=!0,i=!1,o=void 0,e.prev=4,c=this.getReferenceListMap(t)[Symbol.iterator]();case 6:if(n=(u=c.next()).done){e.next=18;break}return l=r()(u.value,2),h=l[0],p=l[1],e.prev=8,e.delegateYield(s.a.mark(function e(){var t,n,i,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.parseReferenceListMapKey(h),n=t.resourceType,i=t.repositoryType,r=a.create(n,i),e.next=4,r.request(p);case 4:e.sent.forEach(function(e){var t={resourceType:n,repositoryType:i,referenceKey:m.a.createInstance(n,i).getKey(e)};d.set(t,e,!0)});case 6:case"end":return e.stop()}},e)})(),"t0",10);case 10:e.next=15;break;case 12:e.prev=12,e.t1=e.catch(8),console.error(e.t1);case 15:n=!0,e.next=6;break;case 18:e.next=24;break;case 20:e.prev=20,e.t2=e.catch(4),i=!0,o=e.t2;case 24:e.prev=24,e.prev=25,n||null==c.return||c.return();case 27:if(e.prev=27,!i){e.next=30;break}throw o;case 30:return e.finish(27);case 31:return e.finish(24);case 32:case"end":return e.stop()}},e,this,[[4,20,24,32],[8,12],[25,,27,31]])})),function(e){return i.apply(this,arguments)})},{key:"getReferenceListMap",value:function(e){var t=new Map;if(!e)return t;var n=!0,a=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){var s=r.value,c=this.getReferenceListMapKeyString(s.resourceType,s.repositoryType);if(t.has(c))t.get(c).push(s.referenceKey);else t.set(c,[s.referenceKey])}}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return t}},{key:"getReferenceListMapKeyString",value:function(e,t){return f.a.getResourceKey(e,t)}},{key:"parseReferenceListMapKey",value:function(e){var t=f.a.parseResourceKey(e);return{resourceType:t.resourceType,repositoryType:t.key}}},{key:"registerFavorite",value:(n=u()(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.has(t)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.get(t).registerFavorite();case 4:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"unregisterFavorite",value:(t=u()(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.has(t)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.get(t).unregisterFavorite();case 4:this.triggerUnregisterListener(t);case 5:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"addRegisterListener",value:function(e,t){return this.registerListenerMap.has(e)||this.registerListenerMap.set(e,[]),this.registerListenerMap.get(e).push(t),this}},{key:"addUnregisterListener",value:function(e,t){return this.unregisterListenerMap.has(e)||this.unregisterListenerMap.set(e,[]),this.unregisterListenerMap.get(e).push(t),this}},{key:"addDataInitListener",value:function(e){return this.dataInitListeners.push(e),this}},{key:"triggerRegisterListener",value:function(e){var t=this.SIZE_MAP.get(e.resourceType);this.SIZE_MAP.set(e.resourceType,t?t+1:1);var n=this.registerListenerMap.get(e.resourceType);n&&n.forEach(function(t){return t(e)})}},{key:"triggerUnregisterListener",value:function(e){var t=this.SIZE_MAP.get(e.resourceType);this.SIZE_MAP.set(e.resourceType,t>0?t-1:0);var n=this.unregisterListenerMap.get(e.resourceType);n&&n.forEach(function(t){return t(e)})}},{key:"makeMyCollectionPk",value:function(e){return{referenceKey:e.referenceKey,resourceType:e.resourceType,repositoryType:e.repositoryType}}},{key:"getPkStr",value:function(e){return f.a.getResourceKey(e.resourceType,e.referenceKey,e.repositoryType)}},{key:"isSamePk",value:function(e,t){return this.getPkStr(e)===this.getPkStr(t)}}]),e}(),j=t.a=new Y},320:function(e,t,n){"use strict";var a=n(2),i=n.n(a),r=n(4),o=n.n(r),s=n(0),c=n.n(s),u=n(1),l=n.n(u),h=n(20),p=n(240),d=n(383),m=n(259),f=n(244),g=n(249),v=function(){function e(){c()(this,e)}return l()(e,null,[{key:"getSvgWidth",value:function(e){return Number(e.getAttribute("width").replace(/[^\d.]/g,""))}},{key:"getSvgHeight",value:function(e){return Number(e.getAttribute("height").replace(/[^\d.]/g,""))}},{key:"makeImageframeData",value:function(e){var t=new m.b,n=e.cloneNode(!0);g.a.makeUnicornSvgElement(n),n.style.position="absolute",n.style.visibility="hidden",document.body.appendChild(n);var a=this.getSvgWidth(n),i=this.getSvgHeight(n);t.status=m.g.INACTIVE,t.svg=e.cloneNode(!0),t.width=a,t.height=i,t.minWidth=a,t.minHeight=i;for(var r=g.a.getOriginFillColors(n),o=0;o<r.length;o++){var s=r[o],c=new m.a;c.color=s,c.editable=!0,c.photoInColor=0===o,t.addColor(c)}if(r.length<1)throw new Error("Imageframe has no color");var u=g.a.getFirstElementByOriginColor(n,r[0]).getBoundingClientRect(),l=new m.e;return l.color=r[0],l.width=u.width,l.height=u.height,l.x=u.left,l.y=u.top,t.maskData=l,document.body.removeChild(n),t}},{key:"appendImageframeInsertData",value:function(e,t){e.append("status",t.status.value),e.append("width",String(t.width)),e.append("height",String(t.height)),e.append("minWidth",String(t.minWidth)),e.append("minHeight",String(t.minHeight));for(var n=0;n<t.colorList.length;n++){var a=t.colorList[n];e.append("colorDtoList[".concat(n,"].color"),a.color),e.append("colorDtoList[".concat(n,"].editable"),String(a.editable)),e.append("colorDtoList[".concat(n,"].photoInColor"),String(a.photoInColor))}e.append("imageFrameMaskMetaDto.width",String(t.maskData.width)),e.append("imageFrameMaskMetaDto.height",String(t.maskData.height)),e.append("imageFrameMaskMetaDto.x",String(t.maskData.x)),e.append("imageFrameMaskMetaDto.y",String(t.maskData.y)),e.append("imageFrameMaskMetaDto.color",String(t.maskData.color))}}]),e}(),y=n(338),E=n(442);n.d(t,"a",function(){return I});var I=function(){function e(){c()(this,e)}var t,n,a,r,s,u,g,I;return l()(e,null,[{key:"removeFileWidthKey",value:(I=o()(i.a.mark(function e(t){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/v0/files/${key}",n="/api/v0/files/${key}".replace("${key}",t),e.next=4,h.b.delete(n,{traditional:!0});case 4:case"end":return e.stop()}},e)})),function(e){return I.apply(this,arguments)})},{key:"downloadByFileUrl",value:function(e){var t=document.createElement("a");t.href=e,t.download="",document.body.appendChild(t),t.click(),setTimeout(function(){document.body.removeChild(t)},0)}},{key:"downloadSvgOriginal",value:function(t,n){if(n.lastIndexOf("blob")!==n.length-4)return this.downloadByFileUrl(n);$.get(n).done(function(n){var a;try{a=(new XMLSerializer).serializeToString(n)}catch(e){a=n}var i=new Blob([a],{type:e.MIME_TYPE_SVG}),r=document.createElement("a");r.href=URL.createObjectURL(i),r.download=t+t+".svg",document.body.appendChild(r),r.click(),setTimeout(function(){document.body.removeChild(r)},0)})}},{key:"getImgUriToBlob",value:function(e){var t=Object(d.d)(e);return new Blob([t],{type:"text/csv;charset=utf-8;"})}},{key:"uploadSvg",value:(g=o()(i.a.mark(function t(n,a){var r,o,s,c,u,l,h;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=new FormData,o=(new XMLSerializer).serializeToString(n),s=new Blob([o],{type:e.MIME_TYPE_SVG}),r.append("file",s,a),c=this.parse(o),u=c.getElementsByTagName("svg").item(0),E.a.changeElement(u),t.next=9,this.appendSvgData(r,u);case 9:return"/api/v1/svg",t.next=12,this.fileUpload("/api/v1/svg",r);case 12:return l=t.sent,h=l.data,t.next=16,f.c.reloadSvgData(h);case 16:return t.abrupt("return",h);case 17:case"end":return t.stop()}},t,this)})),function(e,t){return g.apply(this,arguments)})},{key:"fileUpload",value:(u=o()(i.a.mark(function e(t,n){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h.b.post(t,{data:n,processData:!1,traditional:!0,contentType:!1}));case 1:case"end":return e.stop()}},e)})),function(e,t){return u.apply(this,arguments)})},{key:"parse",value:function(t){return(new DOMParser).parseFromString(t,e.MIME_TYPE_SVG)}},{key:"appendSvgData",value:(s=o()(i.a.mark(function e(t,n){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=y.a.makeSvgData(n),!y.a.containsWaterPattern(a)){e.next=3;break}throw Error("물방울패턴좀 삭제하고 업로드해주세요");case 3:return e.next=5,y.a.appendSvgInsertData(t,a);case 5:case"end":return e.stop()}},e)})),function(e,t){return s.apply(this,arguments)})},{key:"uploadImageframe",value:(r=o()(i.a.mark(function t(n,a){var r,o,s,c,u,l,h;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=new FormData,o=(new XMLSerializer).serializeToString(n),s=new Blob([o],{type:e.MIME_TYPE_SVG}),r.append("file",s,a),c=this.parse(o),u=c.getElementsByTagName("svg").item(0),this.appendImageframeData(r,u),"/api/image-frame",t.next=10,this.fileUpload("/api/image-frame",r);case 10:return l=t.sent,h=l.data,t.next=14,m.c.reloadImageframeData(h);case 14:return t.abrupt("return",h);case 15:case"end":return t.stop()}},t,this)})),function(e,t){return r.apply(this,arguments)})},{key:"appendImageframeData",value:function(e,t){var n=v.makeImageframeData(t);v.appendImageframeInsertData(e,n)}},{key:"getPngToJpgImageData",value:(a=o()(i.a.mark(function e(t,n,a){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,i){var r=document.createElement("img");r.onload=function(){var a=p.a.createCanvas();a.width=t,a.height=n,a.getContext("2d").drawImage(r,0,0),e(a.toDataURL("image/jpeg"))},r.onerror=function(){return i("fail getPngToJpgImageData : [".concat(a,"]"))},r.src=a}));case 1:case"end":return e.stop()}},e)})),function(e,t,n){return a.apply(this,arguments)})},{key:"getPureFileName",value:function(e){var t=e.lastIndexOf(".");return-1===t?e:e.substring(0,t)}},{key:"getSvgSize",value:(n=o()(i.a.mark(function e(t){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.getSvgFileInfo(t.svgData.key);case 2:return n=e.sent,e.abrupt("return",Math.round(n.fileSize/1024));case 4:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})},{key:"isFileSizeValidate",value:(t=o()(i.a.mark(function t(n,a){var r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getSvgSize(n);case 2:return r=t.sent,t.abrupt("return",r>a);case 4:case"end":return t.stop()}},t)})),function(e,n){return t.apply(this,arguments)})}]),e}();I.MIME_TYPE_SVG="image/svg+xml"},323:function(e,t,n){"use strict";var a,i=n(2),r=n.n(i),o=n(4),s=n.n(o),c=n(0),u=n.n(c),l=n(1),h=n.n(l),p=n(6),d=n.n(p),m=n(3),f=n.n(m),g=n(7),v=n.n(g),y=n(318),E=n(230),I=function(){function e(){u()(this,e),this.storage=new Map}return h()(e,[{key:"get",value:function(t){return this.storage.get(e.makeKey(t))}},{key:"set",value:function(t,n){this.storage.set(e.makeKey(t),n)}},{key:"clear",value:function(){this.storage.clear()}}],[{key:"makeKey",value:function(e){return $.param(e,!0)}}]),e}(),T=n(29);n.d(t,"b",function(){return a}),n.d(t,"a",function(){return k}),function(e){e.TEMPLATE="TEMPLATE",e.DESIGN="DESIGN",e.ITEM="ITEM",e.BITMAP="BITMAP",e.IMAGE="IMAGE",e.LINE="LINE",e.FIGURE="FIGURE",e.ILLUST="ILLUST",e.FRAME="FRAME",e.PIXABAY="PIXABAY",e.TEXT="TEXT",e.DEV_UPLOAD="DEV_UPLOAD",e.FAVORITES="FAVORITES",e.BACKGROUND="BACKGROUND",e.BACKGROUND_PATTERN="BACKGROUND_PATTERN",e.BACKGROUND_IMAGE="BACKGROUND_IMAGE",e.GRID="GRID",e.BIZ_TEMPLATE="BIZ_TEMPLATE",e.DEV_TOOL="DEV_TOOL",e.ADMIN_TOOL="ADMIN_TOOL",e.IMAGE_DOWNLOAD="IMAGE_DOWNLOAD",e.IMAGE_SEARCH="IMAGE_SEARCH",e.TEMP="TEMP"}(a||(a={}));var k=function(e){function t(){var e,n;u()(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=d()(this,(e=f()(t)).call.apply(e,[this].concat(i)))).cache=new I,n.items=[],n.gtmLibData=null,n}var n,a;return v()(t,e),h()(t,[{key:"setGTMLibData",value:function(e){this.gtmLibData=e}},{key:"setGTMLibDataAuto",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=Object(E.c)(this.getLibType()),n="요소 > ".concat(t).concat(""!==e?":검색:"+e:""),a="요소>".concat(t);this.setGTMLibData({listTitle:n,category:a,keyword:e})}},{key:"getGTMLibData",value:function(){return null==this.gtmLibData&&this.setGTMLibDataAuto(),Object.assign({},this.gtmLibData)}},{key:"fetchRecentList",value:(a=s()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{items:[],totalRow:0});case 1:case"end":return e.stop()}},e)})),function(){return a.apply(this,arguments)})},{key:"initRequestMode",value:function(){}},{key:"fetchElementList",value:(n=s()(r.a.mark(function e(n,a){var i,o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.initRequestMode(),a&&this.clearItems(),!(i=this.getRequestParam(n)).keyword||i.keyword.trim().replace(" ","")!==t.RECENT_KEYWORD){e.next=9;break}return e.next=6,this.fetchRecentList();case 6:o=e.sent,e.next=15;break;case 9:if(o=this.cache.get(i)){e.next=15;break}return e.next=13,this.fetchListInternal(i);case 13:o=e.sent,this.cache.set(i,o);case 15:return this.addItems(o.items),this.lastListResult=o,e.abrupt("return",o);case 18:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})},{key:"clearItems",value:function(){return this.items=[],this}},{key:"clearCache",value:function(){this.cache.clear()}},{key:"addItems",value:function(e){return this.items=this.items.concat(e),this}},{key:"findItems",value:function(e){for(var t=[],n=0,a=this.items.length;n<a;n++){var i=this.items[n];y.a.isSamePk(e,i.listItemData.myCollectionPk)&&t.push({idx:n,item:i})}return t}},{key:"getGTMItemData",value:function(e){try{var t=this.findItems({resourceType:e.resourceType,referenceKey:e.key,repositoryType:e.repositoryType});if(0===t.length)return null;var n=t[0],a=n.item,i=n.idx,r=this.getGTMLibData(),o=r.listTitle,s=r.category;return a.getEECItemData(s,o,i+1)}catch(e){}}}]),t}(T.a);k.RECENT_KEYWORD="최근사용"},333:function(e,t,n){"use strict";var a=n(80),i=n.n(a),r=n(2),o=n.n(r),s=n(4),c=n.n(s),u=n(0),l=n.n(u),h=n(1),p=n.n(h),d=n(110),m=n(46),f=n(255),g=n(11),v=n(44),y=n(20),E=n(12),I=n(235),T=n(240),k=n(236),w=n(256),C=n(243),S=n(233),A=n(425),b=n(341),L=n(231),P=n(353),x=n(334),_=n(306),R=n(286),N=n(303),M=n(74),D=n(253),O=n(271),U=n(287),B=n(463),G=n(379),V=n(475),F=n(351),z=n(519),H=n(309),K=n(288),W=n(227),q=n(234),Y=function(){function e(){l()(this,e)}return p()(e,null,[{key:"resizeBySize",value:function(e,t){var n=_.a.getItemsLTRBCoordinate(e,!0),a=new q.a(0,0,t.width,t.height);this.isRightAndBottomInner(n,a)||(this.moveItems(_.a.getAllSingleItems(e),n),n=_.a.getItemsLTRBCoordinate(e,!0),this.isRightAndBottomInner(n,a)||this.resizeItems(_.a.getAllSingleItems(e),n,a))}},{key:"moveItems",value:function(e,t){var n=-t.left,a=-t.top;e.forEach(function(e){return e.move(n,a)})}},{key:"resizeItems",value:function(e,t,n){var a=this.getResizeScaleByPageSize(t,n);e.forEach(function(e){return e.setLTRBCoordinate(e.getLTRBCoordinate().changeScale(a))})}},{key:"getResizeScaleByPageSize",value:function(e,t){return e.right-t.right>=e.bottom-t.bottom?t.right/e.right:t.bottom/e.bottom}},{key:"isRightAndBottomInner",value:function(e,t){return e.right<=t.right&&e.bottom<=t.bottom}}]),e}(),j=n(224),X=n(427),Z=n(226),$=n(225),Q=n(293),J=n(6),ee=n.n(J),te=n(3),ne=n.n(te),ae=n(7),ie=n.n(ae),re=n(444),oe=n(440),se=n(9),ce=n.n(se),ue=n(10),le=n(368),he=n(261),pe=n(369),de=n(370),me=function(){function e(){l()(this,e)}return p()(e,[{key:"makeElement",value:function(){var e=document.createElement("div");e.className=he.a.CHARACTER_VIEW;var t=this.character=document.createElement("div");return t.classList.add(he.a.CHARACTER,he.a.EMAIL_RECEIVE_FAILURE_CHARACTER),t.addEventListener("click",function(){return de.a.clickElement(t)}),e.appendChild(t),e}}]),e}(),fe=function(e){function t(){var e;return l()(this,t),(e=ee()(this,ne()(t).call(this))).characterView=new me,e.initialize(),e}return ie()(t,e),p()(t,[{key:"initialize",value:function(){ce()(ne()(t.prototype),"initialize",this).call(this),this.popup.classList.add(he.a.EMAIL_RECEIVE_FAILURE)}},{key:"makeContentElement",value:function(){var e=ce()(ne()(t.prototype),"makeContentElement",this).call(this);return e.appendChild(this.characterView.makeElement()),e.appendChild(t.makeTitleElement()),e.appendChild(this.makeSubTitleElement()),e.appendChild(this.makeCertificationInfoElement()),e.appendChild(this.makeButtonAreaElement()),e}},{key:"makeSubTitleElement",value:function(){var e=this.subTitle=document.createElement("div");return e.className=he.a.SUB_TITLE,e.innerText="인증되지 않은 이메일이라 받아볼 수 없어요.\n이메일 인증을 먼저 완료한 후 다시 시도해주세요.",e}},{key:"makeCertificationInfoElement",value:function(){var e=this.information=document.createElement("div");e.className=he.a.INFORMATION_WRAP;e.addEventListener("click",function(){return pe.a.openByNewTab("/myspace#/user-info")});var t=document.createElement("div");t.className=he.a.INFORMATION,t.innerText="이메일 인증하러 가기";return Object(ue.setToolsIcon)(t,ue.ToolsIcon.EMAIL,!1,"left"),e.appendChild(t),e}},{key:"makeButtonAreaElement",value:function(){var e=this,t=this.btnArea=document.createElement("div");t.className=he.a.BTN_AREA;var n=document.createElement("button");return n.className=he.a.BTN_CONFIRM,n.innerText="확인",n.addEventListener("click",function(){return e.close()}),t.appendChild(n),t}},{key:"updateUI",value:function(){}}],[{key:"makeTitleElement",value:function(){var e=document.createElement("div");return e.className=he.a.MAIN_TITLE,e.innerText="이메일로 받기 실패",e}},{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}(le.a),ge=function(e){function t(){var e,n;l()(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=ee()(this,(e=ne()(t)).call.apply(e,[this].concat(i)))).actionType=j.a.ONE_TIME,n.doSaveQueue=!1,n.renderAuto=!1,n.changeDesign=function(){return!1},n.commitAction=function(e,t,a){n.designDoc=e,n.store=t,n.renderer=a,fe.instance.open()},n.rollbackAction=function(){},n.recycle=function(){},n}return ie()(t,e),t}(j.b),ve=function(){function e(){l()(this,e)}return p()(e,[{key:"makeElement",value:function(){var e=document.createElement("div");e.className=he.a.CHARACTER_VIEW;var t=this.character=document.createElement("div");return t.classList.add(he.a.CHARACTER,he.a.EMAIL_RECEIVE_SUCCESS_CHARACTER),t.addEventListener("click",function(){return de.a.clickElement(t)}),e.appendChild(t),e}}]),e}(),ye=function(e){function t(){var e;return l()(this,t),(e=ee()(this,ne()(t).call(this))).characterView=new ve,e.initialize(),e}return ie()(t,e),p()(t,[{key:"initialize",value:function(){ce()(ne()(t.prototype),"initialize",this).call(this),this.popup.classList.add(he.a.EMAIL_RECEIVE_SUCCESS)}},{key:"makeContentElement",value:function(){var e=ce()(ne()(t.prototype),"makeContentElement",this).call(this);return e.appendChild(this.characterView.makeElement()),e.appendChild(t.makeTitleElement()),e.appendChild(this.makeSubTitleElement()),e.appendChild(this.makeButtonAreaElement()),e}},{key:"makeSubTitleElement",value:function(){var e=this.subTitle=document.createElement("div");return e.className=he.a.SUB_TITLE,e.innerText="파일을 준비중이에요. 완료되면 고객님의 이메일로 보내드릴게요!\n30분 정도 소요될 수 있으니, 마음 편히 작업하고 계세요.",e}},{key:"makeButtonAreaElement",value:function(){var e=this,t=this.btnArea=document.createElement("div");t.className=he.a.BTN_AREA;var n=document.createElement("button");return n.className=he.a.BTN_CONFIRM,n.innerText="확인",n.addEventListener("click",function(){return e.close()}),t.appendChild(n),t}},{key:"setActionSet",value:function(e){this.actionSet=e}},{key:"updateUI",value:function(){this.updateSubTitle()}},{key:"updateSubTitle",value:function(){var e="파일을 준비중이에요. 완료되면 고객님의 이메일로 보내드릴게요!\n30분 정도 소요될 수 있으니, 마음 편히 작업하고 계세요.",t=this.subTitle;this.actionSet.isMobileMode()?t.innerText=e.replace("\n"," "):t.innerText=e}}],[{key:"makeTitleElement",value:function(){var e=document.createElement("div");return e.className=he.a.MAIN_TITLE,e.innerText="이메일로 받기 신청 완료",e}},{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}(le.a),Ee=n(67),Ie=function(e){function t(){var e,n;l()(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=ee()(this,(e=ne()(t)).call.apply(e,[this].concat(i)))).actionType=j.a.ONE_TIME,n.doSaveQueue=!1,n.renderAuto=!1,n.changeDesign=function(){return!1},n.commitAction=function(e,t,a){n.designDoc=e,n.store=t,n.renderer=a;var i=ye.instance,r={isMobileMode:function(){return Ee.a.isMobilePortraitSize()},isDevMode:function(){return W.a.getUserSetting().devMode}};i.setActionSet(r),i.open()},n.rollbackAction=function(){},n.recycle=function(){},n}return ie()(t,e),t}(j.b),Te=function(e){function t(e){var n;return l()(this,t),(n=ee()(this,ne()(t).call(this))).actionType=j.a.ONE_TIME,n.doSaveQueue=!1,n.renderAuto=!1,n.changeDesign=function(){return!1},n.commitAction=function(e,a,i){n.designDoc=e,n.store=a,n.renderer=i;var r=re.a.instance;r.setDividePageInfoUrl("https://bo.miricanvas.com/s/23");r.setTipProps([{content:"상표 등록이 가능한 로고가 필요하세요? 자세히 보러가기",highlightText:"자세히 보러가기",linkUrl:"https://www.miricanvas.com/s/220"},{content:"번거로운 이미지 누끼따기와 합성을 저렴하게 맡겨보세요. 자세히 보러가기 ",highlightText:"자세히 보러가기",linkUrl:"https://www.miricanvas.com/s/221"},{content:"저렴한 비용으로 웹 디자인을 전문가에게 맡겨보세요. 자세히 보러가기",highlightText:"자세히 보러가기",linkUrl:"https://www.miricanvas.com/s/222"},{content:"포스터를 1장부터 저렴하게 제작해보세요. 자세히 보러가기",highlightText:"자세히 보러가기",linkUrl:"https://www.miricanvas.com/s/223"},{content:"배너, 명함, 포스터 등 다양한 인쇄물을 빠르게 받아볼 수 있어요. 자세히 보러가기",highlightText:"자세히 보러가기",linkUrl:"https://www.miricanvas.com/s/223"},{content:"저렴한 비용으로 인쇄물 디자인을 전문가에게 맡겨보세요. 자세히 보러가기",highlightText:"자세히 보러가기",linkUrl:"https://www.miricanvas.com/s/224"},{content:"저작권에 대한 궁금증을 풀어보세요. 자세히 보러가기",highlightText:"자세히 보러가기",linkUrl:"https://www.miricanvas.com/s/225"},{content:"내가 만든 디자인을 SNS에 공유해보세요. 자세히 보러가기",highlightText:"자세히 보러가기",linkUrl:"https://www.miricanvas.com/s/226"},{content:"다크모드로 설정해서 여러분의 소중한 눈을 보호하세요. 자세히 보러가기",highlightText:"자세히 보러가기",linkUrl:"https://www.miricanvas.com/s/227"}]);var o={isMobileMode:function(){return Ee.a.isMobilePortraitSize()},isDevMode:function(){return W.a.getUserSetting().devMode},isDownloadMultipleFile:function(){return t.isDownloadMultipleFile()},getImageFIleType:function(){return n.imageFileType},receiveDesignFileByEmail:function(){return n.receiveDesignFileByEmail()}};r.setActionSet(o),r.open()},n.rollbackAction=function(){},n.recycle=function(){},n.imageFileType=e,n}var n;return ie()(t,e),p()(t,[{key:"receiveDesignFileByEmail",value:(n=c()(o.a.mark(function e(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!E.a.getUser().authStatus){e.next=6;break}return e.next=3,oe.a.sendHQImageFileByEmail();case 3:t=new Ie,e.next=8;break;case 6:oe.a.cancel(),t=new ge;case 8:re.a.instance.close(),$.a.instance.dispatch(t);case 10:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)})}],[{key:"isDownloadMultipleFile",value:function(){var e=oe.a.getLastImageProcessDownloadProperty();return e&&e.pageIdxList.length>1&&!(e.isImgCombine||e.fileExt===K.b.PDF)}}]),t}(j.b),ke=n(43),we=n(16),Ce=n(90);function Se(e){return!!e.length&&e.every(function(e){return!(e.isResourceLoadFail()||e instanceof P.a||e instanceof L.d&&e.orgType===L.b.Photo)})}n.d(t,"c",function(){return Ae}),n.d(t,"e",function(){return Le}),n.d(t,"d",function(){return Pe}),n.d(t,"b",function(){return xe}),n.d(t,"a",function(){return _e});var Ae=function(){function e(t,n){l()(this,e),this.doSaveQueue=!1,this.actionType=j.a.PRESET_SAVE,this.isActionGroupEquals=function(){return!1},this.concat=function(e){return!1},this.changeDesign=function(){return!1},this.isLastSavedAction=!1,this.param=t,this.isDefaultTextSave=n}var t;return p()(e,[{key:"commit",value:function(t,n,a){var i=this;Se(n.activeItems)?e.makeThumb().then(function(){var e=c()(o.a.mark(function e(t){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=V.a.makeMockXml(Q.a.getLatestVersion()),e.next=3,H.a.create({name:g.b.nvl(i.param.name),thumb:t,xml:encodeURIComponent((new XMLSerializer).serializeToString(n)),type:i.param.type,status:i.param.status,designerId:i.param.designerId,keywordList:i.param.keywordList,memo:g.b.nvl(i.param.memo)});case 3:e.sent,alert(i.isDefaultTextSave?"기본 텍스트 등록이 완료되었습니다.":"조합요소 등록이 완료되었습니다.");case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){alert("아이템 조합 저장중에 오류가 발생하였습니다."),console.error(e)}):alert("미등록 또는 비활성 상태의 요소가 포함되어 있습니다.")}},{key:"rollback",value:function(e,t){}},{key:"recycle",value:function(){}}],[{key:"makeThumb",value:(t=c()(o.a.mark(function e(){var t,n,a=arguments;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:this.THUMB_SIZE_DEFAULT,n=a.length>1?a[1]:void 0,e.abrupt("return",new Promise(function(){var e=c()(o.a.mark(function e(a,i){var r,s,c,u,l,h,p,d,m,f,g,v,y,E;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,r=_.a.getItemsLTRBCoordinate(n||Z.a.instance.activeItems,!0),s=new Ce.a(r.left,r.top),c=Math.max(r.getWidth(),r.getHeight()),u=c>t?t/c:1,(l=T.a.createCanvas()).width=Math.ceil(r.right*u)-Math.floor(r.left*u),l.height=Math.ceil(r.bottom*u)-Math.floor(r.top*u),h=l.getContext("2d"),p=n||Z.a.instance.activeItems,d=!0,m=!1,f=void 0,e.prev=13,g=p[Symbol.iterator]();case 15:if(d=(v=g.next()).done){e.next=24;break}return y=v.value,(E=y.clone()).move(-s.x,-s.y),e.next=21,E.renderThumbnail(h,u);case 21:d=!0,e.next=15;break;case 24:e.next=30;break;case 26:e.prev=26,e.t0=e.catch(13),m=!0,f=e.t0;case 30:e.prev=30,e.prev=31,d||null==g.return||g.return();case 33:if(e.prev=33,!m){e.next=36;break}throw f;case 36:return e.finish(33);case 37:return e.finish(30);case 38:a(l.toDataURL()),e.next=44;break;case 41:e.prev=41,e.t1=e.catch(0),i(e.t1);case 44:case"end":return e.stop()}},e,null,[[0,41],[13,26,30,38],[31,,33,37]])}));return function(t,n){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})}]),e}();Ae.THUMB_SIZE_DEFAULT=400,Ae.FAIL_COUNT=0;var be,Le=function(){function e(t,n){l()(this,e),this.doSaveQueue=!1,this.actionType=j.a.PRESET_SAVE,this.isActionGroupEquals=function(){return!1},this.concat=function(e){return!1},this.changeDesign=function(){return!1},this.isLastSavedAction=!1,this.idx=t,this.param=n}var t;return p()(e,[{key:"commit",value:(t=c()(o.a.mark(function e(t,n,a){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H.a.update(this.idx,{name:g.b.nvl(this.param.name),type:this.param.type,status:this.param.status,designerId:this.param.designerId,keywordList:this.param.keywordList,memo:g.b.nvl(this.param.memo)});case 3:alert("아이템 조합이 수정되었습니다."),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),alert("아이템 조합 수정중에 오류가 발생하였습니다."),console.error(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,6]])})),function(e,n,a){return t.apply(this,arguments)})},{key:"rollback",value:function(){}},{key:"recycle",value:function(){}}]),e}(),Pe=function(){function e(t){l()(this,e),this.doSaveQueue=!1,this.actionType=j.a.PRESET_SAVE,this.isActionGroupEquals=function(){return!1},this.concat=function(e){return!1},this.changeDesign=function(){return!1},this.isLastSavedAction=!1,this.idx=t}return p()(e,[{key:"commit",value:function(e,t,n){var a=this,i=e.pages[t.renderPageIdx],r=i.background.backgroundItem,s=i.getAllSingleItems().filter(function(e){return e!==r});Se(s)?Ae.makeThumb(Ae.THUMB_SIZE_DEFAULT,e.pages[t.renderPageIdx].getAllSingleItems()).then(function(){var e=c()(o.a.mark(function e(t){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=V.a.makeMockXml(Q.a.getLatestVersion(),s),e.next=3,H.a.updateSheet(a.idx,{thumb:t,xml:encodeURIComponent((new XMLSerializer).serializeToString(n))});case 3:e.sent,alert("아이템 조합이 수정되었습니다.");case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){alert("아이템 조합 수정중에 오류가 발생하였습니다."),console.error(e)}):alert("미등록 또는 비활성 상태의 요소가 포함되어 있습니다.")}},{key:"rollback",value:function(){}},{key:"recycle",value:function(){}}]),e}(),xe=function(){function e(t,n,a,i){var r=this,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=arguments.length>5&&void 0!==arguments[5]&&arguments[5];l()(this,e),this.doSaveQueue=!0,this.actionType=j.a.PRESET_PASTE,this.isActionGroupEquals=function(){return!1},this.concat=function(e){return!1},this.changeDesign=function(){return!0},this.isLastSavedAction=!1,this.rollback=function(){var e=c()(o.a.mark(function e(t,n,a){var i,s,c,u,l,h,p,d;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(i=t.pages[r.pageIdx],s=!0,c=!1,u=void 0,e.prev=4,l=r.newItems[Symbol.iterator]();!(s=(h=l.next()).done);s=!0)p=h.value,d=p,p instanceof S.a&&(d=p.getSelectedItem()),d&&(d instanceof x.a&&d.isEditMode?n.pageController.getItemRenderer(d).toggleEditMode():d instanceof C.a&&d.isTextEditMode&&n.pageController.getItemRenderer(d).toggleEditMode(-1,-1)),i.removeItem(p);e.next=12;break;case 8:e.prev=8,e.t0=e.catch(4),c=!0,u=e.t0;case 12:e.prev=12,e.prev=13,s||null==l.return||l.return();case 15:if(e.prev=15,!c){e.next=18;break}throw u;case 18:return e.finish(15);case 19:return e.finish(12);case 20:return e.next=22,a.renderAuto(t,n);case 22:case"end":return e.stop()}},e,null,[[4,8,12,20],[13,,15,19]])}));return function(t,n,a){return e.apply(this,arguments)}}(),this.pageIdx=t,this.resourceKeySet=n,this.offsetX=a,this.offsetY=i,this.isDragging=s,this.isMockUp=u}var t,n,a,r;return p()(e,[{key:"commit",value:(r=c()(o.a.mark(function t(n,a,i){var r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,H.a.findOne(parseInt(this.resourceKeySet.key));case 3:if(r=t.sent.sheetUrl){t.next=6;break}throw Error("sheetUrl is null.");case 6:return t.next=8,e.loadToPage(parseInt(this.resourceKeySet.key),r,this.pageIdx,this.newItems,this.offsetX,this.offsetY,!1,this.isDragging,this.isMockUp);case 8:this.newItems=t.sent,t.next=16;break;case 11:t.prev=11,t.t0=t.catch(0),alert("아이템 조합을 불러오는 중에 오류가 발생하였습니다."),console.error(t.t0);case 16:case"end":return t.stop()}},t,this,[[0,11]])})),function(e,t,n){return r.apply(this,arguments)})},{key:"recycle",value:function(){this.newItems=null}}],[{key:"loadToPage",value:(a=c()(o.a.mark(function e(t,n,a,i){var r,s,u,l,h,p=this,d=arguments;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>4&&void 0!==d[4]?d[4]:0,s=d.length>5&&void 0!==d[5]?d[5]:0,u=!(d.length>6&&void 0!==d[6])||d[6],l=d.length>7&&void 0!==d[7]&&d[7],h=d.length>8&&void 0!==d[8]&&d[8],e.abrupt("return",new Promise(function(e,d){$.a.instance.dispatch(new j.c(function(){var m=c()(o.a.mark(function c(m,f,g){var y,E;return o.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,v.a.getXml(n);case 3:return y=o.sent.data,o.next=6,p.paste(y,a,m,f,g,i,r,s,u,l,h);case 6:return E=o.sent,o.next=9,X.a.addIdx(t);case 9:e(E),o.next=15;break;case 12:o.prev=12,o.t0=o.catch(0),d(o.t0);case 15:case"end":return o.stop()}},c,null,[[0,12]])}));return function(e,t,n){return m.apply(this,arguments)}}()))}));case 6:case"end":return e.stop()}},e)})),function(e,t,n,i){return a.apply(this,arguments)})},{key:"paste",value:(n=c()(o.a.mark(function t(n,a,i,r,s,c){var u,l,h,p,m,g,v,y,E,I,T,w,C,A,b,P,x,R,N,M,D,O,U,V,F,z,H,K,W,q,j,X=arguments;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(u=X.length>6&&void 0!==X[6]?X[6]:0,l=X.length>7&&void 0!==X[7]?X[7]:0,h=!(X.length>8&&void 0!==X[8])||X[8],p=X.length>9&&void 0!==X[9]&&X[9],m=X.length>10&&void 0!==X[10]&&X[10],g=!(X.length>11&&void 0!==X[11])||X[11],v=X.length>12&&void 0!==X[12]&&X[12],y=i.pages[a],E=y.sheetSize,T=[],!c){t.next=15;break}I=_.a.getAllSingleItems(c),T=c,t.next=56;break;case 15:return w=G.a.build(n).SHEET,C=w.SHEETSIZE,A=C["@cx"],b=C["@cy"],P=w.GROUP,x=w.VERSION||"1.4.1.0",t.next=23,i.parseItems(w,null,void 0,x);case 23:return I=t.sent,t.next=26,f.b.fetch(I,"forEditing");case 26:for(I.length<2&&(m=!1),R=new Map,e.renameGroupId(R,P),N=!0,M=!1,D=void 0,t.prev=32,O=I[Symbol.iterator]();!(N=(U=O.next()).done);N=!0)(V=U.value).groupId&&(V.groupId=R.get(V.groupId));t.next=40;break;case 36:t.prev=36,t.t0=t.catch(32),M=!0,D=t.t0;case 40:t.prev=40,t.prev=41,N||null==O.return||O.return();case 43:if(t.prev=43,!M){t.next=46;break}throw D;case 46:return t.finish(43);case 47:return t.finish(40);case 48:for(F=(new B.a).parse(P),T=S.b.parseSingleItemsByGroups(I,F),m&&T.length>1&&(z=new S.a,T.forEach(function(e){return z.addMember(e)}),T=[z]),H=e.getSizeRatio(y.sheetSize,A,b),K=e.getMockUpSizeRatio(y.sheetSize,A,b),W=0,q=I.length;W<q;W++)j=I[W],m?j.scale(K):h||e.repositionItemToOffsetCenter(p,j,u,l,E,y.editScale,H),k.a.appendSelectedItem(j),j instanceof L.d&&j.orgType===L.b.Skin&&I.unshift(I.splice(W,1)[0]);m&&!p&&(u=y.sheetSize.width*y.editScale/2,l=y.sheetSize.height*y.editScale/2),I.length>1&&(p||m)&&e.repositionItemsToOffsetCenter(I,u,l,y.editScale);case 56:if(c||!g){t.next=59;break}return t.next=59,e.setItemsPosition(I,i.pages[a].getAllSingleItems(),h);case 59:return v&&Y.resizeBySize(T,new d.a(E.width,E.height)),t.next=62,e.addItems(T,a,i,r,s);case 62:return t.abrupt("return",t.sent);case 63:case"end":return t.stop()}},t,null,[[32,36,40,48],[41,,43,47]])})),function(e,t,a,i,r,o){return n.apply(this,arguments)})},{key:"getSizeRatio",value:function(e,t,n){var a,i=e.width>=e.height,r=t>=n;a=i?e.width/e.height:e.height/e.width;var o=Math.min(.1*a+.4,.8);return(r?t:n)/((i?e.height:e.width)*o)}},{key:"repositionItemToOffsetCenter",value:function(e,t,n,a,i,r,o){t.scale(1/o);var s=R.a.getOffsetBaseRect(e,i,r,n,a,t.getWidth(),t.getHeight()),c=t.props.getLeft(),u=t.props.getTop();t.getItemType()===I.b.TEXT?t.setLTRBCoordinate(s,!1,w.b.BOTTOM_RIGHT):t.getItemType()===I.b.GRID?(t.scale(s.getHeight()/t.getHeight()),t.move(s.left,s.top)):t.setLTRBCoordinate(s),t.move(c,u)}},{key:"repositionItemsToOffsetCenter",value:function(e,t,n,a){var i=t/a,r=n/a,o=_.a.getItemsLTRBCoordinate(e).getCenterPos(),s=i-o.x,c=r-o.y;e.forEach(function(e){e.move(s,c)})}},{key:"getMockUpSizeRatio",value:function(e,t,n){var a=.6*e.width,i=.6*e.height,r=a/t;return n*r>i?i/n:r}},{key:"renameGroupId",value:function(e,t){if(t)if(Array.isArray(t)){var n=!0,a=!1,i=void 0;try{for(var r,o=t[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){var s=r.value;this.renameGroupId(e,s)}}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}}else{var c=t["@Id"];if(e.has(c))t["@Id"]=e.get(c);else{var u=g.b.random();t["@Id"]=u,e.set(c,u)}this.renameGroupId(e,t.GROUP)}}},{key:"setItemsPosition",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,r=!0,o=!1,s=void 0;try{for(var c,u=function(){var e=c.value,a=e.getLTRBCoordinate().roundLTRB();if(!t.find(function(t){return(!n||t.copyKey&&t.copyKey===e.copyKey)&&a.isEqual(t.getLTRBCoordinate().roundLTRB())}))return{v:void 0}},l=e[Symbol.iterator]();!(r=(c=l.next()).done);r=!0){var h=u();if("object"===i()(h))return h.v}}catch(e){o=!0,s=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw s}}e.forEach(function(e){return e.move(10,10)}),a<1?console.log("break for memory"):this.setItemsPosition(e,t,n,--a)}},{key:"addItems",value:(t=c()(o.a.mark(function e(t,n,a,i,r){var s,c,u,l,h,p,d;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for((s=a.pages[n]).getAllSingleItems().forEach(function(e){return e.hover=!1}),c=!0,u=!1,l=void 0,e.prev=5,h=t[Symbol.iterator]();!(c=(p=h.next()).done);c=!0)d=p.value,s.addItem(d,s.items.length);e.next=13;break;case 9:e.prev=9,e.t0=e.catch(5),u=!0,l=e.t0;case 13:e.prev=13,e.prev=14,c||null==h.return||h.return();case 16:if(e.prev=16,!u){e.next=19;break}throw l;case 19:return e.finish(16);case 20:return e.finish(13);case 21:return e.next=23,F.a.loadItemResource(_.a.getAllSingleItems(t));case 23:return k.a.selectItems(s.getAllSingleItems(t)),r.renderCanvas(a,i),r.renderHandler(a,i),r.renderLayer(a,i),e.abrupt("return",t);case 28:case"end":return e.stop()}},e,null,[[5,9,13,21],[14,,16,20]])})),function(e,n,a,i,r){return t.apply(this,arguments)})}]),e}(),_e=function(){function e(t){var n=this;l()(this,e),this.doSaveQueue=!1,this.actionType=j.a.DESIGN_DOWNLOAD,this.isActionGroupEquals=function(){return!1},this.concat=function(e){return!1},this.changeDesign=function(){return!1},this.isLastSavedAction=!1,this.commit=function(){var t=c()(o.a.mark(function t(a,i){var r,s,c,u,l,h,p,d,f,g,v,I,T,k,w,C,S,L,P,x;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(E.a.getUser().isLogin()){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,n.saveDesign();case 4:if(0!==(r=t.sent)&&O.a.isSaveComplete()){t.next=8;break}return alert("디자인이 완전히 저장되지 않았습니다."),t.abrupt("return");case 8:s=n.downloadParam.selectedPages,c=!0,u=!1,l=void 0,t.prev=12,h=s[Symbol.iterator]();case 14:if(c=(p=h.next()).done){t.next=27;break}if(d=p.value,0!==(f=A.a.getNumberOfLastSavedPages())){t.next=21;break}return t.abrupt("break",27);case 21:if(!(d>=f)){t.next=24;break}return alert("요청한 페이지 번호가 적절하지 않습니다. 저장 후 재시도 해주세요."),t.abrupt("return");case 24:c=!0,t.next=14;break;case 27:t.next=33;break;case 29:t.prev=29,t.t0=t.catch(12),u=!0,l=t.t0;case 33:t.prev=33,t.prev=34,c||null==h.return||h.return();case 36:if(t.prev=36,!u){t.next=39;break}throw l;case 39:return t.finish(36);case 40:return t.finish(33);case 41:if(0!==s.length){t.next=44;break}return console.log("Please, select page."),t.abrupt("return");case 44:return g=n.downloadParam.isTransparentBackground,v=n.getFileExtension(),I=b.a.pixabayItemsIn(a.pages,s),T=n.downloadParam.selectedFileType===K.b.JPG,k=M.a.get().getValidTitle(),w=M.a.get().getIdx(),C=n.downloadParam.isWebDpi,S=n.downloadParam.rasterize,t.prev=52,t.next=55,e.existHighResolutionAcceptableItemInPages(a.pages,s);case 55:if(t.t4=t.sent,t.t4){t.next=58;break}t.t4=n.downloadParam.isForceHighResolution;case 58:if(t.t3=t.t4,t.t3){t.next=61;break}t.t3=n.downloadParam.isImgCombine;case 61:if(t.t2=t.t3,t.t2){t.next=64;break}t.t2=v===K.b.PDF;case 64:if(t.t1=t.t2,t.t1){t.next=67;break}t.t1=v===K.b.PPTX;case 67:return L=t.t1,P=n.downloadParam.isApplyHighResolution&&L,x={isImpDownload:P,title:k,pixabayImagekeys:I,designIdx:w,designHistoryIndex:r,pageIdxList:s,fileExt:v,isTransparentBackground:g,isJpg:T,isWebDpi:C,rasterize:S},t.next=72,n.doDownload(a,i,x);case 72:m.a.moveVirtualPage(n.downloadParam.isApplyHighResolution?m.c.HQ_DOWNLOAD_COMPLETE:m.c.DOWNLOAD_COMPLETE),y.b.post("/api/download/log",{data:{designIdx:w,requestType:n.downloadParam.isApplyHighResolution?be.HIGH_QUALITY:be.LOW_QUALITY,type:P?be.HIGH_QUALITY:be.LOW_QUALITY,pages:s.join(",")}}).catch(function(e){return console.error(e)}),t.next=79;break;case 76:t.prev=76,t.t5=t.catch(52),oe.a.imageProcessFailureEvent();case 79:case"end":return t.stop()}},t,null,[[12,29,33,41],[34,,36,40],[52,76]])}));return function(e,n){return t.apply(this,arguments)}}(),this.downloadParam=t}var t,n,a,i,r;return p()(e,[{key:"saveDesign",value:(r=c()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.saveLatest({categoryIdx:U.a.getSaveCategoryIdx()});case 2:return e.abrupt("return",M.a.get().getLatestDesignHistoryIdx());case 3:case"end":return e.stop()}},e)})),function(){return r.apply(this,arguments)})},{key:"rollback",value:function(e,t){}},{key:"recycle",value:function(){}},{key:"getFileExtension",value:function(){return this.downloadParam.selectedFileType}},{key:"doDownload",value:(i=c()(o.a.mark(function e(t,n,a){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.isImpDownload){e.next=12;break}return e.prev=1,e.next=4,this.doImpDownload(t,a);case 4:$.a.instance.dispatch(new Te(this.getFileExtension())),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(1),e.t0;case 10:e.next=27;break;case 12:return e.prev=12,oe.a.showDownloadWaitingUI(),e.next=16,this.doBrowserDownload(t,a,n);case 16:e.next=27;break;case 18:if(e.prev=18,e.t1=e.catch(12),oe.a.hideDownloadWaitingUI(),Ae.FAIL_COUNT++,!E.a.getUser().isLogin()){e.next=25;break}return e.next=25,D.a.save({categoryIdx:U.a.getSaveCategoryIdx()}).catch(function(){});case 25:throw!Ee.a.isChromiumBrowser()&&Ae.FAIL_COUNT>=2?oe.a.showDownloadFailureUIIE():oe.a.imageProcessFailureEvent(),e.t1;case 27:case"end":return e.stop()}},e,this,[[1,7],[12,18]])})),function(e,t,n){return i.apply(this,arguments)})},{key:"doImpDownload",value:(a=c()(o.a.mark(function e(t,n){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=!0,0===n.pixabayImagekeys.length){e.next=5;break}return e.next=4,N.d.downloadComplete(n.pixabayImagekeys);case 4:a=e.sent;case 5:if(a){e.next=9;break}return oe.a.showNotReadyToDownloadPopup(),e.abrupt("return");case 9:return e.next=11,oe.a.downloadByImageProcessor({designTitle:n.title,designIdx:n.designIdx,designHistoryIndex:n.designHistoryIndex,pageIdxList:n.pageIdxList,fileName:n.title,fileExt:n.fileExt,backgroundTransparent:n.isTransparentBackground?0:1,printScale:this.downloadParam.printScale,printTest:this.downloadParam.isForceHighResolution,dpi:n.isWebDpi?ke.a.DEFAULT_DPI:z.a.getPrintDPI(),isImgCombine:this.downloadParam.isImgCombine,isWebFormat:n.isWebDpi,rasterize:n.rasterize});case 11:case"end":return e.stop()}},e,this)})),function(e,t){return a.apply(this,arguments)})},{key:"doBrowserDownload",value:(n=c()(o.a.mark(function e(t,n,a){var i,r,s,c,u,l,h,p,m,f,g,v,y,E,I;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,i=[],r=!0,s=!1,c=void 0,e.prev=5,u=n.pageIdxList[Symbol.iterator]();case 7:if(r=(l=u.next()).done){e.next=19;break}return h=l.value,p=t.pages[h],m=p.sheetSize,e.next=13,p.renderThumbnail(m.width,m.height,1,n.isTransparentBackground,n.isJpg);case 13:f=e.sent,g="".concat(n.title,"_").concat(p.pageIdx+1,".").concat(n.fileExt),i.push({imgDataSrc:f,fileName:g});case 16:r=!0,e.next=7;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(5),s=!0,c=e.t0;case 25:e.prev=25,e.prev=26,r||null==u.return||u.return();case 28:if(e.prev=28,!s){e.next=31;break}throw c;case 31:return e.finish(28);case 32:return e.finish(25);case 33:return W.a.getUserSetting().adminMode||W.a.getUserSetting().devMode?(E=a.option.pageSize,v=new d.a(we.a.getPixel(E.width,E.dpi,E.unit),we.a.getPixel(E.height,E.dpi,E.unit)),y=E.dpi|ke.a.DEFAULT_DPI):(I=t.pages[0].sheetSize,v=new d.a(I.width,I.height),y=ke.a.DEFAULT_DPI),e.next=36,oe.a.downloadByBrowser({imgParamList:i,pageSize:v,dpi:y,fileName:n.title,fileExt:n.fileExt});case 36:e.next=41;break;case 38:throw e.prev=38,e.t1=e.catch(0),e.t1;case 41:case"end":return e.stop()}},e,null,[[0,38],[5,21,25,33],[26,,28,32]])})),function(e,t,a){return n.apply(this,arguments)})}],[{key:"getDownloadPages",value:function(e,t){var n=[];return e.length===t.length?n=e.slice():t.forEach(function(t){return n.push(e[t])}),n}},{key:"existHighResolutionAcceptableItemInPages",value:(t=c()(o.a.mark(function t(n,a){var i,r,s,c,u,l,h,p,d,m,g,v,y;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.getDownloadPages(n,a),t.next=3,f.b.fetch(i,"original");case 3:r=!0,s=!1,c=void 0,t.prev=6,u=i[Symbol.iterator]();case 8:if(r=(l=u.next()).done){t.next=41;break}h=l.value,p=!0,d=!1,m=void 0,t.prev=13,g=h.getAllSingleItems()[Symbol.iterator]();case 15:if(p=(v=g.next()).done){t.next=24;break}return y=v.value,t.next=19,y.isHighResolutionApplicable();case 19:if(!t.sent){t.next=21;break}return t.abrupt("return",!0);case 21:p=!0,t.next=15;break;case 24:t.next=30;break;case 26:t.prev=26,t.t0=t.catch(13),d=!0,m=t.t0;case 30:t.prev=30,t.prev=31,p||null==g.return||g.return();case 33:if(t.prev=33,!d){t.next=36;break}throw m;case 36:return t.finish(33);case 37:return t.finish(30);case 38:r=!0,t.next=8;break;case 41:t.next=47;break;case 43:t.prev=43,t.t1=t.catch(6),s=!0,c=t.t1;case 47:t.prev=47,t.prev=48,r||null==u.return||u.return();case 50:if(t.prev=50,!s){t.next=53;break}throw c;case 53:return t.finish(50);case 54:return t.finish(47);case 55:return t.abrupt("return",!1);case 56:case"end":return t.stop()}},t,null,[[6,43,47,55],[13,26,30,38],[31,,33,37],[48,,50,54]])})),function(e,n){return t.apply(this,arguments)})}]),e}();!function(e){e.HIGH_QUALITY="HIGH_QUALITY",e.LOW_QUALITY="LOW_QUALITY"}(be||(be={}))},367:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var a=n(0),i=n.n(a),r=n(1),o=n.n(r),s=n(226),c=n(225),u=n(224),l=n(16),h=n(43),p=function(){function e(){i()(this,e)}return o()(e,null,[{key:"getPageSize",value:function(){var e=new h.a(h.a.DEFAULT_PAGE_SIZE,h.a.DEFAULT_PAGE_SIZE,h.a.DEFAULT_UNIT,h.a.DEFAULT_DPI);return s.a.instance.option&&s.a.instance.option.pageSize&&(e=s.a.instance.option.pageSize),s.a.instance.option&&s.a.instance.option.pageSize||c.a.instance.dispatch(new u.c(function(t){s.a.instance.option.initSizeByMeta(t),e=s.a.instance.option.pageSize})),e}},{key:"isWebTemplate",value:function(){return e.getPageSize().unit===l.a.PX}}]),e}()},368:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var a=n(0),i=n.n(a),r=n(1),o=n.n(r),s=n(10),c=n(261),u=function(){function e(){i()(this,e)}return o()(e,[{key:"initialize",value:function(){this.makeElement()}},{key:"makeElement",value:function(){var e=this.makeCloseButtonElement(),t=this.makePopupElement();t.appendChild(e),t.appendChild(this.makeContentWrapperElement()),t.classList.add(c.a.SCREEN_OUT);var n=this.makeWrapperElement();return n.appendChild(t),n}},{key:"makeWrapperElement",value:function(){var e=this.wrap=document.createElement("div");return e.className=c.a.WRAP,e}},{key:"makePopupElement",value:function(){var e=this.popup=document.createElement("div");return e.className=c.a.POPUP,e}},{key:"makeContentWrapperElement",value:function(){var e=document.createElement("div");return e.className=c.a.CONTENT_WRAP,e.appendChild(this.makeContentElement()),e}},{key:"makeContentElement",value:function(){var e=this.content=document.createElement("div");return e.className=c.a.CONTENT,e}},{key:"makeCloseButtonElement",value:function(){var e=this,t=this.closeButton=document.createElement("div");return t.className=c.a.POPUP_CLOSE_BTN,Object(s.setToolsIcon)(t,s.ToolsIcon.CLOSE),t.addEventListener("click",function(){e.closeByButton(),e.close()}),t}},{key:"open",value:function(){var e=this;this.updateUI(),document.body.appendChild(this.wrap),window.setTimeout(function(){return e.popup.classList.remove(c.a.SCREEN_OUT)},1)}},{key:"close",value:function(){this.wrap.parentElement&&(this.popup.classList.add(c.a.SCREEN_OUT),this.wrap.parentElement.removeChild(this.wrap))}},{key:"closeByButton",value:function(){}},{key:"isOpened",value:function(){return Boolean(this.wrap.parentElement)}}]),e}()},369:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n(0),i=n.n(a),r=n(1),o=n.n(r),s=function(){function e(){i()(this,e)}return o()(e,null,[{key:"openByNewTab",value:function(e){window.open(e,"_blank")}}]),e}()},370:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var a=n(0),i=n.n(a),r=n(1),o=n.n(r),s=n(345),c=n(261),u=function(){function e(){i()(this,e)}return o()(e,null,[{key:"clickElement",value:function(e){e&&(e.classList.add(c.a.EASTER_EGG),e.classList.contains(c.a.RUNNING_PROGRESS_BAR_BACKGROUND)?this.removeEasterEggAfterTimeDelay(e):e.classList.contains(c.a.RUNNING_PROGRESS_BAR_CHARACTER)?this.removeEasterEggAfterTimeDelay(e):e.classList.contains(c.a.SUCCESS_CHARACTER_LEFT_HAND)||e.classList.contains(c.a.SUCCESS_CHARACTER_RIGHT_HAND)||e.classList.contains(c.a.SUCCESS_CHARACTER_CLAP_EFFECT)?this.removeEasterEggAfterTimeDelay(e):e.classList.contains(c.a.FAILURE_CHARACTER_CRYING)?this.removeEasterEggAfterTimeDelay(e):e.classList.contains(c.a.EMAIL_RECEIVE_SUCCESS_CHARACTER)?this.removeEasterEggAfterTimeDelay(e):e.classList.contains(c.a.EMAIL_RECEIVE_FAILURE_CHARACTER)&&this.removeEasterEggAfterTimeDelay(e))}},{key:"removeEasterEggAfterTimeDelay",value:function(e){return new s.a(this.TIME_OUT_END_DELAY,function(){return e.classList.remove(c.a.EASTER_EGG)})}}]),e}();u.TIME_OUT_END_DELAY=1e3},375:function(e,t,n){"use strict";n.d(t,"a",function(){return y});var a=n(0),i=n.n(a),r=n(1),o=n.n(r),s=n(6),c=n.n(s),u=n(3),l=n.n(u),h=n(9),p=n.n(h),d=n(7),m=n.n(d),f=n(248),g=n(8),v=n(445),y=function(e){function t(e,n){var a,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return i()(this,t),(a=c()(this,l()(t).call(this,"div",[g.a.SVG_COLOR_PICKER_ITEM]))).listener=function(e){},a.selectedIndex=-1,a.canNotAppend=!1,a.colorListener=e,a.titleKey=n,a.useTransparent=r,a.onStartChangeColor=o,a.onFinishChangeColor=s,a}return m()(t,e),o()(t,[{key:"onCreateView",value:function(){var e=this;p()(l()(t.prototype),"onCreateView",this).call(this),this.colorControl=new v.a(this.colorListener,this.useTransparent,!0,this.onStartChangeColor,this.onFinishChangeColor),this.colorControl.callback=function(){return e.callbackCloseColorPickerPopup()};var n=document.createElement("label");n.innerText=this.titleKey,this.container.appendChild(n);var a=document.createElement("div");a.className=g.a.VALUE_ELEMENT,this.container.appendChild(a),this.valueElement=a,this.addEventListener()}},{key:"getColorPickerPopup",value:function(){return this.onCreateViewIfNotCreated(),this.colorControl.getPopup()}},{key:"updateUI",value:function(e){var t=this;null!=e.active&&(this.active=!0===e.active);var n=function(e){if(e.shiftKey){var n=prompt("format : #rgb, rgb... ex)#ff7362, 4285f4");if(n){var a=6===n.length?"#"+n:n;t.setColor(a.toUpperCase())}}},a=document.createDocumentFragment(),i=-1,r=this;e.colorMap.forEach(function(o,s){i++;var c,u=document.createElement("button");u.className=g.a.COLOR_ELEMENT,u.setAttribute("data-color-link-idx",""+s),u.setAttribute("data-color",o),c=o?8===o.length?"00"===o.substr(6,2)?"":"#"+o.substr(0,6):9===o.length&&"#"===o.substr(0,1)?"00"===o.substr(7,2)?"":o.substr(0,7):o:o,u.style.background=c,t.colorControl.updateUI({value:u.style.background,hideTransparent:e.hideTransparent,hideChangeSameColors:e.hideChangeSameColors});var l=document.createElement("div");l.className=g.a.COLOR_BUTTON,r.selectedIndex>-1&&r.selectedIndex===i&&l.classList.add(g.a.ACTIVE),l.appendChild(u),l.addEventListener("dblclick",n),a.appendChild(l),u.style.backgroundColor?l.removeAttribute("data-transparent"):l.setAttribute("data-transparent","true")}),this.valueElement.innerHTML="",this.valueElement.appendChild(a),this.lastRenderParam=e}},{key:"callbackCloseColorPickerPopup",value:function(){this.selectedIndex=-1,this.valueElement&&this.valueElement.childNodes.forEach(function(e){return e.classList.remove(g.a.ACTIVE)})}},{key:"addEventListener",value:function(){var e=this;$(this.container).on("mouseup",".".concat(g.a.COLOR_BUTTON),function(t){var n=this;if(e.active){var a=e.colorControl.toHexString($(this.children[0]).data("colorLinkIdx")).substr(0,7).toLowerCase();e.colorControl.setOriginColor(a);var i=e.lastRenderParam.colorMap.get(a),r=$(this).offset().left+this.offsetWidth/2,o=$(this).offset().top+this.offsetHeight/2;e.colorControl.openColorControl({value:i,hideTransparent:e.lastRenderParam.hideTransparent,canNotAppend:e.canNotAppend},r,o),e.lastSelectOriginColor=a,e.valueElement.childNodes.forEach(function(t,a){t===n&&(e.selectedIndex=a)}),this.parentElement&&(this.parentElement.childNodes.forEach(function(e){e.classList.remove(g.a.ACTIVE)}),this.classList.add(g.a.ACTIVE))}return!1})}},{key:"setColor",value:function(e){this.colorListener(this.lastSelectOriginColor,e)}},{key:"setOriginColor",value:function(e){this.colorControl.setOriginColor(e)}}]),t}(f.a)},376:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"e",function(){return r}),n.d(t,"c",function(){return o}),n.d(t,"b",function(){return s}),n.d(t,"f",function(){return c}),n.d(t,"d",function(){return u});var a=n(224),i=(a.a.SVG_LAYER_SELECT,a.a.SVG_LAYER_COLOR,{groupName:"shadow",name:"active",actionType:a.a.SVG_SHADOW_ACTIVE}),r={groupName:"shadow",name:"color",actionType:a.a.SVG_SHADOW_COLOR,timeout:3e3},o={groupName:"shadow",name:"angle",actionType:a.a.SVG_SHADOW_ANGLE,timeout:3e3},s={groupName:"shadow",name:"alpha",actionType:a.a.SVG_SHADOW_ALPHA,timeout:3e3},c={groupName:"shadow",name:"distance",actionType:a.a.SVG_SHADOW_DISTANCE,timeout:3e3},u={groupName:"shadow",name:"blur",actionType:a.a.SVG_SHADOW_BLUR,timeout:3e3}},377:function(e,t,n){"use strict";n.d(t,"b",function(){return z}),n.d(t,"a",function(){return H});var a=n(6),i=n.n(a),r=n(3),o=n.n(r),s=n(7),c=n.n(s),u=n(2),l=n.n(u),h=n(4),p=n.n(h),d=n(0),m=n.n(d),f=n(1),g=n.n(f),v=n(10),y=n(8),E=n(86),I=n(281),T=n(376),k=n(228),w=n(353),C=n(400),S=n(230),A=n(259),b=n(244),L=n(277),P=n(314),x=n(225),_=n(227),R=n(338),N=n(320),M=n(242),D=n(251),O=n(512),U=n(278),B=n(273),G=n(375),V=n(315),F=n(67),z=function(){function e(){var t=this;m()(this,e),this.limitedFileSize=100;var n=new M.g;n.addCustomClass(y.a.SVG_ADMIN_VIEW),this.registUserSvgBtnTool=new O.a("선, 도형, 일러스트, 패턴배경 요소로 등록하기",y.a.SVG_ADMIN_VIEW_BUTTON),this.registUserSvgBtnTool.setOnClick(p()(l.a.mark(function e(){var n,a,i,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.registUserSvgBtnTool.getContainer().classList.contains("disabled")){e.next=3;break}return e.abrupt("return");case 3:return t.disableRegistButtons(),e.prev=4,e.next=7,N.a.isFileSizeValidate(t.currentItem,t.limitedFileSize);case 7:if(!e.sent){e.next=10;break}return t.showFileSizeWarningAlert(),e.abrupt("return");case 10:return e.next=12,R.a.getSvgFile(t.currentItem.svgData.key);case 12:return n=e.sent,e.next=15,N.a.uploadSvg(n,"".concat(t.currentItem.svgData.key,".svg"));case 15:return a=e.sent,i=C.a.createInstance(S.a.FIGURE,E.a.UNICORN),e.next=19,b.c.getSvgDataByKey(i.getKey(a));case 19:r=e.sent,x.a.instance.dispatch(new P.c(t.currentItem,r)),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(4),alert(e.t0);case 26:return e.prev=26,t.enableRegistButtons(),e.finish(26);case 29:case"end":return e.stop()}},e,null,[[4,23,26,29]])}))),n.add(this.registUserSvgBtnTool);var a=new M.g;a.addCustomClass(y.a.SVG_ADMIN_VIEW),this.registImageframeBtnTool=new O.a("이미지 프레임 요소로 등록하기",y.a.SVG_ADMIN_VIEW_BUTTON),this.registImageframeBtnTool.setOnClick(p()(l.a.mark(function e(){var n,a,i,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.registImageframeBtnTool.getContainer().classList.contains("disabled")){e.next=3;break}return e.abrupt("return");case 3:return t.disableRegistButtons(),e.prev=4,e.next=7,N.a.isFileSizeValidate(t.currentItem,t.limitedFileSize);case 7:if(!e.sent){e.next=10;break}return t.showFileSizeWarningAlert(),e.abrupt("return");case 10:return e.next=12,R.a.getSvgFile(t.currentItem.svgData.key);case 12:return n=e.sent,e.next=15,N.a.uploadImageframe(n,"".concat(t.currentItem.svgData.key,".svg"));case 15:return a=e.sent,i=C.a.createInstance(S.a.FIGURE,E.a.UNICORN),e.next=19,A.c.getImageframeDataByKey(i.getKey(a));case 19:r=e.sent,x.a.instance.dispatch(new P.b(t.currentItem,r)),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(4),alert(e.t0);case 26:return e.prev=26,t.enableRegistButtons(),e.finish(26);case 29:case"end":return e.stop()}},e,null,[[4,23,26,29]])}))),a.add(this.registImageframeBtnTool),this.registSvgWarnRow=new M.g,this.registSvgWran=new H,this.registSvgWarnRow.add(this.registSvgWran);var i=(new M.g).setBorderBottom();this.svgColorPickerTool=new G.a(function(e,n){return x.a.instance.dispatch(new P.e(e,n,t.currentItem))},"색상",!0,function(){return t.onStartChangeColor()},function(){return t.onFinishChangeColor()}),i.add(this.svgColorPickerTool),this.colorPickerRow=(new M.g).addCustomClass(y.a.COLOR_PICKER_ROW);var r=new M.c("그림자",function(e){return t.shadowCheckedEvent(e)}).setFlex().setBorderBottom();this.shadowColor=new U.a(function(e){t.shadowCheckedEvent(!0,e)},v.ToolsIcon.PENCIL,"색상",!1,!0).addClass(y.a.ACCORDION_ROW_COLOR),this.shadowAngle=new B.a(function(n){e.useSvgBasicEffectMapper([t.currentItem],T.c,n)},"방향",0,360,1,"°"),this.shadowAlpha=new B.a(function(n){e.useSvgBasicEffectMapper([t.currentItem],T.b,n)},"투명도",0,100,1,"%"),this.shadowDistance=new B.a(function(n){e.useSvgBasicEffectMapper([t.currentItem],T.f,n)},"거리",0,100,1),this.shadowBlur=new B.a(function(n){e.useSvgBasicEffectMapper([t.currentItem],T.d,n)},"흐림",0,100,1),r.addCustomClass(y.a.EFFECT_TOOLS),r.setPrevCallback(function(){return t.effectMenu.click()}),r.appendElement(this.shadowColor.getContainer()).add(this.shadowAngle,this.shadowAlpha,this.shadowDistance,this.shadowBlur),this.svgColorRow=i,this.accordionShadow=r,this.registUserSvgBtnToolRow=n,this.registImageframeBtnToolRow=a,this.makeSvgEffectRow()}return g()(e,[{key:"showFileSizeWarningAlert",value:function(){alert("크기 ".concat(this.limitedFileSize,"KB 이하의 파일을 업로드 해주세요."))}},{key:"disableRegistButtons",value:function(){this.registUserSvgBtnTool.getContainer().classList.add("disabled"),this.registImageframeBtnTool.getContainer().classList.add("disabled")}},{key:"enableRegistButtons",value:function(){this.registUserSvgBtnTool.getContainer().classList.remove("disabled"),this.registImageframeBtnTool.getContainer().classList.remove("disabled")}},{key:"makeSvgEffectRow",value:function(){var e=this;this.svgEffecRow=(new M.g).addCustomClass(y.a.ACCORDION_EFFECT_ROW),this.shadowMenu=new V.a("그림자",function(){return e.showShadowMenu.click()},function(t){return e.shadowCheckedEvent(t)}),this.svgEffecRow.add(this.shadowMenu)}},{key:"shadowCheckedEvent",value:function(t,n){var a=this;x.a.instance.groupingAction(function(){!0===t&&a.isDefaultColor(a.currentItem.props.getShadowColor(!0))&&a.isDefaultSize(a.currentItem.props.getShadowAngle(!0))&&a.isDefaultSize(a.currentItem.props.getShadowDistance(!0))&&a.isDefaultSize(a.currentItem.props.getShadowBlur(!0))&&(e.useSvgBasicEffectMapper([a.currentItem],T.c,315,!1),e.useSvgBasicEffectMapper([a.currentItem],T.b,50,!1),e.useSvgBasicEffectMapper([a.currentItem],T.f,12,!1),e.useSvgBasicEffectMapper([a.currentItem],T.d,8,!1)),e.useSvgBasicEffectMapper([a.currentItem],T.a,t),n&&e.useSvgBasicEffectMapper([a.currentItem],T.e,n)})}},{key:"makeMobileToolbox",value:function(){return this.toolTopContents=D.a.makeToolboxTopContentsWrapper(),this.toolTopContents.appendChild(this.svgColorPickerTool.container),D.a.setEventSvgColorTool(this.svgColorPickerTool,this.colorPickerRow),this.effectMenu=D.a.makeButtonShowToolsRow("효과",this.svgEffecRow),this.toolTopContents.appendChild(this.effectMenu),this.showShadowMenu=D.a.makeButtonShowToolsAccordionRow("그림자",this.accordionShadow),this.showShadowMenu.classList.add(y.a.HIDE),this.toolTopContents.appendChild(this.showShadowMenu),this.toolTopContents}},{key:"updateUI",value:function(e,t){t&&this.registSvgWran.updateUI(e);var n=new Map,a=!0,i=!1,r=void 0;try{for(var o,s=this.currentItem.getEditableOriginColors()[Symbol.iterator]();!(a=(o=s.next()).done);a=!0){var c=o.value;this.currentItem.props.setCurrentOriginColor(c),n.set(c,this.currentItem.props.getColor())}}catch(e){i=!0,r=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw r}}this.svgColorPickerTool.updateUI({colorMap:n}),this.accordionShadow.updateUI(e.props.isActiveShadow()),this.shadowColor.updateUI({value:e.props.getShadowColor(!0),active:!0}),this.shadowAngle.updateUI({value:e.props.getShadowAngle(!0),active:e.props.isActiveShadow()}),this.shadowAlpha.updateUI({value:e.props.getShadowAlpha(!0),active:e.props.isActiveShadow()}),this.shadowDistance.updateUI({value:e.props.getShadowDistance(!0),active:e.props.isActiveShadow()}),this.shadowBlur.updateUI({value:e.props.getShadowBlur(!0),active:e.props.isActiveShadow()}),this.shadowMenu.updateUI(e.props.isActiveShadow())}},{key:"onStartChangeColor",value:function(){this.currentItem.setStatus(k.g.LAZY)}},{key:"onFinishChangeColor",value:function(){this.currentItem&&this.currentItem.setStatus(k.g.CHANGE)}},{key:"isDefaultColor",value:function(e){return e===I.a.RGB}},{key:"isDefaultSize",value:function(e){return e===I.a.NUMBER}},{key:"makeToolboxRowContents",value:function(){return[{row:this.registUserSvgBtnToolRow,priority:301,viewType:0},{row:this.registImageframeBtnToolRow,priority:302,viewType:0},{row:this.registSvgWarnRow,priority:303,viewType:0},{row:this.svgColorRow,priority:600,viewType:0},{row:this.accordionShadow,priority:800,viewType:0},{row:this.svgEffecRow,priority:810,viewType:0},{row:this.colorPickerRow,priority:820,viewType:0}]}},{key:"updateToolboxRowContents",value:function(e,t){var n=t.renderedItem&&t.renderedItem instanceof w.a,a=_.a.getUserSetting().adminMode&&t.isAdminEditView;F.a.isMobilePortraitSize()?(this.toolTopContents.insertBefore(this.svgColorPickerTool.container,this.effectMenu),this.svgColorPickerTool.canNotAppend=!0):(this.svgColorRow.container.appendChild(this.svgColorPickerTool.container),this.svgColorPickerTool.canNotAppend=!1);var i=n&&t.renderedItem.getEditableOriginColors().length>0&&!a;this.svgColorRow.rowVisible=i,this.accordionShadow.rowVisible=n&&!t.isAdminEditView,this.registUserSvgBtnToolRow.rowVisible=n&&a,this.registImageframeBtnToolRow.rowVisible=n&&a&&t.renderedItem.getOriginColors().length>0,this.registSvgWarnRow.rowVisible=n&&a,this.svgEffecRow.rowVisible=n&&!a&&F.a.isMobilePortraitSize(),this.colorPickerRow.rowVisible=n&&!a&&F.a.isMobilePortraitSize();var r=n&&!t.isAdminEditView&&!t.renderedItem.isLock();return D.a.setContentsVisible(this.toolTopContents,r),D.a.setContentsVisible(this.colorMenu,i),n?(this.currentItem=t.renderedItem,this.updateUI(this.currentItem,t.isAdminEditView)):this.currentItem=null,!0}}],[{key:"useSvgBasicEffectMapper",value:function(e,t,n){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];x.a.instance.dispatch(new L.b(e,e,t.actionType,t.groupName,t.name,n,a,t.timeout))}}]),e}(),H=function(e){function t(){var e;return m()(this,t),(e=i()(this,o()(t).call(this))).container.className=y.a.REGIST_SVG_WARN,e}var n;return c()(t,e),g()(t,[{key:"updateUI",value:(n=p()(l.a.mark(function e(t){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.getSvgSize(t);case 2:(n=e.sent)>10?(this.container.innerText="SVG 용량이 너무 큽니다. (".concat(n,"KB)\n권장크기 : 10KB 이하"),this.container.style.display="block"):this.container.style.display="none";case 4:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})}]),t}(M.d)},400:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a,i=n(6),r=n.n(i),o=n(3),s=n.n(o),c=n(7),u=n.n(c),l=n(0),h=n.n(l),p=n(1),d=n.n(p),m=n(86),f=n(313),g=n(341),v=n(230),y=n(255),E=function(){function e(t){h()(this,e),this.repositoryType=t}return d()(e,[{key:"getDropEventKey",value:function(e){return this.getKey(e)}}],[{key:"getSSL",value:function(e){return e.replace(/^http:\/\//i,"https://")}}]),e}();!function(e){e.createInstance=function(e,r){switch(e){case v.a.MOCKUP:case v.a.TEXT:case v.a.GRID:case v.a.COMBINATION:case v.a.STYLE:return new t(r);case v.a.PHOTO:return new l(r);case v.a.BITMAP:case v.a.IMAGE:case v.a.BACKGROUND_IMAGE:return new n(r);case v.a.TEMPLATE:return new a(r);case v.a.DESIGN:return new i;case v.a.SVG:case v.a.GRAPHIC:case v.a.LINE:case v.a.FIGURE:case v.a.ILLUST:case v.a.BACKGROUND_PATTERN:return new o(r);case v.a.TEMPLATE_STYLE:return new p(r);case v.a.FRAME:return new c(r);case v.a.PIXABAY:return new I(r);default:throw Error("존재하지 않는 리소스 타입")}};var t=function(e){function t(e){return h()(this,t),r()(this,s()(t).call(this,e))}return u()(t,e),d()(t,[{key:"getThumb",value:function(e){return e.thumb300Url}},{key:"getKey",value:function(e){return e.idx}}]),t}(E),n=function(e){function t(e){return h()(this,t),r()(this,s()(t).call(this,e))}return u()(t,e),d()(t,[{key:"getThumb",value:function(e){return f.a.getThumbnail(this.getKey(e))}},{key:"getKey",value:function(e){return e.id}}]),t}(E),a=function(e){function t(e){return h()(this,t),r()(this,s()(t).call(this,e))}return u()(t,e),d()(t,[{key:"getThumb",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(this.repositoryType){case m.a.BIZHOWS:return E.getSSL(e.imgURL0);default:throw Error("잘못된 repositoryType : ".concat(this.repositoryType))}}},{key:"getKey",value:function(e){switch(this.repositoryType){case m.a.BIZHOWS:return e.designIdx;case m.a.UNICORN:return e.idx;default:throw Error("잘못된 repositoryType : ".concat(this.repositoryType))}}},{key:"getDropEventKey",value:function(e){switch(this.repositoryType){case m.a.BIZHOWS:return e.cmdtIdx>0?e.cmdtIdx:e.pkName;case m.a.UNICORN:return e.idx;default:throw Error("잘못된 repositoryType : ".concat(this.repositoryType))}}}]),t}(E);e.TemplateResourceData=a;var i=function(e){function t(){return h()(this,t),r()(this,s()(t).call(this,m.a.UNICORN))}return u()(t,e),d()(t,[{key:"getThumb",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];throw Error("지금은 안쓰는파일 'ㅡ'; 삭제직전 최종 확인중.")}},{key:"getKey",value:function(e){return e.idx}}]),t}(E);e.UserDesignResourceData=i;var o=function(e){function t(e){return h()(this,t),r()(this,s()(t).call(this,e))}return u()(t,e),d()(t,[{key:"getThumb",value:function(e){return e.thumb}},{key:"getKey",value:function(e){return e.key}}]),t}(E),c=function(e){function t(e){return h()(this,t),r()(this,s()(t).call(this,e))}return u()(t,e),d()(t,[{key:"getThumb",value:function(e){return e.thumb}},{key:"getKey",value:function(e){return e.key}}]),t}(E),l=function(e){function t(e){return h()(this,t),r()(this,s()(t).call(this,e))}return u()(t,e),d()(t,[{key:"getThumb",value:function(e){return y.b.getUrl(e.thumb)}},{key:"getKey",value:function(e){return e.idx}}]),t}(E),p=function(e){function t(e){return h()(this,t),r()(this,s()(t).call(this,e))}return u()(t,e),d()(t,[{key:"getThumb",value:function(e){return e.thumb}},{key:"getKey",value:function(e){return e.idx}}]),t}(E),I=function(e){function t(e){return h()(this,t),r()(this,s()(t).call(this,e))}return u()(t,e),d()(t,[{key:"getThumb",value:function(e){return e.previewURL}},{key:"getKey",value:function(e){return g.a.getPixabayKeyWithId(e.id)}}]),t}(E)}(a||(a={}))},401:function(e,t,n){"use strict";n.d(t,"a",function(){return V}),n.d(t,"b",function(){return F});var a=n(6),i=n.n(a),r=n(3),o=n.n(r),s=n(7),c=n.n(s),u=n(2),l=n.n(u),h=n(4),p=n.n(h),d=n(0),m=n.n(d),f=n(1),g=n.n(f),v=n(275),y=n(86),E=n(46),I=n(41),T=n(44),k=n(236),w=n(391),C=n(307),S=n(285),A=n(344),b=n(230),L=n(305),P=n(317),x=n(403),_=n(351),R=n(136),N=n(426),M=n(224),D=n(226),O=n(228),U=n(520),B=n(329),G=function(){function e(t,n,a,i){m()(this,e),this.doSaveQueue=!0,this.isActionGroupEquals=function(e){return!1},this.concat=function(e){return!1},this.changeDesign=function(){return!0},this.isLastSavedAction=!1,this.targetPageIdx=t,this.originSheetSize=n,this.noChangeGuideline=a,this.searchWord=i}return g()(e,[{key:"commit",value:function(e,t,n){var a=this;if(k.a.unselectAllItems(),this.newPage)return n.canvasAreaVC.scrollToPage(this.targetPageIdx),e.pages[this.targetPageIdx]=this.newPage,n.canvasAreaVC.updatePagingManager(),void n.renderAll(e,t);this.oldPage=e.pages[this.targetPageIdx],N.a.open("디자인을 불러오고 있습니다.<br/>잠시만 기다려주세요.","적용 취소"),this.loadPage(e).then(function(){var t=p()(l.a.mark(function t(i){var r,o,s;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.sheetSize.clone(),a.originSheetSize&&(i.changeSheetSize(a.originSheetSize,v.a.FIT),e.replacePage(i,a.targetPageIdx),i=e.pages[a.targetPageIdx],r=i.sheetSize.clone()),i.changeSheetSize(a.oldPage.sheetSize),a.noChangeGuideline&&(i.guidelineFactoryInfos=a.oldPage.guidelineManager.getGuidelineFactoryInfos()),e.replacePage(i,a.targetPageIdx),N.a.close(),o=new U.a(r,!1,a.targetPageIdx,v.a.FIT),n.canvasAreaVC.printout.clearAllAlertGuide(),n.showPrintoutConfirmView(!1),(s=a.oldPage.sheetSize.width/a.oldPage.sheetSize.height==r.width/r.height)&&(o.selectedType=v.a.FIT,n.canvasAreaVC.printout.removeGuideVCByPageId(a.oldPage.pageId)),U.b.setAlignConfig(o),t.next=14,U.b.alignItems(!0,!1);case 14:_.a.loadPageResource(i,a.getRepositoryType()).then(function(){_.a.renderPage(i),_.a.renderOther(),!s&&e.hasItems()&&U.b.openPopup(a.oldPage.sheetSize,r)}).catch(function(e){return console.error(e)}),a.doAfterLoad();case 16:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()).catch(function(e){console.error(e),N.a.close()}),k.a.unselectAllItems()}},{key:"doAfterLoad",value:function(){w.a.containsUnsupportedLicenseType(O.h.UNSUPPORTED_LICENSE)&&C.c.showAutoClosePusher(O.h.UNSUPPORTED_LICENSE)}},{key:"rollback",value:function(e,t,n){n.canvasAreaVC.scrollToPage(this.targetPageIdx),this.newPage=e.pages[this.targetPageIdx],e.pages[this.targetPageIdx]=this.oldPage,n.canvasAreaVC.syncPageRenderers(e.pages),k.a.unselectAllItems(),n.canvasAreaVC.updatePagingManager(),n.renderAll(e,t)}},{key:"recycle",value:function(){this.oldPage=null,this.newPage=null}}]),e}(),V=function(e){function t(e,n){var a,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:D.a.instance.renderPageIdx,s=arguments.length>3?arguments[3]:void 0;return m()(this,t),(a=i()(this,o()(t).call(this,r,s,!0))).actionType=M.a.TEMPLATE_PAGE_LOAD,a.isPageAction=!0,a.designParam=e,a.templatePageIdx=n,a}var n;return c()(t,e),g()(t,[{key:"loadPage",value:(n=p()(l.a.mark(function e(n){var a,i,r,o,s,c,u,h,p;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=P.a.makeDesignDC(this.designParam),e.next=3,a.load(L.b.LOADING_ITEM);case 3:return i=e.sent,a instanceof B.c&&(this.template=a.templateBean),r=i.pages[this.templatePageIdx],e.next=8,new S.a(r.getAllSingleItems(),this.designParam).commitAction(n);case 8:if(e.prev=8,o=r.reference,s=this.isPageAction?"페이지 선택":"템플릿 선택",c=this.isPageAction?" pageNo: ".concat(r.reference.templatePageNo):"",this.designParam.repositoryType!==y.a.UNICORN){e.next=20;break}if((u=this.designParam).resourceType!==b.a.TEMPLATE){e.next=18;break}return e.next=15,R.a.findOneTemplate(u.idx);case 15:h=e.sent,A.a.setTemplateTypeList(h.templateTypeList),A.a.setRefTemplateKey(String(u.idx));case 18:e.next=23;break;case 20:p=this.designParam,A.a.setTemplateTypeList([new I.c(null,void 0,void 0,void 0,"타입없음-비즈하우스")]),A.a.setRefTemplateKey(String(p.designIdx));case 23:t.copyPageInfoToLoadedPage(this.oldPage,r),E.a.sendEvent("템플릿 선택",s,"".concat(o.templateRepositoryType," - ").concat(o.templateKey).concat(c),!0),e.next=29;break;case 27:e.prev=27,e.t0=e.catch(8);case 29:return e.abrupt("return",r);case 30:case"end":return e.stop()}},e,this,[[8,27]])})),function(e){return n.apply(this,arguments)})},{key:"setTemplateAction",value:function(){return this.isPageAction=!1,this}},{key:"getRepositoryType",value:function(){return this.designParam.repositoryType}}],[{key:"copyPageInfoToLoadedPage",value:function(e,t){t.title=e.title}}]),t}(G),F=function(e){function t(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:D.a.instance.renderPageIdx;return m()(this,t),(n=i()(this,o()(t).call(this,a))).actionType=M.a.TEMPLATE_PAGE_LOAD,n.sheetUrl=e,n}var n,a;return c()(t,e),g()(t,[{key:"loadPage",value:(a=p()(l.a.mark(function e(n){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.loadPageFromSheetUrl(n,this.sheetUrl,this.targetPageIdx);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"getRepositoryType",value:function(){return y.a.UNICORN}}],[{key:"loadPageFromSheetUrl",value:(n=p()(l.a.mark(function e(t,n,a){var i,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.getXml(n);case 2:return i=e.sent.data,r=x.a.parseUnicornXML([i]).xml[0],e.next=6,t.parsePage(a,r);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e)})),function(e,t,a){return n.apply(this,arguments)})}]),t}(G)},402:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var a=n(0),i=n.n(a),r=n(1),o=n.n(r),s=n(6),c=n.n(s),u=n(3),l=n.n(u),h=n(9),p=n.n(h),d=n(7),m=n.n(d),f=n(8),g=function(e){function t(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return i()(this,t),(n=c()(this,l()(t).call(this,!0))).page=1,n.totalPageCount=1,n.action=e,n.pageSize=a,n}return m()(t,e),o()(t,[{key:"onCreateView",value:function(){p()(l()(t.prototype),"onCreateView",this).call(this),this.container=document.createElement("div"),this.container.className=f.a.PAGINATION,this.container.appendChild(this.makeRowDescLabel()),this.container.appendChild(this.makePrevBtn()),this.container.appendChild(this.makePageInputSection()),this.container.appendChild(this.makeNextBtn())}},{key:"makeRowDescLabel",value:function(){return this.pagingResultLabel=document.createElement("div"),this.pagingResultLabel.className=f.a.PAGING_RESULT,this.pagingResultLabel}},{key:"makePrevBtn",value:function(){var e=this;return this.prevBtn=document.createElement("button"),this.prevBtn.innerText="<",this.prevBtn.addEventListener("click",function(){e.prevBtn.classList.contains(f.a.DISABLE)||e.doAction(e.page-1)}),this.prevBtn}},{key:"makePageInputSection",value:function(){var e=document.createElement("div");return e.className=f.a.PAGE_INPUT,e.appendChild(this.makePageInput()),e.appendChild(this.makeSeparator()),e.appendChild(this.makeTotalPageLabel()),e}},{key:"makePageInput",value:function(){var e=this;return this.pageInput=document.createElement("input"),$(this.pageInput).on("change",function(){return e.doAction(Number(e.pageInput.value))}).on("keydown",function(e){return e.stopPropagation()}).on("focus",function(){return e.pageInput.select()}),this.pageInput}},{key:"makeSeparator",value:function(){var e=document.createElement("label");return e.innerText="/",e}},{key:"makeTotalPageLabel",value:function(){return this.totalPageLabel=document.createElement("label"),this.totalPageLabel}},{key:"makeNextBtn",value:function(){var e=this;return this.nextBtn=document.createElement("button"),this.nextBtn.innerText=">",this.nextBtn.addEventListener("click",function(){e.nextBtn.classList.contains(f.a.DISABLE)||e.doAction(e.page+1)}),this.nextBtn}},{key:"render",value:function(e){return this.onCreateViewIfNotCreated(),e?(this.pageSize=e.pageSize,this.totalRow=e.totalRow,e.page&&this.setPage(e.page,!1),this.setPagingResult(),this.setPrevBtn(),this.setNextBtn(),this.setTotalPageLabel(),this.container):(this.setPage(1),this.container)}},{key:"setPage",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t||0===this.totalRow?this.page=e:this.page=e*this.pageSize>this.totalRow?Math.ceil(this.totalRow/this.pageSize):e,this.pageInput.value=String(this.page)}},{key:"setPageSize",value:function(e){this.pageSize=e}},{key:"setPagingResult",value:function(){var e=this.pageSize*(this.page-1)+1,t=e+this.pageSize-1;this.pagingResultLabel.innerText="".concat(this.totalRow,"개 중 ").concat(e,"-").concat(Math.min(t,this.totalRow))}},{key:"setPrevBtn",value:function(){this.page>1?this.prevBtn.classList.remove(f.a.DISABLE):this.prevBtn.classList.add(f.a.DISABLE)}},{key:"setNextBtn",value:function(){this.pageSize*this.page<this.totalRow?this.nextBtn.classList.remove(f.a.DISABLE):this.nextBtn.classList.add(f.a.DISABLE)}},{key:"setTotalPageLabel",value:function(){this.totalPageCount=Math.ceil(this.totalRow/this.pageSize),this.totalPageLabel.innerText=String(this.totalPageCount)}},{key:"doAction",value:function(e){(isNaN(e)||e<=0)&&(e=this.page),this.setPage(e,!1),this.action(this.getPaginationParam())}},{key:"getPaginationParam",value:function(){return{page:this.page,pageSize:this.pageSize}}},{key:"getTotalRow",value:function(){return this.totalRow}},{key:"getTotalPageCount",value:function(){return this.totalPageCount}},{key:"getPageSize",value:function(){return this.pageSize}},{key:"increaseTotalCount",value:function(){this.totalRow++}}]),t}(n(31).a)},405:function(e,t,n){"use strict";var a=n(0),i=n.n(a),r=n(1),o=n.n(r),s=n(6),c=n.n(s),u=n(3),l=n.n(u),h=n(7),p=n.n(h),d=n(29),m=n(57),f=n(502),g=function e(t,n,a){i()(this,e),this.name=t,this.categories=n,this.backgroundPositionY=a},v=n(290),y=n(37),E=function(e){function t(){var e,n;i()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=c()(this,(e=l()(t)).call.apply(e,[this].concat(r)))).defaultCategory="전체",n.dataMap=new Map,n}return p()(t,e),o()(t,[{key:"addRecentlyUsedFont",value:function(e){var n=this.getRecentlyUsedList().map(function(e){return e.name});y.a.unshiftWithDistinct(n,e),n.splice(t.MAX_RECENTLY_USED_COUNT),this.setLocalStorage(m.b.RECENTLY_USED_FONT_FAMILY_LIST,JSON.stringify(n))}},{key:"setOriginFont",value:function(e){this.originFont=e}},{key:"getOriginFont",value:function(){return this.originFont}},{key:"getRecentlyUsedList",value:function(e){var t=this.getListByNames(this.getListFromLocalStorage(m.b.RECENTLY_USED_FONT_FAMILY_LIST));return e?t.slice(0,e):t}},{key:"getCurrentUsingList",value:function(){return this.getListByNames(f.a.getUsedFontFamilyList())}},{key:"getListByNames",value:function(e){var t=this;return e?e.map(function(e){return t.dataAll.get(e)}).filter(function(e){return null!=e}):[]}},{key:"getListAll",value:function(){return Array.from(this.dataAll.values())}},{key:"getCategoryList",value:function(){var e=this;if(!this.categoryList){var n=new Map;t.DEFAULT_CATEGORY_LIST.forEach(function(e){return n.set(e,!1)}),this.getListAll().forEach(function(e){return e.categories.forEach(function(e){return n.set(e,!0)})}),this.categoryList=[this.defaultCategory],n.forEach(function(t,n){t&&e.categoryList.push(n)})}return this.categoryList}},{key:"search",value:function(e,t){if(e=e?e.replace(/ /g,""):e,t===this.defaultCategory&&(t=""),!e&&!t)return this.getListAll();var n=this.getDataMapKey(e,t);if(this.dataMap.has(n))return this.dataMap.get(n);var a=this.getListAll().filter(function(n){return!(e&&!n.name.replace(/ /g,"").includes(e))&&!(t&&!n.categories.includes(t))});return this.dataMap.set(n,a),a}},{key:"getDataMapKey",value:function(e,t){return"".concat(e||"","__").concat(t||"")}},{key:"dataAll",get:function(){var e=this;return this._dataAll||(this._dataAll=new Map,v.a.getFontFamilyList().forEach(function(n,a){e._dataAll.set(n.value,new g(n.value,n.predicate?n.predicate.split(","):[],a*-t.THUMB_ROW_HEIGHT+t.THUMB_START_POSITION))})),this._dataAll}}]),t}(d.a);E.THUMB_ROW_HEIGHT=49,E.THUMB_START_POSITION=7,E.DEFAULT_CATEGORY_LIST=["고딕","명조","손글씨","붓글씨","제목","본문","복고","독특한"],E.MAX_RECENTLY_USED_COUNT=20;t.a=new E},434:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n(0),i=n.n(a),r=n(1),o=n.n(r),s=function(){function e(t,n,a){i()(this,e),this._bit=t,this._text=n,this._key=a,e._values.push(this)}return o()(e,[{key:"contain",value:function(e){return(e&this.bit)>0}},{key:"bit",get:function(){return this._bit}},{key:"text",get:function(){return this._text}},{key:"key",get:function(){return this._key}}],[{key:"values",value:function(){return this._values}},{key:"valueOf",value:function(e){var t=!0,n=!1,a=void 0;try{for(var i,r=this.values()[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var o=i.value;if(o.key===e)return o}}catch(e){n=!0,a=e}finally{try{t||null==r.return||r.return()}finally{if(n)throw a}}return null}},{key:"getBit",value:function(){for(var e=0,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];for(var i=0,r=n;i<r.length;i++){var o=r[i];e^=o.bit}return e}},{key:"getList",value:function(e){var t=[],n=!0,a=!1,i=void 0;try{for(var r,o=this.values()[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){var s=r.value;s.contain(e)&&t.push(s)}}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return t}},{key:"getInactiveBit",value:function(){var t=0,n=!0,a=!1,i=void 0;try{for(var r,o=this.values()[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){var s=r.value;s!==e.UNICORN&&(t^=s.bit)}}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return t}}]),e}();s._values=[],s.SMILECAT=new s(1,"스마일캣","SMILECAT"),s.CYWORLD=new s(2,"싸이월드","CYWORLD"),s.IPHONE=new s(4,"아이폰","IPHONE"),s.BIZHOWS=new s(8,"비즈하우스","BIZHOWS"),s.UNICORN=new s(16,"유니콘","UNICORN")},435:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var a=n(2),i=n.n(a),r=n(4),o=n.n(r),s=n(0),c=n.n(s),u=n(1),l=n.n(u),h=n(230),p=n(20),d=function(){function e(){c()(this,e)}var t,n,a,r,s;return l()(e,null,[{key:"insert",value:(s=o()(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.b.post("/api/my-collection",{data:t});case 2:case"end":return e.stop()}},e)})),function(e){return s.apply(this,arguments)})},{key:"delete",value:(r=o()(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.b.delete("/api/my-collection",{data:JSON.stringify(t),contentType:"application/json"});case 2:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)})},{key:"getList",value:(a=o()(i.a.mark(function e(t){var n,a,r,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.getListParam(t),a=this.getListUrl(n.fromAccountId),e.next=4,p.b.get("".concat(a,"?").concat($.param(n,!0)));case 4:return r=e.sent,o=r.data,e.abrupt("return",{list:o.list,pagination:o.pagination});case 7:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"getListParam",value:function(e){var t=[];if(e.resourceType)t.push(e.resourceType);else{var n=!0,a=!1,i=void 0;try{for(var r,o=h.b.values()[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){var s=r.value;t.push(s)}}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}}var c={resourceTypeList:t,page:e.page,pageSize:e.pageSize};if(e.category)if(e.category.idx>=0)c.categoryIdx=e.category.idx;else{var u=new Date;"최근 일주일"===e.category.text?u.setDate(u.getDate()-7):"최근 한달"===e.category.text?u.setMonth(u.getMonth()-1):u.setFullYear(u.getFullYear()-1),c.startDate=this.dateToString(u)}else c.categoryIdx=0;return e.keyword&&(c.keyword=e.keyword),e.fromAccountId&&0!==e.fromAccountId&&(c.fromAccountId=e.fromAccountId),c}},{key:"getListUrl",value:function(e){return e&&0!==e?"/api/my-collection/list-share":"/api/my-collection/list"}},{key:"dateToString",value:function(e){return e.toLocaleString("en-us",{year:"numeric",month:"2-digit",day:"2-digit"}).replace(/(\d+)\/(\d+)\/(\d+)/,"$3-$1-$2")}},{key:"getListByReferenceKeyList",value:(n=o()(i.a.mark(function e(t,n,a){var r,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/my-collection/list-by-reference-key-list",r={referenceKeyList:t,resourceType:n,repositoryType:a},e.next=4,p.b.get("".concat("/api/my-collection/list-by-reference-key-list","?").concat($.param(r,!0)));case 4:return o=e.sent,e.abrupt("return",o.data.list);case 6:case"end":return e.stop()}},e)})),function(e,t,a){return n.apply(this,arguments)})},{key:"findOne",value:(t=o()(i.a.mark(function e(t){var n,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=encodeURI($.param(t)),e.next=3,p.b.get("/api/my-collection/select?".concat(n));case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})}]),e}()},436:function(e,t,n){"use strict";var a;n.d(t,"a",function(){return a}),function(e){e.ACTIVE="ACTIVE",e.INACTIVE="INACTIVE",e.DELETED="DELETED"}(a||(a={}))},437:function(e,t,n){"use strict";n.d(t,"a",function(){return D}),n.d(t,"b",function(){return U});var a,i,r,o,s=n(2),c=n.n(s),u=n(4),l=n.n(u),h=n(0),p=n.n(h),d=n(1),m=n.n(d),f=n(6),g=n.n(f),v=n(3),y=n.n(v),E=n(9),I=n.n(E),T=n(7),k=n.n(T),w=n(323),C=n(226),S=n(276),A=n(325),b=n(70),L=n(37),P=n(11),x=n(19),_=n(44),R=n(32),N=n(110),M=n(227);!function(e){e[e.ORIGINAL=0]="ORIGINAL",e[e.LARGE=3]="LARGE",e[e.MEDIUM=2]="MEDIUM",e[e.SMALL=1]="SMALL"}(a||(a={})),function(e){e.DEFAULT="DEFAULT",e.BY_DESIGN_IDX="BY_DESIGN_IDX",e.BY_DESIGNER_ID="BY_DESIGNER_ID"}(i||(i={})),function(e){e[e.TEMPLATE=1]="TEMPLATE",e[e.THEME=2]="THEME"}(r||(r={})),function(e){e.GET_DESIGN_LIST_BY_DESIGN_TYPE="get_design_list_by_design_type",e.GET_DESIGN_LIST="get_design_list",e.GET_DESIGN="get_design"}(o||(o={}));var D=function(e){function t(e){var n;return p()(this,t),(n=g()(this,y()(t).call(this))).requestMode=i.DEFAULT,n.param=e,n}var n,s,u,h,d;return k()(t,e),m()(t,[{key:"setKeyword",value:function(e){this.keyword=e}},{key:"setTemplateParam",value:function(e){this.templateParam=e}},{key:"getTemplateParam",value:function(){return this.templateParam}},{key:"setLinked",value:function(e){this.linked=e}},{key:"fetchListInternal",value:(d=l()(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.requestMode,e.next=e.t0===i.BY_DESIGN_IDX?3:e.t0===i.BY_DESIGNER_ID?6:(e.t0,i.DEFAULT,9);break;case 3:return e.next=5,this.requestListByDesignIdx(t);case 5:return e.abrupt("return",e.sent);case 6:return e.next=8,this.requestListByDesignerId(t);case 8:return e.abrupt("return",e.sent);case 9:return e.next=11,this.requestListDefault(t);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}},e,this)})),function(e){return d.apply(this,arguments)})},{key:"requestListDefault",value:(h=l()(c.a.mark(function e(n){var a,i,r,o,s,u,l;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=x.a.getURL("/servlet/com.sure.smilecat.design.DesignApiServlet"),e.next=3,_.a.post(A.b,a,{data:n});case 3:return(i=e.sent).data=t.purifyURL(i.data),e.next=7,this.makeListItems(i.data);case 7:if(r=e.sent,o={items:r,totalRow:i.pagination.totalCount},r.length>0)try{s=this.getGTMLibData(),u=s.listTitle,l=s.category,S.a.sendImpressions({items:r,category:l,listTitle:u,pageNo:n.page_no,pageSize:n.page_size})}catch(e){}return e.abrupt("return",o);case 11:case"end":return e.stop()}},e,this)})),function(e){return h.apply(this,arguments)})},{key:"requestListByDesignIdx",value:(u=l()(c.a.mark(function e(n){var a,i;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a={items:[],totalRow:0},isNaN(n.designIdx)){e.next=16;break}return e.next=4,t.getBizhowsTemplate(n.designIdx,n.filter_type_by_miricanvas_link);case 4:if(!(i=e.sent)){e.next=11;break}return e.next=8,this.makeListItems([i]);case 8:e.t0=e.sent,e.next=12;break;case 11:e.t0=[];case 12:e.t1=e.t0,e.t2=i?1:0,a={items:e.t1,totalRow:e.t2},this.sendImpressions(n.page,n.pageSize,a.items,"인덱스",n.designIdx);case 16:return e.abrupt("return",a);case 17:case"end":return e.stop()}},e,this)})),function(e){return u.apply(this,arguments)})},{key:"requestListByDesignerId",value:(s=l()(c.a.mark(function e(n){var a,i,r,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=x.a.getURL("/servlet/com.sure.smilecat.design.DesignApiServlet"),e.next=3,_.a.post(O,a,{data:n});case 3:if(i=e.sent,r=t.purifyURL(i.data?i.data:[]),L.a.isEmpty(r)){e.next=11;break}return e.next=8,this.makeListItems(r);case 8:e.t0=e.sent,e.next=12;break;case 11:e.t0=[];case 12:return e.t1=e.t0,o={items:e.t1,totalRow:9999999},this.sendImpressions(n.page_no,n.page_size,o.items,"디자이너",n.designer_id),e.abrupt("return",o);case 16:case"end":return e.stop()}},e,this)})),function(e){return s.apply(this,arguments)})},{key:"getRequestParam",value:function(e){switch(this.requestMode){case i.BY_DESIGN_IDX:return this.getRequestParamByDesignIdx(e);case i.BY_DESIGNER_ID:return this.getRequestParamByDesignerId(e);case i.DEFAULT:default:return this.getRequestParamDefault(e)}}},{key:"getRequestParamByDesignIdx",value:function(e){return{designIdx:Number(this.keyword.substr(1)),page:e.page,pageSize:e.pageSize,filter_type_by_miricanvas_link:M.a.getUserSetting().adminMode&&this.linked?1:0}}},{key:"getRequestParamByDesignerId",value:function(e){var t={cmd:o.GET_DESIGN_LIST,designer_id:this.keyword.substr(1),page_no:e.page,page_size:e.pageSize,active:"Y",layout_type_id:"null",ratio_id:"null",template_category1:"null",category:"null",filter_type_by_miricanvas_link:M.a.getUserSetting().adminMode&&this.linked?1:0};switch(this.templateParam.templateType){case r.TEMPLATE:t.layout_type_id=this.templateParam.designKey1,t.ratio_id=this.templateParam.designKey2;break;case r.THEME:t.category=this.templateParam.designKey1,t.template_category1=this.templateParam.designKey2}return t}},{key:"getRequestParamDefault",value:function(e){var t={cmd:o.GET_DESIGN_LIST_BY_DESIGN_TYPE,design_key1:this.templateParam.designKey1,design_key2:this.templateParam.designKey2,template_type_code:this.templateParam.templateType,cate_main:[261,262],block_size:99999,page_size:e.pageSize,page_no:e.page,order_by_type_code:1,in_wish_list:!1,do_not_use_solr:!0,filter_type_by_miricanvas_link:M.a.getUserSetting().adminMode&&this.linked?1:0,thumb_size:a.LARGE};return L.a.isEmpty(this.templateParam.cateFilter)||(t.cate_filter=this.templateParam.cateFilter),P.b.isEmpty(this.keyword)||(t.keyword=encodeURIComponent(this.keyword)),t}},{key:"sendImpressions",value:function(e,t,n,a,i){if(a&&i&&n.length>0)try{var r="비즈템플릿 > ".concat(a," 검색"),o="비즈템플릿>".concat(a," 검색>").concat(i);this.setGTMLibData({listTitle:r,category:o,keyword:""+i}),S.a.sendImpressions({items:n,category:o,listTitle:r,pageNo:e,pageSize:t})}catch(e){}}},{key:"initRequestMode",value:function(){if(P.b.isEmpty(this.keyword))this.requestMode=i.DEFAULT;else switch(this.keyword.charAt(0)){case"#":this.requestMode=i.BY_DESIGN_IDX;break;case"@":this.requestMode=i.BY_DESIGNER_ID;break;default:this.requestMode=i.DEFAULT}}},{key:"makeListItems",value:function(e){var t=this;return e.map(function(e){return t.param.makeListItem(e)})}},{key:"getLibType",value:function(){return w.b.BIZ_TEMPLATE}},{key:"findBizItems",value:function(e){for(var t=isNaN(e.key)?e.key:Number(e.key),n=[],a=0,i=this.items.length;a<i;a++){var r=this.items[a];r.listItemData.dropEventKey===t&&n.push({idx:a,item:r})}return n}},{key:"getGTMItemData",value:function(e){try{var n=this.findBizItems(e);if(n.length>0){var a=this.getGTMLibData(),i=a.listTitle,r=a.category,o=n[0],s=o.item,c=o.idx;return s.getEECItemData(r,i,c+1)}return I()(y()(t.prototype),"getGTMItemData",this).call(this,e)}catch(e){}}},{key:"setGTMLibDataAuto",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{var t=C.a.instance.editorMainVC.leftPanelMainVC.menuMap.get("BIZ_TEMPLATE_LIB").templateTypeTool.label.innerText||"알수없음",n="비즈템플릿 > ".concat(t).concat(""!==e?":검색:"+e:""),a="비즈템플릿>".concat(t.replace(/ > /g,">"));this.setGTMLibData({listTitle:n,category:a,keyword:e})}catch(t){this.setGTMLibData({listTitle:"비즈템플릿 > 알수없음",category:"비즈템플릿>알수없음",keyword:e})}}},{key:"getKeyword",value:function(){return this.keyword}}],[{key:"getBizhowsTemplate",value:(n=l()(c.a.mark(function e(t){var n,a,i,r,s=arguments;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:-1,a={cmd:o.GET_DESIGN,designIdx:t,filter_type_by_miricanvas_link:n},i=x.a.getURL("/servlet/com.sure.smilecat.design.DesignApiServlet".concat("?",$.param(a))),e.next=5,_.a.get(A.a,i);case 5:if((r=e.sent).data&&r.data.designIdx){e.next=8;break}return e.abrupt("return",null);case 8:return L.a.isEmpty(r.data.imgUrlList)||(r.data.imgURL0=r.data.imgUrlList[0]),r.data.designTitle||(r.data.designTitle="".concat(r.data.designIdx," 번")),e.abrupt("return",r.data);case 11:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})},{key:"purifyURL",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.forEach(function(e){e.imgURL0&&(e.imgURL0=e.imgURL0.replace(/^http:\/\//i,"https://"))}),e}}]),t}(w.a),O=function(e){function t(){return p()(this,t),g()(this,y()(t).apply(this,arguments))}return k()(t,e),m()(t,[{key:"setData",value:function(e){this.data=e.data}},{key:"getErrorMsg",value:function(){return b.a.BIZHOWS_DESIGN_API}}]),t}(R.b);function U(){return[{name:"현수막/배너/실사출력",templateParamList:[{name:"가로 포스터형",designKey1:"poster",designKey2:"A-HORIZON",templateType:r.TEMPLATE,siteMapIdx:13843,sheetSize:new N.a(1260,891)},{name:"세로 포스터형",designKey1:"poster",designKey2:"A-VERTICAL",cateFilter:[26663],templateType:r.TEMPLATE,siteMapIdx:13843,sheetSize:new N.a(891,1260)},{name:"가로 현수막형",designKey1:"placard",designKey2:"tr_placard_hor",templateType:r.TEMPLATE,siteMapIdx:13843,sheetSize:new N.a(1e3,180)},{name:"세로 현수막형",designKey1:"placard",designKey2:"tr_placard_ver",templateType:r.TEMPLATE,siteMapIdx:13843,sheetSize:new N.a(180,1e3)},{name:"정사각 현수막형",designKey1:"placard",designKey2:"tr_placard_squ",templateType:r.TEMPLATE,siteMapIdx:13843,sheetSize:new N.a(800,800)},{name:"세로 배너형",designKey1:"banner",designKey2:"tr_banner_ver",templateType:r.TEMPLATE,siteMapIdx:13843,sheetSize:new N.a(200,600)}]},{name:"명함",templateParamList:[{name:"가로 명함",designKey1:"명함",designKey2:"tr_namecard_hor",templateType:r.THEME,siteMapIdx:14463,sheetSize:new N.a(940,540)},{name:"세로 명함",designKey1:"명함",designKey2:"tr_namecard_ver",templateType:r.THEME,siteMapIdx:14463,sheetSize:new N.a(540,940)}]},{name:"행택",templateParamList:[{name:"1:2",designKey1:"HANGTAG",designKey2:"RECT_1X2",templateType:r.THEME,siteMapIdx:26718,sheetSize:new N.a(400,800)},{name:"1:3",designKey1:"HANGTAG",designKey2:"RECT_1X3",templateType:r.THEME,siteMapIdx:26718,sheetSize:new N.a(200,600)},{name:"정사각형",designKey1:"HANGTAG",designKey2:"RECT_1X1",templateType:r.THEME,siteMapIdx:26718,sheetSize:new N.a(800,800)},{name:"원형",designKey1:"HANGTAG",designKey2:"CIRCLE_1X1",templateType:r.THEME,siteMapIdx:26718,sheetSize:new N.a(800,800)}]},{name:"포스터 / LED",templateParamList:[{name:"가로 포스터",designKey1:"poster",designKey2:"A-HORIZON",templateType:r.TEMPLATE,siteMapIdx:13871,sheetSize:new N.a(1260,891)},{name:"세로 포스터",designKey1:"poster",designKey2:"A-VERTICAL",cateFilter:[26663],templateType:r.TEMPLATE,siteMapIdx:13871,sheetSize:new N.a(891,1260)}]},{name:"봉투",templateParamList:[{name:"컬러 소봉투",designKey1:"ENVELOP-SMALL",designKey2:"ENVELOP-SMALL",templateType:r.TEMPLATE,siteMapIdx:14265,sheetSize:new N.a(1100,525)},{name:"자켓 소봉투",designKey1:"ENVELOP-SMALL-JACKET",designKey2:"ENVELOP-SMALL-JACKET",templateType:r.TEMPLATE,siteMapIdx:14265,sheetSize:new N.a(1100,725)},{name:"컬러 대봉투",designKey1:"ENVELOP-BIG",designKey2:"ENVELOP-BIG",templateType:r.TEMPLATE,siteMapIdx:14265,sheetSize:new N.a(1320,980)},{name:"티켓 봉투",designKey1:"ENVELOP-TICKET",designKey2:"ENVELOP-TICKET",templateType:r.TEMPLATE,siteMapIdx:14265,sheetSize:new N.a(677,480)}]},{name:"싱글 규격 스티커",templateParamList:[{name:"정사각형",designKey1:"STICKER-SQUARE",designKey2:"tr_placard_squ",templateType:r.TEMPLATE,siteMapIdx:17106,sheetSize:new N.a(800,800)},{name:"원형",designKey1:"STICKER-CIRCLE",designKey2:"tr_placard_squ",templateType:r.TEMPLATE,siteMapIdx:17106,sheetSize:new N.a(800,800)},{name:"직사각형",designKey1:"STICKER-RECT",designKey2:"tr_placard_squ",templateType:r.TEMPLATE,siteMapIdx:17106,sheetSize:new N.a(900,550)},{name:"타원형",designKey1:"STICKER-OVAL",designKey2:"tr_placard_squ",templateType:r.TEMPLATE,siteMapIdx:17106,sheetSize:new N.a(900,600)},{name:"세로 직사각형",designKey1:"STICKER-VER-RECT",designKey2:"tr_placard_squ",templateType:r.TEMPLATE,siteMapIdx:17106,sheetSize:new N.a(550,900)}]},{name:"리플렛",templateParamList:[{name:"2단 리플렛",designKey1:"리플렛-2단",designKey2:"",templateType:r.THEME,siteMapIdx:15515,sheetSize:new N.a(1028,728)},{name:"3단 리플렛",designKey1:"리플렛-3단",designKey2:"",templateType:r.THEME,siteMapIdx:15525,sheetSize:new N.a(1028,728)}]},{name:"전단지",templateParamList:[{name:"단면",designKey1:"poster",designKey2:"A-VERTICAL",cateFilter:[26664],templateType:r.TEMPLATE,siteMapIdx:14746,sheetSize:new N.a(891,1260)},{name:"양면",designKey1:"세로 포스터형",designKey2:"",cateFilter:[26664],templateType:r.THEME,siteMapIdx:14749,sheetSize:new N.a(891,1260)}]},{name:"L홀더",templateParamList:[{name:"L홀더",designKey1:"FILE",designKey2:"FILE",templateType:r.TEMPLATE,siteMapIdx:16716,sheetSize:new N.a(1686,1194)}]},{name:"티켓",templateParamList:[{name:"가로형",designKey1:"티켓-가로형",designKey2:"",templateType:r.THEME,siteMapIdx:15316,sheetSize:new N.a(850,400)},{name:"절취선 가로형",designKey1:"티켓-가로형-절취선",designKey2:"",templateType:r.THEME,siteMapIdx:15326,sheetSize:new N.a(850,450)},{name:"세로형",designKey1:"티켓-세로형",designKey2:"",templateType:r.THEME,siteMapIdx:15336,sheetSize:new N.a(400,850)},{name:"절취선 세로형",designKey1:"티켓-세로형-절취선",designKey2:"",templateType:r.THEME,siteMapIdx:15346,sheetSize:new N.a(450,850)}]},{name:"비닐봉투",templateParamList:[{name:"비닐봉투",designKey1:"PLASTIC-BAG",designKey2:"tr_placard_squ",templateType:r.TEMPLATE,siteMapIdx:14815,sheetSize:new N.a(680,1160)}]},{name:"테이블 세팅지",templateParamList:[{name:"풀컬러",designKey1:"TABLE-PAPER-A3",designKey2:"A-HORIZON",cateFilter:[26661],templateType:r.TEMPLATE,siteMapIdx:25699,sheetSize:new N.a(1101,771)}]},{name:"어깨띠",templateParamList:[{name:"어깨띠",designKey1:"",designKey2:"SHOULDER-SASH",templateType:r.THEME,siteMapIdx:18885,sheetSize:new N.a(60,900)}]},{name:"통자석 전단지",templateParamList:[{name:"원형",designKey1:"STICKER-MAGNET-CIRCLE",designKey2:"tr_placard_squ",templateType:r.TEMPLATE,siteMapIdx:18895,sheetSize:new N.a(800,800)},{name:"둥근모서리 사각형",designKey1:"STICKER-MAGNET-SQUARE-CURVED",designKey2:"A-HORIZON",templateType:r.TEMPLATE,siteMapIdx:18895,sheetSize:new N.a(1260,885)}]},{name:"자석오프너",templateParamList:[{name:"원형",designKey1:"STICKER-CIRCLE",designKey2:"tr_placard_squ",templateType:r.TEMPLATE,siteMapIdx:18875,sheetSize:new N.a(861,861)},{name:"패트형",designKey1:"STICKER-OVAL-VER",designKey2:"A-VERTICAL",templateType:r.TEMPLATE,siteMapIdx:18875,sheetSize:new N.a(861,1203)},{name:"집게형",designKey1:"STICKER-OVAL-VER",designKey2:"A-VERTICAL",templateType:r.TEMPLATE,siteMapIdx:18875,sheetSize:new N.a(771,1065)}]},{name:"종이자석 전단지",templateParamList:[{name:"양면",designKey1:"세로 포스터형",designKey2:"",cateFilter:[26665],templateType:r.THEME,siteMapIdx:14756,sheetSize:new N.a(1020,1248)},{name:"단면",designKey1:"poster",designKey2:"A-VERTICAL",cateFilter:[26665],templateType:r.TEMPLATE,siteMapIdx:14750,sheetSize:new N.a(1020,1248)}]},{name:"냅킨",templateParamList:[{name:"사각형",designKey1:"NAPKIN-SQUARE",designKey2:"1X1",templateType:r.TEMPLATE,siteMapIdx:15754,sheetSize:new N.a(1305,1305)}]},{name:"입간판",templateParamList:[{name:"소",designKey1:"A형 철제입간판",designKey2:"FRAME-STEEL-S",templateType:r.THEME,siteMapIdx:27647,sheetSize:new N.a(1134,1965)},{name:"중",designKey1:"A형 철제입간판",designKey2:"FRAME-STEEL-M",templateType:r.THEME,siteMapIdx:27647,sheetSize:new N.a(1323,2532)},{name:"대",designKey1:"A형 철제입간판",designKey2:"FRAME-STEEL-L",templateType:r.THEME,siteMapIdx:27647,sheetSize:new N.a(1512,3099)}]}]}},440:function(e,t,n){"use strict";var a,i=n(2),r=n.n(i),o=n(4),s=n.n(o),c=n(0),u=n.n(c),l=n(1),h=n.n(l),p=n(10),d=n(67),m=n(8),f=n(6),g=n.n(f),v=n(3),y=n.n(v),E=n(7),I=n.n(E),T=n(30),k=n(33),w=function(e){function t(e){var n;return u()(this,t),(n=g()(this,y()(t).call(this))).id="localDownloadFailruePopup",n.wrap=document.createElement("div"),n.confirmBtn=document.createElement("div"),n.confirmListener=e.confirmListener,n.initDom(e),n.initEvent(),n}return I()(t,e),h()(t,[{key:"initEvent",value:function(){var e=this;this.confirmListener&&this.confirmBtn.addEventListener("click",function(){return e.confirmListener()})}},{key:"initDom",value:function(e){this.wrap.className=m.a.POPUP_WARNING;var n=document.createElement("div");n.className=m.a.POPUP_WARNING_ICON_WRAP;var a=document.createElement("img");a.onload=function(){n.appendChild(a)},a.src="".concat(T.a.RESOURCE_DOMAIN,"image/common/warning.png"),this.wrap.appendChild(n);var i=document.createElement("div");i.className=m.a.POPUP_WARNING_TITLE,i.innerHTML=e.title,this.wrap.appendChild(i);var r=document.createElement("div");r.className=m.a.POPUP_WARNING_SUB_TITLE,r.innerHTML=e.subTitle,this.wrap.appendChild(r);var o=document.createElement("div");o.className="description";var s=!0,c=!1,u=void 0;try{for(var l,h=function(){var e=l.value,n=void 0;e.url?((n=t.createChromeLink(e.url)).classList.add("has_url"),n.addEventListener("mouseenter",function(){n.classList.add("hover")}),n.addEventListener("mouseleave",function(){n.classList.remove("hover")}),t.addText(n,e.message,e.lineBreak),o.appendChild(n)):t.addText(o,e.message,e.lineBreak)},p=e.texts[Symbol.iterator]();!(s=(l=p.next()).done);s=!0)h()}catch(e){c=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(c)throw u}}this.wrap.appendChild(o),this.confirmBtn.innerHTML=e.confirmBtnText||"확인",this.confirmBtn.className=m.a.POPUP_WARNING_BTN_CONFIRM;var d=document.createElement("div");d.className=m.a.POPUP_WARNING_BTN_WRAP,d.appendChild(this.confirmBtn),this.wrap.appendChild(d)}},{key:"getContents",value:function(){return this.wrap}}],[{key:"createChromeLink",value:function(e){var t=document.createElement("a");return t.target="_blank",t.href=e,t}},{key:"addText",value:function(e,t,n){var a=document.createTextNode(t);if(e.appendChild(a),n){var i=document.createElement("br");e.appendChild(i)}}}]),t}(k.a),C=function(e){function t(e,n,a,i){var r,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"warningPopup";return u()(this,t),(r=g()(this,y()(t).call(this))).title=e,r.subtitle=n,r.confirmBtnText=a,r.confirmListener=i,r.id=o,r.initDom(),r}return I()(t,e),h()(t,[{key:"initDom",value:function(){var e=this;this.wrap=document.createElement("div"),this.confirmBtn=document.createElement("div"),this.wrap.className=m.a.POPUP_WARNING;var t=document.createElement("div");t.className=m.a.POPUP_WARNING_ICON_WRAP;var n=document.createElement("img");n.onload=function(){t.appendChild(n)},n.src="".concat(T.a.RESOURCE_DOMAIN,"image/common/warning.png"),this.wrap.appendChild(t);var a=document.createElement("div");a.className=m.a.POPUP_WARNING_TITLE,a.innerHTML=this.title,this.wrap.appendChild(a);var i=document.createElement("div");i.className=m.a.POPUP_WARNING_SUB_TITLE,i.innerHTML=this.subtitle||"",this.wrap.appendChild(i),this.confirmBtn.innerHTML=this.confirmBtnText||"확인",this.confirmBtn.className=m.a.POPUP_WARNING_BTN_CONFIRM,this.confirmListener&&this.confirmBtn.addEventListener("click",function(){return e.confirmListener()});var r=document.createElement("div");r.className=m.a.POPUP_WARNING_BTN_WRAP,r.appendChild(this.confirmBtn),this.wrap.appendChild(r)}},{key:"getContents",value:function(){return this.wrap}}]),t}(k.a),S=n(225),A=n(227),b=n(224),L=n(9),P=n.n(L),x=n(368),_=n(261),R=n(369),N=n(370),M=function(){function e(){u()(this,e)}return h()(e,[{key:"makeElement",value:function(){var e=document.createElement("div");e.className=_.a.CHARACTER_VIEW;var t=this.crying=document.createElement("div");return t.classList.add(_.a.CHARACTER,_.a.FAILURE_CHARACTER_CRYING),t.addEventListener("click",function(){return N.a.clickElement(t)}),e.appendChild(t),e}}]),e}(),D=function(e){function t(){var e;return u()(this,t),(e=g()(this,y()(t).call(this))).characterView=new M,e.initialize(),e}return I()(t,e),h()(t,[{key:"initialize",value:function(){P()(y()(t.prototype),"initialize",this).call(this),this.popup.classList.add(_.a.FAILURE)}},{key:"makeContentElement",value:function(){var e=P()(y()(t.prototype),"makeContentElement",this).call(this);return e.appendChild(this.characterView.makeElement()),e.appendChild(t.makeTitleElement()),e.appendChild(this.makeSubTitleElement()),e.appendChild(this.makeDownloadPathInfoElement()),e.appendChild(this.makeButtonAreaElement()),e}},{key:"makeSubTitleElement",value:function(){var e=this.subTitle=document.createElement("div");return e.className=_.a.SUB_TITLE,e.innerText="다운로드 준비 중 오류가 발생했어요. 불편을 드려 죄송합니다.",e}},{key:"makeDownloadPathInfoElement",value:function(){var e=this,t=this.information=document.createElement("div");t.className=_.a.INFORMATION_WRAP;var n=document.createElement("div");n.className=_.a.INFORMATION,n.innerText="다운로드는 어떤 경우에 실패하나요?";return Object(p.setToolsIcon)(n,p.ToolsIcon.OUTLINE,!1,"left"),t.appendChild(n),t.addEventListener("click",function(){return R.a.openByNewTab(e.downloadFailInfoUrl)}),t}},{key:"makeButtonAreaElement",value:function(){var e=this,t=this.btnArea=document.createElement("div");t.className=_.a.BTN_AREA;var n=document.createElement("button");return n.className=_.a.FAILURE_BTN_CONFIRM,n.innerText="확인",n.addEventListener("click",function(){return e.close()}),t.appendChild(n),t}},{key:"setActionSet",value:function(e){this.actionSet=e}},{key:"setDownloadFailLinkUrl",value:function(e){this.downloadFailInfoUrl=e}},{key:"updateUI",value:function(){this.updateSubTitle()}},{key:"updateSubTitle",value:function(){var e=this.subTitle;this.actionSet.isMobileMode()?e.innerText="다운로드 준비 중 오류가 발생했어요. 불편을 드려 죄송합니다.".replace(". ","\n"):e.innerText="다운로드 준비 중 오류가 발생했어요. 불편을 드려 죄송합니다."}},{key:"existDownloadFailInfoLink",value:function(){return Boolean(this.downloadFailInfoUrl)}}],[{key:"makeTitleElement",value:function(){var e=document.createElement("div");return e.className=_.a.MAIN_TITLE,e.innerText="다운로드가 실패했어요...",e}},{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}(x.a),O=function(e){function t(){var e,n;u()(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=g()(this,(e=y()(t)).call.apply(e,[this].concat(i)))).actionType=b.a.ONE_TIME,n.doSaveQueue=!1,n.renderAuto=!1,n.changeDesign=function(){return!1},n.commitAction=function(e,t,a){n.designDoc=e,n.store=t,n.renderer=a;var i=D.instance;if(!i.existDownloadFailInfoLink()){i.setDownloadFailLinkUrl("https://bo.miricanvas.com/s/23")}var r={isMobileMode:function(){return d.a.isMobilePortraitSize()},isDevMode:function(){return A.a.getUserSetting().devMode}};i.setActionSet(r),i.open()},n.rollbackAction=function(){},n.recycle=function(){},n}return I()(t,e),t}(b.b),U=n(444),B=function(e){function t(e){var n;return u()(this,t),(n=g()(this,y()(t).call(this))).actionType=b.a.ONE_TIME,n.doSaveQueue=!1,n.renderAuto=!1,n.changeDesign=function(){return!1},n.commitAction=function(){!n.percent||n.percent<0||U.a.instance.updateProgressBar(n.percent)},n.rollbackAction=function(){},n.recycle=function(){},n.percent=e,n}return I()(t,e),t}(b.b),G=function(e){function t(){return u()(this,t),g()(this,y()(t).call(this,!0))}return I()(t,e),h()(t,[{key:"onCreateView",value:function(){P()(y()(t.prototype),"onCreateView",this).call(this),this.makeElement()}},{key:"makeElement",value:function(){var e=this,t=document.createElement("div");t.className=_.a.CHARACTER_VIEW,this.leftHand=document.createElement("div"),t.appendChild(this.leftHand),this.rightHand=document.createElement("div"),t.appendChild(this.rightHand),this.clapEffect=document.createElement("div"),t.appendChild(this.clapEffect),this.container.appendChild(t);window.requestAnimationFrame(function(){window.requestAnimationFrame(function(){e.leftHand.classList.add(_.a.CHARACTER,_.a.SUCCESS_CHARACTER_LEFT_HAND),e.rightHand.classList.add(_.a.CHARACTER,_.a.SUCCESS_CHARACTER_RIGHT_HAND),e.clapEffect.classList.add(_.a.CHARACTER,_.a.SUCCESS_CHARACTER_CLAP_EFFECT)})}),$([this.leftHand,this.rightHand,this.clapEffect]).on("click",function(){N.a.clickElement(e.leftHand),N.a.clickElement(e.rightHand),N.a.clickElement(e.clapEffect)})}}]),t}(n(31).a),V=function(e){function t(){var e;return u()(this,t),(e=g()(this,y()(t).call(this))).characterView=new G,e.initialize(),e}return I()(t,e),h()(t,[{key:"initialize",value:function(){P()(y()(t.prototype),"initialize",this).call(this),this.popup.classList.add(_.a.SUCCESS)}},{key:"makeContentElement",value:function(){var e=P()(y()(t.prototype),"makeContentElement",this).call(this);return e.appendChild(this.characterView.getContainer()),e.appendChild(this.makeTitleElement()),e.appendChild(this.makeInfoContents()),e.appendChild(this.makeButtonAreaElement()),e}},{key:"makeInfoContents",value:function(){var e=this,t=this.infoWrapper=document.createElement("div");return t.className=_.a.INFORMATION_WRAP,t.appendChild(this.pdfClovaLink=this.makeInfoText("PDF로 영상을 만들어보세요",function(){window.open("https://www.miricanvas.com/s/263","_blank")})),t.appendChild(this.pptClovaLink=this.makeInfoText("PPT로 영상을 만들어보세요",function(){window.open("https://www.miricanvas.com/s/262","_blank")})),t.appendChild(this.pptNotice=this.makeInfoText("PPT 다운로드 유의사항",function(){window.open("https://miricanvas.zendesk.com/hc/ko/articles/360039561892")})),t.appendChild(this.makeInfoText("파일이 어디 저장됐는지 모르겠어요",function(){R.a.openByNewTab(e.downloadPathInfoUrl)})),this.infoWrapper}},{key:"makeTitleElement",value:function(){var e=document.createElement("div");return e.className=_.a.MAIN_TITLE,e.innerText="멋진 디자인이 완성됐어요!",e}},{key:"makeInfoText",value:function(e,t){var n=document.createElement("div");n.className=_.a.INFORMATION,n.innerText=e;return Object(p.setToolsIcon)(n,p.ToolsIcon.OUTLINE,!1,"left"),n.addEventListener("click",t),n}},{key:"makeButtonAreaElement",value:function(){var e=this,t=this.btnArea=document.createElement("div");t.className=_.a.BTN_AREA;var n=document.createElement("button");n.className=_.a.SUCCESS_BTN_CLOSE,n.innerText="닫기",n.addEventListener("click",function(){return e.close()}),t.appendChild(n);var a=document.createElement("button");return a.className=_.a.SUCCESS_BTN_DOWNLOAD,a.innerText="다운로드",a.addEventListener("click",function(){return e.actionSet.downloadFile()}),t.appendChild(a),t}},{key:"setActionSet",value:function(e){this.actionSet=e}},{key:"setDownloadPathLinkUrl",value:function(e){this.downloadPathInfoUrl=e}},{key:"setFileExt",value:function(e){switch(this.setLinkVisible(this.pdfClovaLink,!1),this.setLinkVisible(this.pptClovaLink,!1),this.setLinkVisible(this.pptNotice,!1),e){case"pdf":this.setLinkVisible(this.pdfClovaLink,!0);break;case"pptx":this.setLinkVisible(this.pptClovaLink,!0),this.setLinkVisible(this.pptNotice,!0)}}},{key:"setLinkVisible",value:function(e,t){e.style.display=t?"flex":"none"}},{key:"updateUI",value:function(){}},{key:"existDownloadPathInfoLink",value:function(){return Boolean(this.downloadPathInfoUrl)}}],[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}(x.a),F=function(e){function t(){var e,n;u()(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=g()(this,(e=y()(t)).call.apply(e,[this].concat(i)))).actionType=b.a.ONE_TIME,n.doSaveQueue=!1,n.renderAuto=!1,n.changeDesign=function(){return!1},n.commitAction=function(e,a,i){n.designDoc=e,n.store=a,n.renderer=i;var r=V.instance;if(!r.existDownloadPathInfoLink()){r.setDownloadPathLinkUrl("https://bo.miricanvas.com/s/24")}r.setFileExt(/[^.]+$/.exec(re.getDownloaderSuccessProperty().fileName)[0]);var o={isMobileMode:function(){return d.a.isMobilePortraitSize()},isDevMode:function(){return A.a.getUserSetting().devMode},downloadFile:function(){return t.downloadFile()}};r.setActionSet(o),r.open()},n.rollbackAction=function(){},n.recycle=function(){},n}return I()(t,e),h()(t,null,[{key:"downloadFile",value:function(){re.doDownloadFile()}}]),t}(b.b),z=n(288),H=n(320),K=function(){function e(){u()(this,e)}return h()(e,null,[{key:"downloadByATag",value:function(e,t){var n=document.createElement("a");n.href=e,n.download=t,document.body.appendChild(n),n.click(),setTimeout(function(){return n.parentElement.removeChild(n)},3e3)}},{key:"downloadInNewTab",value:function(e){window.open(e,"_blank","")}}]),e}(),W=function(){function e(){u()(this,e)}return h()(e,null,[{key:"getDocument",value:function(e){var t=96|e.dpi,n=72*e.width/t,a=72*e.height/t,i=n>=a?"l":"p",r=[n,a],o=new jsPDF({orientation:i,unit:"px",format:r,compress:!0}),s=o.internal.pageSize.getWidth(),c=o.internal.pageSize.getHeight();o.addImage(e.imageSrcList[0],0,0,s,c);for(var u=1;u<e.imageSrcList.length;u++)o.addPage(r,i),o.addImage(e.imageSrcList[u],0,0,s,c);return o}},{key:"download",value:function(t){e.getDocument(t).save(t.fileName)}},{key:"getDataUriOfPdf",value:function(t){return e.getDocument(t).output("datauristring")}},{key:"createBlobByImageSrc",value:function(t){return e.getDocument(t).output("blob")}}]),e}(),q=n(533);!function(e){var t="miri_custom";function n(e){return e/96}e.download=function(e){var a,i,r=new q.a;!function(e,a){e.defineLayout({name:t,width:n(a.pageSize.width),height:n(a.pageSize.height)}),e.layout=t}(r,e),function(e,t){var a=n(t.pageSize.width),i=n(t.pageSize.height),r=!0,o=!1,s=void 0;try{for(var c,u=t.imgSrcList[Symbol.iterator]();!(r=(c=u.next()).done);r=!0){var l=c.value;e.addSlide().addImage({data:l,x:0,y:0,w:a,h:i})}}catch(e){o=!0,s=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw s}}}(r,e),a=r,i=e.fileName,a.writeFile(i)}}(a||(a={}));var Y,j=n(476),X=n.n(j),Z=function(){function e(){u()(this,e),this.params=[]}var t;return h()(e,[{key:"pushFile",value:function(e){this.params.push(e)}},{key:"getUrlOfCreatedZip",value:(t=s()(r.a.mark(function e(){var t,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new X.a,this.params.forEach(function(e){t.file(e.fileName,e.blob)}),e.next=4,t.generateAsync({type:"base64"});case 4:return n="data:application/zip;base64,"+(n=e.sent),e.abrupt("return",n);case 7:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})}]),e}(),Q=function(){function e(t){u()(this,e),this.successEvent=t}var t,n;return h()(e,[{key:"execute",value:(n=s()(r.a.mark(function t(n){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==n.imgParamList.length){t.next=3;break}return t.abrupt("return");case 3:if(!e.isSingleFile(n)){t.next=7;break}this.downloadSingleFile(n),t.next=9;break;case 7:return t.next=9,this.downloadZipFile(n);case 9:case"end":return t.stop()}},t,this)})),function(e){return n.apply(this,arguments)})},{key:"downloadZipFile",value:(t=s()(r.a.mark(function t(n){var a,i,o,s;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=new Z,n.imgParamList.forEach(function(e){var t=e.imgDataSrc,n=e.fileName,i=H.a.getImgUriToBlob(t);a.pushFile({blob:i,fileName:n})}),t.next=4,a.getUrlOfCreatedZip();case 4:i=t.sent,o="".concat(n.fileName,".zip"),e.isIeBrowser()?(s=H.a.getImgUriToBlob(i),e.downloadFromIe(s,o)):this.downloadFromChromeOrOther(i,o);case 7:case"end":return t.stop()}},t,this)})),function(e){return t.apply(this,arguments)})},{key:"downloadSingleFile",value:function(t){if(0!==t.imgParamList.length){var n=t.imgParamList[0],a=n.fileName;e.isPDF(t.fileExt)?this.pdfDownload(t.imgParamList.map(function(e){return e.imgDataSrc}),t.pageSize,t.dpi,a):e.isPptx(t.fileExt)?this.pptxDownload(t.imgParamList.map(function(e){return e.imgDataSrc}),t.pageSize,a):this.normalDownload(n.imgDataSrc,a)}}},{key:"normalDownload",value:function(t,n){if(e.isIeBrowser()){var a=H.a.getImgUriToBlob(t);e.downloadFromIe(a,n)}else this.downloadFromChromeOrOther(t,n)}},{key:"pdfDownload",value:function(e,t,n,a){var i={imageSrcList:e,width:t.width,height:t.height,dpi:n,fileName:a};d.a.isMobileDevice()&&d.a.isIOS()?this.successEvent({downloadLink:W.getDataUriOfPdf(i),fileName:a}):W.download(i)}},{key:"pptxDownload",value:function(e,t,n){var i={imgSrcList:e,pageSize:t,fileName:n};a.download(i)}},{key:"downloadFromChromeOrOther",value:function(e,t){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){var e=window.URL.createObjectURL(this.response);d.a.isMobileDevice()&&d.a.isIOS()?a.successEvent({downloadLink:e,fileName:t}):K.downloadByATag(e,t)},n.send();var a=this}}],[{key:"isIeBrowser",value:function(){return d.a.isBrowserHell()}},{key:"downloadFromIe",value:function(e,t){navigator.msSaveBlob(e,t)}},{key:"isPDF",value:function(e){return e.toLowerCase()===z.b.PDF}},{key:"isPptx",value:function(e){return e.toLowerCase()===z.b.PPTX}},{key:"isSingleFile",value:function(e){return 1===e.imgParamList.length||e.fileExt===z.b.PDF||e.fileExt===z.b.PPTX}}]),e}(),J=n(16),ee=n(20),te=n(517),ne=n(235),ae=function(){function e(){u()(this,e)}return h()(e,null,[{key:"getWorkTime",value:function(t){if(0===t.pageList.length)return 300;var n=0;return S.a.instance.dispatch(new b.c(function(a){var i=a.pages[0].sheetSize,r=Math.max(i.width,i.height)*t.printScale;n+=e.getPageTime({pageCount:t.pageList.length,printMaxSize:r}),t.pageList.forEach(function(t){a.pages[t].getAllSingleItems().forEach(function(t){n+=e.getItemTime(t)})})})),n}},{key:"getPageTime",value:function(t){var n=0;return n+=t.pageCount*e.RENDER_TIME_PAGE,n+=t.printMaxSize/e.CORRECT_SIZE_MEASURE}},{key:"getItemTime",value:function(t){var n=0,a=Math.max(t.getWidth(),t.getHeight());switch(a>=e.CORRECT_SIZE_MEASURE&&(n+=a/e.CORRECT_SIZE_MEASURE),t.getItemType()){case ne.b.STICKER:case ne.b.PHOTO:var i=Math.max(t.getWidth(),t.getHeight());n+=Math.ceil(i/e.CORRECT_SIZE_MEASURE);break;default:n+=e.RENDER_TIME_ITEM_COMMON}return n}}]),e}();ae.RENDER_TIME_PAGE=5,ae.RENDER_TIME_ITEM_COMMON=.1,ae.CORRECT_SIZE_MEASURE=1e3,function(e){e.NEW_REQUEST="NEW_REQUEST",e.PROCESSING="PROCESSING",e.COMPLETE="COMPLETE",e.FAILED="FAILED"}(Y||(Y={}));var ie=function(){function e(t,n,a){u()(this,e),this.currentIdx=0,this.pollingTimerId=0,this.progressPercent=0,this.progressStartTime=0,this.progressEstimatedTime=0,this.runningEvent=t,this.successEvent=n,this.failureEvent=a}var t,n;return h()(e,[{key:"execute",value:(n=s()(r.a.mark(function t(n){var a,i,o,s=this;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.setProgressEstimatedTime(n),a=this.makeProcessorParameter(n),t.next=4,ee.b.post("/api/v1/hq-image",{contentType:"application/json",dataType:"json",data:a});case 4:i=t.sent,this.stopPolling(),o=i.data,this.currentIdx=o.idx,setTimeout(function(){return s.loopPollingDefault(o.idx,e.CHECK_INITIAL_INTERVAL)},e.CHECK_FIRST_INTERVAL),0,400,setTimeout(function(){return s.runningProgressEvent(0,400)},400);case 12:case"end":return t.stop()}},t,this)})),function(e){return n.apply(this,arguments)})},{key:"runningProgressEvent",value:function(e,t){var n=this;e=Math.min(e+(100-e)/3,100),t+=400,this.runningEvent({percent:e}),this.tempProgressTimeEventId=window.setTimeout(function(){return n.runningProgressEvent(e,t)},t)}},{key:"loopPollingDefault",value:function(t,n){var a=this,i="/api/v2/hq-image/".concat(t);this.pollingTimerId=window.setTimeout(s()(r.a.mark(function o(){var s;return r.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,ee.b.get(i);case 2:s=r.sent.data,r.t0=s.status,r.next=r.t0===Y.NEW_REQUEST?6:r.t0===Y.PROCESSING?6:r.t0===Y.COMPLETE?7:r.t0===Y.FAILED?10:13;break;case 6:return r.abrupt("break",13);case 7:return window.clearTimeout(a.tempProgressTimeEventId),a.successEvent({downloadLink:s.filename,fileName:s.filename,hqIdx:t}),r.abrupt("return");case 10:return window.clearTimeout(a.tempProgressTimeEventId),a.failureEvent(),r.abrupt("return");case 13:a.stopPolling(),a.loopPollingDefault(t,Math.min(n+e.CHECK_INCREASE,e.CHECK_MAXIMUM_INTERVAL));case 15:case"end":return r.stop()}},o)})),n)}},{key:"sendHQImageFileByEmail",value:(t=s()(r.a.mark(function e(){var t,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.stopPolling(),!(this.currentIdx<=0)){e.next=3;break}return e.abrupt("return");case 3:return t="/api/v1/hq-image"+"/".concat(this.currentIdx),n=JSON.stringify({mailRequired:!0}),e.next=7,ee.b.put(t,{contentType:"application/json",data:n});case 7:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"setProgressEstimatedTime",value:function(e){this.progressStartTime=Date.now(),this.progressEstimatedTime=ae.getWorkTime({pageList:e.pageIdxList,printScale:e.printScale})}},{key:"stopPolling",value:function(){this.pollingTimerId&&(window.clearTimeout(this.pollingTimerId),this.pollingTimerId=0)}},{key:"cancelDownload",value:function(){this.sendCancelImageProcess(),this.stopPolling(),window.clearTimeout(this.tempProgressTimeEventId)}},{key:"sendCancelImageProcess",value:function(){try{var e="/api/v1/hq-image"+"/".concat(this.currentIdx);ee.b.delete(e)}catch(e){}}},{key:"makeProcessorParameter",value:function(e){var t,n,a,i,r=te.a.getOutputInfo();e.isWebFormat?(t=r.pageWidth,n=r.pageHeight,a=e.dpi,i=J.a.PX.toLowerCase()):(t=r.workWidth,n=r.workHeight,a=r.dpi,i=r.unit.toLowerCase());var o="".concat(t,"X").concat(n);return JSON.stringify({designIdx:e.designIdx,args:{designIndex:e.designIdx,designHistoryIndex:e.designHistoryIndex,pages:e.pageIdxList.join(","),extension:e.fileExt,backgroundOpacity:e.backgroundTransparent,printScale:e.printScale,designname:e.designTitle,docSize:o,measure:i,dpi:a,imgCombine:e.isImgCombine,rasterize:e.rasterize}})}},{key:"makeDocAndCropSize",value:function(e,t,n){var a=[],i=[];return S.a.instance.dispatch(new b.c(function(r){var o=t,s=n,c=o,u=s;r.pages.forEach(function(t,n){var r=!1,l=!0,h=!1,p=void 0;try{for(var d,m=e[Symbol.iterator]();!(l=(d=m.next()).done);l=!0){if(n===d.value){r=!0;break}}}catch(e){h=!0,p=e}finally{try{l||null==m.return||m.return()}finally{if(h)throw p}}r?(a.push("".concat(c,"X").concat(u)),i.push("".concat(o,"X").concat(s))):(a.push("null"),i.push("null"))})})),{docSize:a.join(","),cropSize:i.join(",")}}}]),e}();ie.CHECK_FIRST_INTERVAL=2e3,ie.CHECK_INITIAL_INTERVAL=1e3,ie.CHECK_INCREASE=500,ie.CHECK_MAXIMUM_INTERVAL=4e3,n.d(t,"a",function(){return re});var re=function(){function e(){u()(this,e),this.browserDownloader=new Q(e.imageProcessSuccessEvent),this.imgProcessorDownloader=new ie(e.imageProcessRunningEvent,e.imageProcessSuccessEvent,e.imageProcessFailureEvent),this.downloadDoneEventList=[],this.lastBrowserDownloadProperty=null,this.lastImageProcessDownloadProperty=null,this.downloaderSuccessProperty={downloadLink:"",fileName:"",hqIdx:0}}var t,n,a;return h()(e,null,[{key:"makeWaitingElement",value:function(){var e=document.createElement("div");e.className=m.a.POPUP_DOWNLOAD_WAITING;var t=document.createElement("div");t.className=m.a.POPUP_DOWNLOAD_WAITING_BACKGROUND,e.appendChild(t);var n=document.createElement("div");n.className=m.a.POPUP_DOWNLOAD_WAITING_CONTENTS,Object(p.setToolsIcon)(n,p.ToolsIcon.OUTLINE);var a=document.createElement("p");a.className=m.a.TITLE,a.innerText="다운로드 준비중입니다.",n.appendChild(a);var i=document.createElement("p");i.innerHTML="잠시만 기다려주세요.<br/>다운로드를 준비하는 동안 브라우저가 멈출 수 있습니다.",n.appendChild(i),e.appendChild(n),this.instance.downloadWaitingElem=e}},{key:"addDownloadDoneEventList",value:function(e){-1===this.instance.downloadDoneEventList.indexOf(e)&&this.instance.downloadDoneEventList.push(e)}},{key:"stop",value:function(){this.instance.imgProcessorDownloader.stopPolling(),e.doneDownload()}},{key:"cancel",value:function(){this.instance.imgProcessorDownloader.cancelDownload(),e.doneDownload()}},{key:"doneDownload",value:function(){0!==this.instance.downloadDoneEventList.length&&this.instance.downloadDoneEventList.forEach(function(e){return e()})}},{key:"downloadByBrowser",value:(a=s()(r.a.mark(function t(n){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.instance.lastBrowserDownloadProperty=n,t.next=4,e.instance.browserDownloader.execute(n);case 4:e.doneDownload(),e.hideDownloadWaitingUI(),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0),e.doneDownload(),e.hideDownloadWaitingUI();case 13:case"end":return t.stop()}},t,this,[[0,8]])})),function(e){return a.apply(this,arguments)})},{key:"downloadByImageProcessor",value:(n=s()(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.instance.lastImageProcessDownloadProperty=t,e.next=3,this.instance.imgProcessorDownloader.execute(t);case 3:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"showDownloadWaitingUI",value:function(){this.instance.downloadWaitingElem||e.makeWaitingElement(),this.instance.downloadWaitingElem.parentElement||document.body.appendChild(this.instance.downloadWaitingElem)}},{key:"hideDownloadWaitingUI",value:function(){this.instance.downloadWaitingElem&&this.instance.downloadWaitingElem.parentElement&&this.instance.downloadWaitingElem.parentElement.removeChild(this.instance.downloadWaitingElem)}},{key:"showDownloadFailureUI",value:function(){var e=this,t=new C("다운로드 실패","다운로드 준비 중 오류가 발생하였습니다.<br/>다운로드를 다시 시도해주세요.","확인",function(){t.close(),e.hideDownloadWaitingUI()}).open()}},{key:"showNotReadyToDownloadUI",value:function(){var e=new C(" 잠시 후 다시 시도해주세요.","<p>픽사베이로부터 고해상도 이미지를 전송받고 있습니다.<br/>잠시 후 고해상도 다운로드를 다시 시도해주세요.<br/></p><span>빠른 다운로드를 이용하시면 바로 다운로드가 가능합니다.</span>","확인",function(){e.close()},"pixabayDownloadWarningPopup").open()}},{key:"showDownloadFailureUIIE",value:function(){var e=new w({title:"다운로드 실패",subTitle:"다운로드 준비 중 오류가 발생하였습니다",texts:[{message:"재시도 후에도 다운로드가 계속 되지 않는다면",lineBreak:!0},{message:"구글 크롬 브라우저",url:"https://www.google.com/intl/ko_ALL/chrome/",lineBreak:!1},{message:"에서 다시 시도해주시거나",lineBreak:!0},{message:"1:1 문의하기를 통해 문의 부탁드립니다.",lineBreak:!0}],confirmBtnText:"확인",confirmListener:function(){e.close()}}).open()}},{key:"imageProcessRunningEvent",value:function(e){S.a.instance.dispatch(new B(e.percent))}},{key:"imageProcessSuccessEvent",value:function(t){e.doneDownload(),e.setDownloaderSuccessProperty(t),e.doDownloadFile(),S.a.instance.dispatch(new F)}},{key:"imageProcessFailureEvent",value:function(){e.doneDownload(),S.a.instance.dispatch(new O)}},{key:"showNotReadyToDownloadPopup",value:function(){e.doneDownload(),e.showNotReadyToDownloadUI()}},{key:"setDownloaderSuccessProperty",value:function(e){this.instance.downloaderSuccessProperty=e}},{key:"getDownloaderSuccessProperty",value:function(){return this.instance.downloaderSuccessProperty}},{key:"doDownloadFile",value:function(){var e=this.instance.downloaderSuccessProperty.downloadLink;e?d.a.isMobileDevice()&&d.a.isIOS()?K.downloadInNewTab(e):K.downloadByATag(e,e):console.log("cannot found download link")}},{key:"getLastBrowserDownloadProperty",value:function(){return this.instance.lastBrowserDownloadProperty}},{key:"getLastImageProcessDownloadProperty",value:function(){return this.instance.lastImageProcessDownloadProperty}},{key:"sendHQImageFileByEmail",value:(t=s()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.instance.imgProcessorDownloader.sendHQImageFileByEmail();case 2:e.doneDownload();case 3:case"end":return t.stop()}},t,this)})),function(){return t.apply(this,arguments)})}]),e}();re.instance=new re},444:function(e,t,n){"use strict";var a=n(0),i=n.n(a),r=n(1),o=n.n(r),s=n(6),c=n.n(s),u=n(3),l=n.n(u),h=n(9),p=n.n(h),d=n(7),m=n.n(d),f=n(10),g=n(8),v=n(288),y=n(345),E=n(368),I=n(261),T=n(369),k=n(370),w=function(){function e(){i()(this,e)}return o()(e,[{key:"makeElement",value:function(){var t=this.wrapper=document.createElement("div");t.className=I.a.RUNNING_PROGRESS;var n=this.barCharacter=document.createElement("div");n.classList.add(I.a.CHARACTER,I.a.RUNNING_PROGRESS_BAR_CHARACTER),n.style.transform="translate(".concat(-e.CHARACTER_CORRECT_X,"px, 0)"),n.addEventListener("click",function(){return k.a.clickElement(n)}),t.appendChild(n);var a=this.bar=document.createElement("div");a.className=I.a.RUNNING_PROGRESS_BAR;var i=this.barBg=document.createElement("div");return i.className=I.a.RUNNING_PROGRESS_BAR_BACKGROUND,i.addEventListener("click",function(){return k.a.clickElement(i)}),i.appendChild(a),t.appendChild(i),t}},{key:"updateUI",value:function(){this.updateProgress(0)}},{key:"updateProgress",value:function(e){this.updateBar(e),this.updateCharacterPosition(e)}},{key:"updateBar",value:function(e){this.bar.style.width="".concat(e,"%")}},{key:"updateCharacterPosition",value:function(t){var n=(this.barBg.offsetWidth-e.CHARACTER_CORRECT_X)*(t/100);this.barCharacter.style.left="".concat(n,"px")}}]),e}();w.CHARACTER_CORRECT_X=15;var C=function(){function e(){i()(this,e)}return o()(e,null,[{key:"convertTipTextIncludedHighlightAsHTMLFormat",value:function(e){var t=this,n=[];return e.forEach(function(e){var a=t.appendPrefixInFrontOf(e.content);a=t.applyHighlightTextAsHTML(a,e.highlightText),n.push({content:a,highlightText:e.highlightText,linkUrl:e.linkUrl})}),n}},{key:"appendPrefixInFrontOf",value:function(e){return"".concat(this.PREFIX_TIP," ").concat(e)}},{key:"applyHighlightTextAsHTML",value:function(e,t){if(!t)return e;var n='<div class="'.concat(I.a.RUNNING_TIP_HIGHLIGHT,'">').concat(t,"</div>");return e.replace(t,n)}}]),e}();C.PREFIX_TIP="TIP.";var S=function(){function e(){i()(this,e)}return o()(e,null,[{key:"shuffleTipProperties",value:function(e){for(var t=e.slice(),n=t.length-1;n>0;n--){var a=Math.floor(Math.random()*(n+1)),i=[t[a],t[n]];t[n]=i[0],t[a]=i[1]}return t}}]),e}(),A=function(){function e(){i()(this,e),this.currentTipIdx=0}return o()(e,[{key:"makeElement",value:function(){var e=this,t=this.tip=document.createElement("div");return t.className=I.a.RUNNING_TIP,t.addEventListener("click",function(){return e.openTipLink()}),t}},{key:"setTipProps",value:function(e){this.tipProperties=C.convertTipTextIncludedHighlightAsHTMLFormat(e)}},{key:"shuffleTipList",value:function(){this.shuffledTipProperties=S.shuffleTipProperties(this.tipProperties)}},{key:"updateProperty",value:function(){this.tipProperties&&this.shuffleTipList()}},{key:"updateTip",value:function(){this.existTipProperties()&&(this.updateTipCssStyle(),this.startChangingTip())}},{key:"updateTipCssStyle",value:function(){this.shuffledTipProperties[this.currentTipIdx].linkUrl?this.tip.classList.add(I.a.RUNNING_LINK_ACTIVE):this.tip.classList.remove(I.a.RUNNING_LINK_ACTIVE)}},{key:"startChangingTip",value:function(){var t=this;this.tip.innerHTML||(this.currentTipIdx=this.shuffledTipProperties.length-1,this.tip.innerHTML=this.shuffledTipProperties[this.currentTipIdx].content,this.updateTipCssStyle()),window.clearInterval(this.showTipTimeEventId);this.showTipTimeEventId=window.setInterval(function(){t.currentTipIdx=t.currentTipIdx===t.shuffledTipProperties.length-1?0:t.currentTipIdx+1,t.tip.innerHTML=t.shuffledTipProperties[t.currentTipIdx].content,t.updateTipCssStyle()},e.TIP_CHANGE_INTERVAL_TIME)}},{key:"stopChangingTip",value:function(){window.clearInterval(this.showTipTimeEventId),this.clearTipText()}},{key:"openTipLink",value:function(){if(this.existTipProperties()){var e=this.shuffledTipProperties[this.currentTipIdx].linkUrl;T.a.openByNewTab(e)}}},{key:"existTipProperties",value:function(){return this.tipProperties&&this.tipProperties.length>0&&this.shuffledTipProperties&&this.shuffledTipProperties.length>0}},{key:"clearTipText",value:function(){this.tip.innerHTML=""}}]),e}();A.TIP_CHANGE_INTERVAL_TIME=8e3,n.d(t,"a",function(){return b});var b=function(e){function t(){var e;return i()(this,t),(e=c()(this,l()(t).call(this))).progressTip=new A,e.progressBar=new w,e.eventListenerSet={startEventListeners:[],cancelEventListeners:[]},e.initialize(),e}return m()(t,e),o()(t,[{key:"initialize",value:function(){p()(l()(t.prototype),"initialize",this).call(this),this.popup.classList.add(I.a.RUNNING)}},{key:"setActionSet",value:function(e){this.actionSet=e}},{key:"setTipProps",value:function(e){this.progressTip.setTipProps(e)}},{key:"setDividePageInfoUrl",value:function(e){this.dividePageInfoUrl=e}},{key:"makeContentElement",value:function(){var e=p()(l()(t.prototype),"makeContentElement",this).call(this);return e.appendChild(t.makeTitleElement()),e.appendChild(this.progressBar.makeElement()),e.appendChild(this.progressTip.makeElement()),e.appendChild(this.makeTimeOverInformationElement()),e}},{key:"makeTimeOverInformationElement",value:function(){var e=this,n=this.overTimeInformation=document.createElement("div");n.classList.add(I.a.RUNNING_OVERTIME_INFORMATION,g.a.HIDE);var a=this.dividePageBtn=t.makeTimeOverInformationButtonElement(I.a.RUNNING_BTN_DIVIDE_PAGE,"",function(){return T.a.openByNewTab(e.dividePageInfoUrl)}),i=this.dividePageLabel=document.createElement("label");a.appendChild(i),a.classList.add(g.a.HIDE),n.appendChild(a);var r=this.receiveEmailBtn=t.makeTimeOverInformationButtonElement(I.a.RUNNING_BTN_RECEIVE_EMAIL,"너무 오래걸리면 이메일로 보내드릴게요!",function(){return e.actionSet.receiveDesignFileByEmail()});return n.appendChild(r),n}},{key:"open",value:function(){this.updateProperty(),p()(l()(t.prototype),"open",this).call(this),this.startTimeOverEvent(),this.doStartEventListeners()}},{key:"close",value:function(){this.clearElementClassNames(),this.progressTip.stopChangingTip(),this.clearEventListeners(),p()(l()(t.prototype),"close",this).call(this)}},{key:"closeByButton",value:function(){p()(l()(t.prototype),"closeByButton",this).call(this),this.doCancelEventListeners()}},{key:"updateProperty",value:function(){this.progressTip.updateProperty()}},{key:"updateUI",value:function(){this.isOpened()||this.progressTip.updateTip(),this.progressBar.updateUI(),this.updateInformationButtons()}},{key:"updateInformationButtons",value:function(){var e=g.a.HIDE;this.overTimeInformation.classList.add(e),this.actionSet.isDownloadMultipleFile()?this.dividePageBtn.classList.remove(e):this.dividePageBtn.classList.add(e),this.dividePageLabel.innerText=this.actionSet.getImageFIleType()===v.b.PPTX?"페이지가 많을 경우 10분 이상 소요될 수 있어요.":"많이 느린가요? 페이지를 나눠서 받아보세요."}},{key:"updateProgressBar",value:function(e){this.progressBar.updateProgress(e)}},{key:"addStartEventListener",value:function(e){this.eventListenerSet.startEventListeners.includes(e)||this.eventListenerSet.startEventListeners.push(e)}},{key:"addCancelEventListener",value:function(e){this.eventListenerSet.cancelEventListeners.includes(e)||this.eventListenerSet.cancelEventListeners.push(e)}},{key:"doStartEventListeners",value:function(){this.eventListenerSet.startEventListeners.forEach(function(e){return e()})}},{key:"doCancelEventListeners",value:function(){this.eventListenerSet.cancelEventListeners.forEach(function(e){return e()})}},{key:"clearEventListeners",value:function(){this.eventListenerSet={startEventListeners:[],cancelEventListeners:[]}}},{key:"clearElementClassNames",value:function(){this.popup.classList.remove(I.a.EXPAND_HEIGHT)}},{key:"startTimeOverEvent",value:function(){var e=this;this.overTimeEvent?this.overTimeEvent.resetExecCallBack():this.overTimeEvent=new y.a(t.TIME_OVER_PROCESS_TIME,function(){e.isOpened()&&(e.overTimeInformation.classList.remove(g.a.HIDE),e.popup.classList.add(I.a.EXPAND_HEIGHT))})}}],[{key:"makeTitleElement",value:function(){var e=document.createElement("div");return e.className=I.a.MAIN_TITLE,e.innerText="작품을 만드는 중...",e}},{key:"makeTimeOverInformationButtonElement",value:function(e,t,n){var a=document.createElement("button");a.classList.add(e),a.innerText=t,a.addEventListener("click",n);return Object(f.setToolsIcon)(a,f.ToolsIcon.OUTLINE,!1,"left"),a}},{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}(E.a);b.TIME_OVER_PROCESS_TIME=6e4},474:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var a,i=n(0),r=n.n(i),o=n(1),s=n.n(o),c=n(250),u=n(226),l=n(37),h=n(11);!function(e){e.ENVELOPE_BIG="envelope_big",e.ENVELOPE_SMALL="envelope_small",e.ENVELOPE_JACKET="envelope_jacket",e.ENVELOPE_TICKET="envelope_ticket",e.YOUTUBE_COVER="youtube_cover",e.LEAFLET="leaflet",e.LEAFLET_2_STAGES="leaflet_2_stages",e.LEAFLET_3_STAGES="leaflet_3_stages",e.TICKET_PERFORATION_HOR="ticket_perforation_hor",e.TICKET_PERFORATION_VER="ticket_perforation_ver"}(a||(a={}));var p=function(){function e(){r()(this,e),this.map=new Map,this.map.set(a.ENVELOPE_BIG,e.ENVELOPE_BIG),this.map.set(a.ENVELOPE_SMALL,e.ENVELOPE_SMALL),this.map.set(a.ENVELOPE_JACKET,e.ENVELOPE_JACKET),this.map.set(a.ENVELOPE_TICKET,e.ENVELOPE_TICKET),this.map.set(a.YOUTUBE_COVER,e.YOUTUBE_COVER),this.map.set(a.LEAFLET,e.LEAFLET_2_STAGES),this.map.set(a.LEAFLET_2_STAGES,e.LEAFLET_2_STAGES),this.map.set(a.LEAFLET_3_STAGES,e.LEAFLET_3_STAGES),this.map.set(a.TICKET_PERFORATION_HOR,e.TICKET_PERFORATION_HOR),this.map.set(a.TICKET_PERFORATION_VER,e.TICKET_PERFORATION_VER)}return s()(e,[{key:"find",value:function(e){return this.map.get(e)}}]),e}();p.ENVELOPE_BIG=[{horLinePosList:[],verLinePosList:[-555]}],p.ENVELOPE_SMALL=[{horLinePosList:[],verLinePosList:[-367]}],p.ENVELOPE_JACKET=[{horLinePosList:[-115],verLinePosList:[]}],p.ENVELOPE_TICKET=[{horLinePosList:[-89],verLinePosList:[]}],p.YOUTUBE_COVER=[{horLinePosList:[-212,212],verLinePosList:[-773,773]}],p.LEAFLET_2_STAGES=[{horLinePosList:[],verLinePosList:[0]}],p.LEAFLET_3_STAGES=[{horLinePosList:[],verLinePosList:[-189,186]},{horLinePosList:[],verLinePosList:[-186,189]}],p.TICKET_PERFORATION_HOR=[{horLinePosList:[],verLinePosList:[124]},{horLinePosList:[],verLinePosList:[-126]}],p.TICKET_PERFORATION_VER=[{horLinePosList:[124],verLinePosList:[]}];var d=function(){function e(){r()(this,e)}return s()(e,null,[{key:"applyPresetToMeta",value:function(e){var t=this;if(e.templateType&&!h.b.isEmpty(e.templateType.id)){var n=this.preset.find(e.templateType.id);if(!l.a.isEmpty(n)){u.a.instance.editorMainVC.canvasAreaVC.syncPageRenderers(e.pages);var a=n.length;e.pages.forEach(function(e,i){t.applyPresetToPage(e,n[i%a])})}}}},{key:"applyPresetToPage",value:function(e,t){if(t){var n=u.a.instance.pageController.getPageRenderer(e);n&&n.guidelineRenderer&&(n.guidelineRenderer.clear(),t.horLinePosList.forEach(function(e){n.guidelineRenderer.appendGuideline(c.d.HORIZONTAL,e)}),t.verLinePosList.forEach(function(e){n.guidelineRenderer.appendGuideline(c.d.VERTICAL,e)}))}}}]),e}();d.preset=new p},475:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var a=n(0),i=n.n(a),r=n(1),o=n.n(r),s=n(233),c=n(306),u=n(226),l=n(415),h=n(441),p=n(90),d=function(){function e(){i()(this,e)}return o()(e,null,[{key:"makeCopyXml",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.a.instance.activeItems;return this.makeXml(e,!1,t)}},{key:"makeMockXml",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.a.instance.activeItems;return this.makeXml(e,!0,t)}},{key:"makeXml",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u.a.instance.activeItems,a=c.a.getItemsLTRBCoordinate(n),i=new p.a(a.left,a.top),r=[],o=s.b.convertSinglesToItems(n);o.forEach(function(e){var n=e.clone();t&&n.move(-i.x,-i.y),r.push(n)});var d=parseInt(String(a.getWidth())),m=parseInt(String(a.getHeight())),f=new l.a("SHEET"),g=f.root();g.attr("Version",e).elem("SHEETSIZE").attr("cx",d).attr("cy",m).close();var v=c.a.getAllSingleItems(r);return h.a.makeItemsXml(v,g),h.a.makeGroupsXml(r,g),f.xmldoc}}]),e}()},501:function(e,t){},502:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var a=n(0),i=n.n(a),r=n(1),o=n.n(r),s=n(225),c=n(224),u=n(243),l=n(238),h=function(){function e(){i()(this,e)}return o()(e,null,[{key:"getUsedFontFamilyList",value:function(){var e=new Set;return this.getTextItemOfAllPage().forEach(function(t){t.props.getCharList().forEach(function(t){return e.add(t.styles.family)})}),Array.from(e)}},{key:"getTextItemOfAllPage",value:function(){var e=[];return s.a.instance.dispatch(new c.c(function(t){t.pages.forEach(function(t){t.getAllSingleItems().forEach(function(t){t instanceof u.a?e=e.concat(t.getAllTextItemOfCells()):t instanceof l.a&&e.push(t)})})})),e}}]),e}()},503:function(e,t,n){"use strict";n.d(t,"b",function(){return C}),n.d(t,"a",function(){return S});var a=n(2),i=n.n(a),r=n(4),o=n.n(r),s=n(0),c=n.n(s),u=n(1),l=n.n(u),h=n(6),p=n.n(h),d=n(3),m=n.n(d),f=n(9),g=n.n(f),v=n(7),y=n.n(v),E=n(224),I=n(166),T=n(231),k=n(319),w=function(e){function t(e,n,a,i){var r,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return c()(this,t),(r=p()(this,m()(t).call(this,e,a,i,o))).stickerId=n,r.actionType=E.a.ADD_STICKER,r}var n,a;return y()(t,e),l()(t,[{key:"getImageSize",value:(a=o()(i.a.mark(function e(t){var n,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.from(t,!0).getStickerData(this.stickerId);case 2:return n=e.sent.thumb800url,e.next=5,I.b.setUrlImage(this.stickerId,n);case 5:return a=e.sent,e.abrupt("return",{imgWidth:a.width,imgHeight:a.height});case 7:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"createNewItem",value:(n=o()(i.a.mark(function e(t,n){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new T.d(t,n.toRect()));case 1:case"end":return e.stop()}},e)})),function(e,t){return n.apply(this,arguments)})},{key:"setItemOption",value:function(e){g()(m()(t.prototype),"setItemOption",this).call(this,e);var n=e;n.props.setPhotoKey(this.stickerId),n.orgType=this.getOriginalPhotoType()}}]),t}(n(260).j),C=function(e){function t(e,n,a,i,r){return c()(this,t),p()(this,m()(t).call(this,e,n,a,i,r))}return y()(t,e),l()(t,[{key:"getOriginalPhotoType",value:function(){return T.b.Image}}]),t}(w),S=function(e){function t(e,n,a,i,r){return c()(this,t),p()(this,m()(t).call(this,e,n,a,i,r))}return y()(t,e),l()(t,[{key:"getOriginalPhotoType",value:function(){return T.b.Sticker}}]),t}(w)},512:function(e,t,n){"use strict";n.d(t,"a",function(){return v});var a=n(0),i=n.n(a),r=n(1),o=n.n(r),s=n(6),c=n.n(s),u=n(3),l=n.n(u),h=n(9),p=n.n(h),d=n(7),m=n.n(d),f=n(31),g=n(8),v=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return i()(this,t),e=c()(this,l()(t).call(this,!0,void 0,"button")),n&&n.length>0&&(e.container.innerText=n),a&&a.length>0&&(e.container.className=a),e}return m()(t,e),o()(t,[{key:"onCreateView",value:function(){var e=this;p()(l()(t.prototype),"onCreateView",this).call(this),this.container.addEventListener("mouseenter",function(){e.container.classList.add("hover")}),this.container.addEventListener("mouseleave",function(){e.container.classList.remove("hover")}),this.onclick&&(this.container.onclick=this.onclick)}},{key:"setEnable",value:function(e){this.container&&this.enableStyle(!e,this.container,g.a.DISABLE)}},{key:"setChangable",value:function(e){this.container&&this.setActive(e)}},{key:"setOnClick",value:function(e){this.container&&(this.container.onclick=e),this.onclick=e}}]),t}(f.a)},513:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a,i;n(0);!function(e){e.ACTIVE="ACTIVE",e.DELETED="DELETED"}(a||(a={})),function(e){e[e.USER_MODE=1]="USER_MODE",e[e.ADMIN_MODE=2]="ADMIN_MODE",e[e.DEV_MODE=4]="DEV_MODE"}(i||(i={}))},517:function(e,t,n){"use strict";var a=n(2),i=n.n(a),r=n(4),o=n.n(r),s=n(0),c=n.n(s),u=n(1),l=n.n(u),h=n(225),p=n(333),d=n(224),m=n(519),f=n(367),g=n(231),v=n(228),y=n(353),E=n(268),I=function(){function e(){c()(this,e)}return l()(e,null,[{key:"getImageTroublePageIdxList",value:function(t){var n=[],a=!0,i=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(a=(o=s.next()).done);a=!0){var c=o.value;if(1===c.items.length){var u=c.items[0];e.isDownloadUnacceptableImageItem(u)&&n.push(c.pageIdx)}}}catch(e){i=!0,r=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw r}}return n}},{key:"isDownloadUnacceptableImageItem",value:function(e){var t=e instanceof g.d&&(e.orgType===g.b.Image||e.orgType===g.b.Sticker),n=e instanceof v.d&&e.isOnlyOneItem()&&e instanceof g.d&&(e.orgType===g.b.BackgroundImage||e.orgType===g.b.Skin),a=e instanceof E.a&&!(e instanceof y.a);return t||n||a}}]),e}(),T=n(16),k=n(288),w=n(30),C=new(function(){function e(){c()(this,e),this.iconMap=new Map,this.listeners=[]}var t,n,a;return l()(e,[{key:"getIconElements",value:function(e){var t=this;this.iconMap.size>0?e(this.generateIconElements()):(this.listeners.push(e),1===this.listeners.length&&this.initIconElements().then(function(){t.listeners.forEach(function(e){return e(t.generateIconElements())})}))}},{key:"generateIconElements",value:function(){return{pdf:this.getIconElement(k.b.PDF),jpg:this.getIconElement(k.b.JPG),png:this.getIconElement(k.b.PNG),ppt:this.getIconElement(k.b.PPTX)}}},{key:"getIconElement",value:function(e){return this.iconMap.has(e)?this.iconMap.get(e).cloneNode(!0):document.createElement("div")}},{key:"initIconElements",value:(a=o()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.setIcon(k.b.PDF,"".concat(w.a.RESOURCE_DOMAIN,"image/printout_info/download_popup/image_file_type_pdf.svg")),this.setIcon(k.b.JPG,"".concat(w.a.RESOURCE_DOMAIN,"image/printout_info/download_popup/image_file_type_jpg.svg")),this.setIcon(k.b.PNG,"".concat(w.a.RESOURCE_DOMAIN,"image/printout_info/download_popup/image_file_type_png.svg")),this.setIcon(k.b.PPTX,"".concat(w.a.RESOURCE_DOMAIN,"image/printout_info/download_popup/image_file_type_ppt.svg"))]);case 2:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})},{key:"setIcon",value:(n=o()(i.a.mark(function t(n,a){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this.iconMap,t.t1=n,t.next=4,e.fetchSvgElement(a);case 4:t.t2=t.sent,t.t0.set.call(t.t0,t.t1,t.t2);case 6:case"end":return t.stop()}},t,this)})),function(e,t){return n.apply(this,arguments)})}],[{key:"fetchSvgElement",value:(t=o()(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){var a=new XMLHttpRequest;a.open("GET",t,!0),a.overrideMimeType("image/svg+xml"),a.onload=function(){e(a.responseXML.documentElement)},a.onerror=function(){return n("fail fetchSvgElement : [".concat(t,"]"))},a.send()}));case 1:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})}]),e}()),S=n(227),A=n(287),b=n(253),L=n(271);n.d(t,"a",function(){return P});var P=function(){function e(){c()(this,e)}var t,n;return l()(e,null,[{key:"getFileTypeIconElements",value:(n=o()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,t){try{C.getIconElements(function(t){e(t)})}catch(e){t()}}));case 1:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)})},{key:"doDownload",value:function(e){h.a.instance.dispatch(new p.a(e))}},{key:"confirmDownload",value:function(e){h.a.instance.dispatch(new d.c(function(t,n,a){var i=a.canvasAreaVC.printout;S.a.getUserSetting().devMode&&i&&e()}))}},{key:"saveLatest",value:(t=o()(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.saveLatest({categoryIdx:A.a.getSaveCategoryIdx()});case 2:L.a.isSaveComplete()&&t();case 3:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})},{key:"getOutputInfo",value:function(){var e=null;return h.a.instance.dispatch(new d.c(function(t){var n,a,i=t.pages.length,r=t.pages[0].sheetSize,o=r.width,s=r.height,c=f.a.getPageSize().unit,u=m.a.getPrintoutWorkDimension(),l=c;if(c===T.a.PX){n=Math.round(T.a.changeUnit(u.width,l,T.a.MM,96)),a=Math.round(T.a.changeUnit(u.height,l,T.a.MM,96)),l=T.a.MM}else n=u.width,a=u.height;var h=Math.round(m.a.getPrintDPI());e={pageCount:i,pageWidth:o,pageHeight:s,workWidth:n,workHeight:a,unit:l,dpi:h}})),e}},{key:"getDownloadAcceptableInfo",value:function(){var e=null;return h.a.instance.dispatch(new d.c(function(t){var n=t.pages,a=I.getImageTroublePageIdxList(n);e={imgTroublePageIdxList:a}})),e}}]),e}()},519:function(e,t,n){"use strict";var a=n(0),i=n.n(a),r=n(1),o=n.n(r),s=n(16),c=function(){function e(){i()(this,e)}return o()(e,null,[{key:"getDPIBySize",value:function(e){var t=Math.max(e.width,e.height),n=s.a.changeUnit(t,e.unit,s.a.CM,96);return n<100?300:n<300?150:n<500?100:s.a.getDpi(n,2e4,e.unit)}},{key:"normalizeByUnit",value:function(e,t){switch(t){case s.a.CM:return Number(e.toFixed(1));case s.a.IN:return Number(e.toFixed(2));default:return Math.round(e)}}}]),e}(),u=n(367),l=n(110);n.d(t,"a",function(){return h});var h=function(){function e(){i()(this,e)}return o()(e,null,[{key:"getPrintDPI",value:function(){return c.getDPIBySize(u.a.getPageSize())}},{key:"getPrintoutWorkDimension",value:function(){var e=u.a.getPageSize();return new l.a(c.normalizeByUnit(e.width,e.unit),c.normalizeByUnit(e.height,e.unit))}}]),e}()},520:function(e,t,n){"use strict";var a=n(2),i=n.n(a),r=n(4),o=n.n(r),s=n(0),c=n.n(s),u=n(1),l=n.n(u),h=n(224),p=n(225),d=n(236),m=n(266),f=n(275),g=n(6),v=n.n(g),y=n(3),E=n.n(y),I=n(7),T=n.n(I),k=n(81),w=n(310),C=n(8),S=n(117),A=function(e){function t(e,n,a,i){var r;return c()(this,t),(r=v()(this,E()(t).call(this,{type:k.b.CUSTOM,customTypeElement:document.createElement("span"),customContentElement:document.createElement("div"),title:" "},S.a.getNotificationPusher()))).bizhowsMode=e,r.preSize=n,r.postSize=a,r.listener=i,r.customPopupContent=r.pusherPopupParam.customContentElement,r.radioContent=r.makeRadioPage(),r.bizhowsMode||(r.resizeContent=r.makeResizePage()),r.customPopupContent.appendChild(r.radioContent),r}return T()(t,e),l()(t,[{key:"makeRadioPage",value:function(){var e=this,t=this.createDivElement("radio_page"),n=this.createDivElement("page_title");if(n.innerText="디자인 불러오기 방식 선택하기",t.appendChild(n),this.radioTool=new w.b(function(){return e.onChangeRadioButton()},[new w.a(void 0,f.a.FILL,!1,this.makeRadioElement(f.a.FILL)),new w.a(void 0,f.a.FIT,!0,this.makeRadioElement(f.a.FIT)),new w.a(void 0,f.a.ORIGINAL,!1,this.makeRadioElement(f.a.ORIGINAL))]),t.appendChild(this.radioTool.getContainer()),!this.bizhowsMode){var a=document.createElement("button");a.innerText="또는, 템플릿 사이즈로 변경하기",a.addEventListener("click",function(){return e.changePopupContent(!1)}),a.appendChild(this.makeMoreIcon()),t.appendChild(a)}return t}},{key:"makeRadioElement",value:function(e){var t=document.createElement("div"),n=this.createDivElement(C.a.CHECKBOX_WRAP);n.appendChild(document.createElement("div")),t.appendChild(n);var a=document.createElement("span");return a.innerText=f.a.getLabel(e),t.appendChild(a),t}},{key:"makeMoreIcon",value:function(){var e=document.createElement("i");return e.className="icon_greater_than",e}},{key:"makeResizePage",value:function(){var e=this,t=document.createElement("div"),n=this.createDivElement("page_title");n.innerText="템플릿 원본 크기로 변경하였습니다.",t.appendChild(n),t.appendChild(this.makeSizeDisplayElement("pre_size",this.preSize,!0)),t.appendChild(this.makeSizeDisplayElement("post_size",this.postSize,!1));var a=document.createElement("button");return a.innerText="이전 크기로 돌아갈래요!",a.addEventListener("click",function(){return e.changePopupContent(!0)}),a.appendChild(this.makeMoreIcon()),t.appendChild(a),t}},{key:"makeSizeDisplayElement",value:function(e,t,n){var a=document.createElement("span");return a.className=e,a.innerText="".concat(Math.floor(t.width)," × ").concat(Math.floor(t.height)," ").concat(n?"→ ":""),a}},{key:"changePopupContent",value:function(e){var t=this.customPopupContent.childNodes.item(0)===this.radioContent;this.customPopupContent.removeChild(t?this.radioContent:this.resizeContent),this.customPopupContent.appendChild(t?this.resizeContent:this.radioContent),this.listener&&this.listener.onChangeCanvasSize(t?this.postSize:this.preSize,e)}},{key:"onChangeRadioButton",value:function(){this.listener&&this.listener.onChangeAlignType(this.getSelectedArrangeType())}},{key:"getSelectedArrangeType",value:function(){return this.radioTool?this.radioTool.getValue():f.a.FIT}},{key:"getClassName",value:function(){return"popup item_fit_mode_select_popup"}},{key:"setSelectedArrangeType",value:function(e){this.radioTool.setValue(e)}}]),t}(k.a),b=n(229),L=n(250),P=n(289),x=n(16),_=n(43);n.d(t,"a",function(){return N});var R=function(){function e(){c()(this,e),this.requireRollback=!1}var t;return l()(e,[{key:"getAlignConfig",value:function(){return this.alignConfig}},{key:"setAlignConfig",value:function(e){var t=this;this.alignConfig=e,this.originalSizeClonePages=[],this.requireRollback=!1,p.a.instance.dispatch(new h.c(function(e){e.pages.forEach(function(e){return t.originalSizeClonePages.push(e.clone())})}))}},{key:"alignItems",value:(t=o()(i.a.mark(function e(){var t,n,a=this,r=arguments;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=!(r.length>0&&void 0!==r[0])||r[0],n=!(r.length>1&&void 0!==r[1])||r[1],e.abrupt("return",new Promise(function(e,r){try{p.a.instance.dispatch(new h.c(function(){var r=o()(i.a.mark(function r(o,s,c){return i.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(a.alignConfig.pageTargetAll?o.pages.forEach(function(e){return a.alignItemsInPage(e,a.alignConfig)}):a.alignItemsInPage(o.pages[a.alignConfig.targetPageIdx],a.alignConfig),a.requireRollback=!0,!t){i.next=15;break}return n&&c.canvasAreaVC.updateZoomFitAfterRender(),c.itemHandleVC.updateHandlerPosition(),d.a.unselectAllItems(),c.canvasAreaVC.syncPageRenderers(o.pages),c.canvasAreaVC.updatePagingManager(),i.next=10,c.renderAll(o,s);case 10:if(a.alignConfig){i.next=13;break}return i.next=13,(new m.d).commitAction(o,s,c);case 13:c.canvasAreaVC.scrollToPage(a.alignConfig.targetPageIdx),e();case 15:case"end":return i.stop()}},r)}));return function(e,t,n){return r.apply(this,arguments)}}()))}catch(e){r()}}));case 3:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)})},{key:"alignItemsInPage",value:function(e,t){this.requireRollback&&this.rollbackItemPosition(e),e.arrangeItems(t.selectedType,t.beforeSheetSize)}},{key:"rollbackItemPosition",value:function(e){var t=this.originalSizeClonePages[e.pageIdx].getAllSingleItems(),n=e.getAllSingleItems(),a=t.find(function(e){return!e.isOnlyOneItem()}),i=n.find(function(e){return!e.isOnlyOneItem()});if(a&&i&&t.length===n.length){var r=a.getLTRBCoordinate(),o=i.getLTRBCoordinate(),s=r.getWidth()/o.getWidth();o.changeScale(s);var c=r.left-o.left,u=r.top-o.top,l=!0,h=!1,p=void 0;try{for(var d,m=n[Symbol.iterator]();!(l=(d=m.next()).done);l=!0){var f=d.value;f.isOnlyOneItem()||(f.scale(s),f.move(c,u,{forceMove:!0}))}}catch(e){h=!0,p=e}finally{try{l||null==m.return||m.return()}finally{if(h)throw p}}}}},{key:"updateOriginalPagesGuideLineInfo",value:function(){var e=this;p.a.instance.dispatch(new h.c(function(t){t.pages.forEach(function(t,n){var a=e.originalSizeClonePages[n];a&&(a.guidelineFactoryInfos=t.guidelineManager.getGuidelineFactoryInfos())})}))}},{key:"openPopup",value:function(e,t){this.popup&&this.popup.closeInstantly();var n=b.a.getEditorOpenOption().getChannel()===L.b.BIZHOWS;this.popup=new A(n,e,t,this),this.popup.open(),this.initTimer()}},{key:"closePopup",value:function(){this.popup&&this.popup.close()}},{key:"initTimer",value:function(){var t=this;this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){return t.onTimerExpired()},e.CLOSING_TIME)}},{key:"onTimerExpired",value:function(){this.closePopup(),this.timeout=null}},{key:"onChangeAlignType",value:function(e){this.alignConfig.selectedType=e,this.alignItems(!0,!1),this.initTimer()}},{key:"onChangeCanvasSize",value:function(e,t){t||this.alignConfig.selectedType===f.a.FIT||(this.alignConfig.selectedType=f.a.FIT,this.alignItems(!0,!1)),p.a.instance.dispatch(new P.b(new _.a(e.width,e.height,x.a.PX),void 0,!0)),this.alignConfig.selectedType=t?f.a.FIT:f.a.FILL,this.alignItems(!0,!1),this.popup.setSelectedArrangeType(f.a.FIT),this.initTimer()}}]),e}();R.CLOSING_TIME=5e3;t.b=new R;var N=function e(t,n,a,i){c()(this,e),this.beforeSheetSize=t,this.pageTargetAll=n,this.targetPageIdx=a,this.selectedType=i}},536:function(e,t){},538:function(e,t){},570:function(e,t){}}]);