(window.webpackJsonp=window.webpackJsonp||[]).push([[2],Array(31).concat([function(e,t,n){"use strict";n.d(t,"b",function(){return y}),n.d(t,"c",function(){return m}),n.d(t,"a",function(){return E});var r=n(1),i=n.n(r),a=n(0),o=n.n(a),s=n(6),u=n.n(s),c=n(3),l=n.n(c),h=n(7),p=n.n(h),d=n(131),f=n(8),g=n(61),v=n(107),y=function(e){function t(){return o()(this,t),u()(this,l()(t).apply(this,arguments))}return p()(t,e),t}(d.a),m=function(e){function t(){return o()(this,t),u()(this,l()(t).apply(this,arguments))}return p()(t,e),t}(d.a),E=function(){function e(t,n,r,i){o()(this,e),this.contentsStatesChanged=!1,this.positionStatesChanged=!1,this.rowVisible=!0,this.clickOnContainer=!1,this.viewCreated=!1,this.id=n,t&&(this.containerStationary=void 0!==i,this.container=i||document.createElement(r||"div"),void 0!==this.id&&(this.container.id=this.id),setTimeout(this.onCreateViewIfNotCreated.bind(this),0))}return i()(e,[{key:"setOnClickListener",value:function(e){this.onClickListener=e}},{key:"setViewComponentListener",value:function(e){this.viewComponentListener=e}},{key:"getId",value:function(){return this.id}},{key:"getContainer",value:function(){return this.onCreateViewIfNotCreated(),this.container}},{key:"setReady",value:function(){}},{key:"onStartView",value:function(){this.onCreateViewIfNotCreated()}},{key:"onDataChanged",value:function(e){this.designDoc=e,this.renderView()}},{key:"renderView",value:function(){this.onCreateViewIfNotCreated()}},{key:"checkUpStatesChange",value:function(e){this.checkUpContentsChange(e.contents),this.positionStatesChanged=void 0!==e.position&&(void 0===this.positionStates||e.position.isChangedFrom(this.positionStates)),this.positionStates=e.position}},{key:"checkUpContentsChange",value:function(e){this.contentsStatesChanged=void 0!==e&&(void 0===this.contentsStates||e.isChangedFrom(this.contentsStates)),this.contentsStates=e}},{key:"setVisibility",value:function(e){return this.container&&this.enableStyle(!e,this.container,f.a.HIDDEN),!e&&this.viewComponentListener&&this.viewComponentListener.onClose(this),this}},{key:"isVisible",value:function(){return!!this.container&&!this.container.classList.contains(f.a.HIDDEN)}},{key:"toggleVisibility",value:function(){this.setVisibility(!this.isVisible())}},{key:"setActive",value:function(e){return this.container&&this.enableStyle(e,this.container,f.a.ACTIVE),this.onChangeActiveState(),this}},{key:"isActive",value:function(){return!!this.container&&this.container.classList.contains(f.a.ACTIVE)}},{key:"toggleActive",value:function(){return this.setActive(!this.isActive())}},{key:"moveBelowElement",value:function(e){if(this.onCreateViewIfNotCreated(),void 0!==e){var t=v.a.calculatePopupOffset(e);this.updatePosition(t.left,t.top)}}},{key:"updatePosition",value:function(e,t){this.onCreateViewIfNotCreated(),this.container.setAttribute("style","left:".concat(e,"px;top:").concat(t,"px;")),this.enableStyle($(window).width()<$(this.container).width()+e,this.container,f.a.LEFT_SIDE)}},{key:"onCreateViewIfNotCreated",value:function(){this.viewCreated||(this.viewCreated=!0,this.onCreateView())}},{key:"onCreateView",value:function(){this.clickOnContainer&&this.container.addEventListener("click",this.onClicked.bind(this))}},{key:"onClicked",value:function(e){this.onClickListener&&(this.onClickListener.onClick(this),e.stopPropagation())}},{key:"createDivElement",value:function(e,t){var n=document.createElement("div");return n.className=e,t&&n.classList.add(t),n}},{key:"enableStyle",value:function(e,t,n){e?t.classList.add(n):t.classList.remove(n)}},{key:"showPopupView",value:function(e,t){this.popupView=new g.a(document.body,e,t,!0)}},{key:"hidePopupView",value:function(){this.popupView.destroy()}},{key:"onChangeActiveState",value:function(){}},{key:"destroy",value:function(){if(this.containerStationary&&this.container){for(;this.container.firstChild;)this.container.removeChild(this.container.lastChild);this.container.classList.remove("show")}else this.detachContainer();this.container=void 0,this.viewComponentListener&&this.viewComponentListener.onClose(this)}},{key:"detachContainer",value:function(){this.container&&this.container.parentElement&&this.container.parentElement.removeChild(this.container)}}]),e}()},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r;n.d(t,"a",function(){return r}),function(e){e.UNKNOWN="UNKNOWN",e.FAIL_TO_UPDATE_PARAM="FAIL_TO_UPDATE_PARAM",e.FAIL_TO_USING_UPDATE_API="FAIL_TO_USING_UPDATE_API",e.FAIL_TO_CREATE_PARAMETER="FAIL_TO_CREATE_PARAMETER",e.FAIL_TO_CREATE_XML="FAIL_TO_CREATE_XML",e.FAIL_TO_MAKE_THUMBNAIL="FAIL_TO_MAKE_THUMBNAIL",e.FAIL_TO_BIZHOWS_TO_CART="FAIL_TO_BIZHOWS_TO_CART",e.FAIL_TO_BIZHOWS_TO_CART_API="FAIL_TO_BIZHOWS_TO_CART_API",e.FAIL_TO_BIZHOWS_UPDATE_API="FAIL_TO_BIZHOWS_UPDATE_API",e.FAIL_TO_CREATE_DESIGN_API="FAIL_TO_CREATE_DESIGN_API",e.FAIL_TO_CREATE_DESIGN="FAIL_TO_CREATE_DESIGN",e.FAIL_TO_UPDATE_DESIGN_API="FAIL_TO_UPDATE_DESIGN_API",e.FAIL_TO_UPDATE_DESIGN="FAIL_TO_UPDATE_DESIGN",e.FAIL_TO_CHECK_EDITABLE_API="FAIL_TO_CHECK_EDITABLE_API",e.FAIL_TO_CHECK_UPDATABLE_API="FAIL_TO_CHECK_UPDATABLE_API",e.RETRIED_BUT_FAILED="RETRIED_BUT_FAILED"}(r||(r={}))},,,,,,,function(e,t,n){"use strict";var r;n.d(t,"a",function(){return r}),function(e){e.HASH_COMPARE_API="해시 비교검사 실패",e.BIZHOWS_TEMPLATE_LINK_ERROR="비즈템플릿 링크정보 조회하다 오류!",e.TBPE_STICKER="스티커디비 정보조회 실패",e.USER_MAKE="사용자 초기화 실패",e.UNICORN_DESIGN_API="유니콘 디자인 구성 실패",e.BIZHOWS_DESIGN_API="비즈하우스 디자인 구성 실패",e.BIZHOWS_STICKER_API="비즈하우스 스티커 구성 실패",e.BIZHOWS_SKIN_API="비즈하우스 스킨 구성 실패",e.TEMPLATE_STYLE_API="아이템 효과 구성 실패",e.TEMPLATE_DESIGN_API="아이템 조합 구성 실패",e.CATEGORY_API="카테고리 데이터 구성 실패",e.DEFAULT_API="기본 API 오류",e.UNICORN_API="유니콘 API 오류",e.COMMODITY_INSTANCE="CommodityInstance 구성 실패",e.COPY_SHEETS="CopySheet XML 파싱 실패",e.NEW_TEMPLATE_SHEETS="옛날 템플릿디자인 구성 실패",e.NEW_THEME_SHEETS="옛날 테마디자인 구성 실패",e.TEMPLATE_MANAGEMENT_API="템플릿 관리 API 오류",e.EXTERNAL_STICKER_API="외부 이미지 리스트 구성 실패"}(r||(r={}))},,,,function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=function(){function e(t){i()(this,e),this.idx=0,this.title=e.getDefaultTitle(),this.accountId=0,this.latestDesignHistoryIdx=0,this.sharedPrivate=!1,this.sharedPublic=!1,t&&(this.idx=t.idx||0,this.title=t.title,this.accountId=t.accountId,this.latestDesignHistoryIdx=t.latestDesignHistoryIdx,this.sharedPrivate=t.sharedPrivate,this.sharedPublic=t.sharedPublic)}return o()(e,[{key:"getIdx",value:function(){return this.idx}},{key:"getTitle",value:function(){return this.title}},{key:"getValidTitle",value:function(){var e=this.getTitle();return e.length>50&&(e=e.substr(0,50)),e.replace(/\\|\/|\:|\*|\?|\"|\<|\>|\-|\||\r\n|\r|\n/gi,"_")}},{key:"getLatestDesignHistoryIdx",value:function(){return this.latestDesignHistoryIdx}},{key:"isLoaded",value:function(){return this.idx>0}}],[{key:"getDefaultTitle",value:function(){return"제목을 입력해주세요."}},{key:"get",value:function(){return this.instance}},{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new e;this.instance=t}}]),e}();s.instance=new s},,,,function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return u});var r,i=n(0),a=n.n(i),o=n(1),s=n.n(o);!function(e){e.SELECTED_TEAM_IDX="SELECTED_TEAM_IDX",e.SELECTED_TEAM_SCOPE="SELECTED_TEAM_SCOPE"}(r||(r={}));var u=function(){function e(){a()(this,e)}return s()(e,null,[{key:"setItem",value:function(e,t){sessionStorage.setItem(e,t)}},{key:"getItem",value:function(e){return sessionStorage.getItem(e)}},{key:"removeItem",value:function(e){sessionStorage.removeItem(e)}},{key:"clear",value:function(){sessionStorage.clear()}}]),e}()},,,,,,,function(e,t,n){"use strict";var r=n(0),i=n.n(r),a=n(6),o=n.n(a),s=n(3),u=n.n(s),c=n(7),l=n.n(c),h=function(e){function t(){return i()(this,t),o()(this,u()(t).apply(this,arguments))}return l()(t,e),t}(n(56).a);t.a=new h},,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(69),u=n(12),c=function(){function e(){i()(this,e)}return o()(e,null,[{key:"open",value:function(e,t,n){var r=window.screenLeft?window.screenLeft:window.screenX,i=window.screenTop?window.screenTop:window.screenY,a=(window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width)/2-t/2+r,o=(window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height)/2-n/2+i;window.open(e,"popup","width=".concat(t,",height=").concat(n,",top=").concat(o,",left=").concat(a)+",location=no,menubar=no,resizable=no,scrollbars=no,status=no,titlebar=no,toolbar=no")}},{key:"openLoginPopup",value:function(e,t,n){return u.a.getUser().isLogin()?(t&&t(),!1):(s.a.open(e,t,n),!0)}}]),e}()},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return I}),n.d(t,"b",function(){return r});var r,i=n(2),a=n.n(i),o=n(4),s=n.n(o),u=n(0),c=n.n(u),l=n(1),h=n.n(l),p=n(6),d=n.n(p),f=n(3),g=n.n(f),v=n(9),y=n.n(v),m=n(7),E=n.n(m),k=n(109),S=n(13),I=function(e){function t(){return c()(this,t),d()(this,g()(t).apply(this,arguments))}var n,r,i,o,u,l,p,f,v;return E()(t,e),h()(t,null,[{key:"requestInternalTemplateListResponse",value:(v=s()(a.a.mark(function e(t,n){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.requestV3(void 0,S.b.GET,t,n,void 0,!0);case 2:return(r=e.sent).pagination&&(r.pagination.next=r.pagination.totalRow>r.pagination.page*r.pagination.pageSize),r.list=r.list.map(function(e){return k.a.createFromObject(e)}),e.abrupt("return",r);case 6:case"end":return e.stop()}},e,this)})),function(e,t){return v.apply(this,arguments)})},{key:"getTemplateListResponse",value:(f=s()(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.requestInternalTemplateListResponse("/api/template",t);case 2:return(n=e.sent).pagination.totalPage<t.page&&(n.list=[]),e.abrupt("return",n);case 5:case"end":return e.stop()}},e,this)})),function(e){return f.apply(this,arguments)})},{key:"getAllTypeTemplateList",value:(p=s()(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.requestInternalTemplateListResponse("/api/template/all-type",t);case 2:return e.abrupt("return",e.sent.list);case 3:case"end":return e.stop()}},e,this)})),function(e){return p.apply(this,arguments)})},{key:"findOneTemplate",value:(l=s()(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=k.a,e.next=3,this.requestV3(k.a.prototype,S.b.GET,"/api/template/".concat(t));case 3:return e.t1=e.sent,e.abrupt("return",e.t0.createFromObject.call(e.t0,e.t1));case 5:case"end":return e.stop()}},e,this)})),function(e){return l.apply(this,arguments)})},{key:"findOneOfTypeAndIndexList",value:(u=s()(a.a.mark(function e(t,n){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.requestV3(k.a.prototype,S.b.GET,"/api/template/match?typeId=".concat(t),{idxList:n},!1,!0);case 2:if(!(r=e.sent)){e.next=7;break}e.t0=r,e.next=10;break;case 7:return e.next=9,this.findOneTemplate(n[0]);case 9:e.t0=e.sent;case 10:return e.abrupt("return",e.t0);case 11:case"end":return e.stop()}},e,this)})),function(e,t){return u.apply(this,arguments)})},{key:"createTemplate",value:(o=s()(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.requestV3(k.a.prototype,S.b.POST,"/api/template",JSON.stringify(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"updateTemplate",value:(i=s()(a.a.mark(function e(t,n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.requestV3(k.a.prototype,S.b.POST,"/api/template/".concat(t,"/update"),JSON.stringify(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(e,t){return i.apply(this,arguments)})},{key:"deleteTemplate",value:(r=s()(a.a.mark(function e(n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y()(g()(t),"requestV3",this).call(this,void 0,S.b.POST,"/api/template/".concat(n,"/delete"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"fetchRecentList",value:(n=s()(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.requestInternalTemplateListResponse("/api/template/recent",{resourceGroup:t});case 3:return e.abrupt("return",e.sent.list);case 6:return e.prev=6,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",[]);case 10:case"end":return e.stop()}},e,this,[[0,6]])})),function(e){return n.apply(this,arguments)})}]),t}(S.a);!function(e){e.ACTIVE="ACTIVE",e.INACTIVE="INACTIVE",e.DELETED="DELETED"}(r||(r={}))},function(e,t,n){"use strict";var r;n.d(t,"a",function(){return r}),function(e){e[e.BACK_SPACE=8]="BACK_SPACE",e[e.ENTER=13]="ENTER",e[e.SHIFT=16]="SHIFT",e[e.CTRL=17]="CTRL",e[e.ALT=18]="ALT",e[e.ESC=27]="ESC",e[e.SPACE=32]="SPACE",e[e.LEFT=37]="LEFT",e[e.UP=38]="UP",e[e.RIGHT=39]="RIGHT",e[e.DOWN=40]="DOWN",e[e.DELETE=46]="DELETE",e[e.NUMPAD_PLUS=107]="NUMPAD_PLUS",e[e.NUMPAD_MINUS=109]="NUMPAD_MINUS",e[e.PLUS_EQUAL=187]="PLUS_EQUAL",e[e.MINUS_OR_UNDERBAR=189]="MINUS_OR_UNDERBAR"}(r||(r={}))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return i});var r,i,a=n(2),o=n.n(a),s=n(4),u=n.n(s);!function(e){var t=new Map;function n(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.NONE;return t.get(n+e)}function r(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.NONE;t.set(r+e,n)}function a(){return(a=u()(o.a.mark(function e(t,a){var s,u,l=arguments;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s=l.length>2&&void 0!==l[2]?l[2]:i.NONE,null==n(t,s)){e.next=3;break}return e.abrupt("return",n(t,s));case 3:return e.next=5,c(a);case 5:return u=e.sent,r(t,u,s),e.abrupt("return",u);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function s(){return(s=u()(o.a.mark(function e(t,a){var s,u,c=arguments;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s=c.length>2&&void 0!==c[2]?c[2]:i.NONE,c.length>3&&void 0!==c[3]&&c[3]||null==n(t,s)){e.next=4;break}return e.abrupt("return",n(t,s));case 4:return e.next=6,h(a);case 6:return u=e.sent,r(t,u,s),e.abrupt("return",u);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function c(e){return l.apply(this,arguments)}function l(){return(l=u()(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){var r=new XMLHttpRequest;r.open("GET",t),r.onreadystatechange=function(){r.readyState===XMLHttpRequest.DONE?e(r.responseText):n("loadDataAsync fail: [".concat(t,"] "))},r.onerror=function(){return n("loadDataAsync fail: [".concat(t,"] "))},r.send()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function h(e){return p.apply(this,arguments)}function p(){return(p=u()(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){var r,i=new Image;i.crossOrigin="Anonymous",i.onload=function(){e(i)},i.onerror=function(){n("loadImageAsync fail: [".concat(t,"]"))};var a=!(r=(t||"").replace(/^http:\/\//i,"https://")).startsWith("data:")&&!r.includes("?");i.src=r+(a?"?_":"")}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}e.clear=function(){t.clear()},e.getData=n,e.setData=r,e.deleteData=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.NONE;return t.delete(n+e)},e.hasData=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.NONE;return null!=t.get(n+e)},e.setUrlData=function(e,t){return a.apply(this,arguments)},e.setUrlImage=function(e,t){return s.apply(this,arguments)},e.loadDataAsync=c,e.loadImageAsync=h}(r||(r={})),function(e){e.NONE="",e.YOUTUBE_THUMBNAIL="YOUTUBE_THUMBNAIL"}(i||(i={}))},,function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"b",function(){return r});var r,i,a=n(0),o=n.n(a),s=n(1),u=n.n(s),c=n(137),l=function(){function e(t){o()(this,e),this.keyboardEvent=t}return u()(e,[{key:"isSelectAllHotKey",value:function(){return!!this.keyboardEvent&&(this.isMacOS()?this.keyboardEvent.metaKey&&this.keyboardEvent.code===i.KEY_A:this.keyboardEvent.ctrlKey&&this.keyboardEvent.code===i.KEY_A)}},{key:"isMacOS",value:function(){return Boolean(navigator.platform.match("Mac"))}},{key:"eventPreventDefault",value:function(){this.keyboardEvent.preventDefault()}},{key:"isBackSpace",value:function(){return this.keyboardEvent.key===r.BACK_SPACE}},{key:"isEnter",value:function(){return this.keyboardEvent.key===r.ENTER}},{key:"isEsc",value:function(){return this.keyboardEvent.key===r.ESC||this.keyboardEvent.key===r.ESCAPE}},{key:"isCtrlOrCommandPress",value:function(){return!!this.keyboardEvent&&(this.isMacOS()?this.keyboardEvent.metaKey:this.keyboardEvent.ctrlKey)}},{key:"isLayerWindowToggleHotkey",value:function(){return this.isCtrlOrCommandPress()&&this.isShiftPress()&&this.keyboardEvent.code===i.KEY_Y}},{key:"isGroupingHotkey",value:function(){return this.isCtrlOrCommandPress()&&this.keyboardEvent.code===i.KEY_G}},{key:"isUngroupingHotkey",value:function(){return this.isCtrlOrCommandPress()&&this.isShiftPress()&&this.keyboardEvent.code===i.KEY_G}},{key:"isRulerToggleHotkey",value:function(){return this.isCtrlOrCommandPress()&&this.isAltPress()&&this.keyboardEvent.code===i.KEY_R}},{key:"isAlt",value:function(){return this.keyboardEvent.key===r.ALT}},{key:"isAltPress",value:function(){return this.keyboardEvent.altKey}},{key:"isShift",value:function(){return this.keyboardEvent.key===r.SHIFT}},{key:"isShiftPress",value:function(){return this.keyboardEvent.shiftKey}},{key:"isSpace",value:function(){return this.keyboardEvent.code===i.SPACE}},{key:"isLeft",value:function(){return this.keyboardEvent.code===i.ARROW_LEFT}},{key:"isUp",value:function(){return this.keyboardEvent.code===i.ARROW_UP}},{key:"isRight",value:function(){return this.keyboardEvent.code===i.ARROW_RIGHT}},{key:"isDown",value:function(){return this.keyboardEvent.code===i.ARROW_DOWN}},{key:"isDelete",value:function(){return this.keyboardEvent.code===i.DELETE}},{key:"isNumpadPlus",value:function(){return this.keyboardEvent.keyCode===c.a.NUMPAD_PLUS}},{key:"isNumpadMinus",value:function(){return this.keyboardEvent.keyCode===c.a.NUMPAD_MINUS}},{key:"isPlusOrEqual",value:function(){return this.keyboardEvent.code===i.PLUS_EQUAL}},{key:"isMinusOrUnderbar",value:function(){return this.keyboardEvent.code===i.MINUS_OR_UNDERBAR}},{key:"isCtrlAlt",value:function(){return this.isCtrlOrCommandPress()&&this.isAltPress()}},{key:"isCtrlPlus",value:function(){return this.isCtrlOrCommandPress()&&(this.isPlusOrEqual()||this.isNumpadPlus())}},{key:"isCtrlMinus",value:function(){return this.isCtrlOrCommandPress()&&(this.isMinusOrUnderbar()||this.isNumpadMinus())}},{key:"isCtrlAltPlus",value:function(){return this.isCtrlAlt()&&(this.isPlusOrEqual()||this.isNumpadPlus())}},{key:"isCtrlAltMinus",value:function(){return this.isCtrlAlt()&&(this.isMinusOrUnderbar()||this.isNumpadMinus())}},{key:"isCtrlSpace",value:function(){return this.isCtrlOrCommandPress()&&this.isSpace()}},{key:"isArrowDirection",value:function(){return this.isLeft()||this.isUp()||this.isRight()||this.isDown()}}],[{key:"isLeftKey",value:function(e){return e===r.ARROW_LEFT||"Left"===e}},{key:"isRightKey",value:function(e){return e===r.ARROW_RIGHT||"Right"===e}},{key:"isUpKey",value:function(e){return e===r.ARROW_UP||"Up"===e}},{key:"isDownKey",value:function(e){return e===r.ARROW_DOWN||"Down"===e}}]),e}();!function(e){e.ARROW_LEFT="ArrowLeft",e.ARROW_UP="ArrowUp",e.ARROW_RIGHT="ArrowRight",e.ARROW_DOWN="ArrowDown",e.ALT="Alt",e.BACK_SPACE="Backspace",e.END="End",e.ENTER="Enter",e.ESC="Esc",e.ESCAPE="Escape",e.HOME="Home",e.META="Meta",e.SHIFT="Shift",e.SPACE_BAR=" ",e.PAGE_UP="PageUp",e.PAGE_DOWN="PageDown",e.TAB="Tab"}(r||(r={})),function(e){e.ALT="ALT",e.ARROW_LEFT="ArrowLeft",e.ARROW_DOWN="ArrowDown",e.ARROW_RIGHT="ArrowRight",e.ARROW_UP="ArrowUp",e.DELETE="Delete",e.KEY_A="KeyA",e.KEY_G="KeyG",e.KEY_R="KeyR",e.KEY_Y="KeyY",e.META_LEFT="MetaLeft",e.META_RIGHT="MetaRight",e.MINUS_OR_UNDERBAR="Minus",e.PLUS_EQUAL="Equal",e.SPACE="Space",e.TAB="Tab"}(i||(i={}))},,function(e,t,n){"use strict";n.d(t,"a",function(){return k});var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(6),u=n.n(s),c=n(3),l=n.n(c),h=n(9),p=n.n(h),d=n(7),f=n.n(d),g=n(48),v=n(8),y=n(31),m=n(73),E=n(67),k=function(e){function t(e,n,r,a,o,s){var c,h=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return i()(this,t),(c=u()(this,l()(t).call(this,!0))).visibleInMobile=!1,c.options=o,c.parentElement=e,c.location=n,c.defaultContent=r,c.activeContent=a,c.tooltipID=s,c.attachToReference=h,c}return f()(t,e),o()(t,[{key:"onCreateView",value:function(){var e=this;if(p()(l()(t.prototype),"onCreateView",this).call(this),!this.options||void 0===this.options.setDefaultEvents||this.options.setDefaultEvents){var n=this.options&&void 0!==this.options.duration?this.options.duration:700,r=!(!this.options||void 0===this.options.atDisable)&&this.options.atDisable;this.parentElement.addEventListener("mouseenter",function(){r===e.parentElement.classList.contains("disabled")&&e.show(!1,n)}),this.parentElement.addEventListener("mouseenter",function(){r===e.parentElement.classList.contains("disabled")&&e.show(!1,n)}),this.parentElement.addEventListener("touchstart",function(t){t.touches.length>=2?e.hide():r===e.parentElement.classList.contains("disabled")&&e.show(!1,n)}),this.parentElement.addEventListener("mouseleave",function(){e.hide()}),window.addEventListener("keydown",function(){e.hide()}),this.parentElement.addEventListener("click",function(){r!==e.parentElement.classList.contains("disabled")?e.hide():e.show(!0,n)})}}},{key:"updateTooltip",value:function(e,t){if(e){if(e.innerHTML="",e.className=v.a.TOOLTIP,this.tooltipID&&e.setAttribute("id",this.tooltipID),this.location&&e.classList.add(this.location),t.title){var n=document.createElement("p");if(t.title.name){var r=document.createElement("span");r.className="title",r.innerHTML=t.title.name,n.appendChild(r),t.title.shortcut&&r.classList.add("title_p")}if(t.title.shortcut){var i=document.createElement("span");i.className="shortcut",i.innerHTML=t.title.shortcut,n.appendChild(i)}e.appendChild(n)}if(t.subtitles){var a=document.createElement("div");t.subtitles.forEach(function(e){var t=document.createElement("p");if(e.name){var n=document.createElement("span");n.className="subtitle",n.innerHTML=e.name,t.appendChild(n)}if(e.shortcut){var r=document.createElement("span");r.className="shortcut",r.innerHTML=e.shortcut,t.appendChild(r)}a.appendChild(t)}),e.appendChild(a)}if(t.description){var o=document.createElement("p"),s=document.createElement("span");s.className="description",s.innerHTML=t.description,o.appendChild(s),e.appendChild(o)}(e.childElementCount>1||t.subtitles&&t.subtitles.length>1)&&e.classList.add("thick_tooltip")}}},{key:"getDefaultTooltip",value:function(){return this.defaultTooltip}},{key:"setVisibleinMobile",value:function(e){var t=this;this.visibleInMobile=e,E.a.isMobileDevice()&&this.visibleInMobile&&!this.background&&(this.background=document.createElement("div"),this.background.className="tooltip_background",this.background.addEventListener("touchstart",function(){t.hide()}))}},{key:"setLocation",value:function(e,t,n){var r=$(this.parentElement).offset(),i=r.left,a=r.top,o=this.parentElement.getBoundingClientRect(),s=o.width,u=o.height,c=e.offsetWidth,l=e.offsetHeight;switch(this.location){case m.a.L:e.style.left="".concat(i-c-10,"px"),e.style.top="".concat(a+u/2-l/2,"px");break;case m.a.LT:e.style.left="".concat(i-c-10,"px"),e.style.top="".concat(a+u/2-l+21,"px");break;case m.a.LB:e.style.left="".concat(i-c-10,"px"),e.style.top="".concat(a+u/2-21,"px");break;case m.a.T:e.style.left="".concat(i+s/2-c/2,"px"),e.style.top="".concat(a-l-10,"px");break;case m.a.TL:e.style.left="".concat(i+s/2-c+21,"px"),e.style.top="".concat(a-l-10,"px");break;case m.a.TR:e.style.left="".concat(i+s/2-21,"px"),e.style.top="".concat(a-l-10,"px");break;case m.a.R:e.style.left="".concat(i+s+10,"px"),e.style.top="".concat(a+u/2-l/2,"px");break;case m.a.RT:e.style.left="".concat(i+s+10,"px"),e.style.top="".concat(a+u/2-l+21,"px");break;case m.a.RB:e.style.left="".concat(i+s+10,"px"),e.style.top="".concat(a+u/2-21,"px");break;case m.a.B:e.style.left="".concat(i+s/2-c/2,"px"),e.style.top="".concat(a+u+10,"px");break;case m.a.BL:e.style.left="".concat(i+s/2-c+21,"px"),e.style.top="".concat(a+u+10,"px");break;case m.a.BR:e.style.left="".concat(i+s/2-21,"px"),e.style.top="".concat(a+u+10,"px");break;case m.a.CUSTOM:void 0!==t&&(e.style.left="".concat(t,"px")),void 0!==n&&(e.style.top="".concat(n,"px"))}}},{key:"show",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:700,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!E.a.isMobileDevice()||this.visibleInMobile){this.defaultContent&&!this.defaultTooltip&&(this.defaultTooltip=document.createElement("div"),this.updateTooltip(this.defaultTooltip,this.defaultContent)),this.activeContent&&!this.activeTooltip&&(this.activeTooltip=document.createElement("div"),this.updateTooltip(this.activeTooltip,this.activeContent));var i,a,o=this.parentElement.classList.contains("active");o=e?!o:o,this.activeTooltip&&o?(i=this.defaultTooltip,a=this.activeTooltip):(i=this.activeTooltip,a=this.defaultTooltip),i&&i.parentElement&&i.parentElement.removeChild(i),a&&(a.parentElement||(!0===this.attachToReference&&void 0!==this.parentElement?this.parentElement.appendChild(a):this.background?(document.body.appendChild(this.background),this.background.appendChild(a)):document.body.appendChild(a),g.a.fadeOutDisplay(a),g.a.fadeInDisplay(a,"1",t)),this.setLocation(a,n,r))}}},{key:"hide",value:function(){this.defaultTooltip&&this.defaultTooltip.parentElement&&(g.a.fadeOutDisplay(this.defaultTooltip),this.defaultTooltip.parentElement.removeChild(this.defaultTooltip)),this.activeTooltip&&this.activeTooltip.parentElement&&(g.a.fadeOutDisplay(this.activeTooltip),this.activeTooltip.parentElement.removeChild(this.activeTooltip)),this.background&&this.background.parentElement&&this.background.parentElement.removeChild(this.background)}},{key:"dispose",value:function(){this.hide(),this.defaultContent=null,this.activeContent=null,this.defaultTooltip=null,this.activeTooltip=null,this.location=null}},{key:"updateContent",value:function(e,t){this.defaultContent=e,this.defaultTooltip||(this.defaultTooltip=document.createElement("div")),this.updateTooltip(this.defaultTooltip,this.defaultContent),t&&(this.activeContent=t,this.activeTooltip||(this.activeTooltip=document.createElement("div")),this.updateTooltip(this.activeTooltip,this.activeContent))}},{key:"isEmptyDefaultContent",value:function(){return""===this.defaultContent.description}}]),t}(y.a)},,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r,i=n(30);(r||(r={})).DESIGN_HISTORY_PREVIEW_PLACEHOLDER="".concat(i.a.RESOURCE_DOMAIN,"image/common/design-history-preview-placeholder.png")},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"b",function(){return v}),n.d(t,"d",function(){return y}),n.d(t,"c",function(){return m}),n.d(t,"a",function(){return r});var r,i=n(6),a=n.n(i),o=n(3),s=n.n(o),u=n(7),c=n.n(u),l=n(2),h=n.n(l),p=n(4),d=n.n(p),f=n(0),g=n.n(f),v=function e(){var t=this;g()(this,e),this.isActionGroupEquals=function(e){return!1},this.doSaveQueue=!0,this.renderAuto=!0,this.isLastSavedAction=!1,this.commit=function(){var e=d()(h.a.mark(function e(n,r,i){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.commitAction(n,r,i),!t.renderAuto){e.next=4;break}return e.next=4,i.renderAuto(n,r);case 4:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),this.rollback=function(){var e=d()(h.a.mark(function e(n,r,i){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.rollbackAction(n,r,i),!t.renderAuto){e.next=4;break}return e.next=4,i.renderAuto(n,r);case 4:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),this.concat=function(e){return!1}},y=function(e){function t(){var e,n;g()(this,t);for(var i=arguments.length,o=new Array(i),u=0;u<i;u++)o[u]=arguments[u];return(n=a()(this,(e=s()(t)).call.apply(e,[this].concat(o)))).actionType=r.ONE_TIME,n.doSaveQueue=!1,n.changeDesign=function(){return!1},n.recycle=function(){},n}return c()(t,e),t}(v),m=function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];g()(this,e),this.isActionGroupEquals=function(e){return!1},this.actionType=r.ONE_TIME,this.doSaveQueue=!1,this.isPossibleInCropMode=!0,this.changeDesign=function(){return!1},this.isLastSavedAction=!1,this.commit=function(){var e=d()(h.a.mark(function e(t,r,i){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.func(t,r,i);case 2:if(!n.renderAuto){e.next=5;break}return e.next=5,i.renderAuto(t,r);case 5:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),this.rollback=function(e,t,n){},this.recycle=function(){n.func=null},this.concat=function(e){return!1},this.func=t,this.renderAuto=i};!function(e){e.ACTION_GROUP="액션 그룹",e.MOVE_PAGE="페이지 이동",e.REMOVE_PAGE="페이지 삭제",e.CHANGE_PAGE_RATIO="페이지 비율 변경",e.CHANGE_PAGE_SIZE="페이지 사이즈 변경",e.ADD_COPIED_PAGE="페이지 복제",e.ADD_BLANK_PAGE="빈 페이지 추가",e.PAGE_TITLE_EDIT="페이지 제목 변경",e.FOCUS_PAGE="페이지 포커싱",e.TEXT_GROUP_LIST_STYLE_BULLET="리스트 기본형 설정",e.TEXT_GROUP_LIST_STYLE_NUMBER="리스트 넘버링 설정",e.COMMON_SAME_COLOR_LINK="SVG/텍스트 레이어 연결된 컬러 변경",e.IMAGE_FILTER_PRESET="필터 프리셋적용",e.IMAGE_FILTER_INTENSITY="감도 설정",e.IMAGE_FILTER_BRIGHTNESS="밝기 설정",e.IMAGE_FILTER_CONTRAST="대비 설정",e.IMAGE_FILTER_LIGHTNESS="명도 설정",e.IMAGE_FILTER_SATURATION="채도 설정",e.IMAGE_FILTER_TINT="색조 설정",e.IMAGE_FILTER_COLOR_TONE="컬러톤 설정",e.IMAGE_FILTER_TEMPERATURE="온도 설정",e.IMAGE_FILTER_BLUR="흐리기 설정",e.IMAGE_FILTER_VIGNETTE="비네트",e.IMAGE_GRADATION_DEPTH="그라데이션 크기 설정",e.IMAGE_GRADATION_DIRECTION="그라데이션 방향설정",e.IMAGE_BITMAP_MASK_ITEM="비트맵마스크 아이템변경",e.IMAGE_SOLID_LINE_COLOR="사진테두리 컬러 설정",e.IMAGE_SOLID_LINE_ALPHA="사진테두리 투명도 설정",e.IMAGE_SOLID_LINE_THICKNESS="사진테두리 두께 설정",e.IMAGE_BITMAP_MASK_ACTIVE="모양오리기 설정",e.IMAGE_STICKER_FRAME_ACTIVE="디자인액자 설정",e.IMAGE_STICKER_FRAME_ITEM="디자인액자 아이템변경",e.IMAGE_GRADATION_ACTIVE="사진(이미지) 그라데이션 효과",e.IMAGE_SOLID_LINE_ACTIVE="사진(이미지) 테두리 효과",e.IMAGE_SHADOW_ACTIVE="사진 그림자 설정",e.IMAGE_SHADOW_COLOR="사진 그림자 컬러 설정",e.IMAGE_SHADOW_ANGLE="사진 그림자 방향 설정",e.IMAGE_SHADOW_ALPHA="사진 그림자 투명도 설정",e.IMAGE_SHADOW_DISTANCE="사진 그림자 거리 설정",e.IMAGE_SHADOW_BLUR="사진 그림자 흐림 설정",e.ADD_TEXT_ITEM="글상자 추가",e.TEXT_GRADIENT_ACTIVE="그라데이션 효과 설정",e.TEXT_GRADIENT_PRESET="텍스트 그라데이션 프리셋설정",e.TEXT_GRADIENT_TYPE="그라데이션 타입 설정",e.TEXT_GRADIENT_ANGLE="그라데이션 각도 설정",e.TEXT_GRADIENT_COLOR1="그라데이션 컬러1 설정",e.TEXT_GRADIENT_COLOR2="그라데이션 컬러2 설정",e.TEXT_GRADIENT_COLOR3="그라데이션 컬러3 설정",e.TEXT_GRADIENT_COLOR4="그라데이션 컬러4 설정",e.TEXT_SHADOW_COLOR="텍스트 그림자 컬러 설정",e.TEXT_SHADOW_PRESET="텍스트 그림자 프리셋설정",e.TEXT_SHADOW_ALPHA="텍스트 그림자 투명도 설정",e.TEXT_SHADOW_DISTANCE="텍스트 그림자 거리 설정",e.TEXT_SHADOW_ANGLE="텍스트 그림자 방향 설정",e.TEXT_SHADOW_SPREAD="텍스트 그림자 펴짐 설정",e.TEXT_SHADOW_SIZE="텍스트 그림자 크기 설정",e.TEXT_OUTLINE_PRESET="텍스트 아웃라인 프리셋설정",e.TEXT_OUTLINE_SIZE="외곽선 사이즈",e.TEXT_OUTLINE_COLOR="외곽선 컬러",e.TEXT_VERTICAL_ALIGN="텍스트 세로정렬 설정",e.TEXT_HORIZONTAL_ALIGN="텍스트 가로정렬 설정",e.TEXT_SPACE="텍스트 자간 설정",e.TEXT_LINE_SPACE="텍스트 행간 설정",e.TEXT_SCALE_X="텍스트 장평 설정",e.TEXT_UPPERCASE="텍스트 대문자 변환",e.TEXT_STROKE="텍스트 취소선 설정",e.TEXT_UNDERLINE="텍스트 밑줄 변경",e.TEXT_FONT_FAMILY="텍스트 폰트패밀리 변경",e.TEXT_FONT_SIZE="텍스트 폰트사이즈 변경",e.TEXT_BOLD="볼드 셋팅",e.TEXT_ITALIC="텍스트 이탤릭 효과",e.TEXT_FONT_COLOR="텍스트 폰트 컬러 변경",e.TEXT_BACKGROUND_COLOR="텍스트 배경색 설정",e.TEXT_GROUP_FONT_DETAIL_ACTIVE="텍스트그룹1(글자속성) 설정",e.TEXT_OUTLINE_ACTIVE="텍스트 외곽선 설정",e.TEXT_SHADOW_ACTIVE="텍스트 그림자 설정",e.TEXT_GROUP_CURVE_ACTIVE="텍스트 곡선 설정",e.TEXT_GROUP_CURVE_CW="텍스트 곡선 방향",e.GRID_CELL_THICKNESS="표 셀 두께 변경",e.GRID_CELL_PROPS="셀 속성",e.GRID_CELL_BACKGROUND="표 셀 색상 변경",e.GRID_CELL_BACKGROUND_ALPHA="표 셀 배경 투명도 변경",e.GRID_CELL_FONT_COLOR="표 셀 폰트 색상 변경",e.GRID_CELL_BORDER_COLOR="표 셀 테두리 색상 변경",e.GRID_CELL_BORDER_ALPHA="표 셀 테두리 투명 적용",e.GRID_CELL_BORDER_THICKNESS="표 셀 테두리 두께 변경",e.GRID_CELL_BORDER="표 셀 테두리 적용",e.GRID_CELL_INNER_TEXT="표 셀 텍스트 변경",e.GRID_CELL_TEXT_SIZE="표 셀 텍스트 크기 변경",e.GRID_CELL_TEXT_SCALEX="표 셀 텍스트 장평 변경",e.GRID_SELECT_CELL="표 셀 선택",e.GRID_COPY_CELL="셀 복사",e.GRID_PASTE_CELL="셀 붙여넣기",e.GRID_SELECT_ALL_CELL="모든 셀 선택",e.GRID_MERGE_CELLS="셀 병합",e.GRID_SPLIT_CELLS="셀 분할",e.GRID_INSERT_COL_LEFT="왼쪽 열 삽입",e.GRID_INSERT_COL_RIGHT="오른쪽 열 삽입",e.GRID_INSERT_ROW_TOP="위쪽 행 삽입",e.GRID_INSERT_ROW_BOTTOM="아래쪽 행 삽입",e.GRID_DELETE_COL="열 삭제",e.GRID_DELETE_ROW="행 삭제",e.GRID_CELLS_WIDTH_EQUAL="셀 너비 맞춤",e.GRID_CELLS_HEIGHT_EQUAL="셀 높이 맞춤",e.GRID_PHOTO_DELETE="표 사진 삭제",e.ADD_GRID="표 추가",e.BITMAP_TO_SVG="SVG로 교체하기",e.MOVE_ITEM_TO_OTHER_PAGE="다른 페이지로 아이템 이동",e.SVG_LAYER_SELECT="색상 변경할 SVG 레이어 선택",e.SVG_LAYER_COLOR="SVG 레이어 색상 변경",e.SVG_LAYER_COLOR_LINK="SVG 레이어 연결된 컬러 변경",e.ADD_SVG="SVG 추가",e.SVG_PATTERN_SIZE="SVG 패턴 크기 변경",e.SVG_DATA_UPDATE="SVG 정보 수정",e.SVG_GRAPHIC_OUTLINE_ACTIVE="SVG 외곽선 효과 설정",e.SVG_GRAPHIC_OUTLINE_COLOR="SVG 외곽선 색상",e.SVG_GRAPHIC_OUTLINE_SIZE="SVG 외곽선 크기",e.SVG_GRAPHIC_OUTLINE_TYPE="SVG 외곽선 종류",e.SVG_SHADOW_ACTIVE="SVG 그림자 설정",e.SVG_SHADOW_COLOR="SVG 그림자 컬러 설정",e.SVG_SHADOW_ANGLE="SVG 그림자 방향 설정",e.SVG_SHADOW_ALPHA="SVG 그림자 투명도 설정",e.SVG_SHADOW_DISTANCE="SVG 그림자 거리 설정",e.SVG_SHADOW_BLUR="SVG 그림자 흐림 설정",e.CHANGE_LAYOUT="레이아웃변경기능(명함,포토북?)",e.ADD_PHOTO="사진 추가",e.EMPTY_PHOTO="사진 비우기",e.LOCK_PHOTO="사진 잠금",e.CROP_PHOTO="사진 자르기",e.EXPORT_PHOTO="사진 빼내기",e.CROP_PHOTO_GRID="표 사진 자르기",e.CROP_PHOTO_APPLY="사진 크롭 적용",e.CROP_PHOTO_CANCLE="사진 크롭 취소",e.CHANGE_PHOTO="사진변경",e.INIT_IMAGE="이미지 초기화",e.TEXT_CHANGE="텍스트 수정",e.CANVAS_DROP="뭔가 드롭",e.MOUSE_UP="마우스업",e.MOUSE_MOVE="마우스이동",e.MOUSE_DOWN="마우스다운",e.MOUSE_CLICK="마우스 클릭",e.MOUSE_DBLCLICK="마우스 더블클릭",e.KEY_DOWN="키다운",e.KEY_UP="키업",e.ONE_TIME="일회용",e.BACKGROUND_CHANGE="배경 변경",e.BACKGROUND_CHANGE_COLOR="배경색 변경",e.BACKGROUND_DELETE="배경 제거",e.BACKGROUND_PHOTO_USE="배경용 사진 사용",e.EDIT_SCALE_CHANGE="스케일변경",e.ADD_STICKER="스티커추가",e.MOVE_ITEM="아이템이동",e.RESIZE_ITEM="아이템 크기 조절",e.ROTATE_ITEM="아이템 회전",e.FIX_FRAME="사진틀 고정",e.FIX_TO_FRAME="사진 틀에 맞춤",e.DELETE_ITEM="아이템 삭제",e.AUTO_DELETE_ITEM="아이템 자동 삭제",e.GROUP_ADD="그룹화",e.GROUP_DELETE="그룹 해제",e.COPY="복사",e.CUT="잘라내기",e.PASTE="붙여넣기",e.ALIGN_LEFT="왼쪽맞춤",e.ALIGN_RIGHT="오른쪽맞춤",e.ALIGN_TOP="위쪽맞춤",e.ALIGN_BOTTOM="아래쪽맞춤",e.ALIGN_CENTER="가운데맞춤",e.ALIGN_MIDDLE="중간맞춤",e.LAYER_ALIGN_FIRST="레이어 정렬 맨 앞으로",e.LAYER_ALIGN_FORWARD="레이어 정렬 앞으로",e.LAYER_ALIGN_BACKWARD="레이어 정렬 뒤로",e.LAYER_ALIGN_LAST="레이어 정렬 맨 뒤로",e.LAYER_ALIGN_SWAP="레이어 아이템 정렬 바뀜",e.DISTRIBUTE_HORIZONTALLY="가로간격맞춤",e.DISTRIBUTE_VERTICALLY="세로간격맞춤",e.SELECT_ALL="전체선택",e.DESELECT="선택해제",e.ITEM_LOCK="잠금",e.ITEM_UNLOCK="잠금해제",e.ITEM_OPACITY="투명도 조절",e.ITEM_HYPERLINK="링크",e.FLIP_V="상하반전",e.FLIP_H="좌우반전",e.PRESET_SAVE="프리셋 저장",e.STYLE_TEMPLATE_SAVE="스타일 템플릿 저장",e.STYLE_TEMPLATE_UPDATE="스타일 템플릿 수정",e.STYLE_TEMPLATE_DELETE="스타일 템플릿 삭제",e.STYLE_TEMPLATE_APPLY="스타일 템플릿 적용",e.DESIGN_CREATE="디자인 저장",e.DESIGN_UPDATE="디자인 수정",e.DESIGN_DELETE="디자인 삭제",e.DESIGN_DOWNLOAD="디자인 다운로드",e.DESIGN_DOWNLOAD_SETTING="디자인 다운로드 설정",e.DESIGN_LOAD="디자인 로드",e.TEMPLATE_LOAD="템플릿 로드",e.TEMPLATE_PAGE_LOAD="템플릿 페이지 로드",e.DESIGN_ADD="디자인 추가",e.PRESET_PASTE="프리셋 붙여넣기",e.PRESET_CODE_EXTRACT="서식 코드 추출",e.PRESET_CODE_APPLY="서식 코드 적용",e.MENU_CLICK="공통 메뉴 클릭",e.LAYER_NAME_EDIT="레이어 이름 변경",e.CLIPBOARD_PASTE="클립보드 붙여넣기",e.PREVIEW_DOWNLOAD="미리보기 다운로드",e.HANDLER_REDRAW="레이어 핸들 그리기",e.SIGN_IN="로그인",e.SIGN_OUT="로그아웃",e.TOGGLE_ADMIN_MODE="관리자 모드 토글",e.TOGGLE_DEV_MODE="개발 모드 토글",e.GUIDELINE_ADD="가이드라인 추가",e.GUIDELINE_MOVE="가이드라인 이동",e.GUIDELINE_DEL="가이드라인 삭제",e.GUIDELINE_ALL_DEL="가이드라인 전체 삭제",e.PRINTOUT_INFO_ALERT_HIDE="인쇄출력 제한 경고 아이콘 숨기기",e.PRINTOUT_RESTRICTION_HOLD_TOGGLE="검토 보류상태 전환",e.PAGE_MEMO_SAVE="페이지 별 메모 저장"}(r||(r={}))},function(e,t,n){"use strict";var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(224),u=n(226),c=n(252),l=n(6),h=n.n(l),p=n(3),d=n.n(p),f=n(7),g=n.n(f),v=function(e){function t(e){var n;return i()(this,t),(n=h()(this,d()(t).call(this))).actionType=s.a.ACTION_GROUP,n.changeDesign=function(){return!0},n.commitAction=function(){},n.recycle=function(){},n.rollbackAction=function(){},n.actionTime=e,n}return g()(t,e),t}(s.b),y=n(266);n.d(t,"a",function(){return m});var m=function(){function e(){i()(this,e),this.actionQ=[],this.redoQ=[],this.grouping=!1,this.continueActionQ=!0,this.listeners=[]}return o()(e,[{key:"setActionQueueListener",value:function(e){this.actionQueueListener=e}},{key:"onChangeActionQueue",value:function(){this.actionQueueListener&&this.actionQueueListener.onChangeActionQueue()}},{key:"addActionListener",value:function(e){this.listeners.push(e)}},{key:"onCompleteAction",value:function(e){this.listeners.forEach(function(t){t(e)})}},{key:"getLastActions",value:function(){return this.actionQ.length?this.actionQ[this.actionQ.length-1]:void 0}},{key:"getLastAction",value:function(){var e=this.getLastActions();return e&&e.length?e[e.length-1]:void 0}},{key:"dispatch",value:function(e){this.dispatchAction(e,!0)}},{key:"dispatchAction",value:function(e,t){if(!u.a.isCropMode()||e.isPossibleInCropMode){if(e.changeDesign()&&(c.a.changedDesign=!0),!e.doSaveQueue)return this.commitAction(e),void e.recycle();this.addNewAction(e,t)}else console.log("크롭모드에서 수행 불가능한 기능입니다.")}},{key:"addNewAction",value:function(e,t){var n=this.getLastActions(),r=this.getLastAction(),i=!1;n&&(this.grouping||this.continueActionQ&&r.isActionGroupEquals(e)&&!r.isLastSavedAction&&e.actionType!==s.a.ACTION_GROUP)?i=this.pushLastActionGroup(e):this.pushNewActionGroup(e,t),this.commitAction(e),i&&e.recycle(),this.onCompleteAction(e),this.continueActionQ=!0}},{key:"commitAction",value:function(e){e.commit(c.a.getDesignDoc(),u.a.instance,u.a.instance.editorMainVC)}},{key:"pushLastActionGroup",value:function(e){var t=this.getLastActions(),n=t.find(function(e){return e instanceof v});n&&e instanceof v&&n.actionTime===e.actionTime&&(this.grouping=!1);var r=t[0].concat&&t[0].concat(e);return r||t.push(e),r}},{key:"pushNewActionGroup",value:function(e,t){e.actionType===s.a.ACTION_GROUP&&(this.grouping=!0),this.actionQ.push([e]),this.resetRedoQ(t)}},{key:"resetRedoQ",value:function(e){if(e){for(var t=0,n=this.redoQ.length;t<n;t++){var r=this.redoQ.pop();if(r)for(var i=0,a=r.length;i<a;i++)r.pop().recycle()}this.redoQ=[],this.actionQueueListener&&this.actionQueueListener.onChangeActionQueue()}}},{key:"rollback",value:function(){var e=this.actionQ.pop();if(e){this.redoQ.push(e);for(var t=e.length-1;t>=0;t--)e[t].rollback(c.a.getDesignDoc(),u.a.instance,u.a.instance.editorMainVC);if(this.onCompleteAction(e[0]),u.a.instance.editorMainVC.canvasAreaVC&&u.a.instance.editorMainVC.canvasAreaVC.printout){var n=u.a.instance.activeItems.length>0?u.a.instance.activeItems:void 0;this.dispatch(new y.d(n))}}this.onChangeActionQueue()}},{key:"redo",value:function(){var e=this.redoQ.pop();if(e){var t=!0,n=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;this.dispatchAction(o,!1)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}this.onCompleteAction(e[0]),this.cutActionQ(),this.onChangeActionQueue()}}},{key:"clearQ",value:function(){this.actionQ=[],this.redoQ=[]}},{key:"groupingAction",value:function(e){var t=(new Date).getTime();this.dispatch(new v(t)),e(),this.dispatch(new v(t)),this.concatLastGroupActions()}},{key:"concatLastGroupActions",value:function(){var e=this.actionQ[this.actionQ.length-2];if(e){var t=this.getLastActions();if(t[0]instanceof v)t.filter(function(e){return!(e instanceof v)}).forEach(function(n){e.forEach(function(e){e.isActionGroupEquals(n)&&e.concat&&e.concat(n)&&t.splice(t.indexOf(n),1)})});2===t.length&&t[0]instanceof v&&t[1]instanceof v&&this.actionQ.splice(this.actionQ.length-1,1)}}},{key:"cutActionQ",value:function(){this.continueActionQ=!1}},{key:"getContinueActionQ",value:function(){return this.continueActionQ}},{key:"setLastSavedAction",value:function(e){this.actionQ.forEach(function(e){e.forEach(function(e){e.isLastSavedAction=!1})}),this.redoQ.forEach(function(e){e.forEach(function(e){e.isLastSavedAction=!1})}),e&&(e.isLastSavedAction=!0)}}]),e}();m.instance=new m},function(e,t,n){"use strict";var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(241),u=n(381),c=n(250),l=function(){function e(t){i()(this,e),this.canvasAreaVC=t}return o()(e,[{key:"getPageRenderer",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=this.canvasAreaVC.pageVCS[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(o.page===e)return o}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return null}},{key:"getGuidelineRenderer",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=this.canvasAreaVC.pageVCS[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value,s=e.direction===c.d.HORIZONTAL?o.guidelineRenderer.horGuidelineRenderers:o.guidelineRenderer.verGuidelineRenderers,u=!0,l=!1,h=void 0;try{for(var p,d=s[Symbol.iterator]();!(u=(p=d.next()).done);u=!0){var f=p.value;if(f.guideline===e)return f}}catch(e){l=!0,h=e}finally{try{u||null==d.return||d.return()}finally{if(l)throw h}}}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return null}},{key:"getItemRenderer",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=this.canvasAreaVC.pageVCS[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(!o)return null;var s=!0,u=!1,c=void 0;try{for(var l,h=o.itemViews[Symbol.iterator]();!(s=(l=h.next()).done);s=!0){var p=l.value.getMatchedRenderer(e);if(p)return p}}catch(e){u=!0,c=e}finally{try{s||null==h.return||h.return()}finally{if(u)throw c}}}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return null}}]),e}(),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";i()(this,e),this.startTime=0,this.result=[],this.name=t}return o()(e,[{key:"start",value:function(){return this.startTime=e.getCurrentTime(),this.result=[],this}},{key:"split",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.startTime<=0&&this.start(),this.result.push({memo:t,time:e.getCurrentTime()-this.startTime}),this}},{key:"report",value:function(){var e="=== ".concat(this.name," stop watch result ===");return this.result.forEach(function(t){e+="\n".concat(t.time/1e3," sec :\t").concat(t.memo)}),console.log(e),e}}],[{key:"getCurrentTime",value:function(){return(new Date).getTime()}}]),e}(),p=n(252),d=n(95);n.d(t,"a",function(){return f});var f=function(){function e(){i()(this,e),this._zoomScale=1,this.pageEditScale=1,this.renderedPages=new Set,this._renderPageIdx=0,this.lastPageIdx=0,this.activeItems=[],this.checkConfirmWhenLeaveEditor=!0,this.editMode=u.a.DEFAULT_MODE,this.size={canvasWidth:0,canvasHeight:0,pageWidth:0,pageHeight:0,pageOffsetX:0,pageOffsetY:0,pageDeltaOffsetX:0,pageDeltaOffsetY:0},this.mouseAction={mode:s.a.MODE_NONE,offsetX:0,offsetY:0,baseX:0,baseY:0},this.editorViewMode=u.b.HARD_FIXED,this.pageMode=u.c.SCROLL,this.handlerOffsetX=0,this.handlerOffsetY=0,this.renderedPages.add(0),this.version=d.a.version}return o()(e,[{key:"renderPageIdx",get:function(){return this._renderPageIdx},set:function(e){e!==this._renderPageIdx&&(this._renderPageIdx=e,this.editorMainVC.canvasAreaVC&&this.editorMainVC.canvasAreaVC.updateRenderPage&&(this.editorMainVC.canvasAreaVC.updateRenderPage(this._renderPageIdx),this.renderedPages.add(this._renderPageIdx)))}}]),o()(e,[{key:"clear",value:function(){this.renderPageIdx=0,this.activeItems=[],this.zoomScale=1,this.pageEditScale=1,this.lastPageIdx=0,p.a.setDesignDoc(null)}},{key:"updatePageScrollOffset",value:function(){if(0===this.renderPageIdx)e.pageScrollOffset=0;else{var t=this.pageController.getPageRenderer(p.a.getPageByIndex(0)).element.offsetTop,n=this.pageController.getPageRenderer(p.a.getPageByIndex(this.renderPageIdx)).element.offsetTop;e.pageScrollOffset=n-t}}},{key:"getPageScrollOffset",value:function(){return this.updatePageScrollOffset(),e.pageScrollOffset}},{key:"setDesignSize",value:function(e){this.option.pageSize=e,p.a.setDesignSize(e)}},{key:"zoomScale",get:function(){return this._zoomScale},set:function(e){this._zoomScale=e}}],[{key:"setMetaData",value:function(t,n,r){e.changeMeta(t);var i=e.instance;n&&(i.editorMainVC=n,i.pageController=new l(n.canvasAreaVC)),r&&this.setUnicornParam(r)}},{key:"changeMeta",value:function(t){var n=e.instance;n.clear(),p.a.setDesignDoc(t),n.lastPageIdx=t.pages.length-1}},{key:"setUnicornParam",value:function(e){this.instance.option=e.option,this.instance.launcherOption=e.launcherOption}},{key:"isCropMode",value:function(){return e.instance.editMode===u.a.CROP_MODE}},{key:"isDefaultMode",value:function(){return e.instance.editMode===u.a.DEFAULT_MODE}},{key:"isSpoidMode",value:function(){return e.instance.editMode===u.a.SPOID_MODE}},{key:"setSpoidMode",value:function(){e.instance.editMode=u.a.SPOID_MODE,e.instance.editorMainVC.setVisibleSpecialBtn(!0)}},{key:"setDefaultMode",value:function(){e.instance.editMode=u.a.DEFAULT_MODE,e.instance.editorMainVC.setVisibleSpecialBtn(!0)}},{key:"setCropMode",value:function(){e.instance.editMode=u.a.CROP_MODE,e.instance.editorMainVC.setVisibleSpecialBtn(!1)}},{key:"getRenderPageOffset",value:function(e,t){var n=p.a.getPageByIndex(this.instance.renderPageIdx);return this.instance.pageController.getPageRenderer(n).getPagePosition(e,t)}}]),e}();f.pageScrollOffset=0,f.instance=new f,f.STOP_WATCH=new h},function(e,t,n){"use strict";var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(6),u=n.n(s),c=n(3),l=n.n(c),h=n(9),p=n.n(h),d=n(7),f=n.n(d),g=n(12),v=n(56),y=n(39),m=n(404),E=n(229),k=n(224),S=n(386),I=n(226),T=n(225),b=n(531),w=n(67),A=function(e){function t(){return i()(this,t),u()(this,l()(t).apply(this,arguments))}return f()(t,e),o()(t,[{key:"setUnicornTheme",value:function(e){var n=p()(l()(t.prototype),"setUnicornTheme",this).call(this,e);return n&&T.a.instance.dispatch(new k.c(function(e,t,n){return n.renderAll(e,t)})),n}},{key:"setAutoSave",value:function(e){if(!g.a.getUser())return!1;var t=E.a.getSettingOption().isAutoSaveVisible&&e;return v.a.userSetting.isAutoSaveForView=t,(!I.a.instance.option||!I.a.instance.option.isCsMode)&&(v.a.userSetting.isAutoSave!==t&&(v.a.userSetting.isAutoSave=t,this.updateUserSetting(y.b.FIELD_IS_AUTO_SAVE,v.a.userSetting,E.a.getExecutionMode().isMiricanvasChannel()),!0))}},{key:"setLeftPanelPaginationMode",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!!g.a.getUser()&&(v.a.userSetting.leftPanelPaginationMode!==e&&(v.a.userSetting.leftPanelPaginationMode=e,t&&T.a.instance.dispatch(new k.c(function(e,t,n){return n.leftPanelMainVC.renderPanels(e,!0)})),this.updateUserSetting(y.b.FIELD_LEFT_PANEL_PAGINATION_MODE,v.a.userSetting),!0))}},{key:"setSnapGuideVisible",value:function(e){return!!g.a.getUser()&&(v.a.userSetting.isSnapGuideVisible!==e&&(v.a.userSetting.isSnapGuideVisible=e,T.a.instance.dispatch(new k.c(function(e,t,n){},!0)),this.updateUserSetting(y.b.FIELD_IS_SNAP_GUIDE_VISIBLE,v.a.userSetting),!0))}},{key:"setIsOnlyShowEditArea",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!!g.a.getUser()&&(v.a.userSetting.isOnlyShowEditorArea!==e&&(v.a.userSetting.isOnlyShowEditorArea=e,n&&T.a.instance.dispatch(new k.c(function(n,r,i){r.option.showDesignGuide=e,r.pageController.getPageRenderer(n.pages[r.renderPageIdx]).setDesignGuide(),t.replaceMask(e,n.pages,r.pageController)},!0)),this.updateUserSetting(y.b.FIELD_IS_ONLY_SHOW_EDITOR_AREA,v.a.userSetting),!0))}},{key:"setIsRulerVisible",value:function(e){return!!g.a.getUser()&&(v.a.userSetting.isRulerVisible!==e&&(v.a.userSetting.isRulerVisible=e,this.updateUserSetting(y.b.FIELD_IS_RULER_VISIBLE,v.a.userSetting,E.a.getExecutionMode().isMiricanvasChannel()),!0))}},{key:"setIsGuidelineVisible",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!!g.a.getUser()&&(v.a.userSetting.isGuidelineVisible!==e&&(t&&T.a.instance.dispatch(new S.b(e)),v.a.userSetting.isGuidelineVisible=e,this.updateUserSetting(y.b.FIELD_IS_GUIDELINE_VISIBLE,v.a.userSetting),!0))}},{key:"setIsGuidelineLock",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!!g.a.getUser()&&(v.a.userSetting.isGuidelineLock!==e&&(t&&T.a.instance.dispatch(new S.a(e)),v.a.userSetting.isGuidelineLock=e,this.updateUserSetting(y.b.FIELD_IS_GUIDELINE_LOCK,v.a.userSetting),!0))}},{key:"setIsLayerVisible",value:function(e){return!!g.a.getUser()&&(v.a.userSetting.isLayerVisible!==e&&(v.a.userSetting.isLayerVisible=e,this.updateUserSetting(y.b.FIELD_IS_LAYER_VISIBLE,v.a.userSetting),!0))}},{key:"setIsAdmin",value:function(e){var n=p()(l()(t.prototype),"setIsAdmin",this).call(this,e);return e&&Object(b.a)(),n&&(T.a.instance.dispatch(new k.c(function(e,t,n){return n.renderAll(e,t)})),I.a.instance.activeItems=[]),n}},{key:"setIsDev",value:function(e){if(!g.a.getUser())return!1;var t=g.a.getUser().isAdmin()&&e;return v.a.userSetting.devMode!==t&&(v.a.userSetting.devMode=t,this.updateUserSetting(y.b.FIELD_IS_DEV,v.a.userSetting),T.a.instance.dispatch(new k.c(function(e,t,n){return n.renderAll(e,t)})),!0)}},{key:"onUserSettingFetched",value:function(e){p()(l()(t.prototype),"onUserSettingFetched",this).call(this,e),this.setLeftPanelPaginationMode(e.leftPanelPaginationMode,!1),this.setSnapGuideVisible(e.isSnapGuideVisible),this.setIsOnlyShowEditArea(e.isOnlyShowEditorArea,!1),this.setIsGuidelineVisible(e.isGuidelineVisible,!1),this.setIsGuidelineLock(e.isGuidelineLock,!1),this.setIsLayerVisible(e.isLayerVisible),this.setIsDev(e.devMode);var n=E.a.getExecutionMode().isBizhowsChannel();this.setAutoSave(!n&&e.isAutoSave),this.setIsRulerVisible(n&&w.a.isDesktopSize()||e.isRulerVisible)}},{key:"replaceMask",value:function(e,t,n){m.a.hasMasks()&&t.forEach(function(t){n.getPageRenderer(t).updateMask(e)})}}]),t}(v.a);t.a=new A},function(e,t,n){"use strict";n.d(t,"e",function(){return C}),n.d(t,"d",function(){return R}),n.d(t,"a",function(){return r}),n.d(t,"f",function(){return i}),n.d(t,"g",function(){return a}),n.d(t,"b",function(){return o}),n.d(t,"c",function(){return _}),n.d(t,"h",function(){return L});var r,i,a,o,s=n(2),u=n.n(s),c=n(4),l=n.n(c),h=n(0),p=n.n(h),d=n(1),f=n.n(d),g=n(6),v=n.n(g),y=n(3),m=n.n(y),E=n(7),k=n.n(E),S=n(258),I=n(31),T=n(408),b=n(292),w=n(246),A=n(234),C=function(e){function t(){return p()(this,t),v()(this,m()(t).apply(this,arguments))}return k()(t,e),f()(t,[{key:"isChangedFrom",value:function(e){return this.revision!==e.revision}}]),t}(I.b),x=function(e){function t(e,n){var r;return p()(this,t),(r=v()(this,m()(t).call(this))).styleRevision=e,r.zIndex=n,r}return k()(t,e),f()(t,[{key:"isChangedFrom",value:function(e){return e.zIndex!==this.zIndex||e.styleRevision!==this.styleRevision}}]),t}(I.c),R=function(e){function t(e,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3?arguments[3]:void 0,u=arguments.length>4?arguments[4]:void 0,c=arguments.length>5?arguments[5]:void 0,l=arguments.length>6?arguments[6]:void 0,h=arguments.length>7?arguments[7]:void 0,d=arguments.length>8?arguments[8]:void 0,f=arguments.length>9?arguments[9]:void 0;p()(this,t),(r=v()(this,m()(t).call(this))).groupId="",r.select=!1,r.hover=!1,r.addedBy=0,r.keepRatio=!1,r.priority=0,r.status=a.NEW,r.isEditMode=!1,r.readyLiveEdit=!1,r.renderLeft=0,r.renderTop=0,r.isActiveLiveEdit=!1,r.isActiveWebGLFilter=!1,r.resourceLoadStatus=o.DEFAULT,r.unsupportedResource=!1,r._tbpeId=e,r.contentsStatesConstructor=f,r.contentsStates=new r.contentsStatesConstructor,r.contentsStates.revision=-1;var g=r.makeProps();return g.setPosition(n),g.setRotate(i),g.setFlipH(s),g.setFlipV(u),g.setCanUserSelect(c),g.setCanUserMove(l),g.setCanUserResize(h),g.setCanUserDel(d),r.props=g,r}var n,i,s,c,h,d;return k()(t,e),f()(t,[{key:"isPrivateItem",value:function(){return!1}},{key:"isDisabledSvgItem",value:function(){return!1}},{key:"getPropsPhotoKey",value:function(){}},{key:"setReady",value:(d=l()(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})),function(){return d.apply(this,arguments)})},{key:"isHighResolutionApplicable",value:(h=l()(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}},e)})),function(){return h.apply(this,arguments)})},{key:"getCanvasPosData",value:function(e){return new b.a(this.props).getCanvasPosData(e)}},{key:"renderThumbnail",value:(c=l()(u.a.mark(function e(t,n,r,i){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=new b.a(this.props,void 0,this.getResourceLoadStatus(),this.getDisabledResourcePreviewKey()),e.abrupt("return",a.rasterizeToPage(t,n,r,i));case 2:case"end":return e.stop()}},e,this)})),function(e,t,n,r){return c.apply(this,arguments)})},{key:"renderResourceLoadFailView",value:(s=l()(u.a.mark(function e(t,n){var r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new b.a(this.props,void 0,this.getResourceLoadStatus(),this.getDisabledResourcePreviewKey()),e.next=3,r.rasterizeResourceLoadFail(t,n);case 3:case"end":return e.stop()}},e,this)})),function(e,t){return s.apply(this,arguments)})},{key:"getDisabledResourcePreviewKey",value:function(){return r.DISABLED_ORIGIN_ITEM}},{key:"getThumbUrl",value:(i=l()(u.a.mark(function e(t,n){var r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new b.a(this.props,void 0,this.getResourceLoadStatus(),this.getDisabledResourcePreviewKey()),e.next=3,r.getSingleItemCanvasDataURL(t,n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)})),function(e,t){return i.apply(this,arguments)})},{key:"getFillFullThumbUrl",value:(n=l()(u.a.mark(function e(t,n){var r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new b.a(this.props,void 0,this.getResourceLoadStatus(),this.getDisabledResourcePreviewKey()),e.next=3,r.getPageCanvasDataURL(t,n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})},{key:"getWidth",value:function(){return this.props.getWidth()}},{key:"getHeight",value:function(){return this.props.getHeight()}},{key:"getLTRBCoordinate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new A.a(this.props.getLeft(),this.props.getTop(),this.props.getRight(),this.props.getBottom());if(e&&0!==this.props.getRotate()){var n=this.props,r=n.getRotate(),i=t.left+t.getWidth()/2,a=t.top+t.getHeight()/2,o=w.a.calcLocationByRotate2(t.left,t.top,i,a,r),s=w.a.calcLocationByRotate2(t.right,t.top,i,a,r),u=w.a.calcLocationByRotate2(t.left,t.bottom,i,a,r),c=w.a.calcLocationByRotate2(t.right,t.bottom,i,a,r),l=[o.x,s.x,u.x,c.x],h=[o.y,s.y,u.y,c.y];return new A.a(Math.min.apply(Math,l),Math.min.apply(Math,h),Math.max.apply(Math,l),Math.max.apply(Math,h))}return t}},{key:"getHitRegion",value:function(){return new A.a(this.props.getLeft(),this.props.getTop(),this.props.getRight(),this.props.getBottom())}},{key:"initRotateLTRBCoordinate",value:function(){var e=this.getLTRBCoordinate(),t=e.getRotatedLTRBByPivot(e.getCenterPos(),-this.props.getRotate());this.setLTRBCoordinate(t),this.props.setRotate(0)}},{key:"setLTRBCoordinate",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&arguments[2],arguments.length>3&&arguments[3];this.props.setPosition(e.toRect())}},{key:"resizeWidthAndHeight",value:function(e){var t=this.getLTRBCoordinate().clone(),n=t.left+e.width,r=t.top+e.height,i=new A.a(t.left,t.top,n,r);0!==this.props.getRotate()&&i.moveCenter(w.a.calcLocationByRotate(i.getCenterPos(),t.getCenterPos(),this.props.getRotate())),this.setLTRBCoordinate(i)}},{key:"rotate",value:function(e,t){this.props.setRotate(e);var n=this.getLTRBCoordinate().getCenterPos(),r=this.getLTRBCoordinate().clone();r.moveCenter(w.a.calcLocationByRotate(n,t,e)),this.setLTRBCoordinate(r)}},{key:"scale",value:function(e,t){return this.props.setPosition(this.props.getBoundingBox().clone().scale(e,t)),this}},{key:"move",value:function(e,t,n){(n&&n.forceMove||this.props.isCanUserMove())&&this.props.move(e,t)}},{key:"flipH",value:function(e){var t=this.props.getRotate();e&&0!==t&&this.props.setRotate(-t),this.props.setFlipH(!this.props.isFlipH())}},{key:"flipV",value:function(e){var t=this.props.getRotate();e&&0!==t&&this.props.setRotate(-t),this.props.setFlipV(!this.props.isFlipV())}},{key:"changeNormalMode",value:function(){}},{key:"canDelete",value:function(){return this.props.isCanUserDel()}},{key:"canPropertyEdit",value:function(){return!0}},{key:"isInRange",value:function(e){var t=this.getHitRegion(),n=0!==this.props.getRotate(),r=e.left===e.right&&e.top===e.bottom;if(n&&!r)return S.a.isCollisionOBB(e,0,t,this.props.getRotate());if(n){var i=w.a.calcLocationByRotate(e.getCenterPos(),t.getCenterPos(),-1*this.props.getRotate());e=new A.a(i.x,i.y,i.x,i.y)}return S.a.isCollisionAABB(e,t)}},{key:"copy",value:function(e){Object.assign(e,this.clone())}},{key:"isLock",value:function(){return!this.props.isCanUserResize()&&!this.props.isCanUserMove()&&!this.props.isCanUserDel()}},{key:"lock",value:function(){this.props.setCanUserResize(!1),this.props.setCanUserMove(!1),this.props.setCanUserDel(!1)}},{key:"unlock",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.props.setCanUserResize(e),this.props.setCanUserMove(t),this.props.setCanUserDel(n)}},{key:"canFlip",value:function(){return!0}},{key:"canRotate",value:function(){return!0}},{key:"recycle",value:function(){this.props=null}},{key:"getStatus",value:function(){return this.status}},{key:"setStatus",value:function(e){this.isChangeableStatus(e)&&(e===a.STABLE?this.status===a.LAZY&&this.props.updateRevision():e===a.LAZY||e!==this.status&&this.props.updateRevision(),this.status=e)}},{key:"isChangeableStatus",value:function(e){switch(this.status){case a.LOADING:switch(e){case a.DELETE:return!0;default:return!1}default:return!0}}},{key:"getResourceLoadStatus",value:function(){return this.resourceLoadStatus}},{key:"setResourceLoadStatus",value:function(e){this.resourceLoadStatus=e,this.status=a.CHANGE,this.props.updateRevision()}},{key:"isResourceLoadFail",value:function(){switch(this.resourceLoadStatus){case o.DEFAULT:case o.COMPLETE:return!1;default:return!0}}},{key:"isUnsupported",value:function(){return!1}},{key:"getUnsupportedItemType",value:function(){return this.isUnsupported()?L.UNSUPPORTED_LICENSE:L.NONE}},{key:"getRenderStates",value:function(){var e=new this.contentsStatesConstructor;return e.revision=this.props.getRevision(),{contents:e,position:new x(this.props.getStyleRevision(),this.props.zIndex)}}},{key:"isChangeableWidth",value:function(){return!0}},{key:"isChangeableHeight",value:function(){return!0}},{key:"isValid",value:function(){return this.getWidth()>0&&this.getHeight()>0}},{key:"changeTbpeId",value:function(e){this._tbpeId=e}},{key:"isRequireLiveEdit",value:function(){return!1}},{key:"isReadyLiveEdit",value:function(){return this.readyLiveEdit}},{key:"setReadyLiveEdit",value:function(e){this.readyLiveEdit=!0===e}},{key:"isOnlyOneItem",value:function(){return!1}},{key:"isPhotoItem",value:function(){return!1}},{key:"isRBRound",value:function(){return!1}},{key:"isLazyHandlerHandlePosition",value:function(e){return!1}},{key:"getItemBound",value:function(){return{degree:this.props.getRotate(),centerPos:this.getLTRBCoordinate().getCenterPos(),itemLTRB:this.getLTRBCoordinate(),pureLTRB:this.getLTRBCoordinate()}}},{key:"getItemKey",value:function(){return this.tbpeId}},{key:"setCloneItemDefaultAttr",value:function(e){e.lastRenderEditScale=this.lastRenderEditScale,e.copyKey=this.copyKey,e.groupId=this.groupId,this.getStatus()===a.LOADING&&(e.status=this.status)}},{key:"isBrowserDefaultAction",value:function(){return!1}},{key:"getCommonFileKeyList",value:function(){return[]}},{key:"hasCommonFileKeyList",value:function(){return this.getCommonFileKeyList().length>0}},{key:"canDisplayHyperlink",value:function(){return!this.isUnsupported()}},{key:"tbpeId",get:function(){return this._tbpeId}}]),t}(T.a);R.ITEM_CLASS="tbpe_item",function(e){e.DISABLED_ORIGIN_ITEM="DELETED_ORIGIN_ITEM",e.NOT_FOUND_ORIGIN_ITEM="NOT_FOUND_ORIGIN_ITEM",e.DISABLED_ORIGIN_ITEM_BACKGROUND="DELETED_ORIGIN_ITEM_BACKGROUND",e.DISABLED_ORIGIN_USER_RESOURCE="DISABLED_ORIGIN_USER_RESOURCE",e.RESOURCE_FETCH_ERROR="RESOURCE_FETCH_ERROR"}(r||(r={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.LAYOUT=1]="LAYOUT",e[e.USER=2]="USER",e[e.CALFORM=3]="CALFORM"}(i||(i={})),function(e){e.NEW="new",e.LOADING="loading",e.DELETE="delete",e.STABLE="stable",e.CHANGE="change",e.LAZY="lazy"}(a||(a={})),function(e){e.DEFAULT="DEFAULT",e.COMPLETE="COMPLETE",e.UNAUTHORIZED="UNAUTHORIZED",e.TEMPORARY_ERROR="TEMPORARY_ERROR"}(o||(o={}));var L,_=function(){function e(t,n,r,i,a,o){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;p()(this,e),this.width=t,this.height=n,this.contentLeft=r,this.contentTop=i,this.offsetX=a,this.offsetY=o,this.scale(s)}return f()(e,[{key:"scale",value:function(e){this.width*=e,this.height*=e,this.contentLeft*=e,this.contentTop*=e,this.offsetX*=e,this.offsetY*=e}}]),e}();!function(e){e[e.NONE=0]="NONE",e[e.UNSUPPORTED_LICENSE=1]="UNSUPPORTED_LICENSE",e[e.COMPATIBILITY_FAILURE=2]="COMPATIBILITY_FAILURE",e[e.SMILECANVAS_USER_LOGO=3]="SMILECANVAS_USER_LOGO"}(L||(L={}))},function(e,t,n){"use strict";var r,i,a,o,s,u,c,l,h,p,d,f,g,v,y,m,E,k,S,I,T,b,w,A,C,x=n(80),R=n.n(x),L=n(0),_=n.n(L),P=n(1),O=n.n(P),D=n(250),M=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D.b.MIRICANVAS,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:D.a.NEW,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:D.f.ORDER;_()(this,e),this.channel=t,this.changeMode=n,this.purpose=r}return O()(e,[{key:"isMiricanvasChannel",value:function(){return this.channel===D.b.MIRICANVAS}},{key:"isBizhowsChannel",value:function(){return this.channel===D.b.BIZHOWS}},{key:"isBizhowsChannelAndOrderPurpose",value:function(){return this.isBizhowsChannel()&&this.isOrderPurpose()}},{key:"isBizhowsChannelAndDesignPurpose",value:function(){return this.isBizhowsChannel()&&this.isDesignPurpose()}},{key:"isChangeNewMode",value:function(){return this.changeMode===D.a.NEW}},{key:"isChangeUpdateMode",value:function(){return this.changeMode===D.a.UPDATE}},{key:"isOrderPurpose",value:function(){return this.purpose===D.f.ORDER}},{key:"isDesignPurpose",value:function(){return this.purpose===D.f.DESIGN}}]),e}(),N=function e(t){_()(this,e);var n=t.isMiricanvasChannel(),r=t.isBizhowsChannel(),i=t.isDesignPurpose();if(this.makeNewDocument=n,this.copyDocument=n,this.resizePage=n||r&&i,this.presentation=n,this.moveToMySpace=n,this.loginView=n,this.useTempSaveStatusText=r,this.share=n,this.download=n||r&&i,this.printoutProduction=n,this.messageBox=n,this.saveToMySpace=n,this.mainPageOpenInNewTab=r,this.showHistoryCopyButton=n,this.showElementBordersInGroup=r,this.historyBack=r,this.showEditingTitle=n||r&&i,this.useSpecialTheme=r,r){var a=t.isChangeNewMode(),o=t.isChangeUpdateMode();this.saveToDesignLibrary=a,this.saveToCart=a&&!i,this.useTempSaveStatusText=o,this.saveUpdatedFromDesignLibrary=o,this.saveUpdatedFromCart=o}},B=function e(t){_()(this,e);var n=t.isMiricanvasChannel();this.moveBiz=n,this.openNewTab=n},U=function e(t){_()(this,e),this.showUpdateButtonInfoPusher=t.isBizhowsChannel()&&t.isChangeUpdateMode()},G=function e(t){_()(this,e),this.checkRestriction=!t.isMiricanvasChannel()&&t.isOrderPurpose(),this.saveCartConfirmButtonLabel=t.isMiricanvasChannel()?"":t.isBizhowsChannel()&&t.isChangeNewMode()?"장바구니에 추가하기":"디자인 수정완료"},F=function e(t){_()(this,e);var n=t.isMiricanvasChannel(),r=t.isBizhowsChannel();this.header=n,this.decidedTemplateTypeWhenInitialize=r,this.shouldSetColumnCountByPageSize=r},H=function e(t){_()(this,e);var n=t.isMiricanvasChannel(),r=t.isBizhowsChannel();this.bizhowsCenter=r,this.showMessageBoxBtn=n,this.showGuideControlBtn=r&&t.isOrderPurpose(),this.showDesignCommissionSuggestionPopup=n},V=function e(t){_()(this,e);var n=t.isMiricanvasChannel();this.showBizTemplateAndVideo=n,this.changeTemplate=n},z=function e(t){_()(this,e);var n=t.isMiricanvasChannel(),r=t.isBizhowsChannel();this.canForceResetTitle=r&&t.isOrderPurpose(),this.pageTitleEditable=n||r&&t.isDesignPurpose(),this.pageTitleEmptyAllowable=r&&t.isOrderPurpose()},W=n(450),K=function e(t){_()(this,e);var n=t.isMiricanvasChannel(),r=t.isBizhowsChannel();this.maintenanceNotification=n,this.setDesignTitlePopup=r&&t.isOrderPurpose(),this.findUnmodifiedPage=r&&t.isChangeNewMode()},X=function e(t){_()(this,e),this.checkUnsupportedResource=t.isMiricanvasChannel()},Y=n(67),Z=function e(t){_()(this,e);var n=t.isMiricanvasChannel(),r=t.isBizhowsChannel();this.lockExceptTextItem=r&&Y.a.isMobileDevice(),this.showHyperlinkProps=n},j=function e(t){_()(this,e),this.showPrintoutGuideSetting=t.isBizhowsChannel()&&t.isOrderPurpose(),this.isAutoSaveVisible=t.isMiricanvasChannel();var n=Y.a.isDesktopSize()||!Y.a.isPortrait();this.printoutGuideInitialVisible=t.isBizhowsChannel()&&t.isOrderPurpose()&&n},q=n(62),Q=n.n(q),$=n(355),J=n.n($),ee=n(356),te=n.n(ee),ne=(n(357),n(451)),re=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Et.TEMPLATE,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:kt.NONE;_()(this,e),this.pages=t,this.pageInitialization=n,this.templatePagesOrder=r,this.initialTypeOfEmptyPage=i}return O()(e,[{key:"getNewPages",value:function(e){return 0===this.pages.length||0===e.length?e:this.pageInitialization===Et.EMPTY?this.pages.length<=e.length?e:ne.a.appendNewEmptyPagesUntilCountBaseOnOldPage(e[0],e.slice(),this.pages.length-1):this.pageInitialization===Et.ORDER?this.getNewPagesByOrder(e):this.getNewPagesByInitialType(e)}},{key:"getNewPagesByOrder",value:function(e){var t=this;if(0!==this.templatePagesOrder.length){var n=[];return this.pages.forEach(function(r,i){var a=t.templatePagesOrder[i]||0,o=e[a-1];0!==a&&o?n.push(o.clone(i)):ne.a.appendNewEmptyPagesUntilCountBaseOnOldPage(e[0],n,1)}),n}}},{key:"getNewPagesByInitialType",value:function(e){return this.pages.length<e.length?e.slice(0,this.pages.length):this.pages.length>e.length?this.getNewPagesUntilCountByInitialType(e,this.pages.length-e.length):e}},{key:"getNewPagesUntilCountByInitialType",value:function(e,t){var n=e.slice();return this.initialTypeOfEmptyPage===kt.REPEAT?ne.a.appendClonedPagesUntilCountFromFirstPage(e,n,t):ne.a.appendNewEmptyPagesUntilCountBaseOnOldPage(e[0],n,t)}}]),e}(),ie=function(){function e(){_()(this,e)}return O()(e,null,[{key:"matching",value:function(e,t,n){if(t<=0||n<0||t>n)return!1;if("*"===e)return!0;var r=!Number.isNaN(Number(e)),i="EVEN"===e,a="ODD"===e;return!(!r&&!i&&!a)&&(r?this.matchingNumber(Math.floor(Number(e)),t,n):t%2==0?i:a)}},{key:"matchingNumber",value:function(e,t,n){if(0===e)return!1;if(e>0)return e<=n&&e===t;var r=e+n;return r>=0&&r+1===t}}]),e}(),ae=n(460),oe=n(358),se=n(16),ue=(r=Object(oe.a)(function(e){return se.a[e]||se.a.MM}),i=function(){function e(){_()(this,e),J()(this,"unit",a,this)}return O()(e,[{key:"getWidth",value:function(){return this.width}},{key:"getHeight",value:function(){return this.height}},{key:"getUnit",value:function(){return this.unit}},{key:"getDpi",value:function(){return this.dpi}}]),e}(),a=te()(i.prototype,"unit",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),i),ce=n(274),le=function(){function e(){_()(this,e)}return O()(e,[{key:"getCheck",value:function(){return this.check}},{key:"getIgnoreWhenPureTemplateLoad",value:function(){return this.ignoreWhenPureTemplateLoad}}]),e}(),he=(o=Object(oe.a)(function(e){return w[e]}),s=Object(oe.a)(function(e){return A[e]||A.CAUTION}),u=Object(oe.b)(function(){return le}),c=Object(oe.b)(function(){return ce.a}),l=Object(oe.b)(function(){return be}),h=Object(oe.a)(function(e){return ce.c[e]||ce.c.NONE}),p=Object(oe.a)(function(e){return ce.c[e]||ce.c.NONE}),d=Object(oe.a)(function(e){return ce.b[e]||ce.b.DOT}),f=Object(oe.a)(function(e){return C[e]||C.BOTH}),g=function e(){_()(this,e),J()(this,"type",v,this),J()(this,"alertType",y,this),J()(this,"inspection",m,this),J()(this,"shape",E,this),J()(this,"position",k,this),J()(this,"insideShapeDisplay",S,this),J()(this,"outsideShapeDisplay",I,this),J()(this,"lineDisplay",T,this),J()(this,"dpiTargetType",b,this)},v=te()(g.prototype,"type",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=te()(g.prototype,"alertType",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=te()(g.prototype,"inspection",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=te()(g.prototype,"shape",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=te()(g.prototype,"position",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=te()(g.prototype,"insideShapeDisplay",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=te()(g.prototype,"outsideShapeDisplay",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=te()(g.prototype,"lineDisplay",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=te()(g.prototype,"dpiTargetType",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g);!function(e){e.TEXT="TEXT",e.AREA="AREA",e.ITEM_SIZE="ITEM_SIZE",e.FONT_SIZE="FONT_SIZE",e.IMAGE_DPI="IMAGE_DPI"}(w||(w={})),function(e){e.WARNING="WARNING",e.CAUTION="CAUTION",e.RECOMMEND="RECOMMEND"}(A||(A={})),function(e){e.USER="USER",e.MICAN="MICAN",e.BOTH="BOTH"}(C||(C={}));var pe,de,fe,ge,ve,ye,me,Ee,ke,Se,Ie,Te,be=function e(){_()(this,e)},we=(pe=Object(oe.a)(function(e){return Te[e]||Te.PRINT}),de=Object(oe.b)(function(){return ue}),fe=Object(oe.b)(function(){return ce.a}),ge=Object(oe.b)(function(){return ce.f}),ve=Object(oe.b)(function(){return he}),ye=function(){function e(){_()(this,e),J()(this,"type",me,this),J()(this,"size",Ee,this),J()(this,"shape",ke,this),J()(this,"shapes",Se,this),J()(this,"guides",Ie,this),this.shapes=new Array}return O()(e,[{key:"getType",value:function(){return this.type}},{key:"getSize",value:function(){return this.size}},{key:"getShapes",value:function(){return this.shapes}},{key:"getGuides",value:function(){return this.guides}},{key:"adjustCompatibility",value:function(){!this.shape||this.shapes&&0!==this.shapes.length||(this.shapes=new Array(new ce.f(this.shape))),this.shapes.forEach(function(e){return e.fixCompatibility()})}},{key:"canMask",value:function(){var e=new Array(ce.d.ROUND_SQUARE,ce.d.CIRCLE,ce.d.VECTOR);return this.shapes.length>0&&this.shapes.some(function(t){return e.includes(t.getShape().getType())})}},{key:"getShapeCount",value:function(){return this.shapes.length}}]),e}(),me=te()(ye.prototype,"type",[pe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ee=te()(ye.prototype,"size",[de],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ke=te()(ye.prototype,"shape",[fe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Se=te()(ye.prototype,"shapes",[ge],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ie=te()(ye.prototype,"guides",[ve],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ye);!function(e){e.SCREEN="SCREEN",e.PRINT="PRINT"}(Te||(Te={}));var Ae,Ce=n(343);!function(e){e.STAND_SIGN_SMALL="STAND_SIGN_SMALL",e.STAND_SIGN_MEDIUM="STAND_SIGN_MEDIUM",e.STAND_SIGN_LARGE="STAND_SIGN_LARGE",e.SHOULDER_SASH_LINE="SHOULDER_SASH_LINE",e.SHOULDER_SASH_BUTTERFLY="SHOULDER_SASH_BUTTERFLY",e.HOLDER_L="HOLDER_L",e.HOLDER_PAPER="HOLDER_PAPER",e.LEAFLET_2_COLUMN_A3="LEAFLET_2_COLUMN_A3",e.LEAFLET_2_COLUMN_A4="LEAFLET_2_COLUMN_A4",e.LEAFLET_2_COLUMN_B4="LEAFLET_2_COLUMN_B4",e.LEAFLET_2_COLUMN_B5="LEAFLET_2_COLUMN_B5",e.LEAFLET_3_COLUMN_A3="LEAFLET_3_COLUMN_A3",e.LEAFLET_3_COLUMN_A4="LEAFLET_3_COLUMN_A4",e.LEAFLET_3_COLUMN_B4="LEAFLET_3_COLUMN_B4",e.LEAFLET_3_COLUMN_B5="LEAFLET_3_COLUMN_B5",e.FLYER_SINGLE="FLYER_SINGLE",e.FLYER_DOUBLE="FLYER_DOUBLE",e.FLYER_MAGNET_PAPER_SINGLE="FLYER_MAGNET_PAPER_SINGLE",e.FLYER_MAGNET_PAPER_DOUBLE="FLYER_MAGNET_PAPER_DOUBLE",e.FLYER_MAGNET_CIRCLE="FLYER_MAGNET_CIRCLE",e.FLYER_MAGNET_ROUND_SQUARE="FLYER_MAGNET_ROUND_SQUARE",e.POSTER_HORIZONTAL="POSTER_HORIZONTAL",e.POSTER_VERTICAL="POSTER_VERTICAL",e.MAGNET_OPENER_CIRCLE="MAGNET_OPENER_CIRCLE",e.MAGNET_OPENER_PET="MAGNET_OPENER_PET",e.MAGNET_OPENER_TONGS="MAGNET_OPENER_TONGS",e.PLACARD_HORIZONTAL="PLACARD_HORIZONTAL",e.PLACARD_VERTICAL="PLACARD_VERTICAL",e.PLACARD_SQUARE="PLACARD_SQUARE",e.BANNER="BANNER",e.TICKET_HORIZONTAL_SMALL="TICKET_HORIZONTAL_SMALL",e.TICKET_HORIZONTAL_MEDIUM="TICKET_HORIZONTAL_MEDIUM",e.TICKET_HORIZONTAL_LARGE="TICKET_HORIZONTAL_LARGE",e.TICKET_HORIZONTAL_PERFORATION_SMALL="TICKET_HORIZONTAL_PERFORATION_SMALL",e.TICKET_HORIZONTAL_PERFORATION_MEDIUM="TICKET_HORIZONTAL_PERFORATION_MEDIUM",e.TICKET_HORIZONTAL_PERFORATION_LARGE="TICKET_HORIZONTAL_PERFORATION_LARGE",e.TICKET_VERTICAL_SMALL="TICKET_VERTICAL_SMALL",e.TICKET_VERTICAL_MEDIUM="TICKET_VERTICAL_MEDIUM",e.TICKET_VERTICAL_LARGE="TICKET_VERTICAL_LARGE",e.TICKET_VERTICAL_PERFORATION_SMALL="TICKET_VERTICAL_PERFORATION_SMALL",e.TICKET_VERTICAL_PERFORATION_MEDIUM="TICKET_VERTICAL_PERFORATION_MEDIUM",e.TICKET_VERTICAL_PERFORATION_LARGE="TICKET_VERTICAL_PERFORATION_LARGE",e.BUSINESS_CARD_HORIZONTAL="BUSINESS_CARD_HORIZONTAL",e.BUSINESS_CARD_VERTICAL="BUSINESS_CARD_VERTICAL",e.STICKER_SQUARE="STICKER_SQUARE",e.STICKER_CIRCLE="STICKER_CIRCLE",e.STICKER_RECTANGLE="STICKER_RECTANGLE",e.STICKER_OVAL="STICKER_OVAL",e.STICKER_VERTICAL_RECTANGLE="STICKER_VERTICAL_RECTANGLE",e.CATALOG_HORIZONTAL="CATALOG_HORIZONTAL",e.CATALOG_VERTICAL="CATALOG_VERTICAL",e.HAND_FAN="HAND_FAN",e.SHOPPING_BAG_PAPER_SMALL="SHOPPING_BAG_PAPER_SMALL",e.SHOPPING_BAG_PAPER_MEDIUM="SHOPPING_BAG_PAPER_MEDIUM",e.SHOPPING_BAG_PAPER_LARGE="SHOPPING_BAG_PAPER_LARGE",e.ENVELOPE_JACKET="ENVELOPE_JACKET",e.ENVELOPE_SMALL="ENVELOPE_SMALL",e.ENVELOPE_BIG="ENVELOPE_BIG",e.ENVELOPE_TICKET="ENVELOPE_TICKET",e.CALENDAR_DESK_SMALL="CALENDAR_DESK_SMALL",e.CALENDAR_DESK_NORMAL="CALENDAR_DESK_NORMAL",e.CALENDAR_DESK_BIG="CALENDAR_DESK_BIG",e.RICECAKE_MEMO_PAPER_SQUARE="RICECAKE_MEMO_PAPER_SQUARE",e.RICECAKE_MEMO_PAPER_VER_RECT="RICECAKE_MEMO_PAPER_VER_RECT",e.RICECAKE_MEMO_PAPER_HOR_RECT="RICECAKE_MEMO_PAPER_HOR_RECT",e.RICECAKE_MEMO_PAPER_A5_VER="RICECAKE_MEMO_PAPER_A5_VER",e.RICECAKE_MEMO_PAPER_A5_HOR="RICECAKE_MEMO_PAPER_A5_HOR"}(Ae||(Ae={}));var xe,Re,Le,_e,Pe,Oe,De,Me,Ne,Be,Ue,Ge,Fe,He,Ve,ze,We,Ke,Xe,Ye,Ze,je,qe,Qe,$e,Je,et,tt,nt,rt,it,at,ot,st,ut,ct,lt,ht,pt,dt,ft,gt,vt,yt,mt,Et,kt,St,It=function(){function e(){_()(this,e)}return O()(e,[{key:"initTypes",value:function(){this.templateTypes=new Map([[Ae.STAND_SIGN_SMALL,Tt],[Ae.STAND_SIGN_MEDIUM,bt],[Ae.STAND_SIGN_LARGE,wt],[Ae.SHOULDER_SASH_LINE,At],[Ae.SHOULDER_SASH_BUTTERFLY,At],[Ae.HOLDER_L,Ct],[Ae.HOLDER_PAPER,Ct],[Ae.LEAFLET_2_COLUMN_A3,xt],[Ae.LEAFLET_2_COLUMN_A4,xt],[Ae.LEAFLET_2_COLUMN_B4,xt],[Ae.LEAFLET_2_COLUMN_B5,xt],[Ae.LEAFLET_3_COLUMN_A3,Rt],[Ae.LEAFLET_3_COLUMN_A4,Rt],[Ae.LEAFLET_3_COLUMN_B4,Rt],[Ae.LEAFLET_3_COLUMN_B5,Rt],[Ae.FLYER_SINGLE,Lt],[Ae.FLYER_DOUBLE,_t],[Ae.FLYER_MAGNET_PAPER_SINGLE,Pt],[Ae.FLYER_MAGNET_PAPER_DOUBLE,Ot],[Ae.FLYER_MAGNET_CIRCLE,Dt],[Ae.FLYER_MAGNET_ROUND_SQUARE,Mt],[Ae.POSTER_HORIZONTAL,Gt],[Ae.POSTER_VERTICAL,Ft],[Ae.MAGNET_OPENER_CIRCLE,Nt],[Ae.MAGNET_OPENER_PET,Bt],[Ae.MAGNET_OPENER_TONGS,Ut],[Ae.PLACARD_HORIZONTAL,Yt],[Ae.PLACARD_VERTICAL,Zt],[Ae.PLACARD_SQUARE,jt],[Ae.BANNER,qt],[Ae.TICKET_HORIZONTAL_SMALL,Ht],[Ae.TICKET_HORIZONTAL_MEDIUM,Ht],[Ae.TICKET_HORIZONTAL_LARGE,Ht],[Ae.TICKET_VERTICAL_SMALL,Vt],[Ae.TICKET_VERTICAL_MEDIUM,Vt],[Ae.TICKET_VERTICAL_LARGE,Vt],[Ae.TICKET_HORIZONTAL_PERFORATION_SMALL,zt],[Ae.TICKET_HORIZONTAL_PERFORATION_MEDIUM,zt],[Ae.TICKET_HORIZONTAL_PERFORATION_LARGE,zt],[Ae.TICKET_VERTICAL_PERFORATION_SMALL,Wt],[Ae.TICKET_VERTICAL_PERFORATION_MEDIUM,Wt],[Ae.TICKET_VERTICAL_PERFORATION_LARGE,Wt],[Ae.BUSINESS_CARD_HORIZONTAL,Kt],[Ae.BUSINESS_CARD_VERTICAL,Xt],[Ae.STICKER_SQUARE,Qt],[Ae.STICKER_CIRCLE,$t],[Ae.STICKER_RECTANGLE,Jt],[Ae.STICKER_OVAL,en],[Ae.STICKER_VERTICAL_RECTANGLE,tn],[Ae.CATALOG_HORIZONTAL,nn],[Ae.CATALOG_VERTICAL,rn],[Ae.HAND_FAN,an],[Ae.SHOPPING_BAG_PAPER_SMALL,on],[Ae.SHOPPING_BAG_PAPER_MEDIUM,sn],[Ae.SHOPPING_BAG_PAPER_LARGE,un],[Ae.ENVELOPE_JACKET,cn],[Ae.ENVELOPE_SMALL,ln],[Ae.ENVELOPE_BIG,hn],[Ae.ENVELOPE_TICKET,pn],[Ae.CALENDAR_DESK_SMALL,dn],[Ae.CALENDAR_DESK_NORMAL,fn],[Ae.CALENDAR_DESK_BIG,gn],[Ae.RICECAKE_MEMO_PAPER_SQUARE,vn],[Ae.RICECAKE_MEMO_PAPER_VER_RECT,yn],[Ae.RICECAKE_MEMO_PAPER_HOR_RECT,mn],[Ae.RICECAKE_MEMO_PAPER_A5_VER,En],[Ae.RICECAKE_MEMO_PAPER_A5_HOR,kn]])}},{key:"getUnicornIdFrom",value:function(e){return this.templateTypes&&0!==this.templateTypes.size||this.initTypes(),this.templateTypes.get(Ae[e])||""}}]),e}(),Tt="stand_sign_small",bt="stand_sign_normal",wt="stand_sign_big",At="shoulder_sash",Ct="l_holder",xt="leaflet_2_stages",Rt="leaflet_3_stages",Lt="web_flyer_single",_t="web_flyer_double",Pt="flyer_magnetic_single",Ot="flyer_magnetic_paper",Dt="flyer_magnet_circle",Mt="flyer_magnet_rounded_rect",Nt="magnet_opener_circle",Bt="magnet_opener_pet",Ut="magnet_opener_tongs",Gt="poster_hor_print",Ft="poster_ver_print",Ht="ticket_hor",Vt="ticket_ver",zt="ticket_perforation_hor",Wt="ticket_perforation_ver",Kt="business_card_hor",Xt="business_card_ver",Yt="placard_hor",Zt="placard_ver",jt="placard_square",qt="banner",Qt="sticker_square",$t="sticker_circle",Jt="sticker_rect",en="sticker_oval",tn="sticker_vertical_rect",nn="brochure_catalogue_hor",rn="brochure_catalogue_ver",an="hand_fan",on="shopping_bag_paper_small",sn="shopping_bag_paper_medium",un="shopping_bag_paper_large",cn="envelope_jacket",ln="envelope_small",hn="envelope_big",pn="envelope_ticket",dn="calendar_desk_small",fn="calendar_desk_normal",gn="calendar_desk_big",vn="ricecake_memo_paper_square",yn="ricecake_memo_paper_ver_rect",mn="ricecake_memo_paper_hor_rect",En="real_print_ver_b3",kn="table_paper",Sn=(Fe=Object(oe.a)(function(e){return D.b[e]||D.b.MIRICANVAS}),He=Object(oe.a)(function(e){return D.a[e]||D.a.NEW}),Ve=Object(oe.a)(function(e){return D.f[e]||D.f.ORDER}),ze=Object(oe.b)(function(){return On}),We=Object(oe.b)(function(){return xn}),Ke=Object(oe.b)(function(){return Ln}),Xe=Object(oe.a)(function(e){return Et[e]||Et.TEMPLATE}),Ye=Object(oe.a)(function(e){return kt[e]||kt.NONE}),Ze=Object(oe.b)(function(){return Pn}),je=Object(oe.b)(function(){return Tn}),qe=Object(oe.a)(function(e){return St[e]||St.FIT}),Qe=Object(oe.b)(function(){return we}),$e=Object(oe.b)(function(){return ae.a}),Je=Object(oe.b)(function(){return bn}),et=Object(oe.b)(function(){return wn}),tt=Object(oe.b)(function(){return An}),nt=function(){function e(){_()(this,e),J()(this,"channel",rt,this),J()(this,"mode",it,this),J()(this,"purpose",at,this),J()(this,"actionOnSuccess",ot,this),J()(this,"browserTarget",st,this),J()(this,"autoSave",ut,this),J()(this,"pageInitialization",ct,this),J()(this,"initialTypeOfEmptyPage",lt,this),J()(this,"pages",ht,this),J()(this,"globalTitles",pt,this),J()(this,"objectFitType",dt,this),J()(this,"output",ft,this),this.canChangePageOrder=!0,J()(this,"pageCount",gt,this),J()(this,"design",vt,this),J()(this,"bizhowsTemplate",yt,this),J()(this,"bizhowsDesign",mt,this)}return O()(e,[{key:"hasOption",value:function(){return null!=this.parameter}},{key:"getVersion",value:function(){return this.version}},{key:"getAuthorization",value:function(){return this.authorization}},{key:"getChannel",value:function(){return this.channel}},{key:"getMode",value:function(){return this.mode}},{key:"getPurpose",value:function(){return this.purpose}},{key:"getActionOnSuccess",value:function(){return this.actionOnSuccess}},{key:"getBrowserTarget",value:function(){return this.browserTarget}},{key:"getAutoSave",value:function(){return this.autoSave}},{key:"getPageInitialization",value:function(){return this.pageInitialization}},{key:"getTemplatePagesOrder",value:function(){return this.templatePagesOrder}},{key:"getInitialTypeOfEmptyPage",value:function(){return this.initialTypeOfEmptyPage}},{key:"getPageCount",value:function(){return this.pageCount||new ae.a}},{key:"getPages",value:function(){return this.pages}},{key:"getGlobalTitles",value:function(){return this.globalTitles}},{key:"getObjectFitType",value:function(){return this.objectFitType}},{key:"getDesignCategory",value:function(){return this.designCategory}},{key:"getOutput",value:function(){return this.output}},{key:"getTemplateId",value:function(){return null===this.templateId||void 0===this.templateId?"":this.templateId}},{key:"getTemplateIdx",value:function(){return Number.isNaN(Number(this.getTemplateId()))?0:Number(this.getTemplateId())}},{key:"getDesign",value:function(){return this.design}},{key:"getBizhowsTemplate",value:function(){return this.bizhowsTemplate}},{key:"getBizhowsDesign",value:function(){return this.bizhowsDesign}},{key:"getCallbackParam",value:function(){return this.callbackParam}},{key:"createNewPagesWithOpenOption",value:function(e){var t=this;try{if(!this.pages||0===this.pages.length)return e;var n=new re(this.getPages(),this.getPageInitialization(),this.getTemplatePagesOrder(),this.getInitialTypeOfEmptyPage()).getNewPages(e.slice());return n.forEach(function(e){return e.title=t.getPageTitle(e.pageIdx,n.length)}),n}catch(t){return e}}},{key:"getPageTitle",value:function(e,t){var n=this.getGlobalTitles().slice();n.splice.apply(n,[0,0].concat(Q()(n.filter(function(e){return!Number.isNaN(Number(e.match))})))),n.splice.apply(n,[0,0].concat(Q()(n.filter(function(e){return"*"===e.match}))));var r=e+1,i=n.find(function(e){return ie.matching(e.match.toString(),r,t)});return i?i.title.replace("${pageNo}",r.toString()).replace("${pageCount}",t.toString()):""}},{key:"setPageTitlesWithGlobalTitles",value:function(e){var t=this;e.forEach(function(n){return n.title=t.getPageTitle(n.pageIdx,e.length)})}},{key:"isChangeNewMode",value:function(){return this.getMode()===D.a.NEW}},{key:"isUnicornDesign",value:function(){var e=this.getDesign();return!!e&&e.id>0}},{key:"hasKeyToLoadDesign",value:function(){var e=this.getBizhowsTemplate(),t=this.getBizhowsDesign(),n=!!e&&(e.commodityIndex>0||e.designIndex>0||!!e.id),r=!!t&&t.commodityIndex>0;return this.hasValidUnicornTemplateId()||n||r||this.isUnicornDesign()}},{key:"hasValidUnicornTemplateId",value:function(){return!this.getTemplateReferenceIdxList().some(function(e){return 0===e})}},{key:"getTemplateReferenceIdxList",value:function(){var e=this.getTemplateId().split(";");return Number.isNaN(Number(e[0]))?[0]:e.map(function(e){return Number(e)})}},{key:"getDesignMode",value:function(){return this.getChannel()===D.b.BIZHOWS?Ce.a.BIZHOWS:Ce.a.MIRICANVAS}},{key:"getDesignRepositoryType",value:function(){return this.getChannel()===D.b.BIZHOWS?Ce.d.BIZHOWS:Ce.d.MIRICANVAS}},{key:"getUnicornTemplateId",value:function(){return this.unicornTemplateTypeFilter||(this.unicornTemplateTypeFilter=new It),this.unicornTemplateTypeFilter.getUnicornIdFrom(this.getDesignCategory())}}],[{key:"createFromObject",value:function(e){var t=Object(oe.c)(this,e);return t.parameter=e,t.output.adjustCompatibility(),t}}]),e}(),rt=te()(nt.prototype,"channel",[Fe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),it=te()(nt.prototype,"mode",[He],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),at=te()(nt.prototype,"purpose",[Ve],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ot=te()(nt.prototype,"actionOnSuccess",[ze],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),st=te()(nt.prototype,"browserTarget",[We],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ut=te()(nt.prototype,"autoSave",[Ke],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ct=te()(nt.prototype,"pageInitialization",[Xe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lt=te()(nt.prototype,"initialTypeOfEmptyPage",[Ye],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ht=te()(nt.prototype,"pages",[Ze],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pt=te()(nt.prototype,"globalTitles",[je],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dt=te()(nt.prototype,"objectFitType",[qe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ft=te()(nt.prototype,"output",[Qe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gt=te()(nt.prototype,"pageCount",[$e],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vt=te()(nt.prototype,"design",[Je],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yt=te()(nt.prototype,"bizhowsTemplate",[et],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mt=te()(nt.prototype,"bizhowsDesign",[tt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nt);!function(e){e.TEMPLATE="TEMPLATE",e.ORDER="ORDER",e.EMPTY="EMPTY"}(Et||(Et={})),function(e){e.NONE="NONE",e.REPEAT="REPEAT"}(kt||(kt={})),function(e){e.FILL="FILL",e.FIT="FIT",e.ORIGINAL="ORIGINAL"}(St||(St={}));var In,Tn=function e(){_()(this,e)},bn=function e(){_()(this,e),this.id=0,this.revision=0},wn=(xe=Object(oe.a)(function(e){return In[e]||In.TEMPLATE}),Re=function e(){_()(this,e),J()(this,"type",Le,this)},Le=te()(Re.prototype,"type",[xe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Re),An=function e(){_()(this,e)};!function(e){e.TEMPLATE="TEMPLATE",e.THEME="THEME"}(In||(In={}));var Cn,xn=(_e=Object(oe.a)(function(e){return Cn[e]||Cn.SELF}),Pe=function e(){_()(this,e),J()(this,"type",Oe,this),this.name=""},Oe=te()(Pe.prototype,"type",[_e],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pe);!function(e){e.SELF="SELF",e.BLANK="BLANK",e.CUSTOM="CUSTOM"}(Cn||(Cn={}));var Rn,Ln=(De=Object(oe.a)(function(e){return Rn[e]||Rn.NONE}),Me=function e(){_()(this,e),J()(this,"type",Ne,this),this.loadDesign=!1},Ne=te()(Me.prototype,"type",[De],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Me);!function(e){e.NONE="NONE",e.INTERVAL="INTERVAL"}(Rn||(Rn={}));var _n,Pn=function e(){_()(this,e)},On=(Be=Object(oe.a)(function(e){return _n[e]||_n.NONE}),Ue=function(){function e(){_()(this,e),J()(this,"type",Ge,this)}return O()(e,[{key:"execute",value:function(){this.type!==_n.NONE&&this.url&&(this.type===_n.REDIRECT?document.location.href=this.url:window.close())}}]),e}(),Ge=te()(Ue.prototype,"type",[Be],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ue);!function(e){e.NONE="NONE",e.CLOSE="CLOSE",e.REDIRECT="REDIRECT"}(_n||(_n={}));var Dn;!function(e){e.NONE="NONE",e.INTERVAL="INTERVAL"}(Dn||(Dn={}));var Mn=function e(t,n){_()(this,e);var r=t.isMiricanvasChannel(),i=t.isBizhowsChannel();this.saveHotkey=r,this.autoSave=r||i&&n.type!==Dn.NONE,this.loadAutoSavedDesign=i&&n.loadDesign,this.forceSave=i},Nn=n(530),Bn=function e(t){_()(this,e),this.resizeAlwaysMaxSize=t.isBizhowsChannel()},Un=function e(t){_()(this,e),this.showMakePrint=t.isMiricanvasChannel()},Gn=function e(t){_()(this,e),this.defaultBizhowsTab=t.isBizhowsChannel()},Fn=function(){function e(){_()(this,e)}return O()(e,[{key:"initOption",value:function(e){e&&"object"===R()(e)&&(this.editorOpenOption=Sn.createFromObject(e),this.executionMode=new M(this.editorOpenOption.getChannel(),this.editorOpenOption.getMode(),this.editorOpenOption.getPurpose()),this.appHeaderOption=new N(this.getExecutionMode()),this.settingOption=new j(this.getExecutionMode()),this.dddotPopupOption=new B(this.getExecutionMode()),this.saveGuideOption=new U(this.getExecutionMode()),this.templatePanelOption=new F(this.getExecutionMode()),this.myDesignPanelOption=new Gn(this.getExecutionMode()),this.pageSettingOption=new z(this.getExecutionMode()),this.printoutOption=new G(this.getExecutionMode()),this.helpCenterOption=new Nn.a(this.getExecutionMode()),this.canvasAreaOption=new H(this.getExecutionMode()),this.leftPanelOption=new V(this.getExecutionMode()),this.pageZoomNavigatorOption=new W.b(this.getExecutionMode()),this.popupOption=new K(this.getExecutionMode()),this.resourceLoadOption=new X(this.getExecutionMode()),this.itemOption=new Z(this.getExecutionMode()),this.saveOption=new Mn(this.getExecutionMode(),this.getEditorOpenOption().getAutoSave()),this.thumbnailOption=new Bn(this.getExecutionMode()),this.downloadPopupOption=new Un(this.getExecutionMode()))}},{key:"getExecutionMode",value:function(){return this.executionMode||(this.executionMode=new M),this.executionMode}},{key:"getEditorOpenOption",value:function(){return this.editorOpenOption||(this.editorOpenOption=new Sn),this.editorOpenOption}},{key:"getAppHeaderOption",value:function(){return this.appHeaderOption||(this.appHeaderOption=new N(this.getExecutionMode())),this.appHeaderOption}},{key:"getSettingOption",value:function(){return this.settingOption||(this.settingOption=new j(this.getExecutionMode())),this.settingOption}},{key:"getDddotPopupOption",value:function(){return this.dddotPopupOption||(this.dddotPopupOption=new B(this.getExecutionMode())),this.dddotPopupOption}},{key:"getEditorSaveGuideOption",value:function(){return this.saveGuideOption||(this.saveGuideOption=new U(this.getExecutionMode())),this.saveGuideOption}},{key:"getTemplatePanelOption",value:function(){return this.templatePanelOption||(this.templatePanelOption=new F(this.getExecutionMode())),this.templatePanelOption}},{key:"getMyDesignPanelOption",value:function(){return this.myDesignPanelOption||(this.myDesignPanelOption=new Gn(this.getExecutionMode())),this.myDesignPanelOption}},{key:"getPageSettingOption",value:function(){return this.pageSettingOption||(this.pageSettingOption=new z(this.getExecutionMode())),this.pageSettingOption}},{key:"getPrintoutOption",value:function(){return this.printoutOption||(this.printoutOption=new G(this.getExecutionMode())),this.printoutOption}},{key:"getHelpCenterOption",value:function(){return this.helpCenterOption||(this.helpCenterOption=new Nn.a(this.getExecutionMode())),this.helpCenterOption}},{key:"getCanvasAreaOption",value:function(){return this.canvasAreaOption||(this.canvasAreaOption=new H(this.getExecutionMode())),this.canvasAreaOption}},{key:"getLeftPanelOption",value:function(){return this.leftPanelOption||(this.leftPanelOption=new V(this.getExecutionMode())),this.leftPanelOption}},{key:"getPageZoomNavigatorOption",value:function(){return this.pageZoomNavigatorOption||(this.pageZoomNavigatorOption=new W.b(this.getExecutionMode())),this.pageZoomNavigatorOption}},{key:"getPopupOption",value:function(){return this.popupOption||(this.popupOption=new K(this.getExecutionMode())),this.popupOption}},{key:"getResourceLoadOption",value:function(){return this.resourceLoadOption||(this.resourceLoadOption=new X(this.getExecutionMode())),this.resourceLoadOption}},{key:"getItemOption",value:function(){return this.itemOption||(this.itemOption=new Z(this.getExecutionMode())),this.itemOption}},{key:"getSaveOption",value:function(){return this.saveOption||(this.saveOption=new Mn(this.getExecutionMode(),this.getEditorOpenOption().getAutoSave())),this.saveOption}},{key:"getThumbnailOption",value:function(){return this.thumbnailOption||(this.thumbnailOption=new Bn(this.getExecutionMode())),this.thumbnailOption}},{key:"getDownloadPopupOption",value:function(){return this.downloadPopupOption||(this.downloadPopupOption=new Un(this.getExecutionMode())),this.downloadPopupOption}},{key:"getUrlBasePath",value:function(){if(void 0===this.urlBasePath){var e=""!==location.port?":".concat(location.port):"";this.urlBasePath="".concat(location.protocol,"//").concat(location.hostname).concat(e,"/")}return this.urlBasePath}}]),e}();t.a=new Fn},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"c",function(){return c}),n.d(t,"b",function(){return l});var r,i=n(0),a=n.n(i),o=n(1),s=n.n(o);!function(e){e.TEMPLATE="TEMPLATE",e.DESIGN="DESIGN",e.BITMAP="BITMAP",e.IMAGE="IMAGE",e.LINE="LINE",e.FIGURE="FIGURE",e.ILLUST="ILLUST",e.FRAME="FRAME",e.TEXT="TEXT",e.COMBINATION="COMBINATION",e.STYLE="STYLE",e.SVG="SVG",e.BACKGROUND="BACKGROUND",e.BACKGROUND_PATTERN="BACKGROUND_PATTERN",e.BACKGROUND_IMAGE="BACKGROUND_IMAGE",e.PIXABAY="PIXABAY",e.MOCKUP="MOCKUP",e.GRID="GRID",e.GRAPHIC="GRAPHIC",e.PHOTO="PHOTO",e.USER_FOLDER="USER_FOLDER",e.TEMPLATE_STYLE="TEMPLATE_STYLE",e.TEMPLATE_PAGE="TEMPLATE_PAGE",e.DESIGN_PAGE="DESIGN_PAGE",e.YOUTUBE="YOUTUBE"}(r||(r={}));var u={TEMPLATE:"템플릿",IMAGE:"사진",PHOTO:"사진",PIXABAY:"픽사베이",BITMAP:"비트맵",LINE:"선",FIGURE:"도형",ILLUST:"일러스트",FRAME:"프레임",COMBINATION:"조합",TEXT:"텍스트",GRID:"표",BACKGROUND_PATTERN:"패턴 배경",BACKGROUND_IMAGE:"사진 배경"};function c(e){return u[e]||e}var l=function(){function e(){a()(this,e),this.resourceList=[r.TEMPLATE,r.IMAGE,r.PIXABAY,r.BITMAP,r.LINE,r.FIGURE,r.ILLUST,r.FRAME,r.TEXT,r.COMBINATION,r.STYLE,r.BACKGROUND_PATTERN,r.BACKGROUND_IMAGE,r.PHOTO,r.GRID],this.resourceNameList=["템플릿","사진","Pixabay","비트맵","선","도형","일러스트","프레임","조합","텍스트 (조합)","텍스트 (스타일)","배경 (패턴)","배경 (사진)","사진","표"]}return s()(e,null,[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}},{key:"values",value:function(){return this.getInstance().resourceList}},{key:"valueOf",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=this.values()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(o.toString()===e)return o}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return null}},{key:"getText",value:function(e){for(var t=0;t<this.values().length;t++)if(this.values()[t]===e)return this.getInstance().resourceNameList[t];return""}}]),e}()},function(e,t,n){"use strict";var r,i=n(2),a=n.n(i),o=n(4),s=n.n(o),u=n(0),c=n.n(u),l=n(1),h=n.n(l),p=n(6),d=n.n(p),f=n(3),g=n.n(f),v=n(9),y=n.n(v),m=n(7),E=n.n(m),k=n(228),S=n(166),I=n(258),T=n(359),b=n(235),w=n(409),A=n(319),C=n(226),x=n(280),R=n(230),L=n(341),_=n(303),P=n(305),O=n(292),D=n(383),M=n(240);!function(e){e[e.BRIGHTNESS=0]="BRIGHTNESS",e[e.CONTRAST=1]="CONTRAST",e[e.LIGHTNESS=2]="LIGHTNESS",e[e.SATURATION=3]="SATURATION",e[e.TINT=4]="TINT",e[e.COLOR_TONE=5]="COLOR_TONE",e[e.TEMPERATURE=6]="TEMPERATURE",e[e.BLUR=7]="BLUR",e[e.VIGNETTE=8]="VIGNETTE"}(r||(r={}));var N=function(){function e(t){c()(this,e),this.type=t}return h()(e,[{key:"getFilterType",value:function(){return this.type}}]),e}();N.IMAGE_CANVAS=M.a.createCanvas(),N.FILTER_CANVAS=M.a.createCanvas();var B=function(e){function t(){return c()(this,t),d()(this,g()(t).call(this,r.BRIGHTNESS))}return E()(t,e),h()(t,[{key:"processImage",value:function(e,t){return D.c.adjustImageBrightness(e,t)}}]),t}(N),U=function(e){function t(){return c()(this,t),d()(this,g()(t).call(this,r.CONTRAST))}return E()(t,e),h()(t,[{key:"processImage",value:function(e,t){return D.c.adjustContrast(e,t)}}]),t}(N),G=function(e){function t(){return c()(this,t),d()(this,g()(t).call(this,r.LIGHTNESS))}return E()(t,e),h()(t,[{key:"processImage",value:function(e,t){return 0===t||t<-100||t>100?e:D.c.adjustLightness(e,t)}}]),t}(N),F=function(e){function t(){return c()(this,t),d()(this,g()(t).call(this,r.SATURATION))}return E()(t,e),h()(t,[{key:"processImage",value:function(e,t){return 0===t||t<-100||t>100?e:D.c.adjustSaturation(e,t)}}]),t}(N),H=function(e){function t(){return c()(this,t),d()(this,g()(t).call(this,r.TINT))}return E()(t,e),h()(t,[{key:"processImage",value:function(e,t){return 0===t||t<-100||t>100?e:D.c.adjustHSLValue(e,D.b.HUE,t)}}]),t}(N),V=function(e){function t(){return c()(this,t),d()(this,g()(t).call(this,r.COLOR_TONE))}return E()(t,e),h()(t,[{key:"processImage",value:function(e,t){return 0===t||t<-100||t>100?e:D.c.adjustColorToneValue(e,D.b.HUE,t)}}]),t}(N),z=function(e){function t(){return c()(this,t),d()(this,g()(t).call(this,r.TEMPERATURE))}return E()(t,e),h()(t,[{key:"processImage",value:function(e,t){return 0===t||t<-100||t>100?e:D.c.adjustTemperature(e,t)}}]),t}(N),W=function(e){function t(){return c()(this,t),d()(this,g()(t).call(this,r.BLUR))}return E()(t,e),h()(t,[{key:"processImage",value:function(e,t,n,r){if(0===t||t<-100||t>100)return e;if(t>0)return D.c.adjustBlur(e,t,n,r);var i=Math.abs(t)/40;return D.c.adjustSharpen(e,i)}}]),t}(N),K=function(e){function t(){return c()(this,t),d()(this,g()(t).call(this,r.VIGNETTE))}return E()(t,e),h()(t,[{key:"processImage",value:function(e,t,n,r,i,a){return t<=0||t>100?e:D.c.adjustVignette(e,t,n,r,i,a)}}]),t}(N),X=function(){function e(){c()(this,e),e.FILTER_LIST.push(new B),e.FILTER_LIST.push(new U),e.FILTER_LIST.push(new G),e.FILTER_LIST.push(new F),e.FILTER_LIST.push(new H),e.FILTER_LIST.push(new V),e.FILTER_LIST.push(new z),e.FILTER_LIST.push(new W),e.FILTER_LIST.push(new K)}return h()(e,null,[{key:"processImage",value:function(t,n,r,i,a,o){var s=t;return e.FILTER_LIST.forEach(function(e){var t=n.get(e.getFilterType());0!==t&&(s=e.processImage(s,t,r,i,a,o))}),s}}]),e}();X.FILTER_LIST=new Array(0),X.INSTANCE=new X;var Y=function(){function e(){c()(this,e)}return h()(e,null,[{key:"getFilterParamMap",value:function(e){var t=new Map;return t.set(r.BRIGHTNESS,Number(e.getBrightness())),t.set(r.CONTRAST,Number(e.getContrast())),t.set(r.LIGHTNESS,Number(e.getLightness())),t.set(r.SATURATION,Number(e.getSaturation())),t.set(r.TINT,Number(e.getTint())),t.set(r.COLOR_TONE,Number(e.getColorTone())),t.set(r.TEMPERATURE,Number(e.getTemperature())),t.set(r.BLUR,Number(e.getBlur())),t.set(r.VIGNETTE,Number(e.getVignette())),t}}]),e}(),Z=n(411),j=n(110),q=n(246),Q=n(234),$=function(e){function t(e,n,r,i,a,o,s){var u;return c()(this,t),(u=d()(this,g()(t).call(this,e,a,o,s))).itemPosition=n,u.imageElement=r,u.isUnsupportedItem=i,u}var n,r,i;return E()(t,e),h()(t,[{key:"getPhotoImageRect",value:function(e){var t=this.itemPosition;return new Q.a((t.left-this.props.getLeft())*e,(t.top-this.props.getTop())*e,(t.right-this.props.getLeft())*e,(t.bottom-this.props.getTop())*e)}},{key:"rasterizeSingleItem",value:(i=s()(a.a.mark(function e(t,n){var r=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=s()(a.a.mark(function e(i,o){var s,u,c,l,h,p,d,f,g,v,y,m,E,k;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!r.isResourceLoadFail&&r.imageElement){e.next=6;break}return e.next=4,r.rasterizeResourceLoadFail(t,n);case 4:return i(),e.abrupt("return");case 6:s=r.imageElement.width,u=r.imageElement.height,c=t.canvas.width,l=t.canvas.height,t.save(),t.globalAlpha=r.props.getOpacity()/255,r.isUnsupportedItem&&(t.globalAlpha=.5),t.translate(c/2,l/2),t.scale(r.props.isFlipH()?-1:1,r.props.isFlipV()?-1:1),t.translate(-c/2,-l/2),h=r.getPhotoImageRect(n),p=s/r.itemPosition.getWidth(),d=u/r.itemPosition.getHeight(),t.drawImage(r.imageElement,h.left*p,h.top*d,s*n,u*n),f=Y.getFilterParamMap(r.props),g=t.getImageData(0,0,c,l),v=Math.ceil(r.renderLeft),y=Math.ceil(r.renderTop),m=Math.floor(r.imageElement.width*r.props.getWidth()/r.itemPosition.getWidth()*n),E=Math.floor(r.imageElement.height*r.props.getHeight()/r.itemPosition.getHeight()*n),k=X.processImage(g,f,m,E,v,y),t.putImageData(k,0,0),r.props.isActiveGradationMask()&&(k=D.c.getLinearGradientMask(k,r.props.getGradationMaskDepth(),r.props.getGradationMaskDirection(),m,E,v,y),t.putImageData(k,0,0)),t.restore(),i(),e.next=36;break;case 33:e.prev=33,e.t0=e.catch(0),o(e.t0);case 36:case"end":return e.stop()}},e,null,[[0,33]])}));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)})),function(e,t){return i.apply(this,arguments)})},{key:"renderShadow",value:function(e,t,n,r,i,a){if(r){var o=Math.ceil(this.props.getWidth()*t),s=Math.ceil(this.props.getHeight()*t),u=this.getShadowCanvasPosData(t,r);e.width=u.width,e.height=u.height;var c=e.getContext("2d");this.renderShadowCtx(c,n,o,s,i,a)}}},{key:"rasterizeToPage",value:(r=s()(a.a.mark(function e(t,n,r,i,o){var u=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=s()(a.a.mark(function e(r,i){var s,c,l,h,p,d,f,g,v,y,m,E,k,S,I,T,b,w,A,C,x,R,L,_,P,D;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!u.isUnsupportedItem){e.next=3;break}return r(),e.abrupt("return");case 3:if(t.save(),e.prev=4,!((s=u.getCropPosData(t.canvas.width,t.canvas.height,n,o)).width>0&&s.height>0)){e.next=53;break}if(u.imageElement){e.next=18;break}return c=M.a.createCanvas(new j.a(u.props.getWidth(),u.props.getHeight(),n)),l=c.getContext("2d"),e.next=12,u.rasterizeResourceLoadFail(l,n);case 12:return t.save(),u.transformImage(t,u.props.getLeft()*n,u.props.getTop()*n,n),t.drawImage(c,0,0),t.restore(),r(),e.abrupt("return");case 18:if(h=s.width/u.itemPosition.getWidth(),p=s.height/u.itemPosition.getHeight(),d=u.imageElement.width*h,f=u.imageElement.height*p,g=s.width*n,v=s.height*n,y=s.left,m=s.top,E=O.a.MAX_IMAGE_SIZE,k=Math.min(Math.min(g,E)/g,Math.min(v,E)/v),S=M.a.createCanvas(new j.a(d,f,k)),!(Math.min(S.width,S.height)<1)){e.next=32;break}return r(),e.abrupt("return");case 32:return I=u.imageElement.width/u.itemPosition.getWidth(),T=u.imageElement.height/u.itemPosition.getHeight(),u.renderLeft=y*I*k,u.renderTop=m*T*k,b=S.getContext("2d"),w=y,u.props.isFlipH()&&(w=-(u.props.getWidth()-s.width-s.left)),A=m,u.props.isFlipV()&&(A=-(u.props.getHeight()-s.height-s.top)),e.next=43,u.drawItemCtx(b,-w*I*k,-A*T*k,k);case 43:C=M.a.createCanvas(),u.renderShadow(C,n,S,o,g,v),u.renderLeft=0,u.renderTop=0,t.save(),t.translate(u.props.getLeft()*n,u.props.getTop()*n),u.props.getRotate()&&(x=u.props.getWidth()/2*n,R=u.props.getHeight()/2*n,t.translate(x,R),t.rotate(Math.round(u.props.getRotate()*Math.PI/180*1e3)/1e3),t.translate(-x,-R)),o&&(L=u.getCanvasPosData(n),_=L.width<L.height?L.width:L.height,P=u.props.getShadowDistance()*_/130,D=q.a.getPointByDistanceAngle(P,u.props.getShadowAngle()+90-u.props.getRotate()),t.drawImage(C,-L.width*(O.a.VALUE_TO_MULTIPLY-1)/2+D.x+y*n,-L.height*(O.a.VALUE_TO_MULTIPLY-1)/2+D.y+m*n)),t.drawImage(S,y*n,m*n,g,v),t.restore();case 53:e.next=59;break;case 55:return e.prev=55,e.t0=e.catch(4),i(e.t0),e.abrupt("return");case 59:t.restore(),r();case 61:case"end":return e.stop()}},e,null,[[4,55]])}));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)})),function(e,t,n,i,a){return r.apply(this,arguments)})},{key:"getSingleItemCanvasDataURL",value:(n=s()(a.a.mark(function e(t,n){var r,i,o,s,u,c,l,h,p,d,f,g;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.imageElement){e.next=2;break}return e.abrupt("return","");case 2:return r=this.imageElement.width,i=this.imageElement.height,o=this.props.getWidth()/this.itemPosition.getWidth(),s=this.props.getHeight()/this.itemPosition.getHeight(),h=(l=(u=r*o)>(c=i*s))?t/u:n/c,p=l?t:Math.ceil(u*h),d=l?Math.ceil(c*h):n,f=M.a.createCanvas(new j.a(p,d)),g=f.getContext("2d"),e.next=16,this.rasterizeSingleItem(g,h);case 16:return e.abrupt("return",f.toDataURL());case 17:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})}],[{key:"getLimitedCanvasSizeImgSrc",value:function(e,n,r,i,a){var o=a?t.USER_PHOTO_MAX_SIZE:t.BIZ_IMG_MAX_SIZE;if(n<=o&&r<=o)return e.toDataURL();var s=this.getLimitedNewSize(n,r,o),u=s.limitWidth,c=s.limitHeight,l=M.a.createCanvas(new j.a(u,c,i));return l.getContext("2d").drawImage(e,0,0,l.width,l.height),l.toDataURL()}},{key:"getLimitedNewSize",value:function(e,t,n){var r=Math.max(e,t);if(r>n){var i=n/r;return{limitWidth:Math.round(e*i),limitHeight:Math.round(t*i)}}return{limitWidth:e,limitHeight:t}}}]),t}(Z.a);$.BIZ_IMG_MAX_SIZE=800,$.USER_PHOTO_MAX_SIZE=800;var J=n(11),ee=n(86),te=n(227),ne=n(90);n.d(t,"d",function(){return oe}),n.d(t,"b",function(){return re}),n.d(t,"c",function(){return ie}),n.d(t,"a",function(){return ae});var re,ie,ae,oe=function(e){function t(e,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ie.INDEPENDENT,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],l=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],h=!(arguments.length>8&&void 0!==arguments[8])||arguments[8],p=!(arguments.length>9&&void 0!==arguments[9])||arguments[9],f=!(arguments.length>10&&void 0!==arguments[10])||arguments[10];return c()(this,t),(r=d()(this,g()(t).call(this,e,n,i,s,u,l,h,p,f,k.e))).photoPos=new Q.a(0,0,0,0),r._isFrameFixed=!0,r._isPhotoFixedToFrame=!1,r.photoXScale=1,r.photoYScale=1,r.photoScale=1,r.isGradationMasked=!1,r.oldCenter=new ne.a(0,0),r.rotateCorrectV=new ne.a(0,0),r.canIgnoreCropBox=!1,r.backgroundState=ae.NONE,r.belongsTo=o,r.props.setChangePositionSetRevision(!1),r.props.setItemRotate(a),r.itemPosition=new Q.a(r.props.getLeft(),r.props.getTop(),r.props.getRight(),r.props.getBottom()),r.photoCrop=new w.a(r.itemPosition.getWidth(),r.itemPosition.getHeight()),r.isActiveLiveEdit=!0,r.isActiveWebGLFilter=!0,r.originRect=r.getLTRBCoordinate(),r.originImageRect=r.itemPosition.clone(),r}var n,r,i,o,u;return E()(t,e),h()(t,[{key:"getImageElement",value:function(){return S.b.getData(this.getImgResourceKey())}},{key:"makeProps",value:function(){return new T.c}},{key:"getPhotoImageRect",value:function(e){return new $(this.props,this.itemPosition).getPhotoImageRect(e)}},{key:"canDrawShadow",value:function(){return this.props.isActiveShadow()&&C.a.isDefaultMode()&&!this.isBackground&&this.belongsTo!==ie.IMAGEFRAME}},{key:"render",value:(u=s()(a.a.mark(function e(t,n){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new $(this.props,this.itemPosition,this.getImageElement(),this.isUnsupported(),this.isResourceLoadFail(),this.getResourceLoadStatus(),this.getDisabledResourcePreviewKey()),e.next=3,r.rasterizeSingleItem(t,n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)})),function(e,t){return u.apply(this,arguments)})},{key:"renderShadow",value:function(e,t,n,r,i){var a=this.canDrawShadow();if(a)return new $(this.props,this.itemPosition,this.getImageElement(),this.isUnsupported(),this.isResourceLoadFail(),this.getResourceLoadStatus(),this.getDisabledResourcePreviewKey()).renderShadow(e,t,n,a,r,i)}},{key:"renderThumbnail",value:(o=s()(a.a.mark(function e(t,n){var r,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=this.isUnsupported())){e.next=3;break}return e.abrupt("return");case 3:return i=new $(this.props,this.itemPosition,this.getImageElement(),r,this.isResourceLoadFail(),this.getResourceLoadStatus(),this.getDisabledResourcePreviewKey()),e.next=6,i.rasterizeToPage(t,n,void 0,void 0,this.canDrawShadow());case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)})),function(e,t){return o.apply(this,arguments)})},{key:"getCropPosData",value:function(e,t,n){return new $(this.props).getCropPosData(e,t,n,this.canDrawShadow())}},{key:"getThumbUrl",value:(i=s()(a.a.mark(function e(t,n){var r,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.getImageElement()){e.next=3;break}return e.abrupt("return","");case 3:return i=new $(this.props,this.itemPosition,r,this.isUnsupported(),this.isResourceLoadFail(),this.getResourceLoadStatus(),this.getDisabledResourcePreviewKey()),e.next=6,i.getSingleItemCanvasDataURL(t,n);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)})),function(e,t){return i.apply(this,arguments)})},{key:"getLimitedCanvasSizeImgSrc",value:function(e,t,n,r){return te.a.getUserSetting().devMode&&this.isMyImage()&&"imageframe_basic_png"!==this.props.getPhotoKey()?e.toDataURL():$.getLimitedCanvasSizeImgSrc(e,t,n,r,this.isExternalPhoto())}},{key:"isExternalPhoto",value:function(){return this.isMyImage()||this.isPixabay()}},{key:"isMyImage",value:function(){return this.orgType===re.Photo||this.orgType===re.BackgroundPhoto}},{key:"isPixabay",value:function(){return this.orgType===re.Pixabay||this.orgType===re.BackgroundPixabay}},{key:"getItemType",value:function(){return b.b.PHOTO}},{key:"isPrivateItem",value:function(){return this.orgType===re.Photo||this.orgType===re.BackgroundPhoto}},{key:"getPropsPhotoKey",value:function(){return this.orgType===re.Sticker||this.orgType===re.Image||this.orgType===re.BackgroundImage?this.props.getPhotoKey():void 0}},{key:"getShadowCanvasPosData",value:function(e){return new $(this.props).getShadowCanvasPosData(e,this.canDrawShadow())}},{key:"getCorrectedMove",value:function(e,t){var n=new ne.a(e,t),r=q.a.getRotatedVectorByPoint(new ne.a(0,0),new ne.a(n.x,n.y),I.a.getRadianByDegree(-this.props.getRotate())),i=this.photoCrop.getPhotoCloneBoxRect(this.props.getRotate()),a=this.photoCrop.getBoxRect(this.props.getRotate()),o=i.bottom+r.y,s=o<a.bottom;!this.canIgnoreCropBox&&s&&(r.y+=a.bottom-o);var u=i.top+r.y,c=u>a.top;!this.canIgnoreCropBox&&c&&(r.y+=a.top-u);var l=i.right+r.x,h=l<a.right;!this.canIgnoreCropBox&&h&&(r.x+=a.right-l);var p=i.left+r.x,d=p>a.left;return!this.canIgnoreCropBox&&d&&(r.x+=a.left-p),this.photoCrop.increasePhotoCloneBoxPosition(r.x,r.y),q.a.getRotatedVectorByPoint(new ne.a(0,0),new ne.a(r.x,r.y),I.a.getRadianByDegree(this.props.getRotate()))}},{key:"move",value:function(e,n,r){
//!this.canIgnoreCropBox
if(C.a.isCropMode())if(this.photoCrop.isResizeSelected())this.photoCrop.resize(new ne.a(e,n),this.props.getRotate(),this.photoCrop.getPhotoCloneBoxRect(this.props.getRotate())),this.positionStates=void 0;else if(r&&r.isCenterCorrect){var i=this.getLTRBCoordinate(),a=i.getCenterPos(),o=q.a.calcLocationByRotate(a,this.oldCenter,this.props.getRotate());i.moveCenter(o),this.setLTRBCoordinate(i,!0)}else{var s=this.getCorrectedMove(e,n);y()(g()(t.prototype),"move",this).call(this,s.x,s.y,r),this.itemPosition.move(s.x,s.y)}else this._isFrameFixed&&(y()(g()(t.prototype),"move",this).call(this,e,n,r),(r&&r.forceMove||this.props.isCanUserMove())&&(this.photoPos.left+=e,this.photoPos.right+=e,this.photoPos.top+=n,this.photoPos.bottom+=n))}},{key:"scale",value:function(e){return y()(g()(t.prototype),"scale",this).call(this,e),this.photoPos.changeScale(e),this}},{key:"clone",value:function(){var e=new t("".concat((new Date).getTime(),"-").concat(J.b.random()),this.props.getBoundingBox(),this.props.getRotate(),this.props.getItemRotate(),this.belongsTo,this.props.isFlipH(),this.props.isFlipV(),this.props.isCanUserSelect(),this.props.isCanUserMove(),this.props.isCanUserResize(),this.props.isCanUserDel());return e.setProps(this.props.clone()),e._isFrameFixed=this._isFrameFixed,e._isPhotoFixedToFrame=this._isPhotoFixedToFrame,e.photoXScale=this.photoXScale,e.photoYScale=this.photoYScale,e.photoScale=this.photoScale,e.photoPos=new Q.a(this.photoPos.left,this.photoPos.top,this.photoPos.right,this.photoPos.bottom),e.addedBy=this.addedBy,e.orgType=this.orgType,e.skinRatioId=this.skinRatioId,e.photoCrop.isCropped=this.photoCrop.isCropped,this.setCloneItemDefaultAttr(e),e.originRect=this.originRect.clone(),e.originImageRect=this.originImageRect.clone(),e.backgroundState=this.backgroundState,e}},{key:"getUsedColor",value:function(){var e=new Set;return this.props.isActiveSolidLine()&&e.add(this.props.getSolidLineColor()),this.canDrawShadow()&&e.add(this.props.getShadowColor()),e}},{key:"isStickerable",value:function(){return!(this.orgType!==re.Sticker||this.photoCrop.isCropped||this.props.getBitmapMaskBitmapId()||this.props.getBlur()||this.props.getVignette()||this.props.getStickerFrameStickerId()||this.props.getSolidLineThickness()||this.props.getGradationMaskDepth()||this.isGradationMask()||this.props.isActiveShadow())}},{key:"isRepoStickerDB",value:function(){switch(this.orgType){case re.Sticker:case re.BackgroundImage:case re.Image:return!0;default:return!1}}},{key:"isGradationMask",value:function(){return this.isGradationMasked}},{key:"isSkinable",value:function(e){return this.isBackground&&Math.round(this.props.getLeft())<=0&&Math.round(this.props.getTop())<=0&&Math.round(this.props.getRight())>=e.width&&Math.round(this.props.getBottom())>=e.height}},{key:"setLTRBCoordinate",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.oldCenter=this.getLTRBCoordinate().getCenterPos(),C.a.isCropMode()&&!n){var r=e.changeScale(1),i=this.getLTRBCoordinate().changeScale(1),a=r.getWidth(),o=r.getHeight(),s=r.left-i.left,u=r.top-i.top;this.photoCrop.increasePhotoCloneBoxPosition(s,u),this.photoCrop.updatePhotoCloneBoxSize(a,o),this.itemPosition=r.changeScaleReverse(1),y()(g()(t.prototype),"setLTRBCoordinate",this).call(this,r)}else{if(this.isBackground)this.itemPosition=e;else{var c=e.left-(this.props.getLeft()-this.itemPosition.left)*e.getWidth()/this.props.getWidth(),l=e.top-(this.props.getTop()-this.itemPosition.top)*e.getHeight()/this.props.getHeight(),h=e.right-(this.props.getRight()-this.itemPosition.right)*e.getWidth()/this.props.getWidth(),p=e.bottom-(this.props.getBottom()-this.itemPosition.bottom)*e.getHeight()/this.props.getHeight();this.itemPosition=new Q.a(c,l,h,p)}y()(g()(t.prototype),"setLTRBCoordinate",this).call(this,e)}}},{key:"canDelete",value:function(){return y()(g()(t.prototype),"canDelete",this).call(this)&&C.a.isDefaultMode()}},{key:"canPropertyEdit",value:function(){return y()(g()(t.prototype),"canPropertyEdit",this).call(this)&&C.a.isDefaultMode()}},{key:"getHeaderTitle",value:function(){return this.isBackground?"사진 배경":R.b.getText(this.getResourceType())}},{key:"initCropAndOriginSizeRollback",value:function(){this.setLTRBCoordinate(this.originRect),this.itemPosition=this.originImageRect.clone(),this.disableCrop()}},{key:"initRectToImageRect",value:function(){var e=this.getLTRBCoordinate();y()(g()(t.prototype),"setLTRBCoordinate",this).call(this,new Q.a(e.left,e.top,e.left+this.originRect.getWidth(),e.top+this.originRect.getHeight())),this.itemPosition=this.getLTRBCoordinate().clone()}},{key:"disableCrop",value:function(){this.photoCrop.isCropped=!1}},{key:"isRequireLiveEdit",value:function(){return this.orgType!==re.Skin}},{key:"isOnlyOneItem",value:function(){return this.isBackground}},{key:"isPhotoItem",value:function(){return!0}},{key:"isHighResolutionApplicable",value:(r=s()(a.a.mark(function e(){var t,n,r,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.getImageElement(),!this.isResourceLoadFail()&&t){e.next=4;break}return console.log("resource load fail"),e.abrupt("return",!1);case 4:return e.next=6,this.getImgOriginalSize();case 6:return n=e.sent,r=new j.a(this.itemPosition.getWidth(),this.itemPosition.getHeight()),i=new j.a(t.width,t.height),e.abrupt("return",n.isBiggerThan(i)&&r.isBiggerThan(i));case 10:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"initOriginalImageSize",value:function(){this.originalImageSize=void 0}},{key:"getImgOriginalSize",value:(n=s()(a.a.mark(function e(){var t,n,r,i,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.originalImageSize){e.next=4;break}console.log("OriginalSize 있음"),e.next=45;break;case 4:if(!this.isPixabay()){e.next=18;break}return e.next=7,_.b.fetch(L.a.getFileIDWithKey(this.props.getPhotoKey()));case 7:if((t=e.sent)&&t.imageHeight&&t.imageWidth){e.next=15;break}return e.next=11,S.b.loadImageAsync(x.a.getOriginalPhotoUrl(this.props.getPhotoKey()));case 11:n=e.sent,this.originalImageSize=new j.a(Number(n.width),Number(n.height)),e.next=16;break;case 15:this.originalImageSize=new j.a(Number(t.imageWidth),Number(t.imageHeight));case 16:e.next=45;break;case 18:if(!this.isMyImage()){e.next=26;break}return e.next=21,S.b.loadImageAsync(x.a.getOriginalPhotoUrl(this.props.getPhotoKey()));case 21:r=e.sent,this.originalImageSize=new j.a(r.width,r.height),console.log("OriginalSize 없음 : ".concat(this.originalImageSize.width,", ").concat(this.originalImageSize.height)),e.next=45;break;case 26:if(this.orgType!==re.Sticker&&this.orgType!==re.Image&&this.orgType!==re.BackgroundImage){e.next=33;break}return e.next=29,A.a.from(ee.a.UNICORN,!0).getStickerData(this.props.getPhotoKey());case 29:i=e.sent,this.originalImageSize=new j.a(i.orgWidth,i.orgHeight),e.next=45;break;case 33:if(this.orgType!==re.Skin){e.next=40;break}return e.next=36,A.a.from(ee.a.BIZHOWS,!0).getSkinOriginSize(this.props.getPhotoKey(),this.skinRatioId);case 36:o=e.sent,this.originalImageSize=o?new j.a(o.originWidth,o.originHeight):new j.a,e.next=45;break;case 40:if(this.orgType!==re.SmileCanvasPhoto){e.next=44;break}this.originalImageSize=this.props.getSmileCanvasOriginImgSize().clone(),e.next=45;break;case 44:throw new Error("undefined type ".concat(this.orgType));case 45:return e.abrupt("return",this.originalImageSize.clone());case 46:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"getResourceType",value:function(){switch(this.orgType){case re.Image:return R.a.IMAGE;case re.Sticker:return R.a.BITMAP;case re.Pixabay:return R.a.PIXABAY;default:return R.a.PHOTO}}},{key:"getImgResourceKey",value:function(){return this.orgType===re.Skin?"".concat(this.props.getPhotoKey(),"_").concat(this.skinRatioId):this.props.getPhotoKey()}},{key:"isLazyHandlerHandlePosition",value:function(e){return!1}},{key:"getDisabledResourcePreviewKey",value:function(){switch(this.orgType){case re.Photo:case re.BackgroundPhoto:return k.a.DISABLED_ORIGIN_USER_RESOURCE;case re.Pixabay:case re.BackgroundPixabay:return k.a.NOT_FOUND_ORIGIN_ITEM;case re.Sticker:case re.Image:case re.BackgroundImage:case re.Skin:default:return k.a.DISABLED_ORIGIN_ITEM}}},{key:"isUnsupported",value:function(){var e=this.orgType===re.Skin&&J.b.isEmpty(this.skinRatioId);return P.a.isIclickSticker(this.props.getPhotoKey())||this.unsupportedResource||e}},{key:"getUnsupportedItemType",value:function(){return this.orgType===re.Skin&&J.b.isEmpty(this.skinRatioId)?k.h.COMPATIBILITY_FAILURE:this.isSmileCanvasUserLogo()?k.h.SMILECANVAS_USER_LOGO:P.a.isIclickSticker(this.props.getPhotoKey())||this.unsupportedResource?k.h.UNSUPPORTED_LICENSE:k.h.NONE}},{key:"isSmileCanvasUserLogo",value:function(){return 0===this.props.getPhotoKey().indexOf(t.SMILECANVAS_USER_LOGO_KEY)}},{key:"isValid",value:function(){return!!y()(g()(t.prototype),"isValid",this).call(this)&&0!==(this.props.getPhotoKey()||"").length}},{key:"addedByUser",value:function(){return this.addedBy===k.f.USER||this.addedBy===k.f.UNKNOWN}},{key:"canChangeToBackground",value:function(){var e=this.orgType,t=this.backgroundState,n=e===re.Skin&&t!==ae.NONE,r=[re.Sticker,re.BackgroundImage,re.BackgroundPixabay,re.BackgroundPhoto].includes(e),i=e===re.BackgroundImage&&t===ae.BACKGROUND_TO_PHOTO,a=![ae.ORIGIN,ae.PHOTO_TO_BACKGROUND].includes(t);return(n||!r||i)&&a}},{key:"getCommonFileKeyList",value:function(){switch(this.orgType){case re.Photo:case re.Pixabay:case re.BackgroundPhoto:case re.BackgroundPixabay:return[this.props.getPhotoKey()]}return[]}},{key:"canDisplayHyperlink",value:function(){return y()(g()(t.prototype),"canDisplayHyperlink",this).call(this)&&!this.isBackground}},{key:"isBackground",get:function(){var e=this.backgroundState,t=[re.Skin,re.BackgroundImage,re.BackgroundPhoto,re.BackgroundPixabay],n=this.orgType===re.Skin&&e!==ae.NONE,r=t.includes(this.orgType)&&e===ae.ORIGIN;return e!==ae.BACKGROUND_TO_PHOTO&&(n||r||e===ae.PHOTO_TO_BACKGROUND)}},{key:"isFrameFixed",get:function(){return this._isFrameFixed},set:function(e){this._isFrameFixed=e}},{key:"isPhotoFixedToFrame",get:function(){return this._isPhotoFixedToFrame},set:function(e){this._isPhotoFixedToFrame=e}},{key:"itemPosition",get:function(){return this.photoPos},set:function(e){this.photoPos=e}}]),t}(k.d);oe.SMILECANVAS_USER_LOGO_KEY="_LOGO",function(e){e.Photo="photo",e.Pixabay="pixabay",e.Sticker="sticker",e.Skin="skin",e.SmileCanvasPhoto="smileCanvasPhoto",e.Image="image",e.BackgroundPixabay="backgroundPixabay",e.BackgroundPhoto="backgroundPhoto",e.BackgroundImage="backgroundImage"}(re||(re={})),function(e){e.INDEPENDENT="INDEPENDENT",e.GRID="GRID",e.IMAGEFRAME="IMAGEFRAME"}(ie||(ie={})),function(e){e.NONE="none",e.ORIGIN="origin",e.BACKGROUND_TO_PHOTO="background_to_photo",e.PHOTO_TO_BACKGROUND="photo_to_background"}(ae||(ae={}))},function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return s});var r,i,a=n(22),o=n.n(a);!function(e){e.TEMPLATE_LIB="TEMPLATE_LIB",e.BIZ_TEMPLATE_LIB="BIZ_TEMPLATE_LIB",e.DESIGN_LIB="DESIGN_LIB",e.ITEM_LIB="ITEM_LIB",e.ALL_TYPE_ITEM="ALL_TYPE_ITEM",e.PIXABAY_LIB="PIXABAY_LIB",e.LINE_LIB="LINE_LIB",e.FIGURE_LIB="FIGURE_LIB",e.ILLUST_LIB="ILLUST_LIB",e.FRAME_LIB="FRAME_LIB",e.ITEM_COMBINATION_LIB="ITEM_COMBINATION_LIB",e.PHOTO_LIB="PHOTO_LIB",e.STICKER_PHOTO_LIB="STICKER_PHOTO_LIB",e.TEXT_LIB="TEXT_LIB",e.TEXT_COMBINATION_LIB="TEXT_COMBINATION_LIB",e.TEXT_STYLE_LIB="TEXT_STYLE_LIB",e.BACKGROUND_LIB="BACKGROUND_LIB",e.BACKGROUND_IMAGE_LIB="BACKGROUND_IMAGE_LIB",e.BACKGROUND_PATTERN_LIB="BACKGROUND_PATTERN_LIB",e.GRID_LIB="GRID_LIB",e.MY_IMAGE_LIB="MY_IMAGE_LIB",e.FAVORITE_LIB="FAVORITE_LIB",e.ADMIN_TOOL="ADMIN_TOOL",e.IMAGE_DOWNLOAD="IMAGE_DOWNLOAD",e.IMAGE_SEARCH="IMAGE_SEARCH",e.DEV_TOOL="DEV_TOOL",e.VIDEO_PANEL="VIDEO_PANEL",e.VIDEO="VIDEO",e.YOUTUBE="YOUTUBE"}(i||(i={}));var s,u=(r={},o()(r,i.TEMPLATE_LIB,"템플릿"),o()(r,i.BIZ_TEMPLATE_LIB,"비즈템플릿"),o()(r,i.DESIGN_LIB,"나의 템플릿"),o()(r,i.ITEM_LIB,"요소"),o()(r,i.ALL_TYPE_ITEM,"전체"),o()(r,i.PIXABAY_LIB,"Pixabay"),o()(r,i.LINE_LIB,"선"),o()(r,i.FIGURE_LIB,"도형"),o()(r,i.ILLUST_LIB,"일러스트"),o()(r,i.FRAME_LIB,"프레임"),o()(r,i.ITEM_COMBINATION_LIB,"조합"),o()(r,i.PHOTO_LIB,"사진"),o()(r,i.STICKER_PHOTO_LIB,"사진"),o()(r,i.TEXT_LIB,"텍스트"),o()(r,i.TEXT_COMBINATION_LIB,"조합"),o()(r,i.TEXT_STYLE_LIB,"스타일"),o()(r,i.BACKGROUND_LIB,"배경"),o()(r,i.BACKGROUND_IMAGE_LIB,"사진"),o()(r,i.BACKGROUND_PATTERN_LIB,"패턴"),o()(r,i.GRID_LIB,"표"),o()(r,i.MY_IMAGE_LIB,"내 이미지"),o()(r,i.FAVORITE_LIB,"찜하기"),o()(r,i.ADMIN_TOOL,"관리자툴"),o()(r,i.IMAGE_DOWNLOAD,"이미지 다운로드"),o()(r,i.IMAGE_SEARCH,"이미지 검색"),o()(r,i.DEV_TOOL,"DevTools"),o()(r,i.VIDEO_PANEL,"동영상"),o()(r,i.VIDEO,"동영상"),o()(r,i.YOUTUBE,"YouTube"),r);(i||(i={})).getNameResourceKey=function(e){return u[e]},function(e){e.PUBLIC="PUBLIC",e.PRIVATE="PRIVATE",e.DISABLED="DISABLED"}(s||(s={}))},function(e,t,n){"use strict";var r=n(62),i=n.n(r),a=n(2),o=n.n(a),s=n(4),u=n.n(s),c=n(0),l=n.n(c),h=n(1),p=n.n(h),d=n(6),f=n.n(d),g=n(3),v=n.n(g),y=n(7),m=n.n(y),E=n(228),k=n(306),S=n(224),I=n(226),T=n(225),b=n(408),w=n(235),A=function(e){function t(){return l()(this,t),f()(this,v()(t).apply(this,arguments))}return m()(t,e),p()(t,[{key:"makeClone",value:function(){return new t}}]),t}(w.a),C=n(11),x=n(241),R=n(90),L=n(246),_=n(234),P=n(238),O=n(243);n.d(t,"a",function(){return D}),n.d(t,"b",function(){return M});var D=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C.b.random();return l()(this,t),(e=f()(this,v()(t).call(this))).parent=null,e.members=[],e.hoveredItem=void 0,e.selectedItem=null,e.boxDegree=0,e.groupId=n,e.boxElement=e.createDivElement("tbpe_item_group"),e.props=new A,e}var n,r;return m()(t,e),p()(t,[{key:"setReady",value:function(){}},{key:"getItemType",value:function(){return w.b.GROUP}},{key:"clone",value:function(){var e=new t;return e.setProps(this.props.clone()),this.members.forEach(function(t){e.addMember(t.clone())}),e}},{key:"render",value:(r=u()(o.a.mark(function e(t,n){var r,i,a,s,u,c;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=!0,i=!1,a=void 0,e.prev=3,s=this.getMembers()[Symbol.iterator]();case 5:if(r=(u=s.next()).done){e.next=12;break}return c=u.value,e.next=9,c.render(t,n);case 9:r=!0,e.next=5;break;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),i=!0,a=e.t0;case 18:e.prev=18,e.prev=19,r||null==s.return||s.return();case 21:if(e.prev=21,!i){e.next=24;break}throw a;case 24:return e.finish(21);case 25:return e.finish(18);case 26:case"end":return e.stop()}},e,this,[[3,14,18,26],[19,,21,25]])})),function(e,t){return r.apply(this,arguments)})},{key:"renderThumbnail",value:(n=u()(o.a.mark(function e(t,n,r,i){var a=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=u()(o.a.mark(function e(s,u){var c,l,h,p,d,f;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,c=!0,l=!1,h=void 0,e.prev=4,p=a.getMembers()[Symbol.iterator]();case 6:if(c=(d=p.next()).done){e.next=13;break}return f=d.value,e.next=10,f.renderThumbnail(t,n,r,i);case 10:c=!0,e.next=6;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(4),l=!0,h=e.t0;case 19:e.prev=19,e.prev=20,c||null==p.return||p.return();case 22:if(e.prev=22,!l){e.next=25;break}throw h;case 25:return e.finish(22);case 26:return e.finish(19);case 27:e.next=33;break;case 29:return e.prev=29,e.t1=e.catch(0),u(e.t1),e.abrupt("return");case 33:s();case 34:case"end":return e.stop()}},e,null,[[0,29],[4,15,19,27],[20,,22,26]])}));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)})),function(e,t,r,i){return n.apply(this,arguments)})},{key:"getLTRBCoordinate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return k.a.getItemsLTRBCoordinate([this],e)}},{key:"move",value:function(e,t,n){this.getAllSingleMembers().forEach(function(r){r.move(e,t,n)})}},{key:"canDelete",value:function(){var e=this.getAllSingleMembers().every(function(e){return e.canDelete()});return e}},{key:"addBoxDegree",value:function(e){this.boxDegree+=e}},{key:"initBoxDegree",value:function(){this.boxDegree=0}},{key:"updateBoxStyle",value:function(){var e=this,t=this.getAllSingleMembers(),n=t.some(function(e){return e.select}),r=t.some(function(e){return e.hover}),i=I.a.instance.activeItems,a=i.length>1&&i.some(function(e){return!e.groupId});if(!(!n&&r||n&&a)||this.getParent()||x.a.isNavigation(I.a.instance.mouseAction.mode))this.boxElement.style.display="none";else{var o;if(this.boxElement.style.display="block",0===this.boxDegree)o=this.getLTRBCoordinate(!0).changeScale(I.a.instance.zoomScale*I.a.instance.pageEditScale);else{var s=[];this.getAllSingleMembers().forEach(function(e){var t=e.getLTRBCoordinate().changeScale(I.a.instance.zoomScale*I.a.instance.pageEditScale);s=s.concat(t.getRectPoints(t.getCenterPos(),e.props.getRotate()))});var u=new R.a(0,0);s.forEach(function(t,n){return s[n]=L.a.calcLocationByRotate(t,u,-e.boxDegree)});var c=[],l=[];s.forEach(function(e){c.push(e.x),l.push(e.y)});var h=(o=new _.a(Math.min.apply(Math,c),Math.min.apply(Math,l),Math.max.apply(Math,c),Math.max.apply(Math,l))).getCenterPos(),p=L.a.calcLocationByRotate(h,u,this.boxDegree);o.move(p.x-h.x,p.y-h.y)}this.boxElement.style.left="".concat(o.left,"px"),this.boxElement.style.top="".concat(o.top,"px"),this.boxElement.style.width="".concat(o.getWidth(),"px"),this.boxElement.style.height="".concat(o.getHeight(),"px"),this.boxElement.style.transform="rotate(".concat(this.boxDegree,"deg)")}}},{key:"removeBoxElement",value:function(){this.boxElement&&this.boxElement.parentElement&&this.boxElement.parentElement.removeChild(this.boxElement)}},{key:"getGroupId",value:function(){return this.groupId}},{key:"addMember",value:function(e,n){if(!(this===e||this.members.indexOf(e)>-1)){if(e instanceof E.d){var r=M.getGroup(e.groupId);r&&r.deleteMember(e),e.groupId=this.getGroupId()}e instanceof t&&(e.parent&&e.parent.deleteMember(e),e.parent=this),isNaN(n)?this.members.push(e):this.members.splice(n,0,e)}}},{key:"deleteMember",value:function(e){var n=this.members.indexOf(e);n<0||(e instanceof E.d?e.groupId=null:e instanceof t&&(e.parent=null),this.members.splice(n,1))}},{key:"setHoveredItem",value:function(e){this.hoveredItem=e}},{key:"clearHoveredItem",value:function(){this.hoveredItem=void 0}},{key:"getHoveredItem",value:function(){return this.hoveredItem}},{key:"setSelectedItem",value:function(e){this.selectedItem=e}},{key:"clearSelectedItem",value:function(){this.selectedItem=null}},{key:"getSelectedItem",value:function(){return this.selectedItem}},{key:"getParent",value:function(){return this.parent}},{key:"setParent",value:function(e){this.parent=e}},{key:"getRootGroup",value:function(){for(var e=this;e.parent;)e=e.parent;return e}},{key:"getMembers",value:function(){return this.members}},{key:"getEditTextItemVCs",value:function(){return this.members.reduce(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;return n instanceof P.a?e.concat(n):n instanceof O.a?e.concat(n.getAllTextItemOfCells()):n instanceof t?e.concat(n.getEditTextItemVCs()):e},[])}},{key:"getAllSingleMembers",value:function(){var e=[];return this.getMembers().forEach(function(n){n instanceof E.d?e.push(n):n instanceof t&&(e=e.concat(n.getAllSingleMembers()))}),e}},{key:"has",value:function(e){if(this===e)return!0;var n=!0,r=!1,i=void 0;try{for(var a,o=this.getMembers()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(s instanceof t){if(s.has(e))return!0}else if(s===e)return!0}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return!1}},{key:"getCenterPos",value:function(){for(var e=this.getAllSingleMembers(),t=e[0].getLTRBCoordinate(!0),n=t.left,r=t.right,i=t.top,a=t.bottom,o=1;o<e.length;o++)n=(t=e[o].getLTRBCoordinate(!0)).left<n?t.left:n,r=t.right>r?t.right:r,i=t.top<i?t.top:i,a=t.bottom>a?t.bottom:a;return new R.a(n+(r-n)/2,i+(a-i)/2)}},{key:"getItemKey",value:function(){return this.groupId}}]),t}(b.a),M=function(){function e(){l()(this,e)}return p()(e,null,[{key:"getItems",value:function(){var e=[];return T.a.instance.dispatch(new S.c(function(t,n){t&&(e=t.pages[n.renderPageIdx].items)})),e}},{key:"setGroup",value:function(t,n){if(!t.groupId)return null;n=n||e.getItems();var r=this.getGroup(t.groupId,n);return r||(r=new D(t.groupId),n.push(r)),r.addMember(t),r}},{key:"delete",value:function(t,n){n=n||e.getItems();var r=e.getGroup(t,n);if(r){var a=r.getMembers().slice(),o=!0,s=!1,u=void 0;try{for(var c,l=a[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var h=c.value;r.deleteMember(h);var p=r.getParent();p&&(h instanceof E.d?h.groupId=p.getGroupId():h instanceof D&&h.setParent(p))}}catch(e){s=!0,u=e}finally{try{o||null==l.return||l.return()}finally{if(s)throw u}}var d,f=n.indexOf(r);if(f>-1)(d=n).splice.apply(d,[f,1].concat(i()(a)))}}},{key:"getGroup",value:function(t,n){n=n||e.getItems();var r=!0,i=!1,a=void 0;try{for(var o,s=n[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;if(u instanceof D){if(u.getGroupId()===t)return u;var c=e.getGroup(t,u.getMembers());if(c)return c}}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return null}},{key:"getRootGroup",value:function(t,n){n=n||e.getItems();var r=t?this.getGroup(t,n):null;return r?r.getRootGroup():null}},{key:"isInGroup",value:function(t){return null!==e.getRootGroup(t.groupId)}},{key:"isSameGroup",value:function(t,n){if(!t||t.length<2)return!1;n=n||e.getItems();var r=this.getRootGroup(t[0].groupId,n);if(!r)return!1;var i=!0,a=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value,l=this.getRootGroup(c.groupId,n);if(!l||r.getGroupId()!==l.getGroupId())return!1}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}return!0}},{key:"getGroupItemsAddedArray",value:function(t){var n=t.slice();return t.forEach(function(t){var r=e.getRootGroup(t.groupId);if(r){var i=!0,a=!1,o=void 0;try{for(var s,u=r.getAllSingleMembers()[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;-1===n.indexOf(c)&&n.push(c)}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}}}),n}},{key:"getSortedGroupItemsAddedArray",value:function(e){var t=this.getGroupItemsAddedArray(e),n=[];return T.a.instance.dispatch(new S.c(function(e,r){e.pages[r.renderPageIdx].getAllSingleItems().forEach(function(e){t.indexOf(e)>-1&&n.push(e)})})),n}},{key:"convertSinglesToItems",value:function(t,n){n=n||e.getItems();var r=[];return t.forEach(function(t){var i=e.getRootGroup(t.groupId,n);i&&r.indexOf(i)<0?r.push(i):i||r.push(t)}),r}},{key:"convertItemsToSingles",value:function(e){var t=[];return e.forEach(function(e){e instanceof D?t=t.concat(e.getAllSingleMembers()):e instanceof E.d&&t.push(e)}),t}},{key:"checkValidation",value:function(e){this.checkMemberAlone(e)}},{key:"checkMemberAlone",value:function(e){var t=this;e.getAllSingleItems().forEach(function(e){var n=t.getGroup(e.groupId);if(n){var r=n.getAllSingleMembers();if(r.length<2){t.delete(n.getGroupId());var i=n.getParent();i&&r.forEach(function(e){return i.addMember(e)})}}})}},{key:"parseSingleItemsByGroups",value:function(t,n){var r=[],i=!0,a=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;if(c.groupId&&""!==c.groupId){var l=this.getGroup(c.groupId,n);l||(l=new D(c.groupId),n.push(l));var h=l.getMembers().slice();h.reverse();var p=h.find(function(e){return e instanceof E.d||e instanceof D&&e.getAllSingleMembers().length>0}),d=p?l.getMembers().indexOf(p)+1:0;l.addMember(c,d);var f=e.getRootGroup(c.groupId,n);r.indexOf(f)<0&&r.push(f)}else r.push(c)}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}return r}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(90),u=n(246),c=n(237),l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;i()(this,e),this._left=t,this._top=n,this._right=r,this._bottom=a,this._rotate=o}return o()(e,[{key:"getCenterPos",value:function(){return new s.a(this._left+this.getWidth()/2,this._top+this.getHeight()/2)}},{key:"getCenterPosX",value:function(){return this._left+this.getWidth()/2}},{key:"getCenterPosY",value:function(){return this._top+this.getHeight()/2}},{key:"getCenterOffset",value:function(){return new s.a(this.getWidth()/2,this.getHeight()/2)}},{key:"move",value:function(e,t){return this._left+=e,this._top+=t,this._right+=e,this._bottom+=t,this}},{key:"moveCenter",value:function(e){var t=this.getCenterOffset();return this._left=e.x-t.x,this._top=e.y-t.y,this._right=e.x+t.x,this._bottom=e.y+t.y,this}},{key:"getRotatedLTRB",value:function(t){var n;if(0!==t){var r=this.getCenterPos(),i=u.a.calcLocationByRotate(new s.a(this._left,this._top),r,t),a=u.a.calcLocationByRotate(new s.a(this._right,this._top),r,t),o=u.a.calcLocationByRotate(new s.a(this._right,this._bottom),r,t),c=u.a.calcLocationByRotate(new s.a(this._left,this._bottom),r,t),l=[i.x,a.x,o.x,c.x],h=[i.y,a.y,o.y,c.y];n=new e(Math.min.apply(Math,l),Math.min.apply(Math,h),Math.max.apply(Math,l),Math.max.apply(Math,h))}else n=new e(this._left,this._top,this._right,this._bottom);return n}},{key:"getRectPoints",value:function(e,t){var n=[];if(0!==t){var r=e,i=u.a.calcLocationByRotate(new s.a(this._left,this._top),r,t),a=u.a.calcLocationByRotate(new s.a(this._right,this._top),r,t),o=u.a.calcLocationByRotate(new s.a(this._right,this._bottom),r,t),c=u.a.calcLocationByRotate(new s.a(this._left,this._bottom),r,t);return n.push(i,a,o,c),n}return[new s.a(this._left,this._top),new s.a(this._right,this._top),new s.a(this._right,this._bottom),new s.a(this._left,this._bottom)]}},{key:"getRotatedLTRBByPivot",value:function(t,n){var r;if(0!==n){var i=t,a=u.a.calcLocationByRotate(new s.a(this._left,this._top),i,n),o=u.a.calcLocationByRotate(new s.a(this._right,this._top),i,n),c=u.a.calcLocationByRotate(new s.a(this._right,this._bottom),i,n),l=u.a.calcLocationByRotate(new s.a(this._left,this._bottom),i,n),h=[a.x,o.x,c.x,l.x],p=[a.y,o.y,c.y,l.y];r=new e(Math.min.apply(Math,h),Math.min.apply(Math,p),Math.max.apply(Math,h),Math.max.apply(Math,p))}else r=new e(this._left,this._top,this._right,this._bottom);return r}},{key:"getRotatedTopLeft",value:function(){return u.a.calcLocationByRotate(new s.a(this._left,this._top),this.getCenterPos(),this.rotate)}},{key:"getRotatedTop",value:function(){var e=this._left+(this._right-this._left)/2;return u.a.calcLocationByRotate(new s.a(e,this._top),this.getCenterPos(),this.rotate)}},{key:"getRotatedTopRight",value:function(){return u.a.calcLocationByRotate(new s.a(this._right,this._top),this.getCenterPos(),this.rotate)}},{key:"getRotatedLeft",value:function(){var e=this._top+(this._bottom-this._top)/2;return u.a.calcLocationByRotate(new s.a(this._left,e),this.getCenterPos(),this.rotate)}},{key:"getRotatedRight",value:function(){var e=this._top+(this._bottom-this._top)/2;return u.a.calcLocationByRotate(new s.a(this._right,e),this.getCenterPos(),this.rotate)}},{key:"getRotatedBottomLeft",value:function(){return u.a.calcLocationByRotate(new s.a(this._left,this._bottom),this.getCenterPos(),this.rotate)}},{key:"getRotatedBottom",value:function(){var e=this._left+(this._right-this._left)/2;return u.a.calcLocationByRotate(new s.a(e,this._bottom),this.getCenterPos(),this.rotate)}},{key:"getRotatedBottomRight",value:function(){return u.a.calcLocationByRotate(new s.a(this._right,this._bottom),this.getCenterPos(),this.rotate)}},{key:"clone",value:function(){return new e(this._left,this._top,this._right,this._bottom)}},{key:"setLTRB",value:function(e){this._left=e.left,this._top=e.top,this._right=e.right,this._bottom=e.bottom}},{key:"getWidth",value:function(){return this._right-this._left}},{key:"getHeight",value:function(){return this._bottom-this._top}},{key:"changeScale",value:function(e){return this._left*=e,this._top*=e,this._right*=e,this._bottom*=e,this}},{key:"changeScaleReverse",value:function(e){return this._left/=e,this._top/=e,this._right/=e,this._bottom/=e,this}},{key:"isEqual",value:function(e){return this._left===e.left&&this._top===e.top&&this._right===e.right&&this._bottom===e.bottom&&this._rotate===e.rotate}},{key:"roundLTRB",value:function(){return this._left=Math.round(this._left),this._top=Math.round(this._top),this._right=Math.round(this._right),this._bottom=Math.round(this._bottom),this}},{key:"getCenterDistance",value:function(e){if(this._rotate!==e._rotate||0===this._rotate)return{tx:0,ty:0};var t=this.getCenterPos(),n=e.getCenterPos(),r=Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2)),i=Math.atan2(n.y-t.y,n.x-t.x),a=Math.cos(i+e.rotate*Math.PI/180)*r+t.x,o=Math.sin(i+e.rotate*Math.PI/180)*r+t.y;return{tx:a-n.x,ty:o-n.y}}},{key:"toRect",value:function(){return c.a.createWithRightBottom(this._left,this._top,this._right,this._bottom)}},{key:"left",get:function(){return this._left},set:function(e){this._left=e}},{key:"right",get:function(){return this._right},set:function(e){this._right=e}},{key:"top",get:function(){return this._top},set:function(e){this._top=e}},{key:"bottom",get:function(){return this._bottom},set:function(e){this._bottom=e}},{key:"rotate",get:function(){return this._rotate},set:function(e){this._rotate=e}}],[{key:"createFromRect",value:function(t){return new e(t.left,t.top,t.right,t.bottom)}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"c",function(){return r}),n.d(t,"b",function(){return h});var r,i=n(80),a=n.n(i),o=n(0),s=n.n(o),u=n(1),c=n.n(u),l=function(){function e(){s()(this,e),this.hyperlink=new p}return c()(e,[{key:"returnEverything",value:function(e){if(Array.isArray(e)){var t=[],n=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var u=o.value;t.push(this.returnEverything(u))}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return t}if("object"===a()(e)){var c=Object.assign({},e);return e&&Object.setPrototypeOf(c,Object.getPrototypeOf(e)),c}return e}},{key:"clone",value:function(){var e=this.makeClone();for(var t in this){var n=this[t];e[t]=this.returnEverything(n)}return e}},{key:"isActiveHyperlink",value:function(){return this.hyperlink.active}},{key:"setActiveHyperlink",value:function(e){this.hyperlink.active!==e&&(this.hyperlink.active=!0===e)}},{key:"getHyperlinkType",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e||this.hyperlink.active?this.hyperlink.type:r.URL}},{key:"setHyperlinkType",value:function(e){this.hyperlink.type!==e&&(this.hyperlink.type=e)}},{key:"getHyperlinkValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e||this.hyperlink.active?this.hyperlink.value:""}},{key:"setHyperlinkValue",value:function(e){this.hyperlink.value!==e&&(this.hyperlink.value=e)}},{key:"clear",value:function(){this.hyperlink.active=!1,this.hyperlink.type=r.URL,this.hyperlink.value=""}}]),e}();!function(e){e.URL="URL",e.PAGE="PAGE"}(r||(r={}));var h,p=function e(){s()(this,e),this.active=!1,this.type=r.URL,this.value=""};!function(e){e.SINGLE="ITEM_SINGLE",e.GROUP="ITEM_GROUP",e.TEXT="ITEM_TEXT",e.STICKER="ITEM_STICKER",e.PHOTO="ITEM_PHOTO",e.CALENDAR="ITEM_CALENDAR",e.GRID="ITEM_GRID",e.SVG_BASIC="ITEM_SVG_BASIC",e.SVG_SHAPE="ITEM_SVG_SHAPE",e.SVG_GRAPHIC="ITEM_SVG_GRAPHIC",e.SVG_IMAGE_FRAME="ITEM_SVG_IMAGE_FRAME",e.YOUTUBE="YOUTUBE",e.NONE=""}(h||(h={}))},function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(228),u=n(233),c=n(226),l=n(225),h=n(224),p=n(238),d=n(285),f=n(363),g=n(266),v=n(307),y=n(336),m=function(){function e(){i()(this,e)}return o()(e,null,[{key:"setSelectedFlag",value:function(e,t){c.a.instance.activeItems.indexOf(e)<0&&(c.a.instance.activeItems.push(e),t&&y.a.onDrawItemClicked()),e.select=!0}},{key:"resetSelectedFlag",value:function(e,t){c.a.instance.activeItems.indexOf(e)>=0&&c.a.instance.activeItems.splice(c.a.instance.activeItems.indexOf(e),1),e instanceof p.a&&e.isEditMode&&l.a.instance.dispatch(new d.b(e)),e.select=!1,t&&l.a.instance.dispatch(new h.c(function(e,t){e.pages.forEach(function(e){var n=t.pageController.getPageRenderer(e);n&&n.updateHoverLayer()})}))}},{key:"appendSelectedItems",value:function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,p=e[Symbol.iterator]();!(r=(o=p.next()).done);r=!0){var d=o.value,f=u.b.getRootGroup(d.groupId);if(f&&-1===n.indexOf(f.getGroupId())){var g=f.getSelectedItem();if(g)c.a.instance.activeItems.length>1&&f.clearSelectedItem(),this.setSelectedFlag(g,t);else{var v=!0,y=!1,m=void 0;try{for(var E,k=f.getAllSingleMembers()[Symbol.iterator]();!(v=(E=k.next()).done);v=!0){var S=E.value;this.setSelectedFlag(S,t)}}catch(e){y=!0,m=e}finally{try{v||null==k.return||k.return()}finally{if(y)throw m}}}f.updateBoxStyle(),n.push(f.getGroupId())}else this.setSelectedFlag(d,t)}}catch(e){i=!0,a=e}finally{try{r||null==p.return||p.return()}finally{if(i)throw a}}(l.a.instance.dispatch(new h.c(function(e,t,n){if(!c.a.isCropMode()){var r=!0,i=!1,a=void 0;try{for(var o,s=e.pages[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value,l=u.getAllSingleItems();if(-1!==l.indexOf(t.activeItems[0])){t.renderPageIdx=u.pageIdx,t.activeItems=l.filter(function(e){return e.select});break}}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}})),u.b.isSameGroup(c.a.instance.activeItems))&&u.b.getRootGroup(c.a.instance.activeItems[0].groupId).clearSelectedItem();l.a.instance.dispatch(new h.c(function(t,n,r){var i=1===e.length&&e[0].isUnsupported();r.itemGuideAlertMobile&&r.itemGuideAlertMobile.showUnsupportedLicenseAlert(i,i?e[0].getUnsupportedItemType():s.h.NONE)}))}},{key:"appendSelectedItem",value:function(e,t){if(e){var n=u.b.getRootGroup(e.groupId);n&&n.setSelectedItem(e),this.appendSelectedItems([e],t)}}},{key:"selectItems",value:function(e){this.unselectAllItems(e),this.appendSelectedItems(e)}},{key:"selectItem",value:function(e){this.unselectAllItems([e]),this.appendSelectedItem(e,!0)}},{key:"selectfilteredItems",value:function(e,t){var n=e.filter(function(e){return t(e)});this.selectItems(n)}},{key:"selectBackgroundItem",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t?f.a.instance.show():l.a.instance.dispatch(new h.c(function(t,n,r){var i=t.pages[n.renderPageIdx].background.backgroundItem;i&&(e.selectItem(i),r.renderItemTools(t,n),r.leftBarVC.setActive(!1))},!t))}},{key:"unselectItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e instanceof p.a&&e.editModeParam.isEditMode&&l.a.instance.dispatch(new d.b(e));var n=u.b.getRootGroup(e.groupId);if(n){for(var r=n.getAllSingleMembers(),i=0,a=r.length;i<a;i++)this.resetSelectedFlag(r[i],t&&i===a-1);n.setSelectedItem(null)}else this.resetSelectedFlag(e,t);l.a.instance.dispatch(new g.f(e)),l.a.instance.dispatch(new h.c(function(t,n,r){r.itemGuideAlertMobile&&(r.itemGuideAlertMobile.showUnsupportedLicenseAlert(!1,e?e.getUnsupportedItemType():s.h.NONE),v.c.hidePusher())}))}},{key:"unselectAllItems",value:function(e){var t=c.a.instance.activeItems.slice();if(e){var n=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,u=t.indexOf(s);u>=0&&t.splice(u,1)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}for(var l=0,h=t.length;l<h;l++)this.unselectItem(t[l],l===h-1);c.a.instance.activeItems=[]}},{key:"unselectBackgroundItem",value:function(){var e=this;l.a.instance.dispatch(new h.c(function(t,n){var r=t.pages[n.renderPageIdx].background.backgroundItem;r&&r.select&&e.unselectItem(r,!0)}))}},{key:"getSelectedItemsWithoutBackgroundItem",value:function(){var e;return l.a.instance.dispatch(new h.c(function(t,n){var r=t.pages[n.renderPageIdx];r&&(e=(e=r.background&&r.background.backgroundItem?n.activeItems.filter(function(e){return e!==r.background.backgroundItem}):n.activeItems).filter(function(e){return r.includesItem(e)}))})),e||[]}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(90),u=n(110),c=function(){function e(t,n,r,a){i()(this,e),this.left=t,this.top=n,this.width=r,this.height=a}return o()(e,[{key:"clone",value:function(){return new e(this.left,this.top,this.width,this.height)}},{key:"equalsTo",value:function(e){return e&&this.left===e.left&&this.top===e.top&&this.width===e.width&&this.height===e.height}},{key:"dimensionEqualsTo",value:function(e){return e&&this.width===e.width&&this.height===e.height}},{key:"createUnionWith",value:function(t){return t?e.createWithRightBottom(Math.min(this.left,t.left),Math.min(this.top,t.top),Math.max(this.right,t.right),Math.max(this.bottom,t.bottom)):this.clone()}},{key:"translate",value:function(e,t){return this.left+=e,this.top+=t,this}},{key:"translateByPoint",value:function(e){return e&&(this.left+=e.x,this.top+=e.y),this}},{key:"inflate",value:function(e,t){return this.left-=e,this.top-=t,this.width+=2*e,this.height+=2*t,this}},{key:"scale",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t||(this.left*=e,this.top*=e),this.width*=e,this.height*=e,this}},{key:"right",get:function(){return this.left+this.width},set:function(e){this.width=e-this.left}},{key:"bottom",get:function(){return this.top+this.height},set:function(e){this.height=e-this.top}},{key:"leftTop",get:function(){return new s.a(this.left,this.top)}},{key:"rightTop",get:function(){return new s.a(this.right,this.top)}},{key:"leftBottom",get:function(){return new s.a(this.left,this.bottom)}},{key:"rightBottom",get:function(){return new s.a(this.right,this.bottom)}},{key:"dimension",get:function(){return new u.a(this.width,this.height)}}],[{key:"createWithRightBottom",value:function(t,n,r,i){return new e(t,n,r-t,i-n)}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return S});var r=n(2),i=n.n(r),a=n(62),o=n.n(a),s=n(4),u=n.n(s),c=n(0),l=n.n(c),h=n(1),p=n.n(h),d=n(6),f=n.n(d),g=n(3),v=n.n(g),y=n(7),m=n.n(y),E=n(334),k=n(11),S=function(e){function t(e,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],u=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],c=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],h=!(arguments.length>8&&void 0!==arguments[8])||arguments[8];return l()(this,t),(r=f()(this,v()(t).call(this,e,n,i,a,o,s,u,c,h))).MIN_SIZE_PT=14,r.customWidth=0,r}var n;return m()(t,e),p()(t,[{key:"isHighResolutionApplicable",value:(n=u()(i.a.mark(function e(){var t,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.getSizes(),n=0;case 2:if(!(n<t.length)){e.next=9;break}if(!(Math.min.apply(Math,o()(t[n]))<this.MIN_SIZE_PT)){e.next=6;break}return e.abrupt("return",!0);case 6:n++,e.next=2;break;case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"hasFont",value:function(e){return this.props.hasFont(e)}},{key:"clone",value:function(){var e=new t(k.b.random(),this.props.getBoundingBox(),this.props.getRotate(),this.props.isFlipH(),this.props.isFlipV(),this.props.isCanUserSelect(),this.props.isCanUserMove(),this.props.isCanUserResize(),this.props.isCanUserDel());return e.setProps(this.props.clone()),e.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),e.svg.style.position="absolute",this.setCloneItemDefaultAttr(e),e}}]),t}(E.a);S.UNSUPPORTED_CHAR_LIST=new Set([0,1,2,3,4,5,6,7,8,9,11,12,14,15,16,18,19,20,21,22,23,24,25,26,27,28,29,30,31])},function(e,t,n){"use strict";var r=n(2),i=n.n(r),a=n(4),o=n.n(a),s=n(14),u=n.n(s),c=n(0),l=n.n(c),h=n(1),p=n.n(h),d=n(6),f=n.n(d),g=n(3),v=n.n(g),y=n(9),m=n.n(y),E=n(7),k=n.n(E),S=n(110),I=n(30),T=n(11),b=n(305),w=n(166),A=n(259),C=n(249),x=n(247),R=function(e){function t(e,n){var r;return l()(this,t),(r=f()(this,v()(t).call(this,e,n))).item=e,r}return k()(t,e),p()(t,[{key:"initSvgElementAttrs",value:function(){m()(v()(t.prototype),"initSvgElementAttrs",this).call(this),this.svgElement.setAttribute("preserveAspectRatio","none"),this.svgElement.setAttribute("width","100%"),this.svgElement.setAttribute("height","100%")}},{key:"clone",value:function(){var e=new t(this.item,this.originElement.cloneNode(!0)),n=this.imageElement.getAttributeNS(x.a.XLINK,"href");return e.setSvgImage(n),e}},{key:"isInitRenderDatas",value:function(){return!1}},{key:"makeChildElements",value:function(e,n){m()(v()(t.prototype),"makeChildElements",this).call(this,e,n);var r=this.item.getFrameColor();if(r){this.beforePhotoElement=C.a.getImageframeBeforePhotoAreaElement(n,r),this.photoAreaOriginElement=C.a.getImageframePhotoAreaElement(n,r),this.afterPhotoElement=C.a.getImageframeAfterPhotoAreaElement(n,r);var i=C.a.getFirstElementByOriginColor(n,r);if(i){var a="".concat(this.item.tbpeId,"_clip_").concat(T.b.random(10)),o="".concat(this.item.tbpeId,"_img_").concat(T.b.random(10));this.imageElement=document.createElementNS(x.a.SVG,"image"),this.imageElement.setAttribute("preserveAspectRatio","none"),this.imageElement.setAttribute("overflow","visible"),this.imageElement.id=o;var s=document.createElementNS(x.a.SVG,"use"),u=i.parentElement;if(u||(u=C.a.getParentElement(n,i)),u){u.insertBefore(s,i),u.removeChild(i);var c=document.createElementNS(x.a.SVG,"defs"),l=document.createElementNS(x.a.SVG,"clipPath");l.id=a,l.appendChild(i.cloneNode(!0)),c.appendChild(l),c.appendChild(this.imageElement),u.insertBefore(c,s),C.a.makeUnicornSvgElement(this.imageElement,this.item.getUniqueKey()),C.a.makeUnicornSvgElement(s,this.item.getUniqueKey()),C.a.makeUnicornSvgElement(c,this.item.getUniqueKey()),s.setAttribute("clip-path","url(#".concat(l.id,")")),s.setAttributeNS(x.a.XLINK,"href","#".concat(this.imageElement.id))}}}}},{key:"updatePosition",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];m()(v()(t.prototype),"updatePosition",this).call(this,e,n),n&&(this.svgElement.setAttribute("width","".concat(this.item.getWidth()*e,"px")),this.svgElement.setAttribute("height","".concat(this.item.getHeight()*e,"px")))}},{key:"setSvgImage",value:function(e){if(this.imageElement){var t=this.item.getPhotoPosition();this.imageElement.removeAttributeNS(x.a.XLINK,"href"),this.imageElement.removeAttribute("xlink:href"),e&&this.imageElement.setAttributeNS(x.a.XLINK,"href",e),this.imageElement.setAttribute("x","".concat(t.left,"px")),this.imageElement.setAttribute("y","".concat(t.top,"px")),this.imageElement.setAttribute("width","".concat(t.getWidth(),"px")),this.imageElement.setAttribute("height","".concat(t.getHeight(),"px"))}}},{key:"updateColor",value:function(){var e=this;this.item.props.getColorMap().forEach(function(t,n){C.a.setFillColorByOriginColor(e.svgElement,n,t),C.a.setFillColorByOriginColor(e.beforePhotoElement,n,t),C.a.setFillColorByOriginColor(e.afterPhotoElement,n,t)})}},{key:"getScaledSvgElement",value:function(e,t,n,r,i){var a=document.createElementNS(x.a.SVG,"svg");a.setAttribute("width","".concat(r,"px")),a.setAttribute("height","".concat(i,"px"));var o=document.createElementNS(x.a.SVG,"g");return a.appendChild(o),o.setAttribute("transform","scale(".concat(t,", ").concat(n,")")),o.appendChild(e.cloneNode(!0)),a}}]),t}(n(339).a),L=n(382),_=n(226),P=n(235),O=n(240),D=n(228),M=n(268),N=n(256),B=n(231),U=n(454),G=n(304),F=function(e){function t(e,n,r,i,a,o,s,u,c,h){var p;return l()(this,t),(p=f()(this,v()(t).call(this,e,n,u,c,h))).imageSrcStatus=W.NONE,p.svgElements=n,p.innerPhotoItem=r,p.lastPhotoRevision=i,p.photoPosition=a,p.svgData=o,p.imageData=s,p}var n,r;return k()(t,e),p()(t,[{key:"beforeRender",value:(r=o()(i.a.mark(function e(n){var r,a,o,s,u,c,l,h,p,d,f,g,y,E;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(m()(v()(t.prototype),"beforeRender",this).call(this,n),!this.isResourceLoadFail){e.next=3;break}return e.abrupt("return");case 3:if(r=this.innerPhotoItem,this.lastPhotoRevision===r.props.getRevision()||!r.props.getPhotoKey()){e.next=31;break}return console.log("확인",this.lastPhotoRevision!==r.props.getRevision()&&r.props.getPhotoKey()),a=r.getImageElement(),o=a.width,s=a.height,u=r.props.getWidth()/r.itemPosition.getWidth(),c=r.props.getHeight()/r.itemPosition.getHeight(),l=o*u,h=s*c,p=Math.max(l,h),d=1,p>G.a.MAX_CANVAS_SIZE&&(d=G.a.MAX_CANVAS_SIZE/p),f=O.a.createCanvas(new S.a(l,h,d)),g=f.getContext("2d"),y=this.props.isFlipH()?-1:1,E=this.props.isFlipV()?-1:1,g.save(),g.translate(f.width/2,f.height/2),g.scale(y,E),g.translate(-f.width/2,-f.height/2),e.next=26,r.render(g,d);case 26:g.restore(),this.src=f.toDataURL(),this.imageData=g.getImageData(0,0,f.width,f.height),this.svgElements.setSvgImage(_.a.isCropMode()?"":this.src),this.imageSrcStatus=W.RESET_SRC_STABLE;case 31:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"rasterizeSingleItem",value:(n=o()(i.a.mark(function e(t,n,r){var a,o,s,u,c,l,h,p,d,f,g,v,y,m,E,k,I,T,b;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isResourceLoadFail){e.next=3;break}return this.rasterizeResourceLoadFail(t,n),e.abrupt("return");case 3:return this.svgElements.updateColor(),a=this.props.getWidth()*n,o=this.props.getHeight()*n,s=a/2,u=o/2,c=this.props.isFlipH()?-1:1,l=this.props.isFlipV()?-1:1,t.save(),t.globalAlpha=this.props.getOpacity()/255,t.translate(s,u),t.scale(c,l),t.translate(-s,-u),h=O.a.createCanvas(new S.a(this.props.getWidth(),this.props.getHeight(),n)),p=h.getContext("2d"),d=Math.ceil(this.props.getWidth()*n),f=Math.ceil(this.props.getHeight()*n),g=a/this.svgData.width,v=o/this.svgData.height,e.next=23,G.a.drawSVG(p,this.svgElements.getScaledSvgElement(this.svgElements.beforePhotoElement,g,v,a,o).outerHTML,0,0,a,o);case 23:return y=O.a.createCanvas(new S.a(d,f)),m=y.getContext("2d"),e.next=27,G.a.drawSVG(m,this.svgElements.getScaledSvgElement(this.svgElements.photoAreaOriginElement,g,v,a,o).outerHTML,0,0,a,o);case 27:return m.globalCompositeOperation="source-in",E=O.a.createCanvas(new S.a(this.imageData.width,this.imageData.height)),E.getContext("2d").putImageData(this.imageData,0,0),k=Math.round(this.photoPosition.left*g),I=Math.round(this.photoPosition.top*v),T=Math.ceil(this.photoPosition.getWidth()*g),b=Math.ceil(this.photoPosition.getHeight()*v),m.drawImage(E,k,I,T,b),p.drawImage(y,0,0),e.next=39,G.a.drawSVG(p,this.svgElements.getScaledSvgElement(this.svgElements.afterPhotoElement,g,v,a,o).outerHTML,0,0,a,o);case 39:t.drawImage(h,0,0,t.canvas.width,t.canvas.height),t.restore();case 41:case"end":return e.stop()}},e,this)})),function(e,t,r){return n.apply(this,arguments)})}]),t}(U.a),H=function(e){function t(){var e,n;l()(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=f()(this,(e=v()(t)).call.apply(e,[this].concat(i)))).canInsertPhotoItem=!0,n}return k()(t,e),t}(n(281).b),V=n(246),z=n(234);n.d(t,"b",function(){return X}),n.d(t,"a",function(){return W});var W,K=function(e){function t(){return l()(this,t),f()(this,v()(t).apply(this,arguments))}return k()(t,e),p()(t,[{key:"isChangedFrom",value:function(e){return m()(v()(t.prototype),"isChangedFrom",this).call(this,e)||this.photoRevision!==e.photoRevision}}]),t}(D.e),X=function(e){function t(e,n,r){var i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],c=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],h=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],p=!(arguments.length>8&&void 0!==arguments[8])||arguments[8],d=!(arguments.length>9&&void 0!==arguments[9])||arguments[9];l()(this,t),(i=f()(this,v()(t).call(this,e,n,r,K,a,o,s,c,h,p,d))).DROP_IMAGE_PATH="".concat(I.a.RESOURCE_DOMAIN,"image/imageframe_basic.png"),i.DROP_IMAGE_KEY="imageframe_basic_png",i.isInit=!1,i.svgScaleX=1,i.svgScaleY=1,i.imageSrcStatus=W.NONE,i.originPhotoFlipHor=!1,i.originPhotoFlipVer=!1,i.svgData=n;var g=i.data.svg;return C.a.makeUnicornSvgElement(g,i.svgUniqueKey),i.svgElements=new R(u()(i),g.cloneNode(!0)),i.svgElementForFrameColor=g,i.props.setChangePositionSetRevision(!1),i.innerPhotoItem=new B.d(T.b.random(),i.photoPosition?i.photoPosition.toRect():r,a,a,B.c.IMAGEFRAME,o,s,c,h,p,d),i.innerPhotoItem.props.setPhotoKey(i.DROP_IMAGE_KEY),i.innerPhotoItem.orgType=B.b.Photo,i.calcScale(),i}var n,r,a,s,c,h,d,g,y,E;return k()(t,e),p()(t,[{key:"makeProps",value:function(){return new H}},{key:"getFrameColor",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.svgData.colorList[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var a=r.value;if(a.photoInColor)return a.color}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}return null}},{key:"isRequireLiveEdit",value:function(){return!0}},{key:"initFramePosition",value:function(){var e=this.svgElementForFrameColor.cloneNode(!0),t=this.getFrameColor();if(t){var n=C.a.getFirstElementByOriginColor(e,t);if(n.id="".concat(this.tbpeId).concat(T.b.random(10)),n){var r=this.svgData.maskData;this.photoPosition=new z.a(r.x,r.y,r.width+r.x,r.height+r.y)}}}},{key:"isUnsupported",value:function(){return b.a.isIclickSticker(this.innerPhotoItem.props.getPhotoKey())}},{key:"changePhoto",value:(E=o()(i.a.mark(function e(t,n,r,a,o){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return L.a.imgOriginSizeFinder.has(this.innerPhotoItem.tbpeId)&&L.a.imgOriginSizeFinder.delete(this.innerPhotoItem.tbpeId),this.lastPhotoRevision=-1,this.innerPhotoItem.orgType=n,this.innerPhotoItem.props.setPhotoKey(t),this.innerPhotoItem.skinRatioId=o,this.originPhotoFlipHor=r,this.originPhotoFlipVer=a,e.next=9,this.resetInnerPhotoItem();case 9:case"end":return e.stop()}},e,this)})),function(e,t,n,r,i){return E.apply(this,arguments)})},{key:"clearInnerPhotoItem",value:(y=o()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.changePhoto(this.DROP_IMAGE_KEY,B.b.Photo,!1,!1,"");case 2:this.props.canInsertPhotoItem=!0;case 3:case"end":return e.stop()}},e,this)})),function(){return y.apply(this,arguments)})},{key:"resetInnerPhotoItem",value:(g=o()(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=this.innerPhotoItem.props).setBrightness(0),t.setSaturation(0),t.setLightness(0),t.setContrast(0),t.setTint(0),t.setColorTone(0),t.setTemperature(0),t.setBlur(0),t.setVignette(0),t.setFlipH(this.originPhotoFlipHor),t.setFlipV(this.originPhotoFlipVer),t.setGradationMaskDepth(0),t.setShadowColor("#000000"),t.setShadowAngle(0),t.setShadowAlpha(255),t.setShadowDistance(0),t.setShadowBlur(0),t.setOpacity(255),t.setPreset(""),this.isInit=!1,this.innerPhotoItem.initOriginalImageSize(),e.next=24,this.initPhoto();case 24:case"end":return e.stop()}},e,this)})),function(){return g.apply(this,arguments)})},{key:"initPhoto",value:(d=o()(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isInit){e.next=7;break}return e.next=3,this.loadPhoto();case 3:t=e.sent,this.initSize(t),this.lastPhotoRevision=-1,this.isInit=!0;case 7:case"end":return e.stop()}},e,this)})),function(){return d.apply(this,arguments)})},{key:"initPhotoSync",value:function(){if(!this.isInit){var e=w.b.getData(this.innerPhotoItem.props.getPhotoKey());this.initSize(e),this.lastPhotoRevision=-1,this.isInit=!0}}},{key:"isHighResolutionApplicable",value:(h=o()(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.innerPhotoItem,!this.isDefaultImage()&&t){e.next=3;break}return e.abrupt("return",!1);case 3:return e.abrupt("return",t.isHighResolutionApplicable());case 4:case"end":return e.stop()}},e,this)})),function(){return h.apply(this,arguments)})},{key:"loadPhoto",value:(c=o()(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.innerPhotoItem.props.getPhotoKey(),w.b.hasData(t)||t!==this.DROP_IMAGE_KEY){e.next=4;break}return e.next=4,w.b.setUrlImage(t,this.DROP_IMAGE_PATH);case 4:return e.abrupt("return",w.b.getData(t));case 5:case"end":return e.stop()}},e,this)})),function(){return c.apply(this,arguments)})},{key:"initSize",value:function(e){var t=this.svgData.width/this.svgData.height,n=e.width/e.height;t===n?(this.imageWidth=this.svgData.width,this.imageHeight=this.svgData.height):t>n?(this.imageWidth=this.svgData.width,this.imageHeight=this.imageWidth/n):(this.imageHeight=this.svgData.height,this.imageWidth=this.imageHeight*n),this.initInnerPhotoPosition()}},{key:"initInnerPhotoPosition",value:function(){var e=this.svgData.width/2-this.imageWidth/2,t=this.svgData.height/2-this.imageHeight/2,n=this.getPhotoPosition(!0);this.innerPhotoItem.setLTRBCoordinate(n);var r=new z.a(e,t,e+this.imageWidth,t+this.imageHeight);this.innerPhotoItem.itemPosition=r,this.innerPhotoItem.scale(this.svgScale),this.innerPhotoItem.move(this.props.getLeft(),this.props.getTop()),this.innerPhotoItem.move((n.getWidth()*this.svgScale*this.svgScaleX-this.innerPhotoItem.getWidth())/2,(n.getHeight()*this.svgScale*this.svgScaleY-this.innerPhotoItem.getHeight())/2),this.innerPhotoItem.props.setRotate(this.props.getRotate())}},{key:"scale",value:function(e){this.getLTRBCoordinate();return m()(v()(t.prototype),"scale",this).call(this,e),this.calcScale(),this.updateInnerPhotoPosition(),this}},{key:"getPhotoPosition",value:function(e){var t=new z.a;return e&&this.props.isFlipH()?(t.left=this.data.width-this.photoPosition.right,t.right=this.data.width-this.photoPosition.left):(t.left=this.photoPosition.left,t.right=this.photoPosition.right),e&&this.props.isFlipV()?(t.top=this.data.height-this.photoPosition.bottom,t.bottom=this.data.height-this.photoPosition.top):(t.top=this.photoPosition.top,t.bottom=this.photoPosition.bottom),t}},{key:"getPhotoPositionByFrameLTRB",value:function(e){var t=this.data.width,n=this.data.height,r=e.getWidth()/t,i=e.getHeight()/n,a=e.left,o=e.top,s=this.getPhotoPosition(!0),u=new z.a;u.left=s.left*r+a,u.top=s.top*i+o,u.right=s.right*r+a,u.bottom=s.bottom*i+o;var c=this.innerPhotoItem.props.getRotate(),l=u.getCenterPos(),h=e.getCenterPos(),p=V.a.calcLocationByRotate(l,h,c).subtract(l);return u.move(p.x,p.y),u}},{key:"updateInnerPhotoPosition",value:function(){this.innerPhotoItem.props.setRotate(this.props.getRotate()),this.innerPhotoItem.setLTRBCoordinate(this.getPhotoPositionByFrameLTRB(this.getLTRBCoordinate()))}},{key:"beforeRender",value:(s=o()(i.a.mark(function e(n){var r,a,o,s,u,c,l,h,p,d,f,g;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(m()(v()(t.prototype),"beforeRender",this).call(this,n),!this.isResourceLoadFail()){e.next=3;break}return e.abrupt("return");case 3:if(this.lastPhotoRevision===this.innerPhotoItem.props.getRevision()||!this.innerPhotoItem.props.getPhotoKey()){e.next=29;break}return e.next=6,this.initPhoto();case 6:return r=this.innerPhotoItem,a=r.getImageElement(),o=a.width,s=a.height,u=r.props.getWidth()/r.itemPosition.getWidth(),c=r.props.getHeight()/r.itemPosition.getHeight(),l=o*u,h=s*c,p=O.a.createCanvas(new S.a(l,h)),d=p.getContext("2d"),f=this.props.isFlipH()?-1:1,g=this.props.isFlipV()?-1:1,d.save(),d.translate(p.width/2,p.height/2),d.scale(f,g),d.translate(-p.width/2,-p.height/2),e.next=24,r.render(d,1);case 24:d.restore(),this.src=p.toDataURL(),this.imageData=d.getImageData(0,0,p.width,p.height),this.svgElements.setSvgImage(_.a.isCropMode()?"":this.src),this.imageSrcStatus=W.RESET_SRC_STABLE;case 29:case"end":return e.stop()}},e,this)})),function(e){return s.apply(this,arguments)})},{key:"render",value:(a=o()(i.a.mark(function e(t,n,r){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isResourceLoadFail()){e.next=3;break}return this.renderResourceLoadFailView(t,n),e.abrupt("return");case 3:return a=new F(this.props,this.svgElements,this.innerPhotoItem,this.lastPhotoRevision,this.photoPosition,this.svgData,this.imageData,this.isResourceLoadFail(),this.getResourceLoadStatus(),this.getDisabledResourcePreviewKey()),e.next=6,a.rasterizeSingleItem(t,n,r);case 6:case"end":return e.stop()}},e,this)})),function(e,t,n){return a.apply(this,arguments)})},{key:"renderThumbnail",value:(r=o()(i.a.mark(function e(t,n){var r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new F(this.props,this.svgElements,this.innerPhotoItem,this.lastPhotoRevision,this.photoPosition,this.svgData,this.imageData,this.isResourceLoadFail(),this.getResourceLoadStatus(),this.getDisabledResourcePreviewKey()),e.next=3,r.rasterizeToPage(t,n);case 3:case"end":return e.stop()}},e,this)})),function(e,t){return r.apply(this,arguments)})},{key:"move",value:function(e,n){m()(v()(t.prototype),"move",this).call(this,e,n),this.innerPhotoItem.move(e,n),this.innerPhotoItem.props.updateRevision(!1)}},{key:"flipH",value:function(e){m()(v()(t.prototype),"flipH",this).call(this,e),this.updateInnerPhotoPosition(),this.innerPhotoItem.flipH(!1)}},{key:"flipV",value:function(e){m()(v()(t.prototype),"flipV",this).call(this,e),this.updateInnerPhotoPosition(),this.innerPhotoItem.flipV(!1)}},{key:"setLTRBCoordinate",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0,i=e.getWidth(),a=this.svgData.height/this.svgData.width*i;r===N.b.TOP||r===N.b.TOP_LEFT||r===N.b.TOP_RIGHT?e.top=e.bottom-a:e.bottom=e.top+a,m()(v()(t.prototype),"setLTRBCoordinate",this).call(this,e,n,r),this.updateInnerPhotoPosition(),this.calcScale()}},{key:"clone",value:function(){var e=new t(T.b.random(),this.svgData,this.props.getBoundingBox(),this.props.getRotate(),this.props.isFlipH(),this.props.isFlipV(),this.props.isCanUserSelect(),this.props.isCanUserMove(),this.props.isCanUserResize(),this.props.isCanUserDel());return e.photoPosition=this.photoPosition,e.originPhotoFlipHor=this.originPhotoFlipHor,e.originPhotoFlipVer=this.originPhotoFlipVer,e.setProps(this.props.clone()),e.imageWidth=this.imageWidth,e.imageHeight=this.imageHeight,e.lastPhotoRevision=-1,e.isInit=!0,e.innerPhotoItem.props=this.innerPhotoItem.props.clone(),e.innerPhotoItem.orgType=this.innerPhotoItem.orgType,e.innerPhotoItem.setLTRBCoordinate(this.innerPhotoItem.getLTRBCoordinate()),e.innerPhotoItem.itemPosition=this.innerPhotoItem.itemPosition,this.setCloneItemDefaultAttr(e),e}},{key:"getItemType",value:function(){return P.b.SVG_IMAGE_FRAME}},{key:"isPrivateItem",value:function(){return this.innerPhotoItem.orgType===B.b.Photo&&!this.isDefaultImage()}},{key:"isDisabledSvgItem",value:function(){return this.svgData.status===A.g.DISABLED}},{key:"getPropsPhotoKey",value:function(){return this.innerPhotoItem.orgType===B.b.Sticker?this.innerPhotoItem.props.getPhotoKey():void 0}},{key:"getHeaderTitle",value:function(){return"프레임"}},{key:"getUsedColor",value:function(){var e=m()(v()(t.prototype),"getUsedColor",this).call(this);return e.has(this.getFrameColor())&&e.delete(this.getFrameColor()),e}},{key:"getRenderStates",value:function(){var e=m()(v()(t.prototype),"getRenderStates",this).call(this);return e.contents.photoRevision=this.innerPhotoItem.props.getRevision(),e}},{key:"getEditableOriginColors",value:function(){var e=m()(v()(t.prototype),"getEditableOriginColors",this).call(this),n=this.getFrameColor();if(n){var r=e.indexOf(n);r>=0&&e.splice(r,1)}return e}},{key:"isDefaultImage",value:function(){return this.innerPhotoItem.props.getPhotoKey()===this.DROP_IMAGE_KEY}},{key:"hasPhoto",value:function(){return!1===this.isDefaultImage()}},{key:"getImageSrcStatus",value:function(){return this.imageSrcStatus}},{key:"calcScale",value:function(){var e=this.getWidth()/this.data.width,t=this.getHeight()/this.data.height;this.svgScale=Math.min(e,t),this.svgScaleX=e/this.svgScale,this.svgScaleY=t/this.svgScale}},{key:"isChangeableWidth",value:function(){return!1}},{key:"isChangeableHeight",value:function(){return!1}},{key:"getThumbString",value:function(e){return this.getSvgString(e/this.getWidth())}},{key:"getDisabledResourcePreviewKey",value:function(){return this.isResourceLoadFail()?m()(v()(t.prototype),"getDisabledResourcePreviewKey",this).call(this):this.innerPhotoItem.getDisabledResourcePreviewKey()}},{key:"isValid",value:function(){return m()(v()(t.prototype),"isValid",this).call(this)&&this.photoPosition&&this.photoPosition.getWidth()>0&&this.photoPosition.getHeight()>0}},{key:"getCommonFileKeyList",value:function(){return this.hasPhoto()?this.innerPhotoItem.getCommonFileKeyList():[]}},{key:"canInsertPhotoItem",value:function(){return!this.isLock()&&(this.isDefaultImage()||this.props.canInsertPhotoItem)}}],[{key:"loadDefaultImage",value:(n=o()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(w.b.hasData("imageframe_basic_png")){e.next=3;break}return e.next=3,w.b.setUrlImage("imageframe_basic_png","".concat(I.a.RESOURCE_DOMAIN,"image/imageframe_basic.png"));case 3:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)})}]),t}(M.a);!function(e){e.NONE="NONE",e.SET_SRC="SET_SRC",e.SET_SRC_STABLE="SET_SRC_STABLE",e.RESET_SRC="RESET_SRC",e.RESET_SRC_STABLE="RESET_SRC_STABLE"}(W||(W={}))},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=function(){function e(){i()(this,e)}return o()(e,null,[{key:"createCanvas",value:function(e){var t=document.createElement("canvas");return e&&(t.width=e.width,t.height=e.height),t}}]),e}()},function(e,t,n){"use strict";var r,i;n.d(t,"a",function(){return r}),function(e){e.MODE_HANDLER_MOVE_START="MODE_HANDLER_MOVE_START",e.MODE_HANDLER_CROP="MODE_HANDLER_CROP",e.MODE_HANDLER_DOWN="MODE_HANDLER_DOWN",e.MODE_GRID_HANDLER_DOWN="MODE_GRID_HANDLER_DOWN",e.MODE_HANDLER_RESIZE_T="RESIZE_T",e.MODE_HANDLER_RESIZE_TR="RESIZE_TR",e.MODE_HANDLER_RESIZE_R="RESIZE_R",e.MODE_HANDLER_RESIZE_BR="RESIZE_BR",e.MODE_HANDLER_RESIZE_B="RESIZE_B",e.MODE_HANDLER_RESIZE_BL="RESIZE_BL",e.MODE_HANDLER_RESIZE_L="RESIZE_L",e.MODE_HANDLER_RESIZE_TL="RESIZE_TL",e.MODE_HANDLER_ROTATE="MODE_RUBBERBAND_ROTATE",e.MODE_SELECT_ONE_OR_DRAG="MODE_SELECT_ONE_OR_DRAG",e.MODE_SELECT_ONE="MODE_SELECT_ONE",e.MODE_MULTI_SELECT="MODE_MULTI_SELECT",e.MODE_NONE="MODE_NONE",e.MODE_MOBILE_DOWN="MODE_MOBILE_DOWN",e.MODE_MOBILE_SCROLL="MODE_MOBILE_SCROLL",e.MODE_ITEM_DRAG="MODE_ITEM_DRAG",e.MODE_ITEM_DRAG_OR_SELECT="MODE_ITEM_DRAG_OR_SELECT",e.MODE_ITEM_RESIZE="MODE_ITEM_RESIZE",e.MODE_ITEM_ROTATE="MODE_ITEM_ROTATE",e.MODE_ITEM_QUICK_MENU="MODE_ITEM_QUICK_MENU",e.MODE_TEXT_EDIT="MODE_TEXT_EDIT",e.MODE_TEXT_SELECT="MODE_TEXT_SELECT",e.MODE_PHOTO_CROP="MODE_PHOTO_CROP",e.MODE_PHOTO_CROP_UI_SELECT="MODE_PHOTO_CROP_UI_SELECT",e.MODE_GRID_CELLS_SELECT="MODE_GRID_CELLS_SELECT",e.MODE_GRID_CLICK="MODE_GRID_CLICK",e.MODE_GRID_BORDER_HOR_DRAG="MODE_GRID_BORDER_HOR_DRAG",e.MODE_GRID_BORDER_VER_DRAG="MODE_GRID_BORDER_VER_DRAG",e.MODE_NAVIGATION="MODE_NAVIGATION",e.MODE_NAVIGATION_DRAG="MODE_NAVIGATION_DRAG",e.MODE_GRID_DRAG="MODE_GRID_DRAG",e.MODE_BACKGROUND_SELECT="MODE_BACKGROUND_SELECT",e.MODE_GUIDELINE_MOVE="MODE_GUIDELINE_MOVE",e.MODE_ALERT_ICON_SELECT="MODE_ALERT_ICON_SELECT",e.MODE_AFTER_MOVE_ITEM_TO_OTHER_PAGE="MODE_AFTER_MOVE_ITEM_TO_OTHER_PAGE",e.MODE_DOWN_CHANGE_VALUE="MODE_DOWN_CHANGE_VALUE",e.MODE_MOVE_CHANGE_VALUE="MODE_MOVE_CHANGE_VALUE",e.MODE_ITEM_MULTI_SELECT="MODE_ITEM_MULTI_SELECT"}(r||(r={})),(i=r||(r={})).isGlobalMode=function(e){switch(e){case r.MODE_ITEM_DRAG:case r.MODE_ITEM_ROTATE:case r.MODE_MULTI_SELECT:case r.MODE_HANDLER_RESIZE_L:case r.MODE_HANDLER_RESIZE_T:case r.MODE_HANDLER_RESIZE_R:case r.MODE_HANDLER_RESIZE_B:case r.MODE_HANDLER_RESIZE_TL:case r.MODE_HANDLER_RESIZE_TR:case r.MODE_HANDLER_RESIZE_BL:case r.MODE_HANDLER_RESIZE_BR:return!0}return!1},i.isNavigation=function(e){switch(e){case r.MODE_NAVIGATION:case r.MODE_NAVIGATION_DRAG:return!0;default:return!1}}},,function(e,t,n){"use strict";var r,i=n(2),a=n.n(i),o=n(4),s=n.n(o),u=n(0),c=n.n(u),l=n(1),h=n.n(l),p=n(6),d=n.n(p),f=n(14),g=n.n(f),v=n(3),y=n.n(v),m=n(9),E=n.n(m),k=n(7),S=n.n(k),I=n(228),T=n(267),b=n(265),w=function(){function e(t){c()(this,e),this.gridItem=t}return h()(e,[{key:"mergeCells",value:function(e){this.splitCells(e);var t=this.gridItem.positionTool.getRectCells(e),n=t[0][0],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value,c=!0,l=!1,h=void 0;try{for(var p,d=u[Symbol.iterator]();!(c=(p=d.next()).done);c=!0){var f=p.value;if(n!==f&&f.innerText){var g=n.textProps.getLineLength()-1,v=n.textProps.getLine(g).chars.length,y=new b.a(g,v),m=(n.innerText?"\n":"")+f.innerText;n.textProps.insertText(y,m),f.textProps.setText("")}f.masterCell=n,f.merged()}}catch(e){l=!0,h=e}finally{try{c||null==d.return||d.return()}finally{if(l)throw h}}}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}n.pushChildCells(t)}},{key:"splitCells",value:function(e){var t=this.gridItem.positionTool.getRectCells(e),n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,u=!0,c=!1,l=void 0;try{for(var h,p=s[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var d=h.value;d.cellType===T.b.MASTER?this.splitCell(d):d.cellType===T.b.SLAVE&&d.splited()}}catch(e){c=!0,l=e}finally{try{u||null==p.return||p.return()}finally{if(c)throw l}}}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}},{key:"splitCell",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=e.getChildCells()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){i.value!==e&&e.splited()}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}e.clearChildCell(),e.cellType=T.b.NONE}}]),e}(),A=function(){function e(t){c()(this,e),this.gridItem=t,this.mergeTool=new w(t)}return h()(e,[{key:"deleteCell",value:function(e,t){var n,r=(n="number"==typeof e?this.gridItem.cells[e][t]:e).row,i=n.col;this.gridItem.cells[r][i]=null}},{key:"insertRowWithStyle",value:function(e,t){for(var n=this.gridItem.rows[e].thickness,r=[],i=0;i<this.gridItem.col;i++)r.push(this.gridItem.cells[e][i]);this.gridItem.insertRow(t),this.gridItem.rows[t].thickness=n;for(var a=0;a<this.gridItem.col;a++){var o=this.gridItem.cells[t][a],s=r[a];o.assignCellStyle(s),o.assignFontStyle(s),o.assignBorderStyle(s),o.innerText="",o.synchronizeBorder(o.getBorder(T.a.TOP)),o.synchronizeBorder(o.getBorder(T.a.BOTTOM))}}},{key:"insertColWithStyle",value:function(e,t){for(var n=this.gridItem.cols[e].thickness,r=[],i=0;i<this.gridItem.row;i++)r.push(this.gridItem.cells[i][e]);this.gridItem.insertCol(t),this.gridItem.cols[t].thickness=n;for(var a=0;a<this.gridItem.row;a++){var o=this.gridItem.cells[a][t],s=r[a];o.assignCellStyle(s),o.assignFontStyle(s),o.assignBorderStyle(s),o.synchronizeBorder(o.getBorder(T.a.LEFT)),o.synchronizeBorder(o.getBorder(T.a.RIGHT))}}},{key:"insertRowWithRow",value:function(e,t,n){if(t.length!==this.gridItem.col)throw new Error("Row Delete RollBack Error. DeletedCells Count: ".concat(t.length," Grid's Col: ").concat(this.gridItem.col));this.gridItem.rows.splice(n,0,e),this.gridItem.cells.splice(n,0,t);var r=!0,i=!1,a=void 0;try{for(var o,s=this.gridItem.cells[n][Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;u.synchronizeBorder(u.getBorder(T.a.TOP)),u.synchronizeBorder(u.getBorder(T.a.BOTTOM))}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}},{key:"insertColWithCol",value:function(e,t,n){if(t.length!==this.gridItem.row)throw new Error("Col Delete RollBack Error. DeletedCells Count: ".concat(t.length," Grid's Row: ").concat(this.gridItem.row));this.gridItem.cols.splice(n,0,e);for(var r=0;r<this.gridItem.row;r++)this.gridItem.cells[r].splice(n,0,t[r]);var i=!0,a=!1,o=void 0;try{for(var s,u=this.gridItem.cells[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value[n];c.synchronizeBorder(c.getBorder(T.a.LEFT)),c.synchronizeBorder(c.getBorder(T.a.RIGHT))}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}}},{key:"deleteRow",value:function(e){var t=this.gridItem.cells[e],n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;this.deleteCell(s)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}if(this.gridItem.cells.splice(e,1),this.gridItem.rows.splice(e,1),this.gridItem.rows.length>e){var u=!0,c=!1,l=void 0;try{for(var h,p=this.gridItem.cells[e][Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var d=h.value;d.synchronizeBorder(d.getBorder(T.a.TOP)),d.synchronizeBorder(d.getBorder(T.a.BOTTOM))}}catch(e){c=!0,l=e}finally{try{u||null==p.return||p.return()}finally{if(c)throw l}}}}},{key:"deleteCol",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=this.gridItem.cells[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value,s=o[e];this.deleteCell(s),o.splice(e,1)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}if(this.gridItem.cols.splice(e,1),this.gridItem.cols.length>e){var u=!0,c=!1,l=void 0;try{for(var h,p=this.gridItem.cells[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var d=h.value[e];d.synchronizeBorder(d.getBorder(T.a.LEFT)),d.synchronizeBorder(d.getBorder(T.a.RIGHT))}}catch(e){c=!0,l=e}finally{try{u||null==p.return||p.return()}finally{if(c)throw l}}}}},{key:"synchronizeCells",value:function(){var e=this,t=this.gridItem.getAllCells();t.forEach(function(e){e.clearChildCell()}),t.filter(function(e){return e.cellType===T.b.SLAVE}).forEach(function(e){e.masterCell?e.masterCell.pushChildCell(e):e.cellType=T.b.NONE}),t.filter(function(e){return e.cellType===T.b.MASTER}).forEach(function(t){e.mergeTool.mergeCells(t.childCellsPos)})}}]),e}(),C=n(226),x=function(){function e(t){c()(this,e),this.gridItem=t}return h()(e,[{key:"getCellbyAdjustedOffset",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.gridItem.lastRenderEditScale,r=!0,i=!1,a=void 0;try{for(var o,s=this.gridItem.cells[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value,c=!0,l=!1,h=void 0;try{for(var p,d=u[Symbol.iterator]();!(c=(p=d.next()).done);c=!0){var f=p.value;if(f.doHitTest(e,t,n))return f}}catch(e){l=!0,h=e}finally{try{c||null==d.return||d.return()}finally{if(l)throw h}}}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return null}},{key:"validateBoundPos",value:function(e){var t={row:Math.min(e.startPos.row,e.endPos.row),col:Math.min(e.startPos.col,e.endPos.col)},n={row:Math.max(e.startPos.row,e.endPos.row),col:Math.max(e.startPos.col,e.endPos.col)},r={startPos:t,endPos:n},i=this.getRectCells(r),a=!0,o=!1,s=void 0;try{for(var u,c=i[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value,h=!0,p=!1,d=void 0;try{for(var f,g=l[Symbol.iterator]();!(h=(f=g.next()).done);h=!0){var v=f.value;v.cellType===T.b.MASTER?(t.row=Math.min(t.row,v.childCellsPos.startPos.row),t.col=Math.min(t.col,v.childCellsPos.startPos.col),n.row=Math.max(n.row,v.childCellsPos.endPos.row),n.col=Math.max(n.col,v.childCellsPos.endPos.col)):v.cellType===T.b.SLAVE&&(t.row=Math.min(t.row,v.masterCell.childCellsPos.startPos.row),t.col=Math.min(t.col,v.masterCell.childCellsPos.startPos.col),n.row=Math.max(n.row,v.masterCell.childCellsPos.endPos.row),n.col=Math.max(n.col,v.masterCell.childCellsPos.endPos.col))}}catch(e){p=!0,d=e}finally{try{h||null==g.return||g.return()}finally{if(p)throw d}}}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}return this.isCellsPosEqual(r,e)?e:this.validateBoundPos(r)}},{key:"getCellsPos",value:function(e,t,n,r){e-=this.gridItem.props.getLeft()*this.gridItem.lastRenderEditScale,t-=this.gridItem.props.getTop()*this.gridItem.lastRenderEditScale,n-=this.gridItem.props.getLeft()*this.gridItem.lastRenderEditScale,r-=this.gridItem.props.getTop()*this.gridItem.lastRenderEditScale,e>this.gridItem.getGridWidth(this.gridItem.lastRenderEditScale)?e=this.gridItem.getGridWidth(this.gridItem.lastRenderEditScale):e<0&&(e=0),t>this.gridItem.getGridHeight(this.gridItem.lastRenderEditScale)?t=this.gridItem.getGridHeight(this.gridItem.lastRenderEditScale):t<0&&(t=0),n>this.gridItem.getGridWidth(this.gridItem.lastRenderEditScale)?n=this.gridItem.getGridWidth(this.gridItem.lastRenderEditScale):n<0&&(n=0),r>this.gridItem.getGridHeight(this.gridItem.lastRenderEditScale)?r=this.gridItem.getGridHeight(this.gridItem.lastRenderEditScale):r<0&&(r=0);var i=this.getCellbyAdjustedOffset(e,t),a=this.getCellbyAdjustedOffset(n,r);return this.validateBoundPos({startPos:new b.a(i.row,i.col),endPos:new b.a(a.row,a.col)})}},{key:"getCell",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.gridItem.lastRenderEditScale,r=C.a.getRenderPageOffset(e*C.a.instance.zoomScale,t*C.a.instance.zoomScale);return e=r.x/C.a.instance.zoomScale/C.a.instance.pageEditScale-this.gridItem.props.getLeft()*n,t=r.y/C.a.instance.zoomScale/C.a.instance.pageEditScale-this.gridItem.props.getTop()*n,this.getCellbyAdjustedOffset(e,t)}},{key:"setColWidth",value:function(e,t){if(!(e<0)){0===e&&(t=-t);var n=this.gridItem,r=n.cols[Math.max(1,e)-1];t=r.validateDeltaThickness(t),0===e&&n.props.setLeft(n.props.getLeft()-t),r.thickness+=t;var i=n.getWidth()+t;n.aspectRatio=n.getHeight()/i,n.cols.forEach(function(e){e.thicknessRatio=e.thickness/i})}}},{key:"setRowHeight",value:function(e,t){if(!(e<0)){0===e&&(t=-t);var n=this.gridItem,r=n.rows[Math.max(1,e)-1];t=r.validateDeltaThickness(t),0===e&&n.props.setTop(n.props.getTop()-t),r.thickness+=t;var i=n.getHeight()+t;n.aspectRatio=i/n.getWidth(),n.rows.forEach(function(e){e.thicknessRatio=e.thickness/i})}}},{key:"getCellsWidth",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=0,r=e.startPos.col;r<=e.endPos.col;r++)n+=this.gridItem.cols[r].thickness;return n*t}},{key:"getCellsHeight",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=0,r=e.startPos.row;r<=e.endPos.row;r++)n+=this.gridItem.rows[r].thickness;return n*t}},{key:"getCells",value:function(e){var t=[],n=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,u=this.gridItem.cells[s.row][s.col];t.push(u)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return t}},{key:"getRectCells",value:function(e){for(var t=[],n=e.startPos.row;n<=e.endPos.row;n++){for(var r=[],i=e.startPos.col;i<=e.endPos.col;i++)r.push(this.gridItem.cells[n][i]);t.push(r)}return t}},{key:"arrayOfCellPosToCellsPos",value:function(e){var t=this.gridItem.row,n=this.gridItem.col,r=-1,i=-1,a=!0,o=!1,s=void 0;try{for(var u,c=e[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value;t=Math.min(t,l.row),n=Math.min(n,l.col),r=Math.max(r,l.row),i=Math.max(i,l.col)}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}return{startPos:new b.a(t,n),endPos:new b.a(r,i)}}},{key:"cellsPosToArrayOfCellPos",value:function(e){for(var t=[],n=e.startPos.row;n<=e.endPos.row;n++)for(var r=e.startPos.col;r<=e.endPos.col;r++)t.push(new b.a(n,r));return t}},{key:"isCellsPosEqual",value:function(e,t){return e.startPos.row===t.startPos.row&&e.startPos.col===t.startPos.col&&e.endPos.row===t.endPos.row&&e.endPos.col===t.endPos.col}},{key:"isRectSelectedCells",value:function(e){var t=this.gridItem.row,n=this.gridItem.col,r=-1,i=-1,a=!0,o=!1,s=void 0;try{for(var u,c=e[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value;t=Math.min(t,l.row),n=Math.min(n,l.col),r=Math.max(r,l.row),i=Math.max(i,l.col)}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}for(var h=0;h<this.gridItem.row;h++)for(var p=0;p<this.gridItem.col;p++){var d=t<=h&&r>=h&&n<=p&&i>=p;if(this.gridItem.cells[h][p].selected!==d)return!1}return!0}},{key:"getPrevCellPos",value:function(e,t){var n,r,i=e.col,a=e.row;return t?0===a?(r=this.gridItem.row-1,n=0===i?this.gridItem.col-1:i-1):(n=i,r=a-1):0===i?(n=this.gridItem.col-1,r=0===a?this.gridItem.row-1:a-1):(n=i-1,r=a),this.gridItem.cells[r][n].cellType===T.b.SLAVE?this.getPrevCellPos(new b.a(r,n),t):new b.a(r,n)}},{key:"getNextCellPos",value:function(e,t){var n,r,i=e.col,a=e.row;return t?a===this.gridItem.row-1?(r=0,n=i===this.gridItem.col-1?0:i+1):(n=i,r=a+1):i===this.gridItem.col-1?(n=0,r=a===this.gridItem.row-1?0:a+1):(n=i+1,r=a),this.gridItem.cells[r][n].cellType===T.b.SLAVE?this.getNextCellPos(new b.a(r,n),t):new b.a(r,n)}}]),e}(),R=n(263),L=n(458),_=function(e){function t(){var e,n;c()(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=d()(this,(e=y()(t)).call.apply(e,[this].concat(i)))).cellBorderColor="#000000",n.cellBorderAlpha=255,n.cellBorderThickness=1,n.border=new L.a(null,null,n.cellBorderThickness),n}return S()(t,e),h()(t,[{key:"updateBorder",value:function(){this.border.alpha=this.cellBorderAlpha,this.border.color=this.cellBorderColor,this.border.thickness=this.cellBorderThickness,this.updateRevision()}},{key:"getCellBorderColor",value:function(){return this.cellBorderColor}},{key:"setCellBorderColor",value:function(e){this.cellBorderColor!==e&&this.updateRevision(),this.cellBorderColor=e}},{key:"getCellBorderAlpha",value:function(){return this.cellBorderAlpha}},{key:"setCellBorderAlpha",value:function(e){this.cellBorderAlpha!==Number(e)&&this.updateRevision(),this.cellBorderAlpha=Number(e)}},{key:"getCellBorderThickness",value:function(){return this.cellBorderThickness}},{key:"setCellBorderThickness",value:function(e){this.cellBorderThickness!==Number(e)&&this.updateRevision(),this.cellBorderThickness=Number(e)}},{key:"makeClone",value:function(){return new t}},{key:"clone",value:function(){var e=E()(y()(t.prototype),"clone",this).call(this);return e.border=this.border.clone(),e}}]),t}(R.a),P=n(235),O=n(256),D=n(230),M=n(238),N=n(360),B=n(304),U=n(240),G=n(292),F=n(110),H=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return c()(this,t),(n=d()(this,y()(t).call(this,e))).cells=r,n}var n,r,i;return S()(t,e),h()(t,[{key:"getCanvasPosData",value:function(e){var t=this.props.getWidth()*e,n=this.props.getHeight()*e;return new I.c(2*t,2*n,0,0,t/2,n/2)}},{key:"rasterizeSingleItem",value:(i=s()(a.a.mark(function e(t,n){var r,i,o,s,u,c,l,h,p,d,f,g,v,y,m,E,k,S,I,T,b,w,A,C,x,R;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.getCanvasPosData(n),i=r.width,o=r.height,s=r.contentLeft,u=r.contentTop,c=r.offsetX,l=r.offsetY,h=-s+c,p=-u+l,d=this.props.getLeft(),f=this.props.getTop(),t.save(),g=this.renderGridBackground(n,!1),e.next=9,B.a.drawSVG(t,g,0,0,i-2*h,o-2*p);case 9:v=!0,y=!1,m=void 0,e.prev=12,E=this.cells[Symbol.iterator]();case 14:if(v=(k=E.next()).done){e.next=54;break}S=k.value,I=!0,T=!1,b=void 0,e.prev=19,w=S[Symbol.iterator]();case 21:if(I=(A=w.next()).done){e.next=37;break}if(!(C=A.value).visible){e.next=34;break}if((x=C.childTextItem.clone()).props.setOpacity(255),C.repositionTextItem(x,1),x.move(-d,-f),t.save(),x.props.updateRevision(),0===x.props.getText().length){e.next=33;break}return e.next=33,x.renderThumbnail(t,n);case 33:t.restore();case 34:I=!0,e.next=21;break;case 37:e.next=43;break;case 39:e.prev=39,e.t0=e.catch(19),T=!0,b=e.t0;case 43:e.prev=43,e.prev=44,I||null==w.return||w.return();case 46:if(e.prev=46,!T){e.next=49;break}throw b;case 49:return e.finish(46);case 50:return e.finish(43);case 51:v=!0,e.next=14;break;case 54:e.next=60;break;case 56:e.prev=56,e.t1=e.catch(12),y=!0,m=e.t1;case 60:e.prev=60,e.prev=61,v||null==E.return||E.return();case 63:if(e.prev=63,!y){e.next=66;break}throw m;case 66:return e.finish(63);case 67:return e.finish(60);case 68:return R=this.renderGridBorder(n,!1,h,p),e.next=71,B.a.drawSVG(t,R,-h,-p,i,o);case 71:t.restore();case 72:case"end":return e.stop()}},e,this,[[12,56,60,68],[19,39,43,51],[44,,46,50],[61,,63,67]])})),function(e,t){return i.apply(this,arguments)})},{key:"rasterizeToPage",value:(r=s()(a.a.mark(function e(t,n){var r,i,o,s,u,c,l,h,p,d,f;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.getCanvasPosData(n),i=r.width,o=r.height,s=r.contentLeft,u=r.contentTop,c=r.offsetX,l=r.offsetY,h=1,(p=Math.max(i,o))>B.a.MAX_CANVAS_SIZE&&(h=B.a.MAX_CANVAS_SIZE/p),d=U.a.createCanvas(new F.a(i,o,h)),f=d.getContext("2d"),e.next=8,this.drawItemCtx(f,Math.round((-s+c)*h),Math.round((-u+l)*h),n*h);case 8:t.save(),this.transformImage(t,Math.round(this.props.getLeft()*n+s-c),Math.round(this.props.getTop()*n+u-l),1),t.drawImage(d,0,0,i,o),t.restore();case 12:case"end":return e.stop()}},e,this)})),function(e,t){return r.apply(this,arguments)})},{key:"createItemCanvas",value:function(e){var t=this.getCanvasPosData(e),n=t.width,r=t.height,i=new F.a(B.a.MAX_CANVAS_SIZE,B.a.MAX_CANVAS_SIZE),a=new F.a(n,r);return a.makeSmallerThan(i),U.a.createCanvas(a)}},{key:"getRasterizedItemCanvas",value:(n=s()(a.a.mark(function e(t){var n,r,i,o,s,u,c,l,h;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.createItemCanvas(t),r=n.getContext("2d"),i=this.getCanvasPosData(t),o=i.width,i.height,s=i.contentLeft,u=i.contentTop,c=i.offsetX,l=i.offsetY,h=n.width/o,r.translate(Math.round((-s+c)*h),Math.round((-u+l)*h)),e.next=7,this.rasterizeSingleItem(r,t*h);case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"renderGridBackground",value:function(e,t,n,r){var i=this.props.getWidth()*e,a=this.props.getHeight()*e,o='<svg shape-rendering="optimizeSpeed" width="100%" height="100%" style="overflow: visible"';t||(o='<svg width="'.concat(i,'px" height="').concat(a,'px" style="overflow: visible"')),o+=' xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1">';var s='<g name="background">',u=!0,c=!1,l=void 0;try{for(var h,p=this.cells[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var d=h.value,f=!0,g=!1,v=void 0;try{for(var y,m=d[Symbol.iterator]();!(f=(y=m.next()).done);f=!0){var E=y.value;E.visible&&(s+=E.renderBackground())}}catch(e){g=!0,v=e}finally{try{f||null==m.return||m.return()}finally{if(g)throw v}}}}catch(e){c=!0,l=e}finally{try{u||null==p.return||p.return()}finally{if(c)throw l}}return o+=s+"</g>",o+="</svg>"}},{key:"renderGridBorder",value:function(e,t,n,r){var i=this.props.getWidth()*e,a=this.props.getHeight()*e,o="";void 0!==n&&void 0!==r&&(o+='<svg width="'.concat(i+2*n,'px" height="').concat(a+2*r,'px" style="overflow: visible"'),o+=' shape-rendering="crispEdges"',o+=' xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1">');var s='<svg width="100%" height="100%" style="overflow: visible"';t||(s='<svg width="'.concat(i,'px" height="').concat(a,'px" style="overflow: visible"'),void 0!==n&&void 0!==r&&(s+=' x="'.concat(n,'px" y="').concat(r,'px"'))),s+=' xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1">';var u='<g name="left">',c='<g name="right">',l='<g name="top">',h='<g name="bottom">',p='<g name="down">',d='<g name="up">',f=!0,g=!1,v=void 0;try{for(var y,m=this.cells[Symbol.iterator]();!(f=(y=m.next()).done);f=!0){var E=y.value,k=!0,S=!1,I=void 0;try{for(var b,w=E[Symbol.iterator]();!(k=(b=w.next()).done);k=!0){var A=b.value;A.visible&&(u+=A.renderBorder(T.a.LEFT,e),l+=A.renderBorder(T.a.TOP,e),c+=A.renderBorder(T.a.RIGHT,e),h+=A.renderBorder(T.a.BOTTOM,e),p+=A.renderBorder(T.a.UPDIAGONAL,e),d+=A.renderBorder(T.a.DOWNDIAGONAL,e))}}catch(e){S=!0,I=e}finally{try{k||null==w.return||w.return()}finally{if(S)throw I}}}}catch(e){g=!0,v=e}finally{try{f||null==m.return||m.return()}finally{if(g)throw v}}return s+=u+"</g>",s+=l+"</g>",s+=c+"</g>",s+=h+"</g>",s+=p+"</g>",s+=d+"</g>",s+="</svg>",void 0!==n&&void 0!==r&&(s="".concat(o).concat(s,"</svg>")),s}}]),t}(G.a),V=n(11),z=n(234),W=n(237);n.d(t,"b",function(){return r}),n.d(t,"a",function(){return K}),function(e){e.GRID="GRID",e.CELL="CELL",e.TEXT="TEXT"}(r||(r={}));var K=function(e){function t(e,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],u=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],l=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],h=!(arguments.length>8&&void 0!==arguments[8])||arguments[8];return c()(this,t),(r=d()(this,y()(t).call(this,e,n,i,a,o,s,u,l,h,I.e))).cells=[],r.rows=[],r.cols=[],r.sizeTool=new A(g()(r)),r.mergeTool=new w(g()(r)),r.positionTool=new x(g()(r)),r.isTextEditMode=!1,r.selectedRowNo=-1,r.selectedColNo=-1,r.borderScaleStandard=800,r.endEditMode=!1,r.editTextItemVC=new M.a("tbpe_text_1",new W.a(0,0,100,100)),r}var n,r;return S()(t,e),h()(t,[{key:"makeProps",value:function(){return new _}},{key:"getCanvasPosData",value:function(e){return new H(this.props).getCanvasPosData(e)}},{key:"canFlip",value:function(){return!1}},{key:"canRotate",value:function(){return!1}},{key:"existSelectedCell",value:function(){return this.cells.some(function(e){return e.some(function(e){return e.selected})})}},{key:"getItemType",value:function(){return P.b.GRID}},{key:"render",value:(r=s()(a.a.mark(function e(t,n){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new H(this.props,this.cells),e.next=3,r.rasterizeSingleItem(t,n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)})),function(e,t){return r.apply(this,arguments)})},{key:"renderThumbnail",value:(n=s()(a.a.mark(function e(t,n){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new H(this.props,this.cells),e.next=3,r.rasterizeToPage(t,n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})},{key:"renderGridBackground",value:function(e,t,n,r){return new H(this.props,this.cells).renderGridBackground(e,t,n,r)}},{key:"renderGridBorder",value:function(e,t,n,r){return new H(this.props,this.cells).renderGridBorder(e,t,n,r)}},{key:"clone",value:function(){var e=new t(V.b.random(),this.props.getBoundingBox(),this.props.getRotate(),this.props.isFlipH(),this.props.isFlipV(),this.props.isCanUserSelect(),this.props.isCanUserMove(),this.props.isCanUserResize(),this.props.isCanUserDel());e.init(this.row,this.col,this.aspectRatio),e.setProps(this.props.clone()),this.rows.forEach(function(t,n){e.rows[n].assign(t.clone())}),this.cols.forEach(function(t,n){e.cols[n].assign(t.clone())});for(var n=0;n<this.row;n++)for(var r=0;r<this.col;r++){var i=this.cells[n][r],a=e.cells[n][r];i.assignTo(a),i.masterCell&&(a.masterCell=e.cells[i.masterCell.row][i.masterCell.col])}return this.setCloneItemDefaultAttr(e),e.borderScaleStandard=this.borderScaleStandard,e.sizeTool.synchronizeCells(),e}},{key:"getUsedColor",value:function(){var e=new Set;return this.getAllCells().forEach(function(t){e.add(t.cellProps.getCellBackgroundColor()),e.add(t.textProps.getColor()),t.borders.left.visible&&e.add(t.borders.left.color),t.borders.top.visible&&e.add(t.borders.top.color),t.borders.right.visible&&e.add(t.borders.right.color),t.borders.bottom.visible&&e.add(t.borders.bottom.color),t.borders.downDiagonal.visible&&e.add(t.borders.downDiagonal.color),t.borders.upDiagonal.visible&&e.add(t.borders.upDiagonal.color)}),e}},{key:"getUsedColorsByColor",value:function(e,t){var n=this;if(!e)return null;var r=(e=e.toLowerCase()).substring(0,7),i=[];return this.cells.forEach(function(a,o){a.forEach(function(a,s){var u="",c=!1,l=!1,h=!1,p=!1,d=!1,f=!1,g=!1,v=!1;u=a.cellProps.getCellBackgroundColor(),t?c=u.toLowerCase()===e:(c=u.substring(0,7).toLowerCase()===r,l=n.isSameBorderColor(a.borders.left,r),h=n.isSameBorderColor(a.borders.top,r),p=n.isSameBorderColor(a.borders.right,r),d=n.isSameBorderColor(a.borders.bottom,r),f=n.isSameBorderColor(a.borders.downDiagonal,r),g=n.isSameBorderColor(a.borders.upDiagonal,r),(u=a.textProps.getColor()).startsWith("#")||(u=new N.a(u).rgb),v=u.substring(0,7).toLowerCase()===r),(c||l||h||p||d||f||g||v)&&i.push({row:o,col:s,isSelected:a.selected,bg:c,left:l,top:h,right:p,bottom:d,downDiagonal:f,upDiagonal:g,text:v})})}),i}},{key:"isSameBorderColor",value:function(e,t){return!!e.visible&&e.color.substring(0,7).toLowerCase()===t}},{key:"init",value:function(e,t,n){for(var r=0;r<e;r++)this.insertRow(r);for(var i=0;i<t;i++)this.insertCol(i);this.aspectRatio=n||this.getHeight()/this.getWidth()}},{key:"adjustColThickness",value:function(e){var t=!1;if(null==e){var n=!0,r=!1,i=void 0;try{for(var a,o=this.cols[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,u=s.minThickness;s.thickness<u&&(s.thickness=u,t=!0)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}else{var c=this.cols[e],l=c.minThickness;c.thickness<l&&(c.thickness=l,t=!0)}return t}},{key:"adjustRowThickness",value:function(e){var t=!1;if(null==e){var n=!0,r=!1,i=void 0;try{for(var a,o=this.rows[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,u=s.minThickness;if(s.thickness<u){s.thickness=u,t=!0;var c=s.minThicknessCellPos.slice(),l=!0,h=!1,p=void 0;try{for(var d,f=c[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var g=d.value;this.cells[g.row][g.col].isResizedByHeightChange=!0}}catch(e){h=!0,p=e}finally{try{l||null==f.return||f.return()}finally{if(h)throw p}}}}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}else{var v=this.rows[e],y=v.minThickness;if(v.thickness<y){v.thickness=y,t=!0;var m=v.minThicknessCellPos.slice(),E=!0,k=!1,S=void 0;try{for(var I,T=m[Symbol.iterator]();!(E=(I=T.next()).done);E=!0){var b=I.value;this.cells[b.row][b.col].isResizedByHeightChange=!0}}catch(e){k=!0,S=e}finally{try{E||null==T.return||T.return()}finally{if(k)throw S}}}}return t}},{key:"adjustSize",value:function(){this.props.setRight(this.props.getLeft()+this.getGridWidth()),this.props.setBottom(this.props.getTop()+this.getGridHeight()),this.updateThicknessRatio(),this.aspectRatio=this.getHeight()/this.getWidth();var e=!0,t=!1,n=void 0;try{for(var r,i=this.cells[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var a=r.value,o=!0,s=!1,u=void 0;try{for(var c,l=a[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var h=c.value;h.repositionTextItem(h.childTextItem,1)}}catch(e){s=!0,u=e}finally{try{o||null==l.return||l.return()}finally{if(s)throw u}}}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},{key:"scale",value:function(e){var n=!0,r=!1,i=void 0;try{for(var a,o=this.cells[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,u=!0,c=!1,l=void 0;try{for(var h,p=s[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){h.value.childTextItem.scale(e)}}catch(e){c=!0,l=e}finally{try{u||null==p.return||p.return()}finally{if(c)throw l}}}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}var d=!0,f=!1,g=void 0;try{for(var v,m=this.rows[Symbol.iterator]();!(d=(v=m.next()).done);d=!0){v.value.scale(e)}}catch(e){f=!0,g=e}finally{try{d||null==m.return||m.return()}finally{if(f)throw g}}var k=!0,S=!1,I=void 0;try{for(var T,b=this.cols[Symbol.iterator]();!(k=(T=b.next()).done);k=!0){T.value.scale(e)}}catch(e){S=!0,I=e}finally{try{k||null==b.return||b.return()}finally{if(S)throw I}}return this.borderScaleStandard*=e,E()(y()(t.prototype),"scale",this).call(this,e),this.adjustSize(),this}},{key:"setLTRBCoordinate",value:function(e,n,r){this.isTextEditMode&&(this.endEditMode=!0);var i=this.getWidth()/this.getHeight(),a=e.getWidth()/e.getHeight(),o=this.getLTRBCoordinate(),s=e.right-e.left,u=e.bottom-e.top,c=!0;if(Math.abs(a-i)<Math.pow(10,-5))switch(r){case O.b.TOP_LEFT:case O.b.TOP_RIGHT:case O.b.BOTTOM_LEFT:case O.b.BOTTOM_RIGHT:var l=u/s;this.aspectRatio>=l?s*=l/this.aspectRatio:u*=this.aspectRatio/l,c=!1;break;default:c=!0}if(r!==O.b.RIGHT){var h=!0,p=!1,d=void 0;try{for(var f,g=this.cells[Symbol.iterator]();!(h=(f=g.next()).done);h=!0){var v=f.value,m=!0,k=!1,S=void 0;try{for(var I,T=v[Symbol.iterator]();!(m=(I=T.next()).done);m=!0){I.value.isResizedByHeightChange=!1}}catch(e){k=!0,S=e}finally{try{m||null==T.return||T.return()}finally{if(k)throw S}}}}catch(e){p=!0,d=e}finally{try{h||null==g.return||g.return()}finally{if(p)throw d}}}for(var b=u,w=0;w<this.row-1;w++){var A=this.rows[w],C=u*(A.thicknessRatio?A.thicknessRatio:A.thickness/o.getHeight());A.thickness=C,b-=C}this.rows[this.row-1].thickness=b;for(var x=s,R=0;R<this.col-1;R++){var L=this.cols[R],_=s*(L.thicknessRatio?L.thicknessRatio:L.thickness/o.getWidth());L.thickness=_,x-=_}this.cols[this.col-1].thickness=x,this.adjustColThickness(),this.adjustRowThickness(),this.adjustSize(),o.left===e.left?e.right=e.left+this.getGridWidth():e.left=e.right-this.getGridWidth(),o.top===e.top?e.bottom=e.top+this.getGridHeight():e.top=e.bottom-this.getGridHeight(),E()(y()(t.prototype),"setLTRBCoordinate",this).call(this,e),this.aspectRatio=c?this.getHeight()/this.getWidth():this.aspectRatio}},{key:"updateThicknessRatio",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.rows[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value.updateThicknessRatio()}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}var a=!0,o=!1,s=void 0;try{for(var u,c=this.cols[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){u.value.updateThicknessRatio()}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}}},{key:"getMaxLeftBound",value:function(){var e=0;return this.cells.forEach(function(t){e=Math.max(e,t[0].borders.left.thickness)}),e/2}},{key:"getMaxTopBound",value:function(){var e=this,t=0;return this.cells.forEach(function(n){t=Math.max(t,n[e.col-1].borders.top.thickness)}),t/2}},{key:"getMaxRightBound",value:function(){var e=0;return this.cells[0].forEach(function(t){e=Math.max(e,t.borders.right.thickness)}),e/2}},{key:"getMaxBottomBound",value:function(){var e=0;return this.cells[this.row-1].forEach(function(t){e=Math.max(e,t.borders.bottom.thickness)}),e/2}},{key:"isInRange",value:function(e){var n=8/this.lastRenderEditScale,r=new z.a(e.left-(this.getMaxLeftBound()+n),e.top-(this.getMaxTopBound()+n),e.right+(this.getMaxRightBound()+n),e.bottom+(this.getMaxBottomBound()+n));return E()(y()(t.prototype),"isInRange",this).call(this,r)}},{key:"getGridWidth",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=0,n=!0,r=!1,i=void 0;try{for(var a,o=this.cols[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;t+=s.thickness*e}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return t}},{key:"getGridHeight",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=0,n=!0,r=!1,i=void 0;try{for(var a,o=this.rows[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;t+=s.thickness*e}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return t}},{key:"getCellRow",value:function(e){for(var t=0;t<this.cells.length;t++)if(this.cells[t].indexOf(e)>=0)return t;return-1}},{key:"getCellCol",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=this.cells[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value.indexOf(e);if(o>=0)return o}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return-1}},{key:"unselectAllCell",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.cells[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var a=r.value,o=!0,s=!1,u=void 0;try{for(var c,l=a[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){c.value.selected=!1}}catch(e){s=!0,u=e}finally{try{o||null==l.return||l.return()}finally{if(s)throw u}}}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},{key:"selectCells",value:function(e){this.unselectAllCell();var t=this.positionTool.getCells(e);if(t.length){var n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){a.value.selected=!0}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}}},{key:"insertRow",value:function(e){this.rows.splice(e,0,new T.d(this,T.e.ROW));var t=[];t.length=this.col,this.cells.splice(e,0,t);for(var n=0;n<this.col;n++)this.insertCell(e,n)}},{key:"insertCol",value:function(e){this.cols.splice(e,0,new T.d(this,T.e.COL));for(var t=0;t<this.row;t++)this.cells[t].splice(e,0,null),this.insertCell(t,e)}},{key:"insertCell",value:function(e,t){var n=new T.c(this);this.cells[e][t]=n,n.init()}},{key:"getFirstSelectedCell",value:function(){return this.selectedCells[0]}},{key:"getRenderStates",value:function(){var e=E()(y()(t.prototype),"getRenderStates",this).call(this),n=!0,r=!1,i=void 0;try{for(var a,o=this.cells[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,u=!0,c=!1,l=void 0;try{for(var h,p=s[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var d=h.value;e.contents.revision+=d.cellProps.getRevision()+d.textProps.getRevision()}}catch(e){c=!0,l=e}finally{try{u||null==p.return||p.return()}finally{if(c)throw l}}}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return e}},{key:"isSameLastEditedCellAndEditingCell",value:function(){return!(!this.lastEditedCell||!this.editingCell)&&this.lastEditedCell===this.editingCell}},{key:"updateLastEditedCell",value:function(){this.editingCell&&(this.lastEditedCell=this.editingCell)}},{key:"isSameTextStyle",value:function(){if(this.isSameLastEditedCellAndEditingCell()&&this.lastTextStyle){var e=this.editingCell.textProps;return this.lastTextStyle.isBold===e.isBold()&&this.lastTextStyle.isItalic===e.isItalic()&&this.lastTextStyle.isUnderline===e.isUnderline()&&this.lastTextStyle.isStrikeout===e.isStrikeout()&&this.lastTextStyle.isUpperCase===e.isUpperCase()}return!1}},{key:"updateLastTextStyle",value:function(){if(this.editingCell){var e=this.editingCell.textProps,t={isBold:e.isBold(),isItalic:e.isItalic(),isUnderline:e.isUnderline(),isStrikeout:e.isStrikeout(),isUpperCase:e.isUpperCase()};this.lastTextStyle=t}}},{key:"getHeaderTitle",value:function(){return"표"}},{key:"getResourceType",value:function(){return D.a.GRID}},{key:"isLazyHandlerHandlePosition",value:function(e){return!0}},{key:"getAllCells",value:function(){return this.cells.reduce(function(e,t){return e.concat(t)},[])}},{key:"everyCellsPos",value:function(){return this.getAllCells()}},{key:"getAllTextItemOfCells",value:function(){return this.getAllCells().map(function(e){return e.childTextItem})}},{key:"getCommonFileKeyList",value:function(){var e={};return this.getAllCells().forEach(function(t){t.childTextItem.getCommonFileKeyList().forEach(function(t){e[t]=!0})}),Object.keys(e)}},{key:"canDisplayHyperlink",value:function(){return!1}},{key:"selectedCells",get:function(){return this.cells.reduce(function(e,t){return e.concat(t.filter(function(e){return e.selected}))},[])}},{key:"row",get:function(){return this.rows.length}},{key:"col",get:function(){return this.cols.length}}]),t}(I.d)},function(e,t,n){"use strict";(function(e){n.d(t,"c",function(){return L}),n.d(t,"b",function(){return _}),n.d(t,"d",function(){return P}),n.d(t,"a",function(){return O}),n.d(t,"f",function(){return M}),n.d(t,"h",function(){return N}),n.d(t,"g",function(){return B}),n.d(t,"e",function(){return U});var r=n(6),i=n.n(r),a=n(3),o=n.n(a),s=n(14),u=n.n(s),c=n(7),l=n.n(c),h=n(62),p=n.n(h),d=n(2),f=n.n(d),g=n(4),v=n.n(g),y=n(0),m=n.n(y),E=n(1),k=n.n(E),S=n(37),I=n(11),T=n(19),b=n(20),w=n(240),A=n(304),C=n(230),x=n(442),R=n(249),L=function(){function t(){m()(this,t)}var n,r,i,a,o,s,u,c,l,h,d,g,y,E,C,L;return k()(t,null,[{key:"updateData",value:(L=v()(f.a.mark(function e(t,n){var r,i;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.isChangedCoreData(),e.next=3,this.getSvgUpdateData(t);case 3:return(i=e.sent).append("thumbnailEncodedB64",n),e.next=7,this.update(i);case 7:return e.abrupt("return",{svgData:t,updateCoreInfo:r});case 8:case"end":return e.stop()}},e,this)})),function(e,t){return L.apply(this,arguments)})},{key:"linkSticker",value:(C=v()(f.a.mark(function e(t,n,r){var i;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/svg/link",i=t.keywordList?t.keywordList.slice():[],t.keywordList=r,e.next=5,b.b.post("/api/svg/link",{data:this.getStickerLinkData(t,n),contentType:!1,processData:!1,traditional:!0}).then(function(e){t.keywordList=p()(new Set([].concat(p()(i),p()(r)))),t.stickerLinkList.unshift({stickerId:n,svgMetaIdx:t.idx})}).catch(function(e){throw alert("스티커 ID 가 중복이거나 로그아웃 되었습니다"),t.keywordList=i,Error(e)});case 5:case"end":return e.stop()}},e,this)})),function(e,t,n){return C.apply(this,arguments)})},{key:"unlinkSticker",value:(E=v()(f.a.mark(function e(t,n){var r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/svg/unlink",r=t.stickerLinkList.findIndex(function(e){return e.svgMetaIdx===t.idx&&e.stickerId===n}),e.next=4,b.b.post("/api/svg/unlink",{data:t.stickerLinkList[r]});case 4:r>-1&&t.stickerLinkList.splice(r,1);case 5:case"end":return e.stop()}},e)})),function(e,t){return E.apply(this,arguments)})},{key:"update",value:(y=v()(f.a.mark(function e(t){var n,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/v1/svg/update",e.next=3,b.b.post("/api/v1/svg/update",{data:t,contentType:!1,processData:!1});case 3:return n=e.sent,r=n.data,e.next=7,this.reloadSvgData(r);case 7:return e.abrupt("return",n.data);case 8:case"end":return e.stop()}},e,this)})),function(e){return y.apply(this,arguments)})},{key:"reloadAdminSvgData",value:(g=v()(f.a.mark(function e(){var t,n,r,i,a,o;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=!0,n=!1,r=void 0,e.prev=3,i=this._cacheData[Symbol.iterator]();case 5:if(t=(a=i.next()).done){e.next=14;break}if(!(o=a.value)[1].svg){e.next=9;break}return e.abrupt("continue",11);case 9:return e.next=11,this.getSvgData(o[1].idx,!0);case 11:t=!0,e.next=5;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(3),n=!0,r=e.t0;case 20:e.prev=20,e.prev=21,t||null==i.return||i.return();case 23:if(e.prev=23,!n){e.next=26;break}throw r;case 26:return e.finish(23);case 27:return e.finish(20);case 28:case"end":return e.stop()}},e,this,[[3,16,20,28],[21,,23,27]])})),function(){return g.apply(this,arguments)})},{key:"reloadSvgData",value:(d=v()(f.a.mark(function e(t){var n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.parse(t);case 2:n=e.sent,this.setCache(n);case 4:case"end":return e.stop()}},e,this)})),function(e){return d.apply(this,arguments)})},{key:"setCache",value:function(e){this._cacheData.set(e.key,e)}},{key:"parse",value:(h=v()(f.a.mark(function e(t){var n,r,i,a,o,s,u,c,l,h,p,d,g,v,y,m,E,k,S,T,b;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,r=!1,e.next=4,$.get(t.svgUrl);case 4:(i=e.sent).getElementsByTagName?n=i.getElementsByTagName("svg").item(0):(a=new DOMParser,o=a.parseFromString(i,"image/svg+xml"),n=o.getElementsByTagName("svg").item(0)),n&&x.a.changeElement(n),(s=new _).svgUrl=t.svgUrl,s.isPrivate=r,s.idx=t.idx,s.width=t.width,s.height=t.height,s.minWidth=t.minWidth,s.minHeight=t.minHeight,s.type=B.valueOf(t.type),s.key=t.key,s.status=N.valueOf(t.status),s.svg=n,s.categoryIdxList=t.categoryIdxList,s.name=t.name||"",s.designer=t.accountInfo,s.license=M.valueOf(t.license),s.keywordList=this.getKeywordList(t.keywordList),s.stickerLinkList=t.stickerLinkList,s.svgMemo=t.svgMemoDto?t.svgMemoDto.memo:"",s.updateDesigner=t.updateAccountInfo,s.createDate=new Date(t.createDate),s.updateDate=new Date(t.updateDate),u=0,c=n?n.childNodes:null,l=0;case 32:if(!(l<t.layerDtoList.length)){e.next=68;break}if(!(h=c?c[u]:null)){e.next=42;break}if(R.a.validateSvgElement(h)){e.next=39;break}return l--,u++,e.abrupt("continue",65);case 39:if(R.a.validateNewSvgElement(h)){e.next=42;break}return u++,e.abrupt("continue",65);case 42:if(p=new P,d=t.layerDtoList[l],p.idx=d.idx,p.layerId=d.layerId,p.width=d.width,p.height=d.height,p.top=d.positionTop,p.left=d.positionLeft,p.extendOffsetX=d.extendOffsetX,p.extendOffsetY=d.extendOffsetY,p.moveOffsetX=d.moveOffsetX,p.moveOffsetY=d.moveOffsetY,p.type=U.valueOf(d.type),h){for(g=n.cloneNode(!0),v=h.cloneNode(!0);g.firstChild;)g.removeChild(g.firstChild);g.appendChild(v),p.svg=g,p.layerSvg=h}if(e.t0=p.type===U.LAYER_PATTERN&&1!==t.layerDtoList.length&&(d.width!==s.width||d.height!==s.height),!e.t0){e.next=61;break}return e.next=60,this.isConvertableNoPattern(s,p);case 60:e.t0=e.sent;case 61:if(!e.t0){e.next=63;break}p.type=U.NO_PATTERN;case 63:s.addLayer(p),u++;case 65:l++,e.next=32;break;case 68:if(!t.colorDtoList){e.next=88;break}for(y=!0,m=!1,E=void 0,e.prev=72,k=t.colorDtoList[Symbol.iterator]();!(y=(S=k.next()).done);y=!0)T=S.value,(b=new O).idx=T.idx,b.color=T.color,b.editable=T.editable,s.addColor(b);e.next=80;break;case 76:e.prev=76,e.t1=e.catch(72),m=!0,E=e.t1;case 80:e.prev=80,e.prev=81,y||null==k.return||k.return();case 83:if(e.prev=83,!m){e.next=86;break}throw E;case 86:return e.finish(83);case 87:return e.finish(80);case 88:return s.thumbnailUrl=t.thumbnailUrl,t.thumbnailUrl?s.thumb=t.thumbnailUrl:n&&(s.thumb="data:image/svg+xml;base64,"+I.b.b64EncodeUnicode(n.outerHTML)),e.abrupt("return",s);case 91:case"end":return e.stop()}},e,this,[[72,76,80,88],[81,,83,87]])})),function(e){return h.apply(this,arguments)})},{key:"isConvertableNoPattern",value:(l=v()(f.a.mark(function t(n,r){var i,a,o,s,u,c,l,h,p,d,g,v,y,m,E,k,S,I,T,b,C,x,R,L,_;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e.env.IMAGE_PROCESS){t.next=3;break}return t.abrupt("return",!1);case 3:if(i=Math.max(30/Math.min(r.width,r.height),1),(a=w.a.createCanvas()).width=2*r.width*i,a.height=2*r.height*i,(o=a.getContext("2d")).imageSmoothingEnabled=!1,0!==a.width&&0!==a.height){t.next=11;break}return t.abrupt("return",!1);case 11:return s=this.scaleToSvgString(r.svg.outerHTML,n.width*i,n.height*i,i,i),t.next=14,A.a.svgStringToImage(s);case 14:return u=t.sent,c=r.extendOffsetX>.001,l=r.extendOffsetY>.001,h=c?2:1,p=l?2:1,d=this.scaleToSvgString(r.svg.outerHTML,n.width*i*h,n.height*i*p,i*h,i*p),t.next=22,A.a.svgStringToImage(d);case 22:if(g=t.sent,o.save(),o.translate(-r.left*i,-r.top*i),o.drawImage(u,0,0),c&&o.drawImage(u,r.width*i,0),l&&o.drawImage(u,0,r.height*i),c&&l&&o.drawImage(u,r.width*i,r.height*i),o.restore(),(v=w.a.createCanvas()).width=2*r.width*i,v.height=2*r.height*i,(y=v.getContext("2d")).imageSmoothingEnabled=!1,y.save(),y.translate(-r.left*i*h,-r.top*i*p),y.drawImage(g,0,0,g.width,g.height),y.restore(),m=o.getImageData(0,0,a.width,a.height),E=y.getImageData(0,0,v.width,v.height),m.width===E.width&&m.height===E.height){t.next=43;break}return t.abrupt("return",!1);case 43:k=0,S=a.width-1,I=Math.round(S/2),T=c?[I-1,I,I+1]:[],b=a.height-1,C=Math.round(b/2),x=l?[C-1,C,C+1]:[],R=0;case 51:if(!(R<m.data.length)){t.next=63;break}if(L=R/4%a.width,_=Math.floor(R/4/a.width),!T.includes(L)&&!x.includes(_)){t.next=56;break}return t.abrupt("continue",60);case 56:if(m.data[R]===E.data[R]&&m.data[R+1]===E.data[R+1]&&m.data[R+2]===E.data[R+2]&&m.data[R+3]===E.data[R+3]){t.next=60;break}if(!(++k>m.data.length/4*.008)){t.next=60;break}return t.abrupt("return",!1);case 60:R+=4,t.next=51;break;case 63:return t.abrupt("return",!0);case 66:return t.prev=66,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",!1);case 70:case"end":return t.stop()}},t,this,[[0,66]])})),function(e,t){return l.apply(this,arguments)})},{key:"scaleToSvgString",value:function(e,t,n,r,i){return'<svg shape-rendering="crispEdges" width="'.concat(t,'px" height="').concat(n,'px"><g transform="scale(').concat(r,", ").concat(i,')">').concat(e,"</g></svg>")}},{key:"getKeywordList",value:function(e){var t=[];if(!e)return t;var n=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;t.push(s.keyword)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return t}},{key:"getSvgData",value:(c=v()(f.a.mark(function e(t){var n,r,i,a,o,s,u,c,l,h=arguments;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(h.length>1&&void 0!==h[1]&&h[1]){e.next=28;break}n=!0,r=!1,i=void 0,e.prev=5,a=this._cacheData.values()[Symbol.iterator]();case 7:if(n=(o=a.next()).done){e.next=14;break}if((s=o.value).idx!==t){e.next=11;break}return e.abrupt("return",s);case 11:n=!0,e.next=7;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(5),r=!0,i=e.t0;case 20:e.prev=20,e.prev=21,n||null==a.return||a.return();case 23:if(e.prev=23,!r){e.next=26;break}throw i;case 26:return e.finish(23);case 27:return e.finish(20);case 28:return u="/api/svg/".concat(t),e.prev=29,e.next=32,b.b.get(u);case 32:return c=e.sent,e.next=35,this.parse(c.data);case 35:return l=e.sent,this.setCache(l),e.abrupt("return",l);case 40:if(e.prev=40,e.t1=e.catch(29),404!==e.t1.status){e.next=44;break}return e.abrupt("return",null);case 44:throw new Error("SVG 정보 가져오는 중 에러 발생"+e.t1);case 45:case"end":return e.stop()}},e,this,[[5,16,20,28],[21,,23,27],[29,40]])})),function(e){return c.apply(this,arguments)})},{key:"getSvgDataByKeySync",value:function(e){return this._cacheData.get(e)}},{key:"getSvgDataByKey",value:(u=v()(f.a.mark(function e(t){var n,r,i,a,o,s,u,c;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._cacheData.has(t)){e.next=2;break}return e.abrupt("return",this._cacheData.get(t));case 2:return e.next=4,this.getSvgDataResponse({keyList:[t]});case 4:n=e.sent,r=n.svgDataList,i=!0,a=!1,o=void 0,e.prev=9,s=r[Symbol.iterator]();case 11:if(i=(u=s.next()).done){e.next=18;break}if((c=u.value).key!==t){e.next=15;break}return e.abrupt("return",c);case 15:i=!0,e.next=11;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(9),a=!0,o=e.t0;case 24:e.prev=24,e.prev=25,i||null==s.return||s.return();case 27:if(e.prev=27,!a){e.next=30;break}throw o;case 30:return e.finish(27);case 31:return e.finish(24);case 32:return e.abrupt("return",null);case 33:case"end":return e.stop()}},e,this,[[9,20,24,32],[25,,27,31]])})),function(e){return u.apply(this,arguments)})},{key:"getSvgStickerLink",value:(s=v()(f.a.mark(function e(t){var n,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="/api/svg/link/".concat(t),e.prev=1,e.next=4,b.b.get(n);case 4:return r=e.sent,e.abrupt("return",r.data);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",null);case 11:case"end":return e.stop()}},e,null,[[1,8]])})),function(e){return s.apply(this,arguments)})},{key:"getSvgDataResponse",value:(o=v()(f.a.mark(function e(n){var r,i,a,o,s,u,c,l,h,p,d,g,v,y,m,E,k,I,b,w,A,C,x,R,L,_,P=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Array.isArray(n)){e.next=48;break}for(i=(r=n).slice(),a=!0,o=!1,s=void 0,e.prev=6,u=i[Symbol.iterator]();!(a=(c=u.next()).done);a=!0)l=c.value,this._cacheData.has(l)&&r.splice(r.indexOf(l),1);e.next=14;break;case 10:e.prev=10,e.t0=e.catch(6),o=!0,s=e.t0;case 14:e.prev=14,e.prev=15,a||null==u.return||u.return();case 17:if(e.prev=17,!o){e.next=20;break}throw s;case 20:return e.finish(17);case 21:return e.finish(14);case 22:if(!(r.length>0)){e.next=25;break}return e.next=25,Promise.all(S.a.division(r,t.REQUEST_KEY_MAX_CNT).map(function(e){return P.fetchSvgDataResponseByKeyList(e)}));case 25:for(h=[],p=!0,d=!1,g=void 0,e.prev=29,v=n[Symbol.iterator]();!(p=(y=v.next()).done);p=!0)m=y.value,h.push(this._cacheData.get(m));e.next=37;break;case 33:e.prev=33,e.t1=e.catch(29),d=!0,g=e.t1;case 37:e.prev=37,e.prev=38,p||null==v.return||v.return();case 40:if(e.prev=40,!d){e.next=43;break}throw g;case 43:return e.finish(40);case 44:return e.finish(37);case 45:return e.abrupt("return",{svgDataList:h});case 48:return e.next=50,$.get(T.c.getURL("/api/v1/svg"),$.param(n,!0));case 50:return E=e.sent,k=E.data,I=k.pagination,b=k.list,e.next=56,t.parseSvgs(b);case 56:for(w=e.sent,A=!0,C=!1,x=void 0,e.prev=60,R=w[Symbol.iterator]();!(A=(L=R.next()).done);A=!0)_=L.value,this.setCache(_);e.next=68;break;case 64:e.prev=64,e.t2=e.catch(60),C=!0,x=e.t2;case 68:e.prev=68,e.prev=69,A||null==R.return||R.return();case 71:if(e.prev=71,!C){e.next=74;break}throw x;case 74:return e.finish(71);case 75:return e.finish(68);case 76:return e.abrupt("return",{totalPage:I.totalPage,totalRow:I.totalRow,svgDataList:w});case 77:case"end":return e.stop()}},e,this,[[6,10,14,22],[15,,17,21],[29,33,37,45],[38,,40,44],[60,64,68,76],[69,,71,75]])})),function(e){return o.apply(this,arguments)})},{key:"fetchSvgDataResponseByKeyList",value:(a=v()(f.a.mark(function e(n){var r,i=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.get(T.c.getURL("/api/v1/svg"),$.param({keyList:n,pageSize:n.length},!0));case 2:return r=e.sent,e.next=5,t.parseSvgs(r.data.list);case 5:e.sent.forEach(function(e){return i.setCache(e)});case 7:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)})},{key:"parseSvgs",value:(i=v()(f.a.mark(function e(n){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,r){var i=[],a=!0,o=!1,s=void 0;try{for(var u,c=n[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value;i.push(t.parseSvg(l))}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}Promise.all(i).then(function(t){e(t.filter(function(e){return null!==e}))}).catch(function(e){r(e)})}));case 1:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)})},{key:"parseSvg",value:(r=v()(f.a.mark(function e(n){var r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._cacheData.has(n.key)){e.next=2;break}return e.abrupt("return",this._cacheData.get(n.key));case 2:return e.prev=2,e.next=5,t.parse(n);case 5:return r=e.sent,this.setCache(r),e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0),console.error("svg 데이터 파싱 실패 : ".concat(n.idx));case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}},e,this,[[2,10]])})),function(e){return r.apply(this,arguments)})},{key:"getSvgUpdateData",value:(n=v()(f.a.mark(function e(t){var n,r,i,a,o;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for((n=new FormData).append("idx",String(t.idx)),n.append("type",t.type.value),n.append("status",t.status.value),n.append("width",String(t.width)),n.append("height",String(t.height)),n.append("minWidth",String(t.minWidth)),n.append("minHeight",String(t.minHeight)),n.append("name",t.name),n.append("license",t.license.value),n.append("accountId",String(t.designer.accountId)),this.setKeywordParam(n,t.keywordList),t.svgMemo&&""!==t.svgMemo.trim()&&n.append("svgMemoDto.memo",t.svgMemo.trim()),r=0;r<t.layerList.length;r++)i=t.layerList[r],n.append("layerDtoList[".concat(r,"].layerId"),i.layerId),n.append("layerDtoList[".concat(r,"].idx"),String(i.idx)),n.append("layerDtoList[".concat(r,"].type"),i.type.value),n.append("layerDtoList[".concat(r,"].extendOffsetX"),String(i.extendOffsetX)),n.append("layerDtoList[".concat(r,"].extendOffsetY"),String(i.extendOffsetY)),n.append("layerDtoList[".concat(r,"].moveOffsetX"),String(i.moveOffsetX)),n.append("layerDtoList[".concat(r,"].moveOffsetY"),String(i.moveOffsetY)),n.append("layerDtoList[".concat(r,"].width"),String(i.width)),n.append("layerDtoList[".concat(r,"].height"),String(i.height)),n.append("layerDtoList[".concat(r,"].positionLeft"),String(i.left)),n.append("layerDtoList[".concat(r,"].positionTop"),String(i.top));for(a=0;a<t.colorList.length;a++)o=t.colorList[a],n.append("colorDtoList[".concat(a,"].idx"),String(o.idx)),n.append("colorDtoList[".concat(a,"].color"),o.color),n.append("colorDtoList[".concat(a,"].editable"),String(o.editable));return e.abrupt("return",n);case 16:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"getStickerLinkData",value:function(e,t){var n=new FormData;return n.append("svgMetaIdx",String(e.idx)),n.append("stickerId",t),this.setKeywordParam(n,e.keywordList),n}},{key:"setKeywordParam",value:function(e,t){if(t){var n=0,r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;e.append("keywordList[".concat(n,"].keyword"),u),n++}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}}},{key:"isSimilarTo",value:function(e,t,n){return Math.abs(e-t)<=n}},{key:"isDefaultShapeSvg",value:function(e){if(!e.svg)return!1;var t=e.svg.getElementsByTagName("rect").length+e.svg.getElementsByTagName("circle").length+e.svg.getElementsByTagName("ellipse").length+e.svg.getElementsByTagName("polygon").length+e.svg.getElementsByTagName("path").length,n=Math.pow(10,-2);return e.colorList.length<=1&&1===e.layerList.length&&"NO_PATTERN"===e.layerList[0].type.value&&"FIGURE"===e.type.value&&(this.isSimilarTo(e.layerList[0].extendOffsetX,0,n)||this.isSimilarTo(e.layerList[0].extendOffsetX,1,n))&&(this.isSimilarTo(e.layerList[0].extendOffsetY,0,n)||this.isSimilarTo(e.layerList[0].extendOffsetY,1,n))&&this.isSimilarTo(e.layerList[0].moveOffsetX,0,n)&&this.isSimilarTo(e.layerList[0].moveOffsetY,0,n)&&1===t}},{key:"getFillUrlIds",value:function(e){var t=[];if(e.hasAttribute("fill")){var n=e.getAttribute("fill");if(n.includes("url(#")){var r=n.replace("url(#","").replace(")","").trim();t.push(r)}}var i=!0,a=!1,o=void 0;try{for(var s,u=e.childNodes[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;c instanceof SVGElement&&t.push.apply(t,p()(this.getFillUrlIds(c)))}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}return t}},{key:"isOpacityLowerThanOne",value:function(e){if(e.hasAttribute("opacity")){var t=e.getAttribute("opacity");if(t&&Number(t)<1)return!0}if(e.hasAttribute("style")){var n=e.getAttribute("style").split(";"),r=!0,i=!1,a=void 0;try{for(var o,s=n[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value.split(":"),c=u[0],l=u[1];if("opacity"===c.toLowerCase()&&Number(l)<1)return!0}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}var h=!0,p=!1,d=void 0;try{for(var f,g=e.childNodes[Symbol.iterator]();!(h=(f=g.next()).done);h=!0){var v=f.value;if(v instanceof SVGElement)if(this.isOpacityLowerThanOne(v))return!0}}catch(e){p=!0,d=e}finally{try{h||null==g.return||g.return()}finally{if(p)throw d}}return!1}}]),t}();L.REQUEST_KEY_MAX_CNT=50,L._cacheData=new Map;var _=function(){function e(){m()(this,e),this._layerList=[],this._categoryIdxList=[],this._colorList=[],this.changeCoreData=!1}return k()(e,[{key:"addLayer",value:function(e){this._layerList.push(e)}},{key:"getLayer",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=this._layerList[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(e===o.layerId)return o}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return null}},{key:"addCategory",value:function(e){this._categoryIdxList.some(function(t){return t===e})||this._categoryIdxList.push(e)}},{key:"removeCategory",value:function(e){this._categoryIdxList=this._categoryIdxList.filter(function(t){return t!==e})}},{key:"addColor",value:function(e){this._colorList.push(e)}},{key:"getColorEditable",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=this._colorList[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(e.toLowerCase()===o.color.toLowerCase())return o.editable}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return null}},{key:"isChangedCoreData",value:function(){var e=this.changeCoreData;this.changeCoreData=!1;var t=!1,n=!0,r=!1,i=void 0;try{for(var a,o=this.layerList[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;t=t||s.isChangedCoreData()}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return e||t}},{key:"idx",get:function(){return this._idx},set:function(e){this._idx=e}},{key:"key",get:function(){return this._key},set:function(e){this._key=e}},{key:"width",get:function(){return this._width},set:function(e){this._width=e}},{key:"height",get:function(){return this._height},set:function(e){this._height=e}},{key:"minWidth",get:function(){return this._minWidth},set:function(e){e!==this._minWidth&&(this.changeCoreData=!0),this._minWidth=e}},{key:"minHeight",get:function(){return this._minHeight},set:function(e){e!==this._minHeight&&(this.changeCoreData=!0),this._minHeight=e}},{key:"type",get:function(){return this._type},set:function(e){this._type=e}},{key:"layerList",get:function(){return this._layerList},set:function(e){this._layerList=e.slice()}},{key:"myCollectionIdx",get:function(){return this._myCollectionIdx},set:function(e){this._myCollectionIdx=e}},{key:"svg",get:function(){return this._svg?this._svg.cloneNode(!0):null},set:function(e){this._svg=e}},{key:"thumb",get:function(){return this._thumb},set:function(e){this._thumb=e}},{key:"status",get:function(){return this._status},set:function(e){this._status=e}},{key:"categoryIdxList",get:function(){return this._categoryIdxList},set:function(e){this._categoryIdxList=e}},{key:"colorList",get:function(){return this._colorList},set:function(e){this._colorList=e}},{key:"name",get:function(){return this._name},set:function(e){this._name=e}},{key:"designer",get:function(){return this._designer},set:function(e){this._designer=e}},{key:"license",get:function(){return this._license},set:function(e){this._license=e}},{key:"keywordList",get:function(){return this._keywordList},set:function(e){this._keywordList=e}},{key:"stickerLinkList",get:function(){return this._stickerLinkList},set:function(e){this._stickerLinkList=e}},{key:"svgMemo",get:function(){return this._svgMemo},set:function(e){this._svgMemo=e}},{key:"updateDesigner",get:function(){return this._updateDesigner},set:function(e){this._updateDesigner=e}},{key:"updateDate",get:function(){return this._updateDate},set:function(e){this._updateDate=e}},{key:"createDate",get:function(){return this._createDate},set:function(e){this._createDate=e}},{key:"svgUrl",get:function(){return this._svgUrl},set:function(e){this._svgUrl=e}},{key:"thumbnailUrl",get:function(){return this._thumbnailUrl},set:function(e){this._thumbnailUrl=e}},{key:"isPrivate",get:function(){return this._isPrivate},set:function(e){this._isPrivate=e}}]),e}(),P=function(){function e(){m()(this,e),this.changeCoreData=!1}return k()(e,[{key:"isChangedCoreData",value:function(){var e=this.changeCoreData;return this.changeCoreData=!1,e}},{key:"idx",get:function(){return this._idx},set:function(e){this._idx=e}},{key:"layerId",get:function(){return this._layerId},set:function(e){this._layerId=e}},{key:"width",get:function(){return this._width},set:function(e){this._width=e}},{key:"height",get:function(){return this._height},set:function(e){this._height=e}},{key:"left",get:function(){return this._left},set:function(e){this._left=e}},{key:"top",get:function(){return this._top},set:function(e){this._top=e}},{key:"extendOffsetX",get:function(){return this._extendOffsetX},set:function(e){e!==this._extendOffsetX&&(this.changeCoreData=!0),this._extendOffsetX=e}},{key:"extendOffsetY",get:function(){return this._extendOffsetY},set:function(e){e!==this._extendOffsetY&&(this.changeCoreData=!0),this._extendOffsetY=e}},{key:"moveOffsetX",get:function(){return this._moveOffsetX},set:function(e){e!==this._moveOffsetX&&(this.changeCoreData=!0),this._moveOffsetX=e}},{key:"moveOffsetY",get:function(){return this._moveOffsetY},set:function(e){e!==this._moveOffsetY&&(this.changeCoreData=!0),this._moveOffsetY=e}},{key:"type",get:function(){return this._type},set:function(e){e!==this._type&&(this.changeCoreData=!0),this._type=e}},{key:"svg",get:function(){return this._svg?this._svg.cloneNode(!0):null},set:function(e){this._svg=e}},{key:"layerSvg",get:function(){return this._layerSvg},set:function(e){this._layerSvg=e}}]),e}(),O=function(){function e(){m()(this,e)}return k()(e,[{key:"idx",get:function(){return this._idx},set:function(e){this._idx=e}},{key:"color",get:function(){return this._color},set:function(e){this._color=e}},{key:"editable",get:function(){return this._editable},set:function(e){this._editable=e}}]),e}(),D=function(){function e(t,n){m()(this,e),this._text=t,this._value=n}return k()(e,[{key:"text",get:function(){return this._text}},{key:"value",get:function(){return this._value}}]),e}(),M=function(e){function t(e,n,r){var a;return m()(this,t),(a=i()(this,o()(t).call(this,e,n)))._code=r,t.ALL_VALUE.push(u()(a)),a}return l()(t,e),k()(t,[{key:"code",get:function(){return this._code}}],[{key:"values",value:function(){return this.ALL_VALUE}},{key:"valueOf",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=this.ALL_VALUE[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(o.value===e||o.code===e)return o}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return null}}]),t}(D);M.ALL_VALUE=[],M.UNICORN=new M("유니콘","UNICORN",400),M.SMILECAT=new M("스마일캣","SMILECAT",0),M.GETTY=new M("게티","GETTY",200),M.UTO=new M("유토","UTO",300),M.PIXABAY=new M("픽사베이","PIXABAY",500);var N=function(e){function t(e,n){var r;return m()(this,t),r=i()(this,o()(t).call(this,e,n)),t.ALL_VALUE.push(u()(r)),r}return l()(t,e),k()(t,null,[{key:"values",value:function(){return this.ALL_VALUE}},{key:"valueOf",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=this.ALL_VALUE[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(o.value===e)return o}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return null}}]),t}(D);N.ALL_VALUE=[],N.ACTIVE=new N("공개 (활성)","ACTIVE"),N.INACTIVE=new N("비공개 (활성)","INACTIVE"),N.DISABLED=new N("비활성","DISABLED");var B=function(e){function t(e,n,r){var a;return m()(this,t),(a=i()(this,o()(t).call(this,e,n))).resourceType=r,t.ALL_VALUE.push(u()(a)),a}return l()(t,e),k()(t,[{key:"getResourceType",value:function(){return this.resourceType}}],[{key:"values",value:function(){return this.ALL_VALUE}},{key:"valueOf",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=this.ALL_VALUE[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(o.value===e)return o}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return null}}]),t}(D);B.ALL_VALUE=[],B.GRAPHIC=new B("일반 그래픽","GRAPHIC",C.a.GRAPHIC),B.LINE=new B("선","LINE",C.a.LINE),B.FIGURE=new B("도형","FIGURE",C.a.FIGURE),B.ILLUST=new B("일러스트","ILLUST",C.a.ILLUST),B.BACKGROUND_PATTERN=new B("단색/패턴형 배경","BACKGROUND_PATTERN",C.a.BACKGROUND_PATTERN),B.BACKGROUND_IMAGE=new B("이미지형 배경","BACKGROUND_IMAGE",C.a.BACKGROUND_IMAGE);var U=function(e){function t(e,n){var r;return m()(this,t),r=i()(this,o()(t).call(this,e,n)),t.ALL_VALUE.push(u()(r)),r}return l()(t,e),k()(t,null,[{key:"values",value:function(){return this.ALL_VALUE}},{key:"valueOf",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=this.ALL_VALUE[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(o.value===e)return o}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return null}}]),t}(D);U.ALL_VALUE=[],U.NO_PATTERN=new U("기본","NO_PATTERN"),U.LAYER_PATTERN=new U("부분 패턴/확장","LAYER_PATTERN"),U.SVG_PATTERN=new U("전체 패턴/확장","SVG_PATTERN")}).call(this,n(291))},,function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(90),u=n(258),c=function(){function e(){i()(this,e)}return o()(e,null,[{key:"getPointByDistanceAngle",value:function(e,t){var n=u.a.getRadianByDegree(t),r=e*Math.cos(n),i=e*Math.sin(n);return new s.a(r,i)}},{key:"transformation",value:function(e,t,n){var r=(e.x-t.x)*Math.cos(n)-(e.y-t.y)*Math.sin(n)+t.x,i=(e.x-t.x)*Math.sin(n)+(e.y-t.y)*Math.cos(n)+t.y;return new s.a(r,i)}},{key:"calcLocationByRotate",value:function(t,n,r){return e.calcLocationByRotate2(t.x,t.y,n.x,n.y,r)}},{key:"calcLocationByRotate2",value:function(e,t,n,r,i){var a=Math.sqrt(Math.pow(e-n,2)+Math.pow(t-r,2)),o=Math.atan2(t-r,e-n);return new s.a(Math.cos(o+i*Math.PI/180)*a+n,Math.sin(o+i*Math.PI/180)*a+r)}},{key:"getRotatedPoint",value:function(e,t,n){if(0===n)return e;var r=e.x,i=e.y,a=t.x,o=t.y,u=Math.sqrt(Math.pow(r-a,2)+Math.pow(i-o,2)),c=Math.atan2(i-o,r-a);return new s.a(Math.cos(c+n*Math.PI/180)*u+a,Math.sin(c+n*Math.PI/180)*u+o)}},{key:"getRotatedVectorByPoint",value:function(e,t,n){return new s.a(e.x+(t.x-e.x)*Math.cos(n)-(t.y-e.y)*Math.sin(n),e.y+(t.x-e.x)*Math.sin(n)+(t.y-e.y)*Math.cos(n))}},{key:"lineSegIntersect",value:function(e,t,n,r){var i=e.x,a=e.y,o=t.x,s=t.y,u=n.x,c=n.y,l=r.x,h=r.y,p=((l-u)*(a-c)-(h-c)*(i-u))/((h-c)*(o-i)-(l-u)*(s-a)),d=((o-i)*(a-c)-(s-a)*(i-u))/((h-c)*(o-i)-(l-u)*(s-a));return p>0&&p<1&&d>0&&d<1}},{key:"sementIntersection",value:function(e,t,n,r){if(e.equalsTo(t)||n.equalsTo(r))return!1;var i=e,a=t,o=n,u=r,c=s.a.ccwFromPoint,l=c(i,a,o)*c(i,a,u),h=c(o,u,i)*c(o,u,a);if(0===l&&0===h){if(a.x<i.x&&a.y<i.y){var p=a;a=i,i=p}if(u.x<o.x&&u.y<o.y){var d=u;u=o,o=d}return!(a<=o||u<=i)}return l<=0&&h<=0}},{key:"getDistanceBetweenTwoPoints",value:function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}}]),e}()},function(e,t,n){"use strict";var r;n.d(t,"a",function(){return r}),function(e){e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink"}(r||(r={}))},,function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r,i=n(0),a=n.n(i),o=n(1),s=n.n(o),u=n(410),c=function(){function e(){a()(this,e)}return s()(e,null,[{key:"validateChildSvgElement",value:function(e){if(!e||!e.childNodes)return!1;var t=!0,n=!1,r=void 0;try{for(var i,a=e.childNodes[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(u.a.isSVGElement(o)){if(this.SVG_NOT_RENDERING_DATA_NODE_NAME.indexOf(o.nodeName)<0)return!0;if(this.validateChildSvgElement(o))return!0}}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return!1}},{key:"validateNewChildSvgElement",value:function(e){if(!u.a.isSVGElement(e)&&void 0!==e.nodeName&&null!==e.nodeName)return!1;if(this.SVG_RENDERING_DATA_NODE_NAME.indexOf(e.nodeName.toLowerCase())>=0)return!0;var t=!0,n=!1,r=void 0;try{for(var i,a=e.childNodes[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(this.validateNewChildSvgElement(o))return!0}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return!1}},{key:"validateNewSvgElement",value:function(e){return this.validateNewChildSvgElement(e)}},{key:"validateSvgElement",value:function(e){return!!u.a.isSVGElement(e)&&(this.SVG_NOT_RENDERING_DATA_NODE_NAME.indexOf(e.nodeName)<0||this.validateChildSvgElement(e))}},{key:"isUnicornSvgElement",value:function(e){var t=e.getAttributeNode("isInit");return!!t&&Boolean(t.value)}},{key:"markInitTag",value:function(e){e.setAttribute("isInit","true");var t=!0,n=!1,r=void 0;try{for(var i,a=e.childNodes[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;u.a.isSVGElement(o)&&this.markInitTag(o)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"makeUnicornSvgElement",value:function(e,t){e&&(this.isUnicornSvgElement(e)||(u.a.appendKeyToId(e,t),u.a.initElementFillColor(e),u.a.initSvgImageElement(e),u.a.initSize(e),u.a.optimizeSvgElement(e),this.markInitTag(e)))}},{key:"getOriginFillColors",value:function(e){this.makeUnicornSvgElement(e);var t=u.a.getOriginColorSet(e);return Array.from(t)}},{key:"getOriginStrokeColors",value:function(e){return null}},{key:"getFillColorByOriginColor",value:function(e,t){this.makeUnicornSvgElement(e);var n=e.attributes.getNamedItem("fill"),r=e.attributes.getNamedItem("origin_fill");if(r&&r.value.toLowerCase()===t.toLowerCase()&&n)return"none"===n.value.toLowerCase()?"#00000000":String(n.value);var i=!0,a=!1,o=void 0;try{for(var s,u=e.childNodes[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;if(c.attributes){var l=this.getFillColorByOriginColor(c,t);if(l&&"none"!==l)return l}}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}return null}},{key:"setFillColorByOriginColorRecursive",value:function(e,t,n){var r=e.attributes.getNamedItem("fill"),i=e.attributes.getNamedItem("origin_fill");i&&i.value.toLowerCase()===t&&r&&r.value.toLowerCase()!==n&&e.setAttribute("fill",n);var a=!0,o=!1,s=void 0;try{for(var c,l=e.childNodes[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var h=c.value;u.a.isSVGElement(h)&&this.setFillColorByOriginColorRecursive(h,t,n)}}catch(e){o=!0,s=e}finally{try{a||null==l.return||l.return()}finally{if(o)throw s}}}},{key:"setFillColorByOriginColor",value:function(e,t,n){this.setFillColorByOriginColorRecursive(e,t.toLowerCase(),n.toLowerCase())}},{key:"getFirstElementByOriginColor",value:function(e,t){this.makeUnicornSvgElement(e);var n=e.attributes.getNamedItem("origin_fill");if(n&&n.value.toLowerCase()===t.toLowerCase())return e;var r=!0,i=!1,a=void 0;try{for(var o,s=e.childNodes[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var c=o.value;if(u.a.isSVGElement(c)){var l=this.getFirstElementByOriginColor(c,t);if(l)return l}}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return null}},{key:"getParentElement",value:function(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=e.childNodes[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(s===t)return e;var u=this.getParentElement(s,t);if(u)return u}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return null}},{key:"removeBeforeTargetElement",value:function(e,t,n){e===t&&(n.isSearched=!0);var r=e.nodeName.toLowerCase();if("rect"!==r&&"circle"!==r&&"ellipse"!==r&&"polygon"!==r&&"path"!==r||n.isSearched&&e!==t){if("defs"!==r){var i=!0,a=!1,o=void 0;try{for(var s,u=e.childNodes[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;c instanceof SVGElement&&this.removeBeforeTargetElement(c,t,n)}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}}}else e.parentElement.removeChild(e)}},{key:"getImageframeAfterPhotoAreaElement",value:function(t,n){if(!n)return null;var r=t.cloneNode(!0),i=e.getFirstElementByOriginColor(r,n);return i?(this.removeBeforeTargetElement(r,i,{isSearched:!1}),r):null}},{key:"removeAfterTargetElement",value:function(e,t,n){e===t&&(n.isSearched=!0);var r=e.nodeName.toLowerCase();if("rect"!==r&&"circle"!==r&&"ellipse"!==r&&"polygon"!==r&&"path"!==r||!n.isSearched){if("defs"!==r){var i=!0,a=!1,o=void 0;try{for(var s,u=e.childNodes[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;c instanceof SVGElement&&this.removeAfterTargetElement(c,t,n)}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}}}else e.parentElement.removeChild(e)}},{key:"getImageframeBeforePhotoAreaElement",value:function(t,n){if(!n)return null;var r=t.cloneNode(!0),i=e.getFirstElementByOriginColor(r,n);return i?(this.removeAfterTargetElement(r,i,{isSearched:!1}),r):null}},{key:"removeExceptTargetElement",value:function(e,t){var n=e.nodeName.toLowerCase();if("rect"!==n&&"circle"!==n&&"ellipse"!==n&&"polygon"!==n&&"path"!==n||e===t){if("defs"!==n){var r=!0,i=!1,a=void 0;try{for(var o,s=e.childNodes[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;u instanceof SVGElement&&this.removeExceptTargetElement(u,t)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}}else e.parentElement.removeChild(e)}},{key:"getImageframePhotoAreaElement",value:function(t,n){if(!n)return null;var r=t.cloneNode(!0),i=e.getFirstElementByOriginColor(r,n);return i?(this.removeExceptTargetElement(r,i),r):null}},{key:"getImageframeMaskRect",value:function(t,n){var r=t.cloneNode(!0);document.body.appendChild(r);try{return e.getFirstElementByOriginColor(r,n).getBoundingClientRect()}finally{document.body.removeChild(r)}}}]),e}();c.SVG_NOT_RENDERING_DATA_NODE_NAME=["g","svg"],c.SVG_RENDERING_DATA_NODE_NAME=["rect","circle","ellipse","polygon","path","polyline","lineargradient","radialgradient"],function(e){e.SOLID="SOLID",e.DASH="DASH"}(r||(r={}))},function(e,t,n){"use strict";var r,i,a,o,s,u;n.d(t,"b",function(){return r}),n.d(t,"a",function(){return i}),n.d(t,"f",function(){return a}),n.d(t,"e",function(){return o}),n.d(t,"c",function(){return s}),n.d(t,"d",function(){return u}),function(e){e.MIRICANVAS="MIRICANVAS",e.BIZHOWS="BIZHOWS",e.SMILECAT="SMILECAT"}(r||(r={})),function(e){e.NEW="NEW",e.UPDATE="UPDATE"}(i||(i={})),function(e){e.ORDER="ORDER",e.DESIGN="DESIGN"}(a||(a={})),function(e){e.ALL="*",e.EVEN="EVEN",e.ODD="ODD"}(o||(o={})),function(e){e.LEFT_TOP="LEFT_TOP",e.LEFT_BOTTOM="LEFT_BOTTOM",e.RIGHT_TOP="RIGHT_TOP",e.RIGHT_BOTTOM="RIGHT_BOTTOM"}(s||(s={})),function(e){e.HORIZONTAL="HORIZONTAL",e.VERTICAL="VERTICAL"}(u||(u={}))},,function(e,t,n){"use strict";var r=n(2),i=n.n(r),a=n(4),o=n.n(a),s=n(0),u=n.n(s),c=n(1),l=n.n(c),h=n(351),p=function(){function e(){u()(this,e),this.changedDesign=!1,this.designDocListeners=new Set}var t;return l()(e,[{key:"getDesignDoc",value:function(){return this.designDoc}},{key:"setDesignDoc",value:function(e){this.designDoc=e}},{key:"fetchDesignDocResource",value:(t=o()(i.a.mark(function e(){var t=this;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.designDocListeners.forEach(function(e){return e.onDesignDocResourceFetchStart(t.designDoc)}),e.prev=1,e.next=4,h.a.loadDesignMetaResource(this.designDoc);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.error(e.t0);case 9:this.designDocListeners.forEach(function(e){return e.onDesignDocResourceFetchEnd(t.designDoc)});case 10:case"end":return e.stop()}},e,this,[[1,6]])})),function(){return t.apply(this,arguments)})},{key:"addDesignDocListener",value:function(e){this.designDocListeners.add(e)}},{key:"setDesignSize",value:function(e){this.designDocListeners.forEach(function(t){return t.onChangeDesignSize(e)})}},{key:"checkIncludePhotoItem",value:function(){return!!this.designDoc&&this.designDoc.hasPhotoItem()}},{key:"getPageCount",value:function(){return this.designDoc?this.designDoc.getPageCount():0}},{key:"getPageByIndex",value:function(e){return this.designDoc?this.designDoc.getPageByIndex(e):void 0}},{key:"hasSkinCompatibilityFailurePage",value:function(){return!!this.designDoc&&this.designDoc.hasSkinCompatibilityFailurePage()}}]),e}();t.a=new p},function(e,t,n){"use strict";var r=n(2),i=n.n(r),a=n(4),o=n.n(a),s=n(0),u=n.n(s),c=n(1),l=n.n(c),h=n(10),p=n(94),d=n(68),f=n(284),g=n(69),v=n(91),y=n(465),m=n(11),E=n(20),k=n(21),S=n(12),I=n(100),T=n(391),b=n(307),w=n(344),A=n(229),C=n(224),x=n(6),R=n.n(x),L=n(3),_=n.n(L),P=n(7),O=n.n(P),D=n(232),M=n(74),N=function(e){function t(){var e;return u()(this,t),(e=R()(this,_()(t).call(this))).actionType=C.a.ONE_TIME,e.doSaveQueue=!1,e.renderAuto=!1,e.changeDesign=function(){return!1},e.commitAction=function(){var e=o()(i.a.mark(function e(t,n,r){var a,o,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.pages[0],300,e.next=4,a.renderThumbnailByMaximumSize(300);case 4:o=e.sent,(s=r.leftPanelMainVC.getPanel(D.b.DESIGN_LIB))&&s.updateListItemThumbnail(M.a.get().getIdx(),o);case 7:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),e.rollbackAction=function(){},e.recycle=function(){},e}return O()(t,e),t}(C.b),B=n(295),U=n(226),G=n(345),F=n(471),H=n(362),V=n(227),z=function(){function e(){u()(this,e)}return l()(e,null,[{key:"copyUnicornDesignDataFromUnicornDesignBean",value:function(e,t){e.idx=t.idx,e.title=t.title,e.status=t.status,e.accountId=t.accountId,e.accountName=t.accountName,e.priority=t.priority,e.revisionIdx=t.revisionIdx,e.createDate=t.createDate,e.updateDate=t.updateDate,e.categoryIdx=t.categoryIdx,e.pageList=t.pageList,e.templateType=t.templateType,e.sizeOption=t.sizeOption}}]),e}(),W=n(390),K=n(63),X=n(9),Y=n.n(X),Z=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.DEFAULT_SUB_MESSAGE;return u()(this,t),(n=R()(this,_()(t).call(this))).title=e,n.message=r,n.makeBtnClose=!1,n}return O()(t,e),l()(t,[{key:"getContents",value:function(){return this.onCreateView(),this.addExtraEventListener(),this.wrapper}},{key:"getId",value:function(){return"error_popup"}},{key:"updateUI",value:function(){}},{key:"isPreventBackgroundCloseEvent",value:function(){return!0}},{key:"isCenterPositionWhenMobileMode",value:function(){return!0}},{key:"open",value:function(e){return document.getElementById(this.getId())?this:Y()(_()(t.prototype),"open",this).call(this,e)}},{key:"onCreateView",value:function(){var e=this.wrapper=this.createDivElement("content_wrapper");e.appendChild(this.makeXButtonWrapper()),e.appendChild(this.makeContentWrapperElement()),e.appendChild(this.makeButtonWrapperElement())}},{key:"addExtraEventListener",value:function(){var e=this,t=function(t){t.target!==e.element||e.characterAnimationTimeoutId||(e.contentsWrap.classList.add("animation"),e.characterAnimationTimeoutId=window.setTimeout(function(){e.contentsWrap.classList.remove("animation"),e.characterAnimationTimeoutId=null},500))};this.element.addEventListener("click",function(e){return t(e)}),this.element.addEventListener("touchstart",function(e){return t(e)})}},{key:"makeContentWrapperElement",value:function(){var e=this.createDivElement("content_body"),t=this.createDivElement("error_character");return e.appendChild(t),e.appendChild(this.makeMessageBoxElement()),e}},{key:"makeMessageBoxElement",value:function(){var e=this.createDivElement("message_box"),t=document.createElement("label");t.innerText=this.title,t.className="title",e.appendChild(t);var n=document.createElement("label");return n.innerHTML=this.message,n.className="message",e.appendChild(n),e}},{key:"makeButtonWrapperElement",value:function(){var e=this,t=this.createDivElement("content_footer"),n=document.createElement("button");return n.className="close_button",n.innerText="확인",n.addEventListener("click",function(){return e.close()}),t.appendChild(n),t}},{key:"makeXButtonWrapper",value:function(){var e=this,t=this.createDivElement("x_button_wrap");return Object(h.setToolsIcon)(t,h.ToolsIcon.CLOSE,!0,"right").addEventListener("click",function(){return e.close()}),t}}]),t}(n(33).a);Z.DEFAULT_SUB_MESSAGE="잠시 후 다시 시도해주세요.";var j=Z,q=n(393),Q=n(287),$=n(472),J=n(271),ee=n(425),te=n(473),ne=n(25),re=n(45),ie=function(e){function t(e,n,r,i){var a;return u()(this,t),(a=R()(this,_()(t).call(this,e,n))).errorMessage=r,a.onlyZendeskMessage=i,a}return O()(t,e),l()(t,[{key:"makeContentWrapperElement",value:function(){var e=this.createDivElement("content_body");return e.appendChild(this.makeMessageWrapperElement()),e}},{key:"makeButtonWrapperElement",value:function(){var e=this,t=document.createElement("button");t.className="require_button",t.innerText="내용 복사 및 1:1 문의하기",t.addEventListener("click",function(){return re.a.show(!0,ne.a.ERROR,ne.b.RB,"------- 오류 정보 -------\n".concat(e.errorMessage,"\n").concat(e.onlyZendeskMessage))});var n=this.createDivElement("content_footer");return n.appendChild(t),n}},{key:"makeMessageWrapperElement",value:function(){var e=this.createDivElement("message_box"),t=document.createElement("label");t.innerText=this.title,t.className="title",e.appendChild(t);var n=document.createElement("label");n.innerHTML=this.message,n.className="info_message",e.appendChild(n);var r=document.createElement("label");return r.innerText=this.errorMessage,r.className="sub_message",e.appendChild(r),e}}]),t}(j),ae=n(270),oe=n(394),se=n(293),ue=n(38),ce=n(252),le=n(308),he=n(225),pe=function(){function e(){u()(this,e),this._isBlankSave=!1,this.saveLoadOption={copyWithCurrentTask:!0}}var t,n,r,a,s,c,x,R,L,_,P,O,X,Y,Z,ne,re;return l()(e,[{key:"saveQueuedLastSave",value:(re=o()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==this.queuedLastSaveOption){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.save(this.queuedLastSaveOption);case 4:case"end":return e.stop()}},e,this)})),function(){return re.apply(this,arguments)})},{key:"saveLatest",value:(ne=o()(i.a.mark(function e(t){var n=this;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=o()(i.a.mark(function e(r,a){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!J.a.isSaving()){e.next=5;break}J.a.addCallbackAfterSave(o()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.save(t);case 3:r(),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0),a(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,6]])}))),e.next=8;break;case 5:return e.next=7,n.save(t);case 7:r();case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),a(e.t0);case 14:case"end":return e.stop()}},e,null,[[0,10]])}));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)})),function(e){return ne.apply(this,arguments)})},{key:"saveAuto",value:function(t){var n=this;t&&t.changeDesign()&&J.a.changeStatus(q.a.SAVE_REQUIRE),S.a.getUser().isLogin()&&V.a.getUserSetting().isAutoSave&&(this.autoSaveAction?T.a.check(b.b.SAVE,function(){n.autoSaveAction.setExecCallBack(!0),n.autoSaveAction.resetExecCallBack()},function(){return J.a.changeStatus(q.a.SAVE_FAILED)}):this.autoSaveAction=new G.a(e.AUTO_SAVE_TERM,o()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return J.a.changeStatus(q.a.SAVE_REQUIRE),e.prev=1,e.next=4,n.save({categoryIdx:Q.a.getSaveCategoryIdx(),isAutoSaved:!0});case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),J.a.changeStatus(q.a.SAVE_REQUIRE),console.error(e.t0);case 10:n.autoSaveAction.setExecCallBack(!1);case 11:case"end":return e.stop()}},e,null,[[1,6]])}))))}},{key:"setTitle",value:(Z=o()(i.a.mark(function e(t,n){var r,a,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((r=M.a.get()).getTitle()!==t){e.next=3;break}return e.abrupt("return");case 3:if(r.title=t,ae.b.setDesignInfo(r),r.isLoaded()&&!J.a.isSaveRequire()){e.next=10;break}return e.next=8,this.save({categoryIdx:Q.a.getSaveCategoryIdx(),rollbackTitle:n});case 8:e.next=23;break;case 10:return a={title:t,createDateOffset:((new Date).getTime()-window.loadedTime)/1e3,repo:A.a.getEditorOpenOption().getDesignRepositoryType(),extraData:void 0,designMode:A.a.getEditorOpenOption().getDesignMode()},W.a.stringifyExtraData(a),e.prev=12,e.next=15,W.a.update(r.getIdx(),{clientParam:A.a.getEditorOpenOption().getCallbackParam(),saveParam:a});case 15:o=e.sent,e.next=21;break;case 18:throw e.prev=18,e.t0=e.catch(12),new k.c(K.a.FAIL_TO_USING_UPDATE_API,"디자인(title) 수정하는 api 에서 오류 발생 : ".concat(e.t0.message),e.t0);case 21:window.loadedTime=(new Date).getTime(),void 0!==H.a.getDesignProject()&&H.a.updateDesignData(o);case 23:case"end":return e.stop()}},e,this,[[12,18]])})),function(e,t){return Z.apply(this,arguments)})},{key:"forceToSave",value:(Y=o()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return J.a.changeStatus(q.a.SAVE_REQUIRE),e.next=3,this.save({categoryIdx:Q.a.getSaveCategoryIdx()});case 3:case"end":return e.stop()}},e,this)})),function(){return Y.apply(this,arguments)})},{key:"save",value:(X=o()(i.a.mark(function e(t){var n=this;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.isReadyToSave()){e.next=4;break}return J.a.getSaveStatus()===q.a.SAVE_WAIT&&(this.queuedLastSaveOption=t),e.abrupt("return",J.a.getSaveStatus());case 4:this.autoSaveAction&&this.autoSaveAction.setExecCallBack(!1),e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(0),this.showErrorPopup(J.a.getSaveStatus(),e.t0),e.t0;case 11:return e.abrupt("return",new Promise(function(){var e=o()(i.a.mark(function e(r,a){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:T.a.check(b.b.SAVE,o()(i.a.mark(function e(){var s,u,c,l,h,p,g,v,y;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,s=m.b.random(15),u=he.a.instance.getLastAction(),c=M.a.get().getIdx(),t.isCreateToCart||0===c){e.next=28;break}return J.a.start(s),e.next=8,n.checkDesignEditable(c);case 8:if(!e.sent){e.next=26;break}return l=M.a.get().getLatestDesignHistoryIdx(),e.next=12,n.checkDesignUpdatable(c,l);case 12:if(!(h=e.sent).updatable){e.next=19;break}return e.next=16,n.update(t);case 16:n.completeSave(u,s),e.next=24;break;case 19:J.a.reset(),U.a.isCropMode()&&he.a.instance.dispatch(new B.d),p="".concat(h.currentEditor,"님이 <span>").concat(d.a.toFormattedString(new Date(h.createdDate)),"</span>에 마지막으로 저장했습니다.")+" 동시 편집할 경우 작업 내역이 저장되지 않을 수 있습니다.",g=n.getAdditionalWrap(t),f.a.open({title:"디자인을 저장할 수 없습니다.",subTitle:"",subTitleHTML:p,additionalWrap:g,txtConfirmBtn:"최신 버전 불러오기",confirmAction:function(){var e=o()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ae.b.load(c);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),F.a.open("디자인을 여는 도중 문제가 발생하였습니다","확인",void 0),e.abrupt("return");case 9:case"end":return e.stop()}},e,null,[[0,5]])}));return function(){return e.apply(this,arguments)}}()});case 24:return r(J.a.getSaveStatus()),e.abrupt("return");case 26:e.next=33;break;case 28:if(!A.a.getPopupOption().setDesignTitlePopup||t.isCreateToCart||t.isUpdateToCart){e.next=33;break}return v=function(){var e=o()(i.a.mark(function e(o){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,J.a.start(s),t.title=o,e.next=5,n.create(t);case 5:n.completeSave(u,s),r(J.a.getSaveStatus()),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),n.processSaveError(e.t0,t),a(e.t0);case 13:case"end":return e.stop()}},e,null,[[0,9]])}));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=t.rollbackTitle||M.a.get().getTitle();n.setDocumentTitle(e),M.a.get().title=e},n.showSetDesignTitlePopup(t.title||M.a.get().getTitle(),v,y),e.abrupt("return");case 33:return J.a.start(s),e.next=36,n.create(t);case 36:n.completeSave(u,s),r(J.a.getSaveStatus()),e.next=44;break;case 40:e.prev=40,e.t0=e.catch(0),n.processSaveError(e.t0,t),a(e.t0);case 44:case"end":return e.stop()}},e,null,[[0,40]])})));case 1:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()));case 12:case"end":return e.stop()}},e,this,[[0,7]])})),function(e){return X.apply(this,arguments)})},{key:"processSaveError",value:function(e,t){var n=J.a.getSaveStatus();J.a.reset();var r=S.a.getUser(),i=k.c.getUnicornApiError(e);r.isLogin()&&i&&i.isTeamPermissionDenied()?new y.a(r.getEmail(),r.getName()).open():!r.isLogin()||i&&i.isUnauthorized()?this.retrySaveAfterLogin(t):this.showErrorPopup(n,e)}},{key:"isSaved",value:function(){var e=he.a.instance.getLastAction();return e?e.isLastSavedAction:this._isBlankSave}},{key:"makeSaveParam",value:(O=o()(i.a.mark(function e(t){var n,r,a,o,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n="".concat(t.title||M.a.get().getTitle()).concat(t.titleSuffix||""),r=t.categoryIdx,a=JSON.stringify(t.pageSize||U.a.instance.option.pageSize),o=U.a.instance.launcherOption,s={title:n,categoryIdx:r,sizeOption:a,extraData:{version:U.a.instance.version,launcherParam:null!=o?o.launcherParam:void 0},designMode:A.a.getEditorOpenOption().getDesignMode(),templateTypeId:t.designDoc.templateType?t.designDoc.templateType.id:"custom_size",createDateOffset:((new Date).getTime()-window.loadedTime)/1e3,repo:A.a.getEditorOpenOption().getDesignRepositoryType(),autoSaved:t.autoSaved},window.loadedTime=(new Date).getTime(),e.next=9,this.makePageParamList(t.designDoc,!0);case 9:return s.pageParamList=e.sent,e.abrupt("return",s);case 13:throw e.prev=13,e.t0=e.catch(0),new k.c(K.a.FAIL_TO_CREATE_PARAMETER,"저장 파라미터 만들다가 오류 발생",e.t0);case 16:case"end":return e.stop()}},e,this,[[0,13]])})),function(e){return O.apply(this,arguments)})},{key:"makePageParamList",value:(P=o()(i.a.mark(function e(t){var n,r,a,o,s,u,c,l,h=arguments;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=h.length>1&&void 0!==h[1]&&h[1],r=[],a=!0,o=!1,s=void 0,e.prev=5,u=t.pages[Symbol.iterator]();case 7:if(a=(c=u.next()).done){e.next=17;break}return l=c.value,e.t0=r,e.next=12,oe.a.makePageParam(l,se.a.getLatestVersion(),n);case 12:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 14:a=!0,e.next=7;break;case 17:e.next=23;break;case 19:e.prev=19,e.t2=e.catch(5),o=!0,s=e.t2;case 23:e.prev=23,e.prev=24,a||null==u.return||u.return();case 26:if(e.prev=26,!o){e.next=29;break}throw s;case 29:return e.finish(26);case 30:return e.finish(23);case 31:return e.abrupt("return",r);case 32:case"end":return e.stop()}},e,null,[[5,19,23,31],[24,,26,30]])})),function(e){return P.apply(this,arguments)})},{key:"completeSave",value:function(e,t){J.a.getSaveStatus()===q.a.SAVE_REQUEST&&J.a.changeStatus(q.a.SAVE_COMPLETE),he.a.instance.setLastSavedAction(e),this._isBlankSave=!Boolean(e),J.a.executeCallbacks(t)}},{key:"showErrorPopup",value:function(e,t){if((new te.a).getSaveFailedDesignDoc(M.a.get().getIdx(),M.a.get().getLatestDesignHistoryIdx()).isValid())new j("오류가 발생하였습니다.",'이용 중 불편을 드려 죄송합니다.\n<a href=".">새로 고침(F5)</a> 후 다시 한번 시도해주세요.\n만약 문제가 계속 발생한다면 1:1문의로 알려주세요.').open();else{var n="오류가 발생하였습니다.",r="이용 중 불편을 드려 죄송합니다.\n문제 해결을 위해 아래의 내용을 1:1 문의로 알려주세요.",i="",a=k.c.getUnicornApiError(t);a&&(a.isNetworkError()&&(n="인터넷 연결이 끊어졌어요.",r="네트워크를 확인해 주세요.\n만약 네트워크가 연결되었는데 이 메세지가 계속 보인다면 1:1 문의로 알려주세요."),i=a.toString()),new ie(n,r,"상태 : ".concat(q.a.getMessageFrom(e),"\n")+"에러 코드 : ".concat(k.c.getErrorCode(t),"\n")+"세부 내용 : ".concat(k.c.getHierarchicalErrorMessages(t)),"발생 시점 : ".concat(d.a.toString(new Date),"\n")+"".concat(i," ---\x3e ").concat(k.c.getRootError(t).stack)).open()}}},{key:"showSetDesignTitlePopup",value:function(e,t,n){(new p.b).setTitle("디자인 저장하기").setSubtitle("아래의 제목으로 디자인을 저장할까요?").setDefaultText(e).setOnEnterKeyDown(t).addButton("취소",n,!0,ue.b.DEFAULT,1).addButton("저장하기",t,!0,ue.b.PRIMARY,2,!0).activateXCloseButton().activateShowingUpFromBottomOnMobile().show()}},{key:"retrySaveAfterLogin",value:function(e){var t=this,n=S.a.getUser().accountId;g.a.open(v.a.SAVE,function(){S.a.getUser().accountId!==n?location.reload():t.save(e)})}},{key:"createToCart",value:(_=o()(i.a.mark(function e(t,n){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=o()(i.a.mark(function e(r,a){var s,u;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=M.a.get().getIdx(),e.prev=2,e.next=5,W.a.createToBizhowsCart(s,t,S.a.getUser().accountId);case 5:u=e.sent,e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(2),new k.c(K.a.FAIL_TO_BIZHOWS_TO_CART_API,"비즈하우스 장바구니에 추가하는 api 에서 오류 발생 : ".concat(e.t0.message),e.t0);case 11:u&&n&&n(),he.a.instance.dispatch(new C.c(function(){var e=o()(i.a.mark(function e(t,n,r){var a,o,s,c,l,h;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=u.original,o=Object.assign({},u.copied),z.copyUnicornDesignDataFromUnicornDesignBean(o,a),s=300,c=0;case 5:if(!(c<t.pages.length)){e.next=14;break}return e.next=8,t.pages[c].renderThumbnailByMaximumSize(s);case 8:l=e.sent,o.pageList[c].thumb300Url=l,u.copied.pageList[c].thumb300Url=l;case 11:c++,e.next=5;break;case 14:(h=r.leftPanelMainVC.getPanel(D.b.DESIGN_LIB))&&(h.addDesignListItem(o),h.addDesignListItem(u.copied));case 16:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}())),r(u.original),e.next=19;break;case 16:e.prev=16,e.t1=e.catch(0),a(new k.c(K.a.FAIL_TO_BIZHOWS_TO_CART,"장바구니에 추가하다가 에러 발생",e.t1));case 19:case"end":return e.stop()}},e,null,[[0,16],[2,8]])}));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)})),function(e,t){return _.apply(this,arguments)})},{key:"updateToCart",value:(L=o()(i.a.mark(function e(t,n){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=o()(i.a.mark(function e(r,a){var o,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=M.a.get().getIdx(),e.prev=2,e.next=5,W.a.updateToBizhowsCart(o,t,S.a.getUser().accountId);case 5:s=e.sent,e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(2),new k.c(K.a.FAIL_TO_BIZHOWS_UPDATE_API,"비즈하우스 장바구니에 있는 디자인 수정하는 api 에서 오류 발생 : ".concat(e.t0.message),e.t0);case 11:n&&n(),r(s),e.next=18;break;case 15:e.prev=15,e.t1=e.catch(0),a(e.t1);case 18:case"end":return e.stop()}},e,null,[[0,15],[2,8]])}));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)})),function(e,t){return L.apply(this,arguments)})},{key:"renderCopyWithCurrentTask",value:function(e){var t=document.createElement("div");t.className="additional_wrap_copy",Object(h.setToolsIcon)(t,h.ToolsIcon.COPY);var n=document.createElement("span");return n.innerText="현재 작업으로 사본 만들기",t.appendChild(n),n.addEventListener("click",function(){e()}),t}},{key:"checkDesignEditable",value:(R=o()(i.a.mark(function e(t){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t){e.next=2;break}return e.abrupt("return",!1);case 2:return n="/api/design/check-editable/{designIdx}".replace("{designIdx}",String(t)),e.next=5,this.retryIfNetworkError(o()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.b.get(n);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}},e)}))).catch(function(e){throw new k.c(K.a.FAIL_TO_CHECK_EDITABLE_API,"디자인 편집 권한 확인 중 오류 발생",e)});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)})),function(e){return R.apply(this,arguments)})},{key:"checkDesignUpdatable",value:(x=o()(i.a.mark(function e(t,n){var r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r="/api/design/check-updatable/{designIdx}/{historyIdx}".replace("{designIdx}",String(t)).replace("{historyIdx}",String(n)),e.next=3,this.retryIfNetworkError(o()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.b.get(r);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}},e)}))).catch(function(e){throw new k.c(K.a.FAIL_TO_CHECK_UPDATABLE_API,"디자인 수정 가능 확인 중 오류 발생",e)});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)})),function(e,t){return x.apply(this,arguments)})},{key:"create",value:(c=o()(i.a.mark(function e(t){var n=this;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,r){he.a.instance.dispatch(new C.c(function(){var a=o()(i.a.mark(function a(o,s,u){var c,l;return i.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,n.makeSaveParamPackage(o,t);case 3:return c=i.sent,i.next=6,n.createDesign(c,t);case 6:l=i.sent,w.a.setDesignIdx(l?I.a.encodeIdx(l.idx):null),ae.b.setDesignInfo(new M.a({idx:l.idx,title:l.title,accountId:l.accountId,latestDesignHistoryIdx:l.latestDesignHistoryIdx,sharedPrivate:l.sharedPrivate,sharedPublic:l.sharedPublic})),ce.a.changedDesign=!1,e(),i.next=16;break;case 13:i.prev=13,i.t0=i.catch(0),r(new k.c(K.a.FAIL_TO_CREATE_DESIGN,"디자인 생성 중 오류 발생",i.t0));case 16:case"end":return i.stop()}},a,null,[[0,13]])}));return function(e,t,n){return a.apply(this,arguments)}}()))}));case 1:case"end":return e.stop()}},e)})),function(e){return c.apply(this,arguments)})},{key:"update",value:(s=o()(i.a.mark(function e(t){var n=this;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,r){he.a.instance.dispatch(new C.c(function(){var a=o()(i.a.mark(function a(o,s,u){var c,l;return i.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,n.makeSaveParamPackage(o,t);case 3:return c=i.sent,i.prev=4,i.next=7,n.updateDesign(c,t);case 7:l=i.sent,ae.b.setDesignInfo(new M.a({idx:M.a.get().getIdx(),title:c.saveParam.title,accountId:S.a.getUser().accountId,latestDesignHistoryIdx:l.latestDesignHistoryIdx,sharedPrivate:M.a.get().sharedPrivate,sharedPublic:M.a.get().sharedPublic})),void 0!==H.a.getDesignProject()&&H.a.updateDesignData(l),ce.a.changedDesign=!1,he.a.instance.dispatch(new N),e(),i.next=19;break;case 15:throw i.prev=15,i.t0=i.catch(4),(new te.a).setSaveFailedDesignDocDC(new $.a(M.a.get().getIdx(),M.a.get().getLatestDesignHistoryIdx(),c.saveParam.pageParamList)),i.t0;case 19:i.next=24;break;case 21:i.prev=21,i.t1=i.catch(0),r(new k.c(K.a.FAIL_TO_UPDATE_DESIGN,"디자인 업데이트 중 오류 발생",i.t1));case 24:case"end":return i.stop()}},a,null,[[0,21],[4,15]])}));return function(e,t,n){return a.apply(this,arguments)}}()))}));case 1:case"end":return e.stop()}},e)})),function(e){return s.apply(this,arguments)})},{key:"setDocumentTitle",value:function(e){var t="".concat(m.b.nvl(e,"제목을 입력해주세요.")," - 미리캔버스");document.title=t,document.getElementById("ogTitle").content=t,document.getElementById("twitterTitle").content=t,document.getElementById("keywords").content="",J.a.onChangeDocumentTitle(t)}},{key:"setExtraOption",value:function(e){this.saveLoadOption=e}},{key:"isReadyToSave",value:function(){return!(M.a.get().isLoaded()&&J.a.isSaveComplete()&&!A.a.getSaveOption().forceSave)&&(!J.a.isSaving()&&(!le.a.isUploading||(J.a.wait(),!1)))}},{key:"getAdditionalWrap",value:function(e){var t=this;return this.saveLoadOption&&this.saveLoadOption.copyWithCurrentTask?this.renderCopyWithCurrentTask(o()(i.a.mark(function n(){return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:he.a.instance.dispatch(new C.c(function(){var n=o()(i.a.mark(function n(r){var a,o;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.makeSaveParam({designDoc:r,titleSuffix:" - 복사본",categoryIdx:e.categoryIdx||0,autoSaved:e.isAutoSaved||!1});case 2:return a=n.sent,n.next=5,t.createDesign({clientParam:A.a.getEditorOpenOption().getCallbackParam(),saveParam:a},null);case 5:o=n.sent,window.open(I.a.getDesignUrl(o.idx));case 7:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}())),f.a.close();case 2:case"end":return n.stop()}},n)}))):null}},{key:"makeSaveParamPackage",value:(a=o()(i.a.mark(function e(t,n){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=A.a.getEditorOpenOption().getCallbackParam(),e.next=3,this.makeSaveParam({designDoc:t,categoryIdx:n.categoryIdx||0,title:n.title||"",autoSaved:n.isAutoSaved||!1});case 3:return e.t1=e.sent,e.abrupt("return",{clientParam:e.t0,saveParam:e.t1});case 5:case"end":return e.stop()}},e,this)})),function(e,t){return a.apply(this,arguments)})},{key:"createDesign",value:(r=o()(i.a.mark(function e(t,n){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||!n.isCreateToCart){e.next=4;break}return e.next=3,this.createToCart(t,n.afterSaveCallback);case 3:return e.abrupt("return",e.sent);case 4:return e.next=6,this.retryIfNetworkError(o()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.a.create(t,S.a.getUser().accountId);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).catch(function(e){throw new k.c(K.a.FAIL_TO_CREATE_DESIGN_API,"디자인 생성하는 api 에서 오류 발생 : ".concat(e.message),e)}).then(function(e){return ee.a.setPageData(e.pageList,t.saveParam.pageParamList),e});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)})),function(e,t){return r.apply(this,arguments)})},{key:"updateDesign",value:(n=o()(i.a.mark(function e(t,n){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||!n.isUpdateToCart){e.next=4;break}return e.next=3,this.updateToCart(t,n.afterSaveCallback);case 3:return e.abrupt("return",e.sent);case 4:return ee.a.optimizePageParams(t.saveParam.pageParamList),W.a.stringifyExtraData(t.saveParam),e.next=8,this.retryIfNetworkError(o()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.a.update(M.a.get().getIdx(),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).catch(function(e){throw new k.c(K.a.FAIL_TO_UPDATE_DESIGN_API,"디자인 수정하는 api 에서 오류 발생 : ".concat(e.message),e)}).then(function(e){return ee.a.setPageData(e.pageList,t.saveParam.pageParamList),e});case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})},{key:"retryIfNetworkError",value:(t=o()(i.a.mark(function t(n){var r,a,o,s=arguments;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=s.length>1&&void 0!==s[1]?s[1]:0;case 1:if(!(r<=e.RETRY_COUNT_WHEN_NETWORK_ERROR)){t.next=16;break}return t.prev=2,t.next=5,n();case 5:return t.abrupt("return",t.sent);case 8:if(t.prev=8,t.t0=t.catch(2),(o=k.c.getUnicornApiError(t.t0))&&o.isNetworkError()){t.next=13;break}throw t.t0;case 13:console.warn("네트워크 오류로 재시도 (".concat(r++,")"),a=t.t0);case 14:t.next=1;break;case 16:throw a;case 17:case"end":return t.stop()}},t,null,[[2,8]])})),function(e){return t.apply(this,arguments)})},{key:"isBlankSave",get:function(){return this._isBlankSave}}]),e}();pe.AUTO_SAVE_TERM=6e4,pe.RETRY_COUNT_WHEN_NETWORK_ERROR=1;t.a=new pe},function(e,t,n){"use strict";var r=n(62),i=n.n(r),a=n(2),o=n.n(a),s=n(4),u=n.n(s),c=n(0),l=n.n(c),h=n(1),p=n.n(h),d=n(37),f=n(86),g=n(255),v=n(11),y=n(51),m=n(34),E=n(12),k=n(77),S=n(230),I=n(166),T=n(227),b=n(326),w=n(346),A=function(){function e(t){l()(this,e),this.folderIdx=t}var t;return p()(e,[{key:"load",value:(t=u()(o.a.mark(function e(t,n,r){var i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.status=b.a.ACTIVE,e.next=3,w.a.getPhotosInFolder(this.folderIdx,t,n,r);case 3:return i=e.sent,e.abrupt("return",{photos:i.data.list||[],total:i.data.pagination.totalRow||0});case 5:case"end":return e.stop()}},e,this)})),function(e,n,r){return t.apply(this,arguments)})}]),e}(),C=function(){function e(){l()(this,e)}var t;return p()(e,[{key:"load",value:(t=u()(o.a.mark(function e(t,n,r){var i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.status=b.a.ACTIVE,e.next=3,w.a.getPhotos(t,n,r);case 3:return i=e.sent,e.abrupt("return",{photos:i.data.list||[],total:i.data.pagination.totalRow||0});case 5:case"end":return e.stop()}},e)})),function(e,n,r){return t.apply(this,arguments)})}]),e}(),x=function(){function e(){l()(this,e)}var t;return p()(e,[{key:"load",value:(t=u()(o.a.mark(function e(t,n,r){var i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.status=b.a.ACTIVE,e.next=3,w.a.photosAndFolders(t,n,r);case 3:return i=e.sent,e.abrupt("return",{folders:i.data.folders||[],photos:i.data.photos||[],recycleBinCount:i.data.recycleBinCount||0,recycleBinSize:i.data.recycleBinSize||0,total:i.data.pagination.totalRow||0});case 5:case"end":return e.stop()}},e)})),function(e,n,r){return t.apply(this,arguments)})}]),e}(),R=function(){function e(){l()(this,e)}var t;return p()(e,[{key:"load",value:(t=u()(o.a.mark(function e(t,n,r){var i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.status=b.a.INACTIVE,n.orderField=_.CREATE_DATE,n.orderBy=P.DESC,e.next=5,w.a.photosAndFolders(t,n,r);case 5:return i=e.sent,e.abrupt("return",{folders:i.data.folders||[],photos:i.data.photos||[],recycleBinCount:i.data.recycleBinCount||0,total:i.data.pagination.totalRow||0});case 7:case"end":return e.stop()}},e)})),function(e,n,r){return t.apply(this,arguments)})}]),e}(),L=function(){function e(){l()(this,e)}return p()(e,[{key:"loader",value:function(e,t){return v.b.isEmpty(t)||0!==e?e>0?new A(e):-1===e?new R:new x:new C}}]),e}();L.instance=new L;var _,P,O=n(365),D=n(328),M=n(347),N=n(110),B=n(308);n.d(t,"b",function(){return _}),n.d(t,"a",function(){return P}),function(e){e.CREATE_DATE="CREATE_DATE",e.NAME="NAME",e.SIZE="SIZE"}(_||(_={})),function(e){e.DESC="DESC",e.ASC="ASC"}(P||(P={}));var U=function(){function e(){var t=this;l()(this,e),this.imageMap=new Map,this.folderMap=new Map,this._checkedData=new Map,this.folders=[],this.photos=[],this.noRequest=!1,this.totalItemCount=0,this.fileBuffer=new Array,this.isInit=!1,this.orderField=_.CREATE_DATE,this.orderBy=P.DESC,this.onLoginListener=function(){t.onLogin()}}var t,n,r,a;return p()(e,[{key:"checkedData",get:function(){return this._checkedData}},{key:"selectedTeamData",get:function(){return this._selectedTeamData}}]),p()(e,[{key:"onLogin",value:function(){E.a.getUser().isLogin()?this.listener.onLoginRemoveLoginLayer():E.a.addOnLoginListener(this.onLoginListener.bind(this))}},{key:"selectAll",value:function(e){var t=this;this.currentListItemParams.forEach(function(e){e.key.resourceType===S.a.USER_FOLDER&&Number(e.key.referenceKey)<0||t._checkedData.set(e.key.referenceKey,e.key)}),e()}},{key:"unselectFolders",value:function(e){var t=this;this.folders.forEach(function(e){if(e.idx>=0){var n=t.makeFolderListItemParam(e);t._checkedData.delete(n.key.referenceKey)}}),e()}},{key:"getCheckedDataSize",value:function(){return this._checkedData.size}},{key:"clearCheckedData",value:function(){this._checkedData.clear()}},{key:"toggleCheckBoxData",value:function(e){this._checkedData.has(e.referenceKey)?this._checkedData.delete(e.referenceKey):this._checkedData.set(e.referenceKey,e)}},{key:"requestPaginationListAction",value:(a=u()(o.a.mark(function e(t){var n,r,i,a,s,u,c,l,h,p,d,f,g,v,y,m,E,S,I,b=arguments;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=b.length>1&&void 0!==b[1]?b[1]:0,r=b.length>2?b[2]:void 0,i=b.length>3?b[3]:void 0,a={keyword:r,orderField:this.orderField,orderBy:this.orderBy,types:[D.a.USER_IMAGE,D.a.USER_SVG]},s=T.a.getUserSetting().leftPanelPaginationMode!==k.a.BUTTON,!this.noRequest){e.next=10;break}this.resourceSortByOrder(),this.noRequest=!1,e.next=58;break;case 10:if(!i){e.next=58;break}return e.next=13,L.instance.loader(n,r).load(s?{page:1,pageSize:1500}:t,a,this._selectedTeamData);case 13:for(u=e.sent,this.totalItemCount=u.total||0,M.a.recycleBin.folderStoreInfo.fileCount=u.recycleBinCount||0,M.a.recycleBin.folderStoreInfo.fileSize=u.recycleBinSize||0,this.folders=u.folders||[],this.photos=u.photos||[],this.shouldRenderRecycleBin(t.page,n,r)&&(this.folders.unshift(M.a.recycleBin),this.folders.unshift(M.a.addFolderBin)),c=!0,l=!1,h=void 0,e.prev=23,p=this.photos[Symbol.iterator]();!(c=(d=p.next()).done);c=!0)f=d.value,this.imageMap.set(f.uuidKey,f);e.next=31;break;case 27:e.prev=27,e.t0=e.catch(23),l=!0,h=e.t0;case 31:e.prev=31,e.prev=32,c||null==p.return||p.return();case 34:if(e.prev=34,!l){e.next=37;break}throw h;case 37:return e.finish(34);case 38:return e.finish(31);case 39:for(g=!0,v=!1,y=void 0,e.prev=42,m=this.folders[Symbol.iterator]();!(g=(E=m.next()).done);g=!0)S=E.value,this.folderMap.set(S.idx,S);e.next=50;break;case 46:e.prev=46,e.t1=e.catch(42),v=!0,y=e.t1;case 50:e.prev=50,e.prev=51,g||null==m.return||m.return();case 53:if(e.prev=53,!v){e.next=56;break}throw y;case 56:return e.finish(53);case 57:return e.finish(50);case 58:return I=s?this.userResourceToListItemParam(t.page,t.pageSize):this.userResourceToListItemParam(),e.next=61,this.setSvgThumbnailDatas(I);case 61:this.listener.onRequestPaginationListAction(I,t,i);case 62:case"end":return e.stop()}},e,this,[[23,27,31,39],[32,,34,38],[42,46,50,58],[51,,53,57]])})),function(e){return a.apply(this,arguments)})},{key:"setSvgThumbnailDatas",value:(r=u()(o.a.mark(function e(t){var n,r,i,a,s,u;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=!0,r=!1,i=void 0,e.prev=3,a=t[Symbol.iterator]();case 5:if(n=(s=a.next()).done){e.next=19;break}if((u=s.value).key.resourceType!==S.a.USER_FOLDER){e.next=13;break}if(!u.extraData||u.extraData.thumbnailType!==D.a.USER_SVG){e.next=11;break}return e.next=11,O.a.setSvgThumbnailData(u.extraData.thumbnailKey,u.thumbList[0]);case 11:e.next=16;break;case 13:if(u.key.resourceType!==S.a.SVG){e.next=16;break}return e.next=16,O.a.setSvgThumbnailData(u.key.referenceKey,u.thumbList[0]);case 16:n=!0,e.next=5;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(3),r=!0,i=e.t0;case 25:e.prev=25,e.prev=26,n||null==a.return||a.return();case 28:if(e.prev=28,!r){e.next=31;break}throw i;case 31:return e.finish(28);case 32:return e.finish(25);case 33:case"end":return e.stop()}},e,null,[[3,21,25,33],[26,,28,32]])})),function(e){return r.apply(this,arguments)})},{key:"clickOrderByButton",value:function(e){this.orderBy=e?P.ASC:P.DESC,this.noRequest=!0}},{key:"changeOrderBy",value:function(e,t){this.orderBy=e,this.orderField=t,this.noRequest=!0}},{key:"resourceSortByOrder",value:function(){var e=this.orderBy===P.ASC,t=this.folders.filter(function(e){return e.idx<0}),n=this.folders.filter(function(e){return e.idx>=0});this.folders=t.concat(n.sort(d.a.makeComparePropertyFunction(this.getCompareProperty(!1,this.orderField),e))),this.photos.sort(d.a.makeComparePropertyFunction(this.getCompareProperty(!0,this.orderField),e))}},{key:"getCompareProperty",value:function(e,t){switch(t){case _.CREATE_DATE:return e?["uploadDate"]:["updateDate"];case _.NAME:return e?["filename"]:["name"];case _.SIZE:return e?["fileSize"]:["folderStoreInfo","fileSize"];default:return[]}}},{key:"isTeamScope",value:function(){return this._selectedTeamData.teamScope===m.b.TEAM}},{key:"isIndividualScope",value:function(){return this._selectedTeamData.teamScope===m.b.INDIVIDUAL}},{key:"shouldRenderRecycleBin",value:function(e,t,n){return 1===e&&0===t&&v.b.isEmpty(n)}},{key:"userResourceToListItemParam",value:function(e,t){return this.currentListItemParams=this.folderListItemParam().concat(this.imageListItemParam()),void 0!==e?this.currentListItemParams.slice((e-1)*t,e*t):this.currentListItemParams}},{key:"folderListItemParam",value:function(){var e=this;return this.folders.map(function(t){return e.makeFolderListItemParam(t)})}},{key:"imageListItemParam",value:function(){var e=this;return this.photos.map(function(t){return e.makePhotoListItemParam(t)})}},{key:"makeFolderListItemParam",value:function(e){var t=e.folderThumbnailInfo,n=null!=t,r={hasThumbnail:n,thumbnailKey:n?t.key:null,thumbnailType:n?t.type:null,isRecycleBin:-1===e.idx,isAddFolderBin:-2===e.idx};return{key:{referenceKey:String(e.idx),resourceType:S.a.USER_FOLDER,repositoryType:f.a.UNICORN},thumbList:[n?t.thumb300Url:M.a.defaultFolderImg],extraData:r}}},{key:"makePhotoListItemParam",value:function(e){var t=e.type===D.a.USER_IMAGE?S.a.PHOTO:S.a.SVG;return{key:{referenceKey:e.uuidKey,resourceType:t,repositoryType:f.a.UNICORN},thumbList:[e.thumb300Url],extraData:{isRecycleBin:!1,isAddFolderBin:!1}}}},{key:"bufferClear",value:function(e){var t=this;e||this.fileBuffer.forEach(function(e){e&&t.addUserFilesDto(e)}),this.fileBuffer=new Array}},{key:"addUserFilesDto",value:function(e){if(this.isInit){if(this.imageMap.set(e.uuidKey,e),this.photos.unshift(e),this.totalItemCount=this.photos.length,this.listener){var t=this.makePhotoListItemParam(e);this.listener.onAddUserFilesDto(t)}}else this.fileBuffer.push(e)}},{key:"moveImagesToFolder",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;if(0===n)return this;var i=e.map(function(e){return t.imageMap.get(e).uuidKey});return w.a.movePhotosToFolder(i,n,this._selectedTeamData,function(e){r(e)}),this}},{key:"moveImageToFolderWhenUploading",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.moveImagesToFolder([e],t,function(e){0})}},{key:"updateFileInfo",value:function(e){var t=this.imageMap.get(e);t&&u()(o.a.mark(function n(){var r;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r="original",n.next=3,g.b.fetchKeyList([e],r);case 3:t.originUrl=g.b.getUrl(e,r);case 4:case"end":return n.stop()}},n)}))()}},{key:"removeUserFile",value:function(e){I.b.deleteData(e.uuidKey),this.imageMap.delete(e.uuidKey);var t=this.photos.indexOf(e);this.photos=[].concat(i()(this.photos.slice(0,t)),i()(this.photos.slice(t+1)))}},{key:"onPaginationFinishRender",value:function(e,t){this.isInit=!0,this.bufferClear(e),t(),B.a.uploadAfterRenderFinish()}},{key:"setListener",value:(n=u()(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.listener=t,this.onLogin();case 2:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"loadUserDataAndRender",value:(t=u()(o.a.mark(function e(t){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(E.a.getUser().isLogin()){e.next=2;break}return e.abrupt("return");case 2:return n=E.a.getUser().accountId,e.next=5,y.a.fetchSelTeamDetail(n);case 5:if(!(e.sent.memberList.length<2)){e.next=8;break}return e.abrupt("return");case 8:return this._selectedTeamData=y.a.getDefaultSelectedTeamData(n),e.next=11,B.a.fetchCapacity(this._selectedTeamData);case 11:t(this._selectedTeamData);case 12:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"isFolderChecked",value:function(){return i()(this._checkedData.values()).some(function(e){return e.resourceType===S.a.USER_FOLDER})}},{key:"clickCopyToScope",value:function(){var e={fileKeys:Array.from(this._checkedData.values()).map(function(e){return e.referenceKey}),teamData:this._selectedTeamData,scopeToCopy:this._selectedTeamData.teamScope===m.b.TEAM?m.b.INDIVIDUAL:m.b.TEAM,folderIdx:0};this.listener.onClickCopyUserResourcePopup(e)}},{key:"setTeamScope",value:function(e){this._selectedTeamData.teamScope=e}},{key:"loadListSync",value:function(){E.a.getUser().isLogin()&&(this._selectedTeamData?this.listener.onLoadListSync():(this._selectedTeamData=y.a.getDefaultSelectedTeamData(E.a.getUser().accountId),B.a.fetchCapacity(this._selectedTeamData),this.listener.onLoadListSync()))}},{key:"onloadThumbnail",value:function(e,t,n){var r=this.imageMap.get(e);r&&(r.fileMeta=JSON.stringify(new N.a(t,n)))}},{key:"updateStatus",value:function(e,t){var n=this;u()(o.a.mark(function r(){return o.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,B.a.fetchCapacity(n._selectedTeamData,!1);case 2:w.a.updateStatusFoldersAndPhotos(e,t,n._selectedTeamData,function(){if(t===b.a.PERMANENTLY_INACTIVE){var e=0;n._checkedData.forEach(function(t){var r=n.photos.find(function(e){return e.uuidKey===t.referenceKey});r&&(e+=r.fileSize)}),B.a.updateCapacity(-e)}n.loadListSync()});case 3:case"end":return r.stop()}},r)}))()}},{key:"updateStatusCheckedData",value:function(e){var t=Array.from(this._checkedData.values()).map(function(e){return{key:e.referenceKey,type:e.resourceType}});this.updateStatus(t,e)}},{key:"updateStatusAll",value:function(e){var t=this;u()(o.a.mark(function n(){return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,B.a.fetchCapacity(t._selectedTeamData,!1);case 2:w.a.updateStatusAll(e,t._selectedTeamData,function(){e===b.a.PERMANENTLY_INACTIVE&&B.a.updateCapacity(-M.a.recycleBin.folderStoreInfo.fileSize),t.loadListSync()});case 3:case"end":return n.stop()}},n)}))()}},{key:"fileUpdateComplete",value:function(e){var t=this;return this.fileBuffer.slice().forEach(function(n,r){n.filename===e&&t.fileBuffer.splice(r,1)}),this}},{key:"isInitComplete",value:function(){return!0===this.isInit}},{key:"getBufferLen",value:function(){return this.fileBuffer.length}}]),e}();t.c=new U},,function(e,t,n){"use strict";var r,i,a,o;n.d(t,"b",function(){return r}),n.d(t,"c",function(){return i}),n.d(t,"d",function(){return a}),n.d(t,"a",function(){return o}),function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP=1]="TOP",e[e.TOP_RIGHT=2]="TOP_RIGHT",e[e.LEFT=3]="LEFT",e[e.RIGHT=4]="RIGHT",e[e.BOTTOM_LEFT=5]="BOTTOM_LEFT",e[e.BOTTOM=6]="BOTTOM",e[e.BOTTOM_RIGHT=7]="BOTTOM_RIGHT"}(r||(r={})),function(e){e[e.NONE=0]="NONE",e[e.LEFT=2]="LEFT",e[e.TOP=4]="TOP",e[e.RIGHT=8]="RIGHT",e[e.BOTTOM=16]="BOTTOM",e[e.CENTER_X=32]="CENTER_X",e[e.CENTER_Y=64]="CENTER_Y"}(i||(i={})),function(e){e.DEFAULT="default",e.PHOTO_CROP="photoCrop",e.IMAGE_FRAME_PHOTO_CROP="imageframePhotoCrop",e.GRID="grid"}(a||(a={})),function(e){e.WINDOW_RESIZE="WINDOW_RESIZE",e.PHOTO_CROP="PHOTO_CROP",e.IMAGE_FRAME_PHOTO_CROP="IMAGE_FRAME_PHOTO_CROP",e.CANCEL_PHOTO_CROP="CANCEL_PHOTO_CROP",e.MOVE="MOVE",e.ROTATE="ROTATE",e.RESIZE="RESIZE",e.FLUSH="FLUSH",e.GRID_CELL_THICKNESS_RESIZE="GRID_CELL_THICKNESS_RESIZE"}(o||(o={}))},function(e,t,n){"use strict";var r,i,a,o,s,u,c,l,h,p,d,f,g,v=n(22),y=n.n(v),m=n(0),E=n.n(m),k=n(1),S=n.n(k),I=n(90),T=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;E()(this,e),this.m13=0,this.m23=0,this.m33=1,this.m11=t,this.m12=n,this.m21=r,this.m22=i,this.m31=a,this.m32=o}return S()(e,[{key:"multiply",value:function(e){this.m11=this.m11*e.m11+this.m12*e.m21+this.m13*e.m31,this.m12=this.m11*e.m12+this.m12*e.m22+this.m13*e.m32,this.m21=this.m21*e.m11+this.m22*e.m21+this.m23*e.m31,this.m22=this.m21*e.m12+this.m22*e.m22+this.m23*e.m32,this.m31=this.m31*e.m11+this.m32*e.m21+this.m33*e.m31,this.m32=this.m31*e.m12+this.m32*e.m22+this.m33*e.m32}},{key:"scale",value:function(t,n){this.multiply(e.getScale(t,n))}},{key:"translate",value:function(t,n){this.multiply(e.getTranslation(t,n))}},{key:"rotate",value:function(t){this.multiply(e.getRotation(t))}},{key:"getPoint",value:function(e,t){var n=this.m11*e+this.m21*t+this.m31,r=this.m12*e+this.m22*t+this.m32;return new I.a(n,r)}}],[{key:"getRotation",value:function(t){var n=new e,r=Math.sin(t),i=Math.cos(t);return n.m11=i,n.m12=r,n.m21=-r,n.m22=i,n}},{key:"getScale",value:function(t,n){var r=new e;return r.m11=t,r.m22=n,r}},{key:"getTranslation",value:function(t,n){var r=new e;return r.m31=t,r.m32=n,r}}]),e}();n.d(t,"e",function(){return f}),n.d(t,"f",function(){return g}),n.d(t,"d",function(){return w}),n.d(t,"g",function(){return A}),n.d(t,"b",function(){return B}),n.d(t,"c",function(){return U}),n.d(t,"a",function(){return V}),function(e){e.RGB="#000000",e[e.NUMBER=0]="NUMBER",e[e.TEXT_SPACE=0]="TEXT_SPACE",e[e.LINE_SPACE=0]="LINE_SPACE",e[e.SCALE_X=100]="SCALE_X",e[e.BEZIER_PERCENT=0]="BEZIER_PERCENT",e[e.ALPHA=255]="ALPHA",e.RGBA="rgba(0, 0, 0, 255)",e[e.FONT_SIZE=6]="FONT_SIZE",e.RGBA_TRANSPARENT="#00000000"}(f||(f={})),function(e){e.LEFT="LEFT",e.CENTER="CENTER",e.RIGHT="RIGHT"}(g||(g={}));var b,w,A,C=(r={},y()(r,g.LEFT,"flex-start"),y()(r,g.CENTER,"center"),y()(r,g.RIGHT,"flex-end"),r),x=(i={},y()(i,g.LEFT,0),y()(i,g.CENTER,.5),y()(i,g.RIGHT,1),i),R=(a={},y()(a,g.LEFT,0),y()(a,g.CENTER,1),y()(a,g.RIGHT,2),a);(b=g||(g={})).getFlexStyle=function(e){return C[e]},b.getStyle=function(e){return e.toString()},b.getLetterSpaceCompensation=function(e,t){switch(e){case g.CENTER:return t/2;case g.RIGHT:return t;default:return 0}},b.getAlignXml=function(e){return D[e]},b.getTextHorizontalAlign=function(e){return M[e]},b.getBasePositionX=function(e,t){return t*x[e]},b.fromCSSString=function(e){return g[e.toUpperCase()]||g.LEFT},b.toXMLValue=function(e){return R[e]},b.getMatrix=function(e,t,n){switch(e){case g.LEFT:return new T(n,0,0,1,0,0);case g.CENTER:return new T(n,0,0,1,(t-t*n)/2,0);case g.RIGHT:return new T(n,0,0,1,t-t*n,0)}},b.getScaledWidth=function(e,t,n,r){var i,a=t.width*n;return(i={},y()(i,g.LEFT,new I.a(t.left*n,t.right*n)),y()(i,g.CENTER,new I.a(t.left-a/2,t.right+a/2)),y()(i,g.RIGHT,new I.a(t.left-a,r-(r-t.right*n))),i)[e]},function(e){e[e.LEFT=0]="LEFT",e[e.CENTER=1]="CENTER",e[e.RIGHT=2]="RIGHT"}(w||(w={})),function(e){e.TOP="TOP",e.CENTER="CENTER",e.BOTTOM="BOTTOM"}(A||(A={}));var L,_,P=(o={},y()(o,A.TOP,"flex-start"),y()(o,A.CENTER,"center"),y()(o,A.BOTTOM,"flex-end"),o),O=(s={},y()(s,A.TOP,.5),y()(s,A.CENTER,0),y()(s,A.BOTTOM,-.5),s),D=(u={},y()(u,g.LEFT,w.LEFT),y()(u,g.CENTER,w.CENTER),y()(u,g.RIGHT,w.RIGHT),u),M=(c={},y()(c,w.LEFT,g.LEFT),y()(c,w.CENTER,g.CENTER),y()(c,w.RIGHT,g.RIGHT),c),N=(l={},y()(l,A.TOP,0),y()(l,A.CENTER,.5),y()(l,A.BOTTOM,1),l);(L=A||(A={})).getFlexStyle=function(e){return P[e]},L.getTranslateAdjustment=function(e){return O[e]},L.getTopStyle=function(e){return e===A.TOP?"0px":""},L.getBottomStyle=function(e){return e===A.BOTTOM?"0px":""},L.getVerticalAlignXml=function(e){return F[e]},L.getVerticalAlign=function(e){return G[e]},L.getBasePositionX=function(e,t){return t*N[e]},L.getTopBottomOfAlignValue=function(e,t,n,r){var i=n,a=r;switch(e){case A.TOP:a=i+t;break;case A.CENTER:var o=t/2,s=n+(r-n)/2;i=s-o,a=s+o;break;case A.BOTTOM:i=a-t}return{top:i,bottom:a}},function(e){e[e.TOP=0]="TOP",e[e.CENTER=2]="CENTER",e[e.BOTTOM=1]="BOTTOM"}(_||(_={}));var B,U,G=(h={},y()(h,_.TOP,A.TOP),y()(h,_.CENTER,A.CENTER),y()(h,_.BOTTOM,A.BOTTOM),h),F=(p={},y()(p,A.TOP,_.TOP),y()(p,A.CENTER,_.CENTER),y()(p,A.BOTTOM,_.BOTTOM),p);!function(e){e.NONE="none",e.BULLET="bullet",e.NUMBER="number"}(B||(B={})),function(e){e.GRADIENT="GRADIENT",e.COLOR="COLOR",e.MASK="MASK"}(U||(U={}));var H,V,z=(d={},y()(d,U.COLOR,0),y()(d,U.GRADIENT,1),y()(d,U.MASK,2),d);(H=U||(U={})).fromString=function(e){return U[e]||U.COLOR},H.fromXML=function(e){switch(e){case 1:return U.GRADIENT;case 2:return U.MASK;default:return U.COLOR}},H.toXMLValue=function(e){return z[e]},function(e){e.LEFT="LEFT",e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.NONE="NONE"}(V||(V={})),(V||(V={})).fromString=function(e){return V[e.toUpperCase().replace("ARROW","")]||V.NONE}},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(62),i=n.n(r),a=n(0),o=n.n(a),s=n(1),u=n.n(s),c=n(90),l=n(246),h=n(234),p=function(){function e(){o()(this,e)}return u()(e,null,[{key:"getRadianByDegree",value:function(e){return e*Math.PI/180}},{key:"getDegreeByRadian",value:function(e){return Math.floor(180*e/Math.PI)}},{key:"getRadianByTwoVectors",value:function(e,t){return Math.atan2(t.y-e.y,t.x-e.x)}},{key:"isIncludeLtrbCoordinate",value:function(e,t){return e=e.getRotatedLTRB(-e.rotate),this.isPtInLtrbCoordinate(new c.a(e.left,e.top),t)&&this.isPtInLtrbCoordinate(new c.a(e.left,e.bottom),t)&&this.isPtInLtrbCoordinate(new c.a(e.right,e.top),t)&&this.isPtInLtrbCoordinate(new c.a(e.right,e.bottom),t)}},{key:"isPtInLtrbCoordinate",value:function(e,t){return e.x>t.left&&e.x<t.right&&e.y>t.top&&e.y<t.bottom}},{key:"isThereAnyOneSideBetweenLtrbs",value:function(e,t,n){return e.left<t.left&&e.left>n.left||e.top<t.top&&e.top>n.top||e.right>t.right&&e.right<n.right||e.bottom>t.bottom&&e.bottom<n.bottom}},{key:"getBoundRectOfPolygon",value:function(e){var t=e.map(function(e){return e.x}),n=e.map(function(e){return e.y});return new h.a(Math.min.apply(Math,i()(t)),Math.min.apply(Math,i()(n)),Math.max.apply(Math,i()(t)),Math.max.apply(Math,i()(n)))}},{key:"isLTRBOutsidePolygon",value:function(t,n,r){return e.convertltrbToPointArray(t,n).some(function(t){return e.isPointOutsidePolygon(t,r)})}},{key:"isPointOutsidePolygon",value:function(e,t){var n=0;return t.forEach(function(r,i){var a=i<t.length-1?t[i+1]:t[0];r.y>e.y!=a.y>e.y&&((a.x-r.x)*(e.y-r.y)/(a.y-r.y)+r.x>e.x&&n++)}),n%2==0}},{key:"isOutInLTRB",value:function(e,t){return e.left<t.left||e.top<t.top||e.right>t.right||e.bottom>t.bottom}},{key:"isAllInside",value:function(e,t){return e.left>=t.left&&e.top>=t.top&&e.right<=t.right&&e.bottom<=t.bottom}},{key:"isInsideRect",value:function(e,t,n,r){var i=this;return e.getRectPoints(e.getCenterPos(),t).some(function(e){return i.isInsidePoint(e,n,r)})}},{key:"isAllPointInsideRect",value:function(e,t,n,r){var i=this;return e.getRectPoints(e.getCenterPos(),t).every(function(e){return i.isInsidePoint(e,n,r)})}},{key:"isInsidePoint",value:function(e,t,n){var r=0,i=t.getRectPoints(t.getCenterPos(),n),a=!1;return i.forEach(function(t,n){var o=(n+1)%i.length;if(e.x!==t.x||e.y!==t.y){if(t.y>e.y!=i[o].y>e.y){var s=(i[o].x-t.x)*(e.y-t.y)/(i[o].y-t.y)+t.x;e.x<s?r++:e.x===s&&(a=!0)}}else a=!0}),r%2>0||a}},{key:"isCollisionLine",value:function(e,t,n,r){var i=e.getRectPoints(e.getCenterPos(),t),a=n.getRectPoints(n.getCenterPos(),r);return i.some(function(e,t){var n=e,r=i[(t+1)%i.length];return a.some(function(e,t){var i=e,o=a[(t+1)%a.length];return l.a.sementIntersection(n,r,i,o)})})}},{key:"isCollisionVector",value:function(t,n,r){var i=r.length;return r.some(function(a,o){var s=o===i-1?r[0]:r[o+1],u=e.convertltrbToPointArray(t,n);return u.some(function(e,t){var n=t===u.length-1?u[0]:u[t+1];return l.a.lineSegIntersect(a,s,e,n)})})}},{key:"convertltrbToPointArray",value:function(e,t){var n=new Array,r=new c.a(e.getCenterPos().x,e.getCenterPos().y);return n.push(l.a.getRotatedPoint(new c.a(e.left,e.top),r,t)),n.push(l.a.getRotatedPoint(new c.a(e.right,e.top),r,t)),n.push(l.a.getRotatedPoint(new c.a(e.right,e.bottom),r,t)),n.push(l.a.getRotatedPoint(new c.a(e.left,e.bottom),r,t)),n}},{key:"isAbsoluteOutInLTRB",value:function(e,t){return e.right<t.left||e.bottom<t.top||e.left>t.right||e.top>t.bottom}},{key:"isCollisionAABB",value:function(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}},{key:"isCollisionOBB",value:function(t,n,r,i){var a=[],o=t.getCenterPos();a.push(l.a.calcLocationByRotate(new c.a(t.left,t.top),o,n)),a.push(l.a.calcLocationByRotate(new c.a(t.right,t.top),o,n)),a.push(l.a.calcLocationByRotate(new c.a(t.right,t.bottom),o,n)),a.push(l.a.calcLocationByRotate(new c.a(t.left,t.bottom),o,n));var s=[],u=r.getCenterPos();return s.push(l.a.calcLocationByRotate(new c.a(r.left,r.top),u,i)),s.push(l.a.calcLocationByRotate(new c.a(r.right,r.top),u,i)),s.push(l.a.calcLocationByRotate(new c.a(r.right,r.bottom),u,i)),s.push(l.a.calcLocationByRotate(new c.a(r.left,r.bottom),u,i)),(e._isCollisionOBB(-1*n,a[0],a[1],s[0],s[2])||e._isCollisionOBB(-1*n,a[0],a[1],s[1],s[3]))&&(e._isCollisionOBB(-1*(n+90),a[1],a[2],s[0],s[2])||e._isCollisionOBB(-1*(n+90),a[1],a[2],s[1],s[3]))&&(e._isCollisionOBB(-1*i,s[0],s[1],a[0],a[2])||e._isCollisionOBB(-1*i,s[0],s[1],a[1],a[3]))&&(e._isCollisionOBB(-1*(i+90),s[1],s[2],a[0],a[2])||e._isCollisionOBB(-1*(i+90),s[1],s[2],a[1],a[3]))}},{key:"isCollisionWithCircle",value:function(e,t,n){var r=this.getRadianByDegree(360-n),i=n?l.a.getRotatedVectorByPoint(t.getCenterPos(),e.center,r):e.center,a=this.GetRectZone(i,t),o=t.getCenterPos(),s=t.getHeight()/2,u=t.getWidth()/2;switch(a){case 1:case 7:if(Math.abs(i.y-o.y)<=e.radius+s)return!0;break;case 3:case 5:if(Math.abs(i.x-o.x)<=e.radius+u)return!0;break;case 4:return!0;default:var h=0===a||6===a?t.left:t.right,p=0===a||2===a?t.bottom:t.top,d=new c.a(h,p);if(i.getDistance(d)<=e.radius)return!0}return!1}},{key:"isInCircle",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=t.getCenterPos(),i=l.a.calcLocationByRotate(new c.a(t.left,t.top),r,n),a=l.a.calcLocationByRotate(new c.a(t.right,t.top),r,n),o=l.a.calcLocationByRotate(new c.a(t.right,t.bottom),r,n),s=l.a.calcLocationByRotate(new c.a(t.left,t.bottom),r,n),u=e.center,h=u.getDistance(i),p=u.getDistance(a),d=u.getDistance(o),f=u.getDistance(s),g=e.radius;return h<g&&p<g&&d<g&&f<g}},{key:"GetRectZone",value:function(e,t){return(e.x<t.left?0:e.x>t.right?2:1)+3*(e.y>t.bottom?0:e.y<t.top?2:1)}},{key:"_isCollisionOBB",value:function(e,t,n,r,i){var a,o,s=new c.a(0,0);t=l.a.calcLocationByRotate(t,s,e),n=l.a.calcLocationByRotate(n,s,e),r=l.a.calcLocationByRotate(r,s,e),i=l.a.calcLocationByRotate(i,s,e),a=Math.abs(t.x-n.x),o=Math.abs(r.x-i.x);var u=[t.x,n.x,r.x,i.x].sort(function(e,t){return e-t});return Math.abs(u[0]-u[3])<a+o}},{key:"getGradientPoints",value:function(e,t){var n=e.leftTop,r=e.rightTop,i=e.leftBottom,a=e.rightBottom,o=c.a.centerPoint(n,a);n=l.a.transformation(n,o,-t),r=l.a.transformation(r,o,-t),i=l.a.transformation(i,o,-t),a=l.a.transformation(a,o,-t);var s=Math.min(n.x,i.x,r.x,a.x),u=Math.min(n.y,i.y,r.y,a.y),h=Math.max(n.x,i.x,r.x,a.x),p=Math.max(n.y,i.y,r.y,a.y);n=new c.a(s,u),r=new c.a(h,u),i=new c.a(s,p),a=new c.a(h,p);var d=c.a.centerPoint(n,i),f=c.a.centerPoint(r,a);return{startPoint:l.a.transformation(d,o,t),endPoint:l.a.transformation(f,o,t)}}}]),e}();p.PI_DOUBLE=2*Math.PI,p.PI_HALF=Math.PI/2},function(e,t,n){"use strict";(function(e){n.d(t,"c",function(){return C}),n.d(t,"b",function(){return x}),n.d(t,"a",function(){return R}),n.d(t,"e",function(){return L}),n.d(t,"d",function(){return P}),n.d(t,"g",function(){return O}),n.d(t,"f",function(){return D});var r=n(6),i=n.n(r),a=n(3),o=n.n(a),s=n(14),u=n.n(s),c=n(7),l=n.n(c),h=n(340),p=n.n(h),d=n(2),f=n.n(d),g=n(4),v=n.n(g),y=n(0),m=n.n(y),E=n(1),k=n.n(E),S=n(37),I=n(19),T=n(20),b=n(230),w=n(529),A=n(244),C=function(){function t(){m()(this,t)}var n,r,i,a,o,s,u,c,l,h,d,g;return k()(t,null,[{key:"init",value:(g=v()(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})),function(){return g.apply(this,arguments)})},{key:"delete",value:(d=v()(f.a.mark(function e(t){var n,r,i;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.svgData.key,e.next=3,this.getImageframeDataByKey(n);case 3:return r=e.sent,i="/api/image-frame/delete/".concat(r.idx),e.next=7,T.b.post(i);case 7:case"end":return e.stop()}},e,this)})),function(e){return d.apply(this,arguments)})},{key:"updateData",value:(h=v()(f.a.mark(function e(t){var n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.isChangedCoreData(),e.next=3,this.update(this.getImageframeUpdateData(t));case 3:return e.abrupt("return",{svgData:t,updateCoreInfo:n});case 4:case"end":return e.stop()}},e,this)})),function(e){return h.apply(this,arguments)})},{key:"update",value:(l=v()(f.a.mark(function e(t){var n,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/image-frame/update",e.next=3,T.b.post("/api/image-frame/update",{data:t,contentType:!1,processData:!1});case 3:return n=e.sent,r=n.data,e.next=7,this.reloadImageframeData(r);case 7:return e.abrupt("return",n.data);case 8:case"end":return e.stop()}},e,this)})),function(e){return l.apply(this,arguments)})},{key:"reloadImageframeData",value:(c=v()(f.a.mark(function e(t){var n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.parse(t);case 2:n=e.sent,this.setCache(n);case 4:case"end":return e.stop()}},e,this)})),function(e){return c.apply(this,arguments)})},{key:"setCache",value:function(e){this._cacheData.set(e.key,e)}},{key:"getDataFromMeta",value:(u=v()(f.a.mark(function e(t){var n,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.key,!this._cacheData.has(n)){e.next=3;break}return e.abrupt("return",this._cacheData.get(n));case 3:return e.prev=3,e.next=6,this.parse(t);case 6:return r=e.sent,this.setCache(r),e.abrupt("return",r);case 11:return e.prev=11,e.t0=e.catch(3),console.error(e.t0),console.error("imageframe 데이터 파싱 실패 : ".concat(t.idx)),e.abrupt("return",null);case 16:case"end":return e.stop()}},e,this,[[3,11]])})),function(e){return u.apply(this,arguments)})},{key:"parse",value:(s=v()(f.a.mark(function t(n){var r,i,a,o,s,u,c,l,h,p,d,g,v;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$.get(n.imageFrameUrl);case 2:if((r=t.sent).getElementsByTagName?i=r.getElementsByTagName("svg").item(0):(a=(new DOMParser).parseFromString(r,"image/svg+xml"),i=a.getElementsByTagName("svg").item(0)),(o=new x).imageFrameUrl=n.imageFrameUrl,o.idx=n.idx,o.type=D.FRAME,o.width=n.width,o.height=n.height,o.minWidth=n.minWidth,o.minHeight=n.minHeight,o.key=n.key,o.status=O.valueOf(n.status),o.svg=i.cloneNode(!0),o.categoryIdxList=n.categoryIdxList,o.name=n.name||"",o.designer=n.accountInfo,o.license=P.valueOf(n.license),o.keywordList=this.getKeywordList(n.keywordList),(s=new L).color=n.imageFrameMaskMetaDto.color,s.x=n.imageFrameMaskMetaDto.x,s.y=n.imageFrameMaskMetaDto.y,s.width=n.imageFrameMaskMetaDto.width,s.height=n.imageFrameMaskMetaDto.height,o.maskData=s,!n.colorDtoList){t.next=47;break}for(c=!0,l=!1,h=void 0,t.prev=31,p=n.colorDtoList[Symbol.iterator]();!(c=(d=p.next()).done);c=!0)g=d.value,(v=new R).idx=g.idx,v.color=g.color,v.editable=g.editable,v.photoInColor=g.photoInColor,g.photoInColor&&!u&&(u=g.color),o.addColor(v);t.next=39;break;case 35:t.prev=35,t.t0=t.catch(31),l=!0,h=t.t0;case 39:t.prev=39,t.prev=40,c||null==p.return||p.return();case 42:if(t.prev=42,!l){t.next=45;break}throw h;case 45:return t.finish(42);case 46:return t.finish(39);case 47:if(e.env.IMAGE_PROCESS){t.next=51;break}return t.next=50,w.a.makeImageframeThumbnail(i,u);case 50:o.thumb=t.sent;case 51:return t.abrupt("return",o);case 52:case"end":return t.stop()}},t,this,[[31,35,39,47],[40,,42,46]])})),function(e){return s.apply(this,arguments)})},{key:"getKeywordList",value:function(e){var t=[];if(!e)return t;var n=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;t.push(s.keyword)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return t}},{key:"getImageframeData",value:(o=v()(f.a.mark(function e(t){var n,r,i,a,o,s,u,c,l,h;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=!0,r=!1,i=void 0,e.prev=3,a=this._cacheData[Symbol.iterator]();case 5:if(n=(o=a.next()).done){e.next=12;break}if(s=p()(o.value,2),s[0],(u=s[1]).idx!==t){e.next=9;break}return e.abrupt("return",u);case 9:n=!0,e.next=5;break;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),r=!0,i=e.t0;case 18:e.prev=18,e.prev=19,n||null==a.return||a.return();case 21:if(e.prev=21,!r){e.next=24;break}throw i;case 24:return e.finish(21);case 25:return e.finish(18);case 26:return c="/api/image-frame/".concat(t),e.prev=27,e.next=30,T.b.get(c);case 30:return l=e.sent,e.next=33,this.parse(l.data);case 33:return h=e.sent,this.setCache(h),e.abrupt("return",h);case 38:if(e.prev=38,e.t1=e.catch(27),404!==e.t1.status){e.next=42;break}return e.abrupt("return",null);case 42:throw new Error("SVG 정보 가져오는 중 에러 발생"+e.t1);case 43:case"end":return e.stop()}},e,this,[[3,14,18,26],[19,,21,25],[27,38]])})),function(e){return o.apply(this,arguments)})},{key:"getImageframeDataByKeySync",value:function(e){return this._cacheData.get(e)}},{key:"getImageframeDataByKey",value:(a=v()(f.a.mark(function e(n){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getImageframeDataByKeyList([n]);case 2:return e.abrupt("return",e.sent[0]);case 3:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)})},{key:"getImageframeDataByKeyList",value:(i=v()(f.a.mark(function e(t){var n,r=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=t.filter(function(e){return!r._cacheData.has(e)})).length>0)){e.next=4;break}return e.next=4,Promise.all(S.a.division(n,A.c.REQUEST_KEY_MAX_CNT).map(function(e){return r.fetchImageframeDataByKeyList(e)}));case 4:return e.abrupt("return",t.map(function(e){return r._cacheData.get(e)}));case 5:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)})},{key:"fetchImageframeDataByKeyList",value:(r=v()(f.a.mark(function e(t){var n=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getImageframeDataResponse({keyList:t,pageSize:t.length});case 2:e.sent.imageframeDataList.forEach(function(e){return n._cacheData.set(e.key,e)});case 4:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"getImageframeDataResponse",value:(n=v()(f.a.mark(function e(n){var r,i,a,o,s,u,c,l,h,p,d;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/image-frame",e.next=3,$.get(I.c.getURL("/api/image-frame"),$.param(n,!0));case 3:r=e.sent,i=r.data,a=i.pagination,o=i.list,s=[],u=!0,c=!1,l=void 0,e.prev=11,h=o[Symbol.iterator]();case 13:if(u=(p=h.next()).done){e.next=29;break}return d=p.value,e.prev=15,e.t0=s,e.next=19,t.parse(d);case 19:e.t1=e.sent,e.t0.push.call(e.t0,e.t1),e.next=26;break;case 23:e.prev=23,e.t2=e.catch(15),console.error("svg 데이터 파싱 실패 : ".concat(d.idx));case 26:u=!0,e.next=13;break;case 29:e.next=35;break;case 31:e.prev=31,e.t3=e.catch(11),c=!0,l=e.t3;case 35:e.prev=35,e.prev=36,u||null==h.return||h.return();case 38:if(e.prev=38,!c){e.next=41;break}throw l;case 41:return e.finish(38);case 42:return e.finish(35);case 43:return e.abrupt("return",{totalPage:a.totalPage,imageframeDataList:s,totalRow:a.totalRow});case 44:case"end":return e.stop()}},e,null,[[11,31,35,43],[15,23],[36,,38,42]])})),function(e){return n.apply(this,arguments)})},{key:"getImageframeUpdateData",value:function(e){var t=new FormData;t.append("idx",String(e.idx)),t.append("status",e.status.value),t.append("width",String(e.width)),t.append("height",String(e.height)),t.append("minWidth",String(e.minWidth)),t.append("minHeight",String(e.minHeight)),t.append("name",e.name),t.append("license",e.license.value),t.append("accountId",String(e.designer.accountId)),this.setKeywordParam(t,e.keywordList),e.svgMemo&&""!==e.svgMemo.trim()&&t.append("svgMemoDto.memo",e.svgMemo.trim());for(var n=0;n<e.colorList.length;n++){var r=e.colorList[n];t.append("colorDtoList[".concat(n,"].idx"),String(r.idx)),t.append("colorDtoList[".concat(n,"].color"),r.color),t.append("colorDtoList[".concat(n,"].editable"),String(r.editable)),t.append("colorDtoList[".concat(n,"].photoInColor"),String(r.photoInColor))}return t.append("imageFrameMaskMetaDto.width",String(e.maskData.width)),t.append("imageFrameMaskMetaDto.height",String(e.maskData.height)),t.append("imageFrameMaskMetaDto.x",String(e.maskData.x)),t.append("imageFrameMaskMetaDto.y",String(e.maskData.y)),t.append("imageFrameMaskMetaDto.color",String(e.maskData.color)),t}},{key:"setKeywordParam",value:function(e,t){if(t)for(var n=0;n<t.length;n++){var r=t[n];e.append("keywordList[".concat(n,"].keyword"),r)}}}]),t}();C._cacheData=new Map;var x=function(){function e(){m()(this,e),this._categoryIdxList=[],this._colorList=[],this.changeCoreData=!1}return k()(e,[{key:"addCategory",value:function(e){this._categoryIdxList.some(function(t){return t===e})||this._categoryIdxList.push(e)}},{key:"removeCategory",value:function(e){this._categoryIdxList=this._categoryIdxList.filter(function(t){return t!==e})}},{key:"addColor",value:function(e){this._colorList.push(e)}},{key:"getColorEditable",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=this._colorList[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(e===o.color)return o.editable}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return null}},{key:"isChangedCoreData",value:function(){var e=this.changeCoreData,t=this.maskData.isChangedCoreData();return this.changeCoreData=!1,e||t}},{key:"idx",get:function(){return this._idx},set:function(e){this._idx=e}},{key:"type",get:function(){return this._type},set:function(e){this._type=e}},{key:"key",get:function(){return this._key},set:function(e){this._key=e}},{key:"width",get:function(){return this._width},set:function(e){this._width=e}},{key:"height",get:function(){return this._height},set:function(e){this._height=e}},{key:"minWidth",get:function(){return this._minWidth},set:function(e){e!==this._minWidth&&(this.changeCoreData=!0),this._minWidth=e}},{key:"minHeight",get:function(){return this._minHeight},set:function(e){e!==this._minHeight&&(this.changeCoreData=!0),this._minHeight=e}},{key:"myCollectionIdx",get:function(){return this._myCollectionIdx},set:function(e){this._myCollectionIdx=e}},{key:"svg",get:function(){return this._svg.cloneNode(!0)},set:function(e){this._svg=e}},{key:"thumb",get:function(){return this._thumb},set:function(e){this._thumb=e}},{key:"status",get:function(){return this._status},set:function(e){this._status=e}},{key:"categoryIdxList",get:function(){return this._categoryIdxList},set:function(e){this._categoryIdxList=e}},{key:"colorList",get:function(){return this._colorList},set:function(e){this._colorList=e}},{key:"name",get:function(){return this._name},set:function(e){this._name=e}},{key:"designer",get:function(){return this._designer},set:function(e){this._designer=e}},{key:"license",get:function(){return this._license},set:function(e){this._license=e}},{key:"keywordList",get:function(){return this._keywordList},set:function(e){this._keywordList=e}},{key:"svgMemo",get:function(){return this._svgMemo},set:function(e){this._svgMemo=e}},{key:"maskData",get:function(){return this._maskData},set:function(e){this._maskData=e}}]),e}(),R=function(){function e(){m()(this,e)}return k()(e,[{key:"idx",get:function(){return this._idx},set:function(e){this._idx=e}},{key:"color",get:function(){return this._color},set:function(e){this._color=e}},{key:"editable",get:function(){return this._editable},set:function(e){this._editable=e}},{key:"photoInColor",get:function(){return this._photoInColor},set:function(e){this._photoInColor=e}}]),e}(),L=function(){function e(){m()(this,e),this.changeCoreData=!1}return k()(e,[{key:"isChangedCoreData",value:function(){var e=this.changeCoreData;return this.changeCoreData=!1,e}},{key:"frameIdx",get:function(){return this._frameIdx},set:function(e){this._frameIdx=e}},{key:"x",get:function(){return this._x},set:function(e){this._x=e}},{key:"y",get:function(){return this._y},set:function(e){this._y=e}},{key:"width",get:function(){return this._width},set:function(e){this._width=e}},{key:"height",get:function(){return this._height},set:function(e){this._height=e}},{key:"color",get:function(){return this._color},set:function(e){e!==this._color&&(this.changeCoreData=!0),this._color=e}}]),e}(),_=function(){function e(t,n){m()(this,e),this._text=t,this._value=n}return k()(e,[{key:"text",get:function(){return this._text}},{key:"value",get:function(){return this._value}}]),e}(),P=function(e){function t(e,n){var r;return m()(this,t),r=i()(this,o()(t).call(this,e,n)),t.ALL_VALUE.push(u()(r)),r}return l()(t,e),k()(t,null,[{key:"values",value:function(){return this.ALL_VALUE}},{key:"valueOf",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=this.ALL_VALUE[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(o.value===e)return o}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return null}}]),t}(_);P.ALL_VALUE=[],P.UNICORN=new P("유니콘","UNICORN"),P.SMILECAT=new P("스마일캣","SMILECAT"),P.GETTY=new P("게티","GETTY"),P.UTO=new P("유토","UTO"),P.PIXABAY=new P("픽사베이","PIXABAY");var O=function(e){function t(e,n){var r;return m()(this,t),r=i()(this,o()(t).call(this,e,n)),t.ALL_VALUE.push(u()(r)),r}return l()(t,e),k()(t,null,[{key:"values",value:function(){return this.ALL_VALUE}},{key:"valueOf",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=this.ALL_VALUE[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(o.value===e)return o}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return null}}]),t}(_);O.ALL_VALUE=[],O.ACTIVE=new O("공개 (활성)","ACTIVE"),O.INACTIVE=new O("비공개 (활성)","INACTIVE"),O.DISABLED=new O("비활성","DISABLED");var D=function(e){function t(e,n,r){var a;return m()(this,t),(a=i()(this,o()(t).call(this,e,n))).resourceType=r,t.ALL_VALUE.push(u()(a)),a}return l()(t,e),k()(t,[{key:"getResourceType",value:function(){return this.resourceType}}],[{key:"values",value:function(){return this.ALL_VALUE}},{key:"valueOf",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=this.ALL_VALUE[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(o.value===e)return o}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return null}}]),t}(_);D.ALL_VALUE=[],D.FRAME=new D("이미지 프레임","Frame",b.a.FRAME)}).call(this,n(291))},function(e,t,n){"use strict";var r=n(2),i=n.n(r),a=n(4),o=n.n(a),s=n(9),u=n.n(s),c=n(6),l=n.n(c),h=n(3),p=n.n(h),d=n(14),f=n.n(d),g=n(7),v=n.n(g),y=n(0),m=n.n(y),E=n(1),k=n.n(E),S=n(11),I=n(258),T=n(236),b=n(228),w=n(256),A=n(243),C=n(233),x=n(231),R=n(301),L=n(239),_=n(334),P=n(286),O=n(296),D=n(266),M=function(){function e(){m()(this,e)}return k()(e,null,[{key:"updateConflictedRect",value:function(e,t,n,r){var i=e.left-t.left,a=e.top-t.top,o=n.left+i;Math.round(o)>Math.round(r.left)&&(i+=r.left-o);var s=n.top+a;Math.round(s)>Math.round(r.top)&&(a+=r.top-s),e.left=t.left+i,e.top=t.top+a;var u=e.right-t.right,c=e.bottom-t.bottom,l=n.right+u;Math.round(l)<Math.round(r.right)&&(u+=r.right-l);var h=n.bottom+c;return Math.round(h)<Math.round(r.bottom)&&(c+=r.bottom-h),e.right=t.right+u,e.bottom=t.bottom+c,e.clone()}}]),e}(),N=n(227),B=n(224),U=n(226),G=n(241),F=n(468),H=n(364),V=n(90),z=n(246),W=n(234),K=n(237),X=n(225),Y=n(378),Z=n(469);n.d(t,"g",function(){return q}),n.d(t,"i",function(){return Q}),n.d(t,"h",function(){return $}),n.d(t,"o",function(){return J}),n.d(t,"j",function(){return ee}),n.d(t,"a",function(){return te}),n.d(t,"d",function(){return ne}),n.d(t,"r",function(){return re}),n.d(t,"c",function(){return ie}),n.d(t,"l",function(){return ae}),n.d(t,"p",function(){return oe}),n.d(t,"e",function(){return se}),n.d(t,"f",function(){return ue}),n.d(t,"n",function(){return ce}),n.d(t,"k",function(){return le}),n.d(t,"b",function(){return he}),n.d(t,"m",function(){return pe}),n.d(t,"q",function(){return de});var j=function(){function e(){var t=this;m()(this,e),this.isActionGroupEquals=function(e){return!1},this.concat=function(e){return!1},this.changeDesign=function(){return!0},this.isLastSavedAction=!1,this.lastRenderPageIdx=-1,this.items=U.a.isCropMode()?[U.a.instance.activeItems[0]]:C.b.getGroupItemsAddedArray(U.a.instance.activeItems.slice()),this.commit=function(e,n,r){t.lastRenderPageIdx>=0&&(n.renderPageIdx=t.lastRenderPageIdx),t.doCommit(e,n,r),t.lastRenderPageIdx=n.renderPageIdx,U.a.isCropMode()||X.a.instance.dispatch(new D.a);var i=U.a.instance.pageController.getPageRenderer(e.pages[n.renderPageIdx]);i&&i.updateHoverLayer(),t.doAfterAction()},this.rollback=function(e,n,r){n.renderPageIdx=t.lastRenderPageIdx,t.doRollback(e,n,r),t.doAfterAction();var i=U.a.instance.pageController.getPageRenderer(e.pages[n.renderPageIdx]);i&&i.updateHoverLayer()}}return k()(e,[{key:"getLastAction",value:function(){return X.a.instance.getLastAction()}},{key:"doAfterAction",value:function(){Z.a.onChangeSize(this.items)}}]),e}(),q=function(e){function t(e,n){var r,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];m()(this,t),(r=l()(this,p()(t).call(this))).isPossibleInCropMode=!0,r.renderAfterCommit=!0,r.isLastSavedAction=!1,r.actionType=B.a.MOVE_ITEM,r.changeDesign=function(){return!0},r.isActionGroupEquals=function(e){if(e instanceof pe&&e.oldPage===r.pageOfItems)return!0;if(e instanceof de)return r.renderAfterCommit=!1,!0;if(null==e||e.actionType!==r.actionType)return!1;for(var t=e.items.map(function(e){return e.tbpeId}).sort(),n=r.items.map(function(e){return e.tbpeId}).sort(),i=n.length,a=0,o=0;o<i;o++)n[o]===t[o]&&a++;return i>0&&t.length===i&&a===i},r.recycle=function(){r.items=null,r.pageOfItems=null},r.concat=function(e){return e instanceof t&&(r.basicTransX=e.basicTransX,r.basicTransY=e.basicTransY,r.translateX+=e.translateX,r.translateY+=e.translateY,!0)},r.translateX=e,r.translateY=n,r.isShiftKeyPush=i,r.updateRealTime=a,r.isKeyAction=o,r.doSaveQueue=r.isSaveQueue()&&!r.isSkipAction();var s=r.getLastAction(),u=0,c=0,h=0,d=0;s&&s instanceof t&&s.isActionGroupEquals(f()(r))&&X.a.instance.getContinueActionQ()&&(u=s.basicTransX,c=s.basicTransY,h=s.translateX,d=s.translateY);var g=Math.abs(c+r.translateY)>Math.abs(u+r.translateX),v=r.translateX,y=r.translateY;if(r.isShiftKeyPush?(r.translateX=g?-h:r.translateX+u-h,r.translateY=g?r.translateY+c-d:-d):(r.translateX=r.translateX+u-h,r.translateY=r.translateY+c-d),N.a.getUserSetting().isSnapGuideVisible){var E=new V.a(r.translateX,r.translateY);U.a.instance.editorMainVC.itemHandleVC.snapMove(E,o),o||(v-=r.translateX-E.x,y-=r.translateY-E.y,r.translateX=E.x,r.translateY=E.y)}return r.basicTransX=u+v,r.basicTransY=c+y,r}return v()(t,e),k()(t,[{key:"isSkipAction",value:function(){return!!this.items.find(function(e){return!e.props.isCanUserMove()})}},{key:"isSaveQueue",value:function(){return!(1===this.items.length&&this.items[0]instanceof x.d)||!this.items[0].isEditMode}},{key:"doCommit",value:function(e,t,n){var r=this;if(T.a.selectItems(this.items),!this.isSkipAction()){if(!this.pageOfItems){var i=!0,a=!1,o=void 0;try{for(var s,u=e.pages[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;if(c.getAllSingleItems().indexOf(this.items[0])>=0){this.pageOfItems=c;break}}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}}if(this.updateRealTime&&this.items.forEach(function(e){return e.move(r.translateX,r.translateY)}),this.renderAfterCommit){var l=!0,h=!1,p=void 0;try{for(var d,f=t.activeItems[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var g=d.value,v=t.pageController.getItemRenderer(g);if(v){v.updatePosition();var y=P.a.getItemIncludedPage(e.pages,g);n.canvasAreaVC.printout.render({pageWrapper:t.pageController.getPageRenderer(y).element,pageId:y.pageId,pageIdx:y.pageIdx,pageSize:y.sheetSize.clone(),pageItems:[g],domRenderParam:{editScale:y.editScale,printAreaBgColor:y.background.color},forceCheckPageItems:!0})}}}catch(e){h=!0,p=e}finally{try{l||null==f.return||f.return()}finally{if(h)throw p}}n.renderHandler(e,t,{type:w.a.MOVE,tx:this.translateX,ty:this.translateY,updateRealTime:this.updateRealTime})}}}},{key:"doRollback",value:function(e,t,n){var r=this;T.a.selectItems(this.items),this.items.forEach(function(e){var n=e;if(e instanceof C.a&&(n=e.getSelectedItem()),n)if(n instanceof _.a&&n.isEditMode)t.pageController.getItemRenderer(n).toggleEditMode();else if(n instanceof A.a&&n.isTextEditMode){t.pageController.getItemRenderer(n).toggleEditMode(-1,-1)}e.move(-1*r.translateX,-1*r.translateY)})}},{key:"doAfterAction",value:function(){}}]),t}(j),Q=function(e){function t(e,n){var r,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return m()(this,t),(r=l()(this,p()(t).call(this))).doSaveQueue=!0,r.actionType=B.a.ROTATE_ITEM,r.itemInfos=[],r.isLastSavedAction=!1,r.changeDesign=function(){return!0},r.isRedo=!1,r.isActionGroupEquals=function(e){if(null==e||e.actionType!==r.actionType)return!1;for(var t=e.items.map(function(e){return e.tbpeId}).sort(),n=r.items.map(function(e){return e.tbpeId}).sort(),i=n.length,a=0,o=0;o<i;o++)n[o]===t[o]&&a++;return i>0&&t.length===i&&a===i},r.recycle=function(){r.items=null},r.concat=function(e){return r.offsetX=e.offsetX,r.offsetY=e.offsetY,!0},r.offsetX=e,r.offsetY=n,r.isMouseDrag=i,r.isShiftKeyPush=a,r.canRotate=r.items.every(function(e){return e.canRotate()&&!e.isLock()}),r.canRotate&&r.items.forEach(function(e){var t={ltrb:e.getLTRBCoordinate(),rotate:e.props.getRotate()};r.itemInfos.push(t)}),r.doSaveQueue=r.canRotate,r}return v()(t,e),k()(t,[{key:"doCommit",value:function(e,t,n){var r=this;if(this.canRotate){var i;T.a.selectItems(this.items),n.renderHandler(e,t,{type:w.a.ROTATE}),this.backupRbRect?i=this.backupRbRect.clone():(i=n.itemHandleVC.getLTRB(),this.backupRbRect=i.clone(),this.rotateAlreadyApplied=this.items.map(function(e){return e.props.getRotate()}));var a=i.getCenterPos(),o=I.a.getDegreeByRadian(Math.atan2(a.y-this.offsetY,a.x-this.offsetX))+(this.isMouseDrag&&n.itemHandleVC.positionStates.isBottomRotateHandle?90:-90)-i.rotate;if(this.isShiftKeyPush){var s=n.itemHandleVC.positionStates.rotate,u=s+o,c=Math.sign(u),l=(c=0===c?1:c)>0?Math.floor(u/15):Math.ceil(u/15);o=(u=15*(u%15>=7.5*c?l+.5*(c+1):l+.5*(c-1)))-s}var h=[];this.items.forEach(function(e,t){var n=r.isRedo?r.rotateAlreadyApplied[t]:0,i=e.props.getRotate()+o-n;e.props.setRotate(i);var s=e.getLTRBCoordinate(),u=new V.a((s.left+s.right)/2,(s.top+s.bottom)/2);s.moveCenter(z.a.calcLocationByRotate(u,a,o)),e.setLTRBCoordinate(s),e.hover&&(e.hover=!1);var c=C.b.getRootGroup(e.groupId);c&&-1===h.indexOf(c)&&h.push(c)}),h.forEach(function(e){return e.addBoxDegree(o)}),n.itemHandleVC.rotate(o),this.isRedo&&n.renderHandler(e,t),this.isRedo=!0}}},{key:"doRollback",value:function(e,t,n){if(this.canRotate){T.a.selectItems(this.items);for(var r=[],i=0,a=this.items.length;i<a;i++){var o=this.items[i],s=this.itemInfos[i];o.setLTRBCoordinate(s.ltrb),o.props.setRotate(s.rotate);var u=C.b.getRootGroup(o.groupId);u&&-1===r.indexOf(u)&&r.push(u)}r.forEach(function(e){return e.initBoxDegree()}),n.renderHandler(e,t)}}}]),t}(j),$=function(e){function t(e,n,r,i,a,o,s,u){var c,h=arguments.length>8&&void 0!==arguments[8]&&arguments[8];m()(this,t),(c=l()(this,p()(t).call(this))).isPossibleInCropMode=!0,c.actionType=B.a.RESIZE_ITEM,c.changeDesign=function(){return!0},c.isLastSavedAction=!1,c.isActionGroupEquals=function(e){if(null==e||e.actionType!==c.actionType||(!c.equalResizeGroup||!e.equalResizeGroup)&&e.mouseAction!==c.mouseAction)return!1;for(var t=e.items.map(function(e){return e.tbpeId}).sort(),n=c.items.map(function(e){return e.tbpeId}).sort(),r=n.length,i=0,a=0;a<r;a++)n[a]===t[a]&&i++;return r>0&&t.length===r&&i===r},c.recycle=function(){c.items=null},c.concat=function(e){return c.offsetX=e.offsetX,c.offsetY=e.offsetY,c.absoluteX=e.absoluteX,c.absoluteY=e.absoluteY,c.translateX+=e.translateX,c.translateY+=e.translateY,c.calculateResult=null,!0},c.mouseAction=e,c.pages=n,c.offsetX=r,c.offsetY=i,c.translateX=a,c.translateY=o,c.isShiftKeyPush=s,c.isAltOrCtrlKeyPush=u,c.equalResizeGroup=h;var d=c.page=P.a.getItemIncludedPage(n,c.items[0]);c.doSaveQueue=c.isSaveQueue(),c.movedby=F.a.mouseActionToHandle(c.mouseAction),c.backupStatusPosition=U.a.instance.editorMainVC.itemHandleVC.positionStatesForResize,c.snap();var f=U.a.instance.pageController.getPageRenderer(d).contents.getBoundingClientRect();return c.offsetX=(c.offsetX-f.left/U.a.instance.zoomScale)/d.editScale,c.offsetY=(c.offsetY-f.top/U.a.instance.zoomScale)/d.editScale,c}return v()(t,e),k()(t,[{key:"snap",value:function(){var e,n,r=this.getLastAction();if(r&&r instanceof t&&r.isActionGroupEquals(this)&&X.a.instance.getContinueActionQ()&&(e=r.absoluteX,n=r.absoluteY),this.absoluteX=this.offsetX,this.absoluteY=this.offsetY,N.a.getUserSetting().isSnapGuideVisible){var i=new V.a(this.translateX,this.translateY);U.a.instance.editorMainVC.itemHandleVC.snapResize(this.movedby,i,this.isShiftKeyPush,this.isAltOrCtrlKeyPush),this.translateX=i.x,this.translateY=i.y,void 0!==e&&(this.offsetX=e+i.x*this.page.editScale),void 0!==n&&(this.offsetY=n+i.y*this.page.editScale),this.absoluteX=this.offsetX,this.absoluteY=this.offsetY}}},{key:"isSaveQueue",value:function(){return!(1===this.items.length&&this.items[0]instanceof x.d)||!this.items[0].isEditMode}},{key:"doCommit",value:function(e,n,r){var i;if(this.calculateResult?i=this.calculateResult:(this.calculateResult=t.calculate(this.backupStatusPosition,this.items,this.mouseAction,this.offsetX,this.offsetY,this.getFixRatio(),this.isAltOrCtrlKeyPush),i=this.calculateResult),T.a.selectItems(this.items),i=i.shallowClone(),1===this.items.length){t.resizeSingle(this.items[0],i,this.movedby,this.getFixRatio());var a=n.pageController.getItemRenderer(this.items[0]);a&&a.renderAutoAsync(n.pageEditScale)}else t.resizeMulti(this.items,i,r.itemHandleVC.positionStates,this.movedby);r.itemHandleVC.positionStatesForResize=i,r.renderHandler(e,n,{type:w.a.RESIZE}),this.doAfterAction()}},{key:"doAfterAction",value:function(){u()(p()(t.prototype),"doAfterAction",this).call(this),this.items.forEach(function(e){return e.hover=!1})}},{key:"getFixRatio",value:function(){var e=this.items,t=this.mouseAction,n=!this.isShiftKeyPush;switch(t){case G.a.MODE_HANDLER_RESIZE_L:case G.a.MODE_HANDLER_RESIZE_T:case G.a.MODE_HANDLER_RESIZE_R:case G.a.MODE_HANDLER_RESIZE_B:n=!1}if((e[0]instanceof R.a||e[0]instanceof Y.a)&&e[0].keepRatio||e[0]instanceof L.b||e[0]instanceof _.a)switch(t){case G.a.MODE_HANDLER_RESIZE_TL:case G.a.MODE_HANDLER_RESIZE_TR:case G.a.MODE_HANDLER_RESIZE_BL:case G.a.MODE_HANDLER_RESIZE_BR:n=!0}return n}},{key:"doRollback",value:function(e,n,r){T.a.selectItems(this.items);var i=this.backupStatusPosition.shallowClone();if(1===n.activeItems.length){var a=t.resizeSingle(this.items[0],i,this.movedby),o=a.tx,s=a.ty;0===o&&0===s||this.items[0].move(-o,-s)}else{r.renderHandler(e,n);var u=t.resizeMulti(this.items,i,r.itemHandleVC.positionStates,this.movedby),c=u.tx,l=u.ty;0===c&&0===l||this.items.forEach(function(e){return e.move(-c,-l)})}}}],[{key:"convertPositionStatusToLTRB",value:function(e,t){return new W.a(e.left,e.top,e.left+e.width,e.top+e.height,t)}},{key:"resizeSingle",value:function(e,n,r,i){var a=e.getLTRBCoordinate().getCenterPos(),o=t.convertPositionStatusToLTRB(n,e.props.getRotate());e.setLTRBCoordinate(o,void 0,r,i),n.left=e.props.getLeft(),n.top=e.props.getTop(),n.width=e.getWidth(),n.height=e.getHeight();var s=e.props.getRotate();if(0!==s){var u=o.getCenterPos(),c=this.getFixPosition(u.x,u.y,a.x,a.y,s),l=c.tx,h=c.ty;return e.move(l,h,{isCenterCorrect:!0}),n.left+=l,n.top+=h,e instanceof x.d&&(e.rotateCorrectV=new V.a(l,h)),{tx:l,ty:h}}return{tx:0,ty:0}}},{key:"resizeMulti",value:function(e,t,n,r){var i=t.width/n.width,a=t.height/n.height,o=n.left+n.width/2,s=n.top+n.height/2,u=t.left+t.width/2,c=t.top+t.height/2,l=0,h=0;if(0!==t.rotate){var p=this.getFixPosition(u,c,o,s,t.rotate),d=p.tx,f=p.ty;t.left+=d,t.top+=f,u+=d,c+=f,l=d,h=f}return e.forEach(function(e){var t=e.getLTRBCoordinate();t.left=u+(t.left-o)*i,t.top=c+(t.top-s)*a,t.right=u+(t.right-o)*i,t.bottom=c+(t.bottom-s)*a,t.rotate=e.props.getRotate(),e.setLTRBCoordinate(t,void 0,r)}),{tx:l,ty:h}}},{key:"getFixPosition",value:function(e,t,n,r,i){var a=Math.sqrt(Math.pow(e-n,2)+Math.pow(t-r,2)),o=Math.atan2(t-r,e-n);return{tx:Math.cos(o+i*Math.PI/180)*a+n-e,ty:Math.sin(o+i*Math.PI/180)*a+r-t}}},{key:"calculate",value:function(e,n,r,i,a,o,s){var u=(e=e.shallowClone()).height/e.width,c=1===n.length,l=c?n[0].props.getRotate():e.rotate;if(0!==l){var h,p;if(c){var d=n[0].getLTRBCoordinate().getCenterPos();h=d.x,p=d.y}else h=e.left+e.width/2,p=e.top+e.height/2;var f=Math.sqrt(Math.pow(i-h,2)+Math.pow(a-p,2)),g=Math.atan2(a-p,i-h);i=Math.cos(g-l*Math.PI/180)*f+h,a=Math.sin(g-l*Math.PI/180)*f+p}var v,y,m,E,k=0,S=0,I=0,T=0;switch(r){case G.a.MODE_HANDLER_RESIZE_T:S=e.top+e.height,T=Math.max(S-a,1),e.top=s?Math.min(S-T,e.top+e.height/2-.5):S-T,e.height=s?Math.max(2*T-e.height,1):T;break;case G.a.MODE_HANDLER_RESIZE_TR:I=Math.max(i-e.left,1),e.left=s?Math.min(e.left-I+e.width,e.left+e.width/2-.5):e.left,e.width=s?Math.max(2*I-e.width,1):I,S=e.top+e.height,T=Math.max(S-a,1),e.top=s?Math.min(S-T,e.top+e.height/2-.5):S-T,e.height=s?Math.max(2*T-e.height,1):T;break;case G.a.MODE_HANDLER_RESIZE_R:I=Math.max(i-e.left,1),e.left=s?Math.min(e.left-I+e.width,e.left+e.width/2-.5):e.left,e.width=s?Math.max(2*I-e.width,1):I;break;case G.a.MODE_HANDLER_RESIZE_BR:I=Math.max(i-e.left,1),e.left=s?Math.min(e.left-I+e.width,e.left+e.width/2-.5):e.left,e.width=s?Math.max(2*I-e.width,1):I,T=Math.max(a-e.top,1),e.top=s?Math.min(e.top-T+e.height,e.top+e.height/2-.5):e.top,e.height=s?Math.max(2*T-e.height,1):T;break;case G.a.MODE_HANDLER_RESIZE_B:T=Math.max(a-e.top,1),e.top=s?Math.min(e.top-T+e.height,e.top+e.height/2-.5):e.top,e.height=s?Math.max(2*T-e.height,1):T;break;case G.a.MODE_HANDLER_RESIZE_BL:k=e.left+e.width,I=Math.max(k-i,1),e.left=s?Math.min(k-I,e.left+e.width/2-.5):k-I,e.width=s?Math.max(2*I-e.width,1):I,T=Math.max(a-e.top,1),e.top=s?Math.min(e.top-T+e.height,e.top+e.height/2-.5):e.top,e.height=s?Math.max(2*T-e.height,1):T;break;case G.a.MODE_HANDLER_RESIZE_L:k=e.left+e.width,I=Math.max(k-i,1),e.left=s?Math.min(k-I,e.left+e.width/2-.5):k-I,e.width=s?Math.max(2*I-e.width,1):I;break;case G.a.MODE_HANDLER_RESIZE_TL:k=e.left+e.width,I=Math.max(k-i,1),e.left=s?Math.min(k-I,e.left+e.width/2-.5):k-I,e.width=s?Math.max(2*I-e.width,1):I,S=e.top+e.height,T=Math.max(S-a,1),e.top=s?Math.min(S-T,e.top+e.height/2-.5):S-T,e.height=s?Math.max(2*T-e.height,1):T}if(c&&n[0]instanceof x.d&&U.a.isCropMode()){var b=n[0],w=t.convertPositionStatusToLTRB(e,b.props.getRotate()).changeScale(1),A=b.getLTRBCoordinate().changeScale(1),C=b.photoCrop.getPhotoCloneBoxRect(b.props.getRotate()),R=b.photoCrop.getBoxRect(b.props.getRotate());if(!b.canIgnoreCropBox){var L=M.updateConflictedRect(w,A,C,R);e.left=L.left,e.top=L.top,e.width=L.getWidth(),e.height=L.getHeight()}}var _=e.height/e.width;if(o||!c)switch(r){case G.a.MODE_HANDLER_RESIZE_T:case G.a.MODE_HANDLER_RESIZE_B:v=((I=e.height/u)-e.width)/2,e.left-=v,e.width=I;break;case G.a.MODE_HANDLER_RESIZE_L:case G.a.MODE_HANDLER_RESIZE_R:y=((T=e.width*u)-e.height)/2,e.top-=y,e.height=T;break;case G.a.MODE_HANDLER_RESIZE_TR:_>u?(m=e.height/u,v=s?(m-e.width)/2:0,e.left-=v,e.width=m):(y=((E=e.width*u)-e.height)/(s?2:1),e.top-=y,e.height=E);break;case G.a.MODE_HANDLER_RESIZE_BR:_>u?(m=e.height/u,v=s?(m-e.width)/2:0,e.left-=v,e.width=m):(E=e.width*u,y=s?(E-e.height)/2:0,e.top-=y,e.height=E);break;case G.a.MODE_HANDLER_RESIZE_BL:_>u?(v=((m=e.height/u)-e.width)/(s?2:1),e.left-=v,e.width=m):(E=e.width*u,y=s?(E-e.height)/2:0,e.top-=y,e.height=E);break;case G.a.MODE_HANDLER_RESIZE_TL:_>u?(v=((m=e.height/u)-e.width)/(s?2:1),e.left-=v,e.width=m):(y=((E=e.width*u)-e.height)/(s?2:1),e.top-=y,e.height=E);break;default:throw Error("uaaaaaaaaaaa")}return e}}]),t}(j),J=function(){function e(t,n,r,a){var s=this;m()(this,e),this.isPossibleInCropMode=!1,this.doSaveQueue=!0,this.renderAuto=!1,this.actionType=B.a.RESIZE_ITEM,this.concat=function(e){return!1},this.changeDesign=function(){return!0},this.isLastSavedAction=!1,this.isRedo=!1,this.commit=function(){var e=o()(i.a.mark(function e(t,n,r){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s.isRedo?s.changedLTRBList.forEach(function(e,t){s.items[t].props.setRotate(e.rotate),s.items[t].setLTRBCoordinate(e)}):s.changedLTRBList=s.items.map(function(e){var t=e.getLTRBCoordinate();return t.rotate=e.props.getRotate(),t}),e.next=3,r.renderAuto(t,n);case 3:(a=n.pageController.getPageRenderer(t.pages[n.renderPageIdx]))&&a.updateHoverLayer(),s.onChangeItems&&s.onChangeItems(s.items),s.isRedo=!0;case 7:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),this.rollback=function(){var e=o()(i.a.mark(function e(t,n,r){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s.oldItemLTRBList.forEach(function(e,t){s.items[t].props.setRotate(e.rotate),s.items[t].setLTRBCoordinate(e)}),e.next=3,r.renderAuto(t,n);case 3:(a=n.pageController.getPageRenderer(t.pages[n.renderPageIdx]))&&a.updateHoverLayer(),s.onRollbackChangedItems&&s.onRollbackChangedItems(),s.onChangeItems&&s.onChangeItems(s.items);case 7:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),this.recycle=function(){s.items=null,s.oldItemLTRBList=null,s.onChangeItems=null,s.changedLTRBList=null},this.items=t,this.oldItemLTRBList=n,this.onChangeItems=r,this.onRollbackChangedItems=a}return k()(e,[{key:"isActionGroupEquals",value:function(e){return!1}}]),e}(),ee=function(e){function t(e,n,r,a){var s,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:O.b.ITEM_TOOLS_UPDATE_PREVENT;return m()(this,t),(s=l()(this,p()(t).call(this))).changeDesign=function(){return!0},s.commitAction=function(){var e=o()(i.a.mark(function e(t,n,r){var a,o,u,c,l,h,p,d;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.getImageSize(t.getRepositoryType());case 2:if(a=e.sent,o=a.imgWidth,u=a.imgHeight,c=t.pages[s.pageIdx],l=P.a.getOffsetBaseRect(s.isDragging,c.sheetSize,c.editScale,s.offsetX,s.offsetY,o,u),!s.newItem){e.next=11;break}h=s.newItem,e.next=15;break;case 11:return p="".concat((new Date).getTime(),"-").concat(Math.random()),e.next=14,s.createNewItem(p,l);case 14:h=e.sent;case 15:return s.setItemOption(h),d=c.getAllSingleItems(),P.a.correctPosition(d,h),d.forEach(function(e){e.hover=!1}),c.addItem(h,c.items.length),T.a.selectItem(h),s.newItem=h,e.next=24,r.canvasAreaVC.renderAuto(t,n);case 24:return r.renderOther(t,n,s.cmdType),e.next=27,s.afterCreateItem(t,n);case 27:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),s.rollbackAction=function(){var e=o()(i.a.mark(function e(t,n,r){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.pages[s.pageIdx].removeItem(s.newItem),e.next=4,r.renderAuto(t,n);case 4:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),s.recycle=function(){s.newItem=null},s.pageIdx=e,s.offsetX=n,s.offsetY=r,s.isDragging=a,s.cmdType=u,s.renderAuto=!1,s}var n,r,a;return v()(t,e),k()(t,[{key:"getImageSize",value:(a=o()(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{imgWidth:0,imgHeight:0});case 1:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)})},{key:"createNewItem",value:(r=o()(i.a.mark(function e(t,n){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)})},{key:"afterCreateItem",value:(n=o()(i.a.mark(function e(t,n){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})),function(e,t){return n.apply(this,arguments)})},{key:"setItemOption",value:function(e){e.addedBy=b.f.USER}}]),t}(B.b),te=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U.a.instance.activeItems.slice(),r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:U.a.instance.renderPageIdx;return m()(this,t),(e=l()(this,p()(t).call(this))).actionType=B.a.GROUP_ADD,e.changeDesign=function(){return!0},e.commitAction=function(t,n,r){if(e.doSaveQueue){var i=t.pages[e.pageIdx];e.oldAllItems=i.items.slice();var a=e.sortItems(e.oldAllItems,e.selectedItems);i.setItems(a,!0),n.pageController.getPageRenderer(i).updateHoverLayer(),H.a.setMultiSelectMode(!1)}},e.rollbackAction=function(t,n,r){C.b.delete(e.groupId);var i=t.pages[e.pageIdx];i.setItems(e.oldAllItems,!0),n.pageController.getPageRenderer(i).updateHoverLayer()},e.recycle=function(){e.groupId=null,e.selectedItems=null},e.pageIdx=r,e.selectedItems=C.b.convertSinglesToItems(n),(e.selectedItems.length<2||n[0].isLock())&&(e.doSaveQueue=!1),e}return v()(t,e),k()(t,[{key:"sortItems",value:function(e,t){var n=e.slice(),r=[],i=new C.a;this.groupId=i.getGroupId();var a=!0,o=!1,s=void 0;try{for(var u,c=n[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value,h=!1,p=!0,d=!1,f=void 0;try{for(var g,v=t[Symbol.iterator]();!(p=(g=v.next()).done);p=!0){var y=g.value;if(l===y){h=!0,i.addMember(y),y===t[t.length-1]&&r.push(i);break}}}catch(e){d=!0,f=e}finally{try{p||null==v.return||v.return()}finally{if(d)throw f}}h||r.push(l)}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}return r}}]),t}(B.b),ne=function e(){var t=this;if(m()(this,e),this.doSaveQueue=!0,this.actionType=B.a.GROUP_DELETE,this.isActionGroupEquals=function(e){return!1},this.concat=function(e){return!1},this.changeDesign=function(){return!0},this.isLastSavedAction=!1,this.commit=function(){var e=o()(i.a.mark(function e(n,r,a){var o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.doSaveQueue){e.next=6;break}return o=C.b.getRootGroup(t.selectedItems[0].groupId),t.rootGroup=o,C.b.delete(o.getGroupId()),e.next=6,a.renderAuto(n,r);case 6:r.pageController.getPageRenderer(n.pages[r.renderPageIdx]).updateHoverLayer();case 7:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),this.rollback=function(){var e=o()(i.a.mark(function e(n,r,a){var o,s,u,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.rootGroup,t.selectedItems.forEach(function(e){var t=C.b.getRootGroup(e.groupId);t?o.addMember(t):o.addMember(e)}),s=o.getMembers(),u=n.pages[r.renderPageIdx],c=u.items,s.forEach(function(e,t){for(var n=0;n<c.length;n++)if(e===c[n]){if(c.splice(n,1),t===s.length-1){var r=c.splice(0,n);u.setItems(r.concat(o).concat(c),!0)}break}}),e.next=8,a.renderAuto(n,r);case 8:r.pageController.getPageRenderer(u).updateHoverLayer();case 9:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),this.recycle=function(){t.selectedItems=null},this.selectedItems=U.a.instance.activeItems.filter(function(e){return e.select}),1===this.selectedItems.length&&this.selectedItems[0].groupId){var n=C.b.getRootGroup(this.selectedItems[0].groupId);this.selectedItems=n.getAllSingleMembers()}this.doSaveQueue=C.b.isSameGroup(this.selectedItems)},re=function e(){m()(this,e),this.doSaveQueue=!1,this.actionType=B.a.SELECT_ALL,this.isActionGroupEquals=function(e){return!1},this.concat=function(e){return!1},this.changeDesign=function(){return!1},this.isLastSavedAction=!1,this.commit=function(){var e=o()(i.a.mark(function e(t,n,r){var a,o,s,u,c,l,h,p,d;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(a=U.a.instance.renderPageIdx,o=t.pages[a],T.a.unselectAllItems(),s=!0,u=!1,c=void 0,e.prev=6,l=o.getAllSingleItems()[Symbol.iterator]();!(s=(h=l.next()).done);s=!0)(p=h.value).isLock()||o.background.isSkinItem(p)||T.a.appendSelectedItem(p);e.next=14;break;case 10:e.prev=10,e.t0=e.catch(6),u=!0,c=e.t0;case 14:e.prev=14,e.prev=15,s||null==l.return||l.return();case 17:if(e.prev=17,!u){e.next=20;break}throw c;case 20:return e.finish(17);case 21:return e.finish(14);case 22:return e.next=24,r.renderAuto(t,n);case 24:(d=U.a.instance.pageController.getPageRenderer(o))&&d.updateHoverLayer();case 26:case"end":return e.stop()}},e,null,[[6,10,14,22],[15,,17,21]])}));return function(t,n,r){return e.apply(this,arguments)}}(),this.rollback=function(e,t){},this.recycle=function(){}},ie=function e(){m()(this,e),this.doSaveQueue=!1,this.actionType=B.a.DESELECT,this.isActionGroupEquals=function(e){return!1},this.concat=function(e){return!1},this.changeDesign=function(){return!1},this.isLastSavedAction=!1,this.commit=function(e,t){T.a.unselectAllItems()},this.rollback=function(e,t){},this.recycle=function(){}},ae=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U.a.instance.activeItems.slice();return m()(this,t),(e=l()(this,p()(t).call(this))).propertyList=[],e.doSaveQueue=!0,e.actionType=B.a.ITEM_LOCK,e.isActionGroupEquals=function(e){return!1},e.changeDesign=function(){return!0},e.isLastSavedAction=!1,e.commitAction=function(t,n,r){e.doSaveQueue&&e.targetList.forEach(function(t){e.propertyList.push({canUserDel:t.props.isCanUserDel(),canUserMove:t.props.isCanUserMove(),canUserResize:t.props.isCanUserResize()}),t.lock()})},e.rollbackAction=function(t,n,r){e.targetList.forEach(function(t,n){t.props.setCanUserDel(e.propertyList[n].canUserDel),t.props.setCanUserMove(e.propertyList[n].canUserMove),t.props.setCanUserResize(e.propertyList[n].canUserResize)})},e.recycle=function(){e.propertyList=null,e.targetList=null},e.targetList=n,null==e.targetList||0===e.targetList.length?e.doSaveQueue=!1:(e.renderAuto=!0,e.targetList=C.b.getGroupItemsAddedArray(e.targetList)),e}return v()(t,e),t}(B.b),oe=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U.a.instance.activeItems.slice();return m()(this,t),(e=l()(this,p()(t).call(this))).doSaveQueue=!0,e.actionType=B.a.ITEM_UNLOCK,e.isActionGroupEquals=function(e){return!1},e.changeDesign=function(){return!0},e.commitAction=function(t,n,r){e.doSaveQueue&&e.targetList.forEach(function(e){e.props.setCanUserDel(!0),e.props.setCanUserMove(!0),e.props.setCanUserResize(!0)})},e.rollbackAction=function(t,n,r){e.targetList.forEach(function(e){e.props.setCanUserDel(!1),e.props.setCanUserMove(!1),e.props.setCanUserResize(!1)}),T.a.unselectAllItems()},e.recycle=function(){e.targetList=null},e.targetList=n,e.targetList&&e.targetList.length>0&&e.targetList[0].isLock()?e.targetList=C.b.getGroupItemsAddedArray(e.targetList):e.doSaveQueue=!1,e}return v()(t,e),t}(B.b),se=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C.b.getGroupItemsAddedArray(U.a.instance.activeItems.slice());return m()(this,t),(e=l()(this,p()(t).call(this))).doSaveQueue=!0,e.actionType=B.a.FLIP_H,e.isActionGroupEquals=function(e){return!1},e.changeDesign=function(){return!0},e.commitAction=function(t,n,r){e.doSaveQueue&&(e.flip(),r.renderLayerThumb(e.selectedItems))},e.rollbackAction=function(t,n,r){null!=e.selectedItems&&(e.flip(),r.renderLayerThumb(e.selectedItems))},e.recycle=function(){e.selectedItems=null},e.selectedItems=n,e.selectedItems.length>0&&!e.selectedItems[0].isLock()||(e.doSaveQueue=!1),e}return v()(t,e),k()(t,[{key:"flip",value:function(){if(1===this.selectedItems.length)this.selectedItems[0].flipH(!0);else{var e=U.a.instance.editorMainVC.itemHandleVC.getLTRB().getCenterPos(),t=!0,n=!1,r=void 0;try{for(var i,a=this.selectedItems[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;o.move(2*(e.x-o.getLTRBCoordinate().getCenterPos().x),0),o.flipH(!0)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}}}]),t}(B.b),ue=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C.b.getGroupItemsAddedArray(U.a.instance.activeItems.slice());return m()(this,t),(e=l()(this,p()(t).call(this))).doSaveQueue=!0,e.actionType=B.a.FLIP_V,e.isActionGroupEquals=function(e){return!1},e.changeDesign=function(){return!0},e.commitAction=function(t,n,r){e.doSaveQueue&&(e.flip(),r.renderLayerThumb(e.selectedItems))},e.rollbackAction=function(t,n,r){e.selectedItems&&(e.flip(),r.renderLayerThumb(e.selectedItems))},e.recycle=function(){e.selectedItems=null},e.selectedItems=n,(0===e.selectedItems.length||e.selectedItems[0].isLock())&&(e.doSaveQueue=!1),e}return v()(t,e),k()(t,[{key:"flip",value:function(){if(1===this.selectedItems.length)this.selectedItems[0].flipV(!0);else{var e=U.a.instance.editorMainVC.itemHandleVC.getLTRB().getCenterPos(),t=!0,n=!1,r=void 0;try{for(var i,a=this.selectedItems[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;o.move(0,2*(e.y-o.getLTRBCoordinate().getCenterPos().y)),o.flipV(!0)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}}}]),t}(B.b),ce=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:U.a.instance.activeItems.slice();return m()(this,t),(n=l()(this,p()(t).call(this))).doSaveQueue=!0,n.actionType=B.a.ITEM_OPACITY,n.rollbackList=[],n.changeDesign=function(){return!0},n.isSameAction=!1,n.mouseActionMode=G.a.MODE_NONE,n.isActionGroupEquals=function(e){return!!(e&&e.actionType===n.actionType&&e instanceof t)&&(U.a.instance.mouseAction.mode!==G.a.MODE_NONE&&(n.isSameAction=e.mouseActionMode===G.a.MODE_MOVE_CHANGE_VALUE),n.isSameAction)},n.commitAction=function(e,t,r){n.doSaveQueue&&(n.targetList.forEach(function(e){e.props.setOpacity(n.newVal)}),r.renderCanvas(e,t,n.targetList),r.renderLayerThumb(n.targetList))},n.rollbackAction=function(e,t,r){for(var i=0,a=n.targetList.length;i<a;i++)n.targetList[i].props.setOpacity(n.rollbackList[i]);r.renderCanvas(e,t,n.targetList),t.editorMainVC.renderLayerThumb(n.targetList)},n.recycle=function(){n.targetList=null},n.concat=function(e){return e instanceof t&&(n.newVal=e.newVal,!0)},n.newVal=e,n.targetList=r,isNaN(e)||null==n.targetList||0===n.targetList.length?n.doSaveQueue=!1:(n.targetList.forEach(function(e){return n.rollbackList.push(e.props.getOpacity())}),n.commitTime=(new Date).getTime()),n.renderAuto=!1,n.mouseActionMode=U.a.instance.mouseAction.mode,n}return v()(t,e),t}(B.b),le=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:U.a.instance.activeItems.slice();return m()(this,t),(n=l()(this,p()(t).call(this))).doSaveQueue=!0,n.actionType=B.a.ITEM_HYPERLINK,n.targetList=[],n.rollbackList=[],n.changeDesign=function(){return!0},n.commitAction=function(e,t,r){n.doSaveQueue&&(n.targetList.forEach(function(e){e.props.setActiveHyperlink(n.newHyperlink.active),e.props.setHyperlinkType(n.newHyperlink.type),e.props.setHyperlinkValue(n.newHyperlink.value)}),r.renderItemTools(e,t,!1,!0))},n.rollbackAction=function(e,t,r){for(var i=0,a=n.targetList.length;i<a;i++)n.targetList[i].props.setActiveHyperlink(n.rollbackList[i].active),n.targetList[i].props.setHyperlinkType(n.rollbackList[i].type),n.targetList[i].props.setHyperlinkValue(n.rollbackList[i].value);r.renderItemTools(e,t,!1,!0)},n.recycle=function(){n.targetList=null,n.rollbackList=null},n.newHyperlink=e,null==e||null==r||0===r.length?n.doSaveQueue=!1:(n.targetList=1===r.length?r:[C.b.getRootGroup(r[0].groupId)],n.targetList.forEach(function(e){return n.rollbackList.push({active:e.props.isActiveHyperlink(),type:e.props.getHyperlinkType(!0),value:e.props.getHyperlinkValue(!0)})})),n.renderAuto=!1,n}return v()(t,e),t}(B.b),he=function(e){function t(e,n,r){var i;return m()(this,t),(i=l()(this,p()(t).call(this))).actionType=B.a.BITMAP_TO_SVG,i.changeDesign=function(){return!0},i.commitAction=function(e,t,n){if(i.doSaveQueue){var r=i.photoItem.props,a=new R.a(S.b.random(),i.svgData,new K.a(0,0,i.svgData.width,i.svgData.height),r.getRotate(),r.isFlipH(),r.isFlipV(),r.isCanUserSelect(),r.isCanUserMove(),r.isCanUserResize(),r.isCanUserDel());i.svgItem=a,e.pages[i.pageIdx].addItem(a),T.a.selectItem(i.svgItem)}},i.rollbackAction=function(e,t,n){i.doSaveQueue&&(e.pages[i.pageIdx].removeItem(i.svgItem),T.a.selectItem(i.photoItem))},i.recycle=function(){i.photoItem=null},i.pageIdx=e,i.photoItem=n,i.svgData=r,i.doSaveQueue=n.orgType===x.b.Sticker||n.orgType===x.b.Image||n.orgType===x.b.BackgroundImage,i}return v()(t,e),t}(B.b),pe=function(e){function t(e,n){var r;if(m()(this,t),(r=l()(this,p()(t).call(this))).actionType=B.a.MOVE_ITEM_TO_OTHER_PAGE,r.doSaveQueue=!0,r.renderAuto=!1,r.changeDesign=function(){return!1},r.isActionGroupEquals=function(e){return!1},r.commitAction=function(){var e=o()(i.a.mark(function e(t,n,a){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.moveItemToOtherPage(r.makeParam(!1),t,n,a);case 2:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),r.rollbackAction=function(){var e=o()(i.a.mark(function e(t,n,a){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.moveItemToOtherPage(r.makeParam(!0),t,n,a);case 2:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),r.recycle=function(){r.oldPage=null,r.newPage=null},r.oldPage=e,r.newPage=n,r.items=C.b.convertSinglesToItems(U.a.instance.activeItems,r.oldPage.items),!r.offsetY){var a=U.a.instance.pageController.getPageRenderer(r.oldPage).contents.getBoundingClientRect(),s=U.a.instance.pageController.getPageRenderer(r.newPage).contents.getBoundingClientRect(),u=r.newPage.sheetSize.width/s.width,c=s.top-a.top;r.offsetY=-c*u}if(!r.indexOfItems){r.indexOfItems=[];var h=!0,d=!1,f=void 0;try{for(var g,v=r.items[Symbol.iterator]();!(h=(g=v.next()).done);h=!0){var y=g.value,E=r.oldPage.items.indexOf(y);r.indexOfItems.push(E)}}catch(e){d=!0,f=e}finally{try{h||null==v.return||v.return()}finally{if(d)throw f}}}return r}var n;return v()(t,e),k()(t,[{key:"moveItemToOtherPage",value:(n=o()(i.a.mark(function e(t,n,r,a){var o,s,u;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(o=0;o<this.items.length;o++)s=this.items[o],t.oldPage.removeItem(s,!1),t.keepIndex?t.newPage.addItem(s,this.indexOfItems[o]):t.newPage.addItem(s),s.move(0,t.offsetY);return u=C.b.convertItemsToSingles(this.items),T.a.selectItems(u),e.next=5,a.canvasAreaVC.renderPage(t.oldPage,r);case 5:return e.next=7,a.canvasAreaVC.renderPage(t.newPage,r);case 7:return a.renderHandler(n,r),e.next=10,new D.b(t.oldPage.pageIdx,t.newPage.pageIdx,u).commitAction(n,r,a);case 10:case"end":return e.stop()}},e,this)})),function(e,t,r,i){return n.apply(this,arguments)})},{key:"makeParam",value:function(e){var t,n,r,i;return e?(t=this.newPage,n=this.oldPage,r=-this.offsetY,i=!0):(t=this.oldPage,n=this.newPage,r=this.offsetY,i=!1),{oldPage:t,newPage:n,offsetY:r,keepIndex:i}}}]),t}(B.b),de=function(e){function t(e,n){var r;return m()(this,t),(r=l()(this,p()(t).call(this))).doSaveQueue=!0,r.renderAuto=!1,r.actionType=B.a.DELETE_ITEM,r.isActionGroupEquals=function(e){return!1},r.concat=function(e){return!1},r.changeDesign=function(){return!0},r.commitAction=function(){var e=o()(i.a.mark(function e(t,n,a){var o,s,u,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return T.a.selectItem(r.imageframeItem),o=t.pages[n.renderPageIdx],r.oldPhotoItemIdx||(r.oldPhotoItemIdx=o.items.indexOf(r.photoItem)),r.oldFrameProps||(r.oldFrameProps=r.imageframeItem.innerPhotoItem.props.clone()),s=r.photoItem.props.clone(),o.removeItem(r.photoItem),X.a.instance.dispatch(new D.c(r.photoItem)),(u=n.pageController.getPageRenderer(o)).syncItemRenderers(),r.oldOrgTyle=r.imageframeItem.innerPhotoItem.orgType,r.oldFlipH=r.imageframeItem.originPhotoFlipHor,r.oldFlipV=r.imageframeItem.originPhotoFlipVer,e.next=14,r.imageframeItem.changePhoto(r.photoItem.props.getPhotoKey(),r.photoItem.orgType,r.photoItem.props.isFlipH(),r.photoItem.props.isFlipV(),r.photoItem.skinRatioId);case 14:(c=r.imageframeItem.innerPhotoItem.props).setBrightness(s.getBrightness()),c.setSaturation(s.getSaturation()),c.setLightness(s.getLightness()),c.setContrast(s.getContrast()),c.setTint(s.getTint()),c.setColorTone(s.getColorTone()),c.setTemperature(s.getTemperature()),c.setBlur(s.getBlur()),c.setVignette(s.getVignette()),c.setActiveShadow(s.isActiveShadow()),c.setShadowColor(s.getShadowColor(!0)),c.setShadowAngle(s.getShadowAngle(!0)),c.setShadowAlpha(s.getShadowAlpha(!0)),c.setShadowDistance(s.getShadowDistance(!0)),c.setShadowBlur(s.getShadowBlur(!0)),c.setPreset(s.getPreset()),c.setActiveHyperlink(s.isActiveHyperlink()),c.setHyperlinkType(s.getHyperlinkType(!0)),c.setHyperlinkValue(s.getHyperlinkValue(!0)),r.imageframeItem.setStatus(b.g.CHANGE),u.updateHoverLayer(),a.renderCanvas(t,n),a.renderHandler(t,n),a.renderItemTools(t,n),a.renderLayer(t,n);case 40:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),r.rollbackAction=function(){var e=o()(i.a.mark(function e(t,n,a){var o,s,u;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return T.a.unselectAllItems(),(o=t.pages[n.renderPageIdx]).addItem(r.photoItem,r.oldPhotoItemIdx),s=n.pageController.getPageRenderer(o),X.a.instance.dispatch(new D.c(r.imageframeItem)),s.syncItemRenderers(),r.imageframeItem.innerPhotoItem.setProps(r.oldFrameProps.clone()),r.imageframeItem.innerPhotoItem.orgType=r.oldPhotoOriginType,e.next=10,r.imageframeItem.changePhoto(r.oldPhotoKey,r.oldOrgTyle,r.oldFlipH,r.oldFlipV,r.oldRatioId);case 10:r.imageframeItem.innerPhotoItem.props.setChangeImage(),(u=r.imageframeItem.innerPhotoItem.props).setBrightness(r.oldFrameProps.getBrightness()),u.setSaturation(r.oldFrameProps.getSaturation()),u.setLightness(r.oldFrameProps.getLightness()),u.setContrast(r.oldFrameProps.getContrast()),u.setTint(r.oldFrameProps.getTint()),u.setColorTone(r.oldFrameProps.getColorTone()),u.setTemperature(r.oldFrameProps.getTemperature()),u.setBlur(r.oldFrameProps.getBlur()),u.setVignette(r.oldFrameProps.getVignette()),u.setActiveHyperlink(r.oldFrameProps.isActiveHyperlink()),u.setHyperlinkType(r.oldFrameProps.getHyperlinkType(!0)),u.setHyperlinkValue(r.oldFrameProps.getHyperlinkValue(!0)),r.imageframeItem.innerPhotoItem.setLTRBCoordinate(r.backupRect),r.imageframeItem.innerPhotoItem.itemPosition=r.backupImgRect.clone(),r.imageframeItem.setStatus(b.g.CHANGE),a.renderCanvas(t,n),a.renderHandler(t,n),a.renderItemTools(t,n);case 30:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),r.recycle=function(){r.imageframeItem=null},r.imageframeItem=e,r.photoItem=n,r.oldPhotoKey=e.innerPhotoItem.props.getPhotoKey(),r.oldRatioId=e.innerPhotoItem.skinRatioId,r.backupRect=e.innerPhotoItem.getLTRBCoordinate(),r.backupImgRect=e.innerPhotoItem.itemPosition,r.oldPhotoOriginType=e.innerPhotoItem.orgType,r}return v()(t,e),t}(B.b)},,,function(e,t,n){"use strict";n.d(t,"a",function(){return v});var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(6),u=n.n(s),c=n(3),l=n.n(c),h=n(9),p=n.n(h),d=n(7),f=n.n(d),g=n(360),v=function(e){function t(){var e,n;i()(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=u()(this,(e=l()(t)).call.apply(e,[this].concat(a)))).changeRenderProps=!0,n.changePositionSetRevision=!0,n.changeStyleProps=!0,n.changeRotateSetRevision=!1,n.changeOpacitySetRevision=!0,n.opacity=255,n.revision=1,n.styleRevision=1,n.forcedUpdate=!1,n}return f()(t,e),o()(t,[{key:"getChangeProps",value:function(){return this.changeRenderProps}},{key:"getRevision",value:function(){return this.changeRenderProps&&(this.changeRenderProps=!1,this.revision++),this.revision}},{key:"getStyleRevision",value:function(){return this.changeStyleProps&&(this.changeStyleProps=!1,this.styleRevision++),this.styleRevision}},{key:"isForcedUpdate",value:function(){return this.forcedUpdate}},{key:"setChangePositionSetRevision",value:function(e){this.changePositionSetRevision=!0===e}},{key:"setChangeRotateSetRevision",value:function(e){this.changeRotateSetRevision=!0===e}},{key:"setChangeOpacitySetRevision",value:function(e){this.changeOpacitySetRevision=!0===e}},{key:"setPosition",value:function(e){this.dimensionNotEqualsTo(e)&&(this.changePositionSetRevision&&this.updateRevision(),this.updateStyleRevision()),this.boundingBox=e}},{key:"dimensionNotEqualsTo",value:function(e){return void 0===this.boundingBox||!this.boundingBox.dimensionEqualsTo(e)}},{key:"move",value:function(e,t){this.updateStyleRevision(),this.boundingBox.translate(e,t)}},{key:"getBoundingBox",value:function(){return this.boundingBox}},{key:"getLeft",value:function(){return this.boundingBox.left}},{key:"setLeft",value:function(e){this.boundingBox.left!==Number(e)&&(this.changePositionSetRevision&&this.updateRevision(),this.updateStyleRevision()),this.boundingBox.left=Number(e)}},{key:"getTop",value:function(){return this.boundingBox.top}},{key:"setTop",value:function(e){this.boundingBox.top!==Number(e)&&(this.changePositionSetRevision&&this.updateRevision(),this.updateStyleRevision()),this.boundingBox.top=Number(e)}},{key:"getRight",value:function(){return this.boundingBox.right}},{key:"setRight",value:function(e){this.boundingBox.right!==Number(e)&&(this.changePositionSetRevision&&this.updateRevision(),this.updateStyleRevision()),this.boundingBox.right=Number(e)}},{key:"getBottom",value:function(){return this.boundingBox.bottom}},{key:"setBottom",value:function(e){this.boundingBox.bottom!==Number(e)&&(this.changePositionSetRevision&&this.updateRevision(),this.updateStyleRevision()),this.boundingBox.bottom=Number(e)}},{key:"getWidth",value:function(){return this.boundingBox.width}},{key:"getHeight",value:function(){return this.boundingBox.height}},{key:"getRotate",value:function(){return this.rotate}},{key:"setRotate",value:function(e){this.rotate!==Number(e)&&(this.updateStyleRevision(),this.changeRotateSetRevision&&this.updateRevision()),this.rotate=Number(e)}},{key:"isFlipH",value:function(){return this.flipH}},{key:"setFlipH",value:function(e){this.flipH!==e&&this.updateRevision(),this.flipH=!0===e}},{key:"isFlipV",value:function(){return this.flipV}},{key:"setFlipV",value:function(e){this.flipV!==e&&this.updateRevision(),this.flipV=!0===e}},{key:"getOpacity",value:function(){return this.opacity}},{key:"setOpacity",value:function(e){this.opacity!==Number(e)&&(this.changeOpacitySetRevision&&this.updateRevision(),this.updateStyleRevision()),this.opacity=Number(e)}},{key:"isCanUserSelect",value:function(){return this.canUserSelect}},{key:"setCanUserSelect",value:function(e){this.canUserSelect!==e&&this.updateRevision(),this.canUserSelect=!0===e}},{key:"isCanUserMove",value:function(){return this.canUserMove}},{key:"setCanUserMove",value:function(e){this.canUserMove!==e&&this.updateRevision(),this.canUserMove=!0===e}},{key:"isCanUserResize",value:function(){return this.canUserResize}},{key:"setCanUserResize",value:function(e){this.canUserResize!==e&&this.updateRevision(),this.canUserResize=!0===e}},{key:"isCanUserDel",value:function(){return this.canUserDel}},{key:"setCanUserDel",value:function(e){this.canUserDel!==e&&this.updateRevision(),this.canUserDel=!0===e}},{key:"updateRevision",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.changeRenderProps=e}},{key:"updateStyleRevision",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.changeStyleProps=e}},{key:"clear",value:function(){p()(l()(t.prototype),"clear",this).call(this),this.rotate=0,this.opacity=255,this.flipH=!1,this.flipV=!1,this.canUserResize=!0,this.canUserMove=!0,this.canUserDel=!0,this.updateRevision(),this.updateStyleRevision()}},{key:"isCanActiveShadow",value:function(){return!1}}],[{key:"parseColorString",value:function(e){var t=new g.a;return t.readValue(e),t}},{key:"parseRGBAColorSet",value:function(e,t){return g.a.parseRGBAColorSet(e,t)}}]),t}(n(235).a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"b",function(){return c});var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(11),u=function(){function e(){i()(this,e)}return o()(e,null,[{key:"getRegisteredFontName",value:function(e){return"text_"+s.b.b64EncodeUnicode(e).replace(/\+/g,"_").replace(/\//g,"-").replace(/=/g,"")}},{key:"getFallbackFontsStr",value:function(){var e=this;if(!this.defaultFontsStr){var t="";this.DEFAULT_FONTS.forEach(function(n){t+=(t.length>0?", ":"")+e.getRegisteredFontName(n)}),this.defaultFontsStr=t}return this.defaultFontsStr}},{key:"getOriginalFontName",value:function(e){if(e.startsWith("text_"))return s.b.b64DecodeUnicode(e.replace("text_","").replace(/\_/g,"+").replace(/\-/g,"/"))}},{key:"getFakeBoldStroke",value:function(t){return t/e.FONT_SIZE_FAKE_BOLD/e.FONT_SIZE_RATIO}},{key:"getDecoStrokeWidth",value:function(t){return t/15/e.FONT_SIZE_RATIO}},{key:"isFakeBold",value:function(e){return"300"===e.fontWeight||"Light"===e.fontWeight}}]),e}();u.FONT_SIZE_RATIO=1.3333,u.DEFAULT_FALLBACK_FONT="Noto Sans CJK KR Regular",u.DEFAULT_FONTS=["Noto Sans CJK KR Regular","Noto Sans","Noto Sans Math","Noto Sans Symbols","Noto Sans Symbols2"],u.DEFAULT_FONTS_CSS=u.DEFAULT_FONTS.reduce(function(e,t){return e+(""===e?"":",")+u.getRegisteredFontName(t)},""),u.FONT_SIZE_FAKE_BOLD=36,u.ITALIC_SKEW=.21,u.FORBIDDEN_CHAR=/([^\u0020-\u03E1\u03F0-\u052F\u1100-\u11FF\u1AB0-\u1ABE\u1C80-\u1C88\u1D00-\u1DF5\u1DFB-\u2071\u2074-\u23B6\u23BE-\u23EA\u23ED-\u23EF\u23F1-\u23FE\u2400-\u2704\u2706-\u2709\u270B-\u2727\u2729-\u274B\u274D\u274F-\u2753\u2756-\u2794\u2798-\u27AF\u27B1-\u27BE\u27C0-\u2B95\u2B98-\u2BB9\u2BBD-\u2BC8\u2BCA-\u2BD1\u2BEC-\u2BEF\u2BFE\u2C60-\u2C7F\u2DE0-\u2E44\u2E80-\u312D\u3131-\u31BA\u31C0-\u32FE\u3300-\u332B\u332D-\u4DB5\u4DC0-\u9FD0\uA640-\uA69F\uA700-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA7FF\uA92E\uA960-\uA97C\uAB30-\uAB65\uAC00-\uD7FF\uF900-\uFA6D\uFB00-\uFB06\uFE00\uFE10-\uFE6B\uFEFF-\uFFFD])/g,u.SHADOW_BLUR=3,u.SHADOW_LENGTH=1,u.SHADOW_BLUR_DRAW_CONST=1800,u.DECO_GAB_FILL_CONST=1.001,u.BACKGROUND_GAB_FILL_CONST=1.05;var c=function(){function e(t,n,r,a,o){i()(this,e),this.family=t,this.bold=n,this.italic=r,this.strikeout=a,this.underline=o}return o()(e,[{key:"getTextDecoration",value:function(){var e="";return this.strikeout&&(e+="line-through"),this.underline&&(e+=" underline"),e}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return u});var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=function(){function e(t,n){i()(this,e),this.row=t,this.col=n}return o()(e,[{key:"getCopy",value:function(){return new e(this.row,this.col)}},{key:"isAtBeginning",value:function(){return 0===this.row&&0===this.col}},{key:"isSameSelPos",value:function(e){return this.col===e.col&&this.row===e.row}}],[{key:"getSortedSelRange",value:function(e,t){var n,r;return e.row>t.row?(r=e,n=t):e.row<t.row?(n=e,r=t):e.col>t.col?(r=e,n=t):(n=e,r=t),{firstSel:n,lastSel:r}}}]),e}(),u=function(){function e(t,n){i()(this,e),this.start=t,this.end=n}return o()(e,[{key:"isSameRange",value:function(){return this.start.col===this.end.col&&this.start.row===this.end.row}}]),e}()},function(e,t,n){"use strict";n.d(t,"b",function(){return I}),n.d(t,"d",function(){return T}),n.d(t,"c",function(){return b}),n.d(t,"e",function(){return w}),n.d(t,"f",function(){return A}),n.d(t,"a",function(){return C});var r=n(2),i=n.n(r),a=n(4),o=n.n(a),s=n(0),u=n.n(s),c=n(6),l=n.n(c),h=n(3),p=n.n(h),d=n(7),f=n.n(d),g=n(224),v=n(457),y=n(282),m=n(336),E=n(241),k=n(229),S=n(90),I=function(e){function t(e,n,r){var a;return u()(this,t),(a=l()(this,p()(t).call(this))).actionType=g.a.ONE_TIME,a.doSaveQueue=!1,a.renderAuto=!1,a.changeDesign=function(){return!1},a.commitAction=function(){var e=o()(i.a.mark(function e(t,n,r){var o,s,u;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=a.oldPageIdx,s=a.newPageIdx,u=a.items,!(o<0||s<0)&&u&&0!==u.length&&k.a.getPrintoutOption().checkRestriction){e.next=5;break}return e.abrupt("return");case 5:return r.canvasAreaVC.printout.updateByItems({items:u.slice(),itemStatus:v.a.MOVE_OTHER_PAGE,pageId:t.pages[o].pageId}),e.next=9,new T(u,s).commitAction(t,n,r);case 9:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),a.rollbackAction=function(){},a.recycle=function(){},a.oldPageIdx=e,a.newPageIdx=n,a.items=r,a}return f()(t,e),t}(g.b),T=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return u()(this,t),(n=l()(this,p()(t).call(this))).actionType=g.a.ONE_TIME,n.doSaveQueue=!1,n.renderAuto=!0,n.changeDesign=function(){return!1},n.commitAction=function(){var e=o()(i.a.mark(function e(t,r,a){var o,s,u,c,l,h,p,d,f,g,v,y;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(k.a.getPrintoutOption().checkRestriction){e.next=2;break}return e.abrupt("return");case 2:if(o=n.pageIdx,s=a.canvasAreaVC.printout,!(o>=0)){e.next=14;break}return u=t.pages[o],c=u.pageId,l=u.sheetSize,h=u.getAllSingleItems(),p=0===n.items.length?h:n.items.slice(),e.next=12,s.checkRestrictionOfItems({items:p,pageWidth:l.width,pageHeight:l.height,pageId:c,pageIdx:o,pageItems:h});case 12:e.next=30;break;case 14:if(!(-1===o&&n.items&&n.items.length>0)){e.next=25;break}if(d=!1,!(f=t.pages.find(function(e){var t=!0,n=!1,i=void 0;try{for(var a,o=e.getAllSingleItems()[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){if(a.value.tbpeId===r.activeItems[0].tbpeId){d=!0;break}}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}return d}))){e.next=23;break}return g=f.pageId,v=f.sheetSize,y=n.items.slice(),e.next=23,s.checkRestrictionOfItems({items:y,pageWidth:v.width,pageHeight:v.height,pageId:g,pageIdx:f.pageIdx,pageItems:f.getAllSingleItems()});case 23:e.next=30;break;case 25:return e.next=27,s.checkRestrictionAllPage(t.pages);case 27:return e.next=29,a.renderAuto(t,r);case 29:m.a.fetchAlerts(!0);case 30:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),n.rollbackAction=function(){},n.recycle=function(){},n.items=e,n.pageIdx=r,n}return f()(t,e),t}(g.b),b=function(e){function t(e){var n;return u()(this,t),(n=l()(this,p()(t).call(this))).actionType=g.a.ONE_TIME,n.changeDesign=function(){return!1},n.commitAction=function(e,t,r){r.canvasAreaVC.printout&&k.a.getPrintoutOption().checkRestriction&&(r.canvasAreaVC.printout.updateByItems({items:[n.item],itemStatus:v.a.REMOVE}),m.a.addItemAlert(n.item.tbpeId,y.a.DELETE_ITEM))},n.rollbackAction=function(){},n.recycle=function(){},n.item=e,n.doSaveQueue=!1,n.renderAuto=!1,n}return f()(t,e),t}(g.b),w=function(e){function t(e){var n;return u()(this,t),(n=l()(this,p()(t).call(this))).actionType=g.a.ONE_TIME,n.changeDesign=function(){return!1},n.commitAction=function(e,t,r){if(k.a.getPrintoutOption().checkRestriction){var i=n.item;i&&!t.option.showPrintOutGuide&&r.canvasAreaVC.printout.updateGuideVisible(!0),r.canvasAreaVC.printout.updateByItems({items:[i],itemStatus:v.a.SELECT})}},n.rollbackAction=function(){},n.recycle=function(){},n.item=e,n.doSaveQueue=!1,n.renderAuto=!1,n}return f()(t,e),t}(g.b),A=function(e){function t(e){var n;return u()(this,t),(n=l()(this,p()(t).call(this))).actionType=g.a.ONE_TIME,n.changeDesign=function(){return!1},n.commitAction=function(e,t,n){k.a.getPrintoutOption().checkRestriction&&n.canvasAreaVC.printout&&t.mouseAction.mode!==E.a.MODE_ALERT_ICON_SELECT&&n.canvasAreaVC.printout.closeAlertPopup()},n.rollbackAction=function(){},n.recycle=function(){},n.item=e,n.doSaveQueue=!1,n.renderAuto=!1,n}return f()(t,e),t}(g.b),C=(g.b,function(e){function t(){var e;return u()(this,t),(e=l()(this,p()(t).call(this))).actionType=g.a.ONE_TIME,e.doSaveQueue=!1,e.renderAuto=!1,e.changeDesign=function(){return!1},e.commitAction=function(e,t,n){k.a.getPrintoutOption().checkRestriction&&n.canvasAreaVC.printout.updateByItems({items:t.activeItems,itemStatus:v.a.CHANGE_POSITION})},e.rollbackAction=function(){},e.recycle=function(){},e}return f()(t,e),t}(g.b))},function(e,t,n){"use strict";var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(6),u=n.n(s),c=n(3),l=n.n(c),h=n(7),p=n.n(h),d=function(e){function t(){var e,n;i()(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=u()(this,(e=l()(t)).call.apply(e,[this].concat(a)))).cellBackgroundColor="#ffffff",n}return p()(t,e),o()(t,[{key:"getCellBackgroundColor",value:function(){return this.cellBackgroundColor}},{key:"setCellBackgroundColor",value:function(e){this.cellBackgroundColor!==e&&this.updateRevision(),this.cellBackgroundColor=e}},{key:"makeClone",value:function(){return new t}}]),t}(n(263).a),f=n(458),g=n(265),v=n(238),y=n(264),m=n(257),E=n(234),k=n(237);n.d(t,"c",function(){return I}),n.d(t,"b",function(){return S}),n.d(t,"a",function(){return T}),n.d(t,"d",function(){return A}),n.d(t,"e",function(){return w});var S,I=function(){function e(t){i()(this,e),this.childCells=[this],this.selected=!1,this.cellType=S.NONE,this.visible=!0,this.isTextEditMode=!1,this.gridItem=t,this.cellProps=new d,this.borders=new b(this)}return o()(e,[{key:"init",value:function(){this.borders.init(),this.initChildTextItem()}},{key:"initChildTextItem",value:function(){this.childTextItem=new v.a("".concat((new Date).getTime(),"-").concat(Math.random()),new k.a(0,0,0,0));var e=this.childTextItem.props.adjustLTRB;this.childTextItem.props.adjustLTRB=null,this.childTextItem.props.setAbsSize(13*y.a.FONT_SIZE_RATIO),this.childTextItem.props.setFontDetailScaleX(100,!1),this.childTextItem.props.setHorizontalAlign(m.f.CENTER),this.childTextItem.props.setVerticalAlign(m.g.CENTER),this.childTextItem.props.setFamily("에스코어 드림 4"),this.childTextItem.props.setColor("#000000"),this.childTextItem.props.setBackgroundColor("#00000000"),this.childTextItem.props.setText(""),this.childTextItem.props.adjustLTRB=e}},{key:"getCellRect",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.borders.left.getLineThickness(e)/2,n=this.borders.top.getLineThickness(e)/2,r=this.getWidth(e)-this.borders.right.getLineThickness(e)/2,i=this.getHeight(e)-this.borders.bottom.getLineThickness(e)/2;return new E.a(t,n,r,i)}},{key:"repositionTextItem",value:function(t,n){this.gridItem.props.getLeft();var r=this.getCellRect(n),i=new E.a(this.getLeft()+r.left+e.CELL_PADDING,this.getTop()+r.top+e.CELL_PADDING,this.getLeft()+r.right-e.CELL_PADDING,this.getTop()+r.bottom-e.CELL_PADDING);i.move(this.gridItem.props.getLeft(),this.gridItem.props.getTop()),t.props.setPosition(i.toRect())}},{key:"renderBackground",value:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0];var e=100/this.gridItem.getWidth(),t=100/this.gridItem.getHeight(),n="#00000000"===this.cellProps.getCellBackgroundColor();return'<rect x="'.concat(this.getLeft()*e,'%" y="').concat(this.getTop()*t,'%" \n            width="').concat(this.getWidth()*e,'%" height="').concat(this.getHeight()*t,'%" \n            fill="').concat(this.cellProps.getCellBackgroundColor(),'" ').concat(n?'opacity="0"':"","/>")}},{key:"getRenderdBorder",value:function(e){return this.cellType!==S.MASTER||e!==T.RIGHT&&e!==T.BOTTOM?this.getBorder(e):this.gridItem.cells[this.childCellsPos.endPos.row][this.childCellsPos.endPos.col].getBorder(e)}},{key:"renderBorder",value:function(e,t){var n=this.getRenderdBorder(e);if(n&&n.visible){var r=this.getLeft(t),i=this.getTop(t),a=this.getWidth(t),o=this.getHeight(t);return n.render(r,i,a,o,t),n.gridSvgString}return""}},{key:"merged",value:function(){this.masterCell!==this?(this.visible=!1,this.cellType=S.SLAVE):this.cellType=S.MASTER}},{key:"splited",value:function(){this.cellType=S.NONE,this.visible=!0,this.masterCell=null}},{key:"getBorder",value:function(e){switch(e){case T.LEFT:return this.borders.left;case T.TOP:return this.borders.top;case T.RIGHT:return this.borders.right;case T.BOTTOM:return this.borders.bottom;case T.DOWNDIAGONAL:return this.borders.downDiagonal;case T.UPDIAGONAL:return this.borders.upDiagonal}throw new Error("타입이없는 border가있다... : ".concat(e))}},{key:"synchronizeBorder",value:function(e){var t=e.ownerCell.childCellsPos.startPos,n=e.ownerCell.childCellsPos.endPos;switch(e.type){case T.LEFT:t.col>0&&this.gridItem.cells[t.row][t.col-1].borders.right.assign(e);break;case T.TOP:t.row>0&&this.gridItem.cells[t.row-1][t.col].borders.bottom.assign(e);break;case T.RIGHT:n.col<this.gridItem.col-1&&this.gridItem.cells[n.row][n.col+1].borders.left.assign(e);break;case T.BOTTOM:n.row<this.gridItem.row-1&&this.gridItem.cells[n.row+1][n.col].borders.top.assign(e)}}},{key:"assignValue",value:function(e){this.innerText=e.innerText}},{key:"assignCellStyle",value:function(e){this.cellProps.setCellBackgroundColor(e.cellProps.getCellBackgroundColor())}},{key:"assignFontStyle",value:function(e){this.textProps.setFamily(e.textProps.getFamily()),this.textProps.setAbsSize(e.textProps.getAbsSize()),this.textProps.setColor(e.textProps.getColor()),this.textProps.setHorizontalAlign(e.textProps.getHorizontalAlign()),this.textProps.setVerticalAlign(e.textProps.getVerticalAlign()),this.textProps.setBold(e.textProps.isBold()),this.textProps.setItalic(e.textProps.isItalic()),this.textProps.setUpperCase(e.textProps.isUpperCase()),this.textProps.setFontDetailTextSpaceXml(e.textProps.getFontDetailTextSpace()),this.textProps.setFontDetailLineSpaceXml(e.textProps.getFontDetailLineSpace()),this.textProps.setFontDetailScaleX(e.textProps.getFontDetailScaleX(),!1)}},{key:"assignBorderStyle",value:function(e){this.borders.assign(e.borders)}},{key:"clone",value:function(){var t=new e(this.gridItem);return t.init(),t.cellType=this.cellType,t.childTextItem=this.childTextItem.clone(),t.assignCellStyle(this),t.assignFontStyle(this),t.assignValue(this),t}},{key:"assignTo",value:function(e){e.assignCellStyle(this),e.assignFontStyle(this),e.assignValue(this),e.visible=this.visible,e.borders.left.assign(this.borders.left),e.borders.top.assign(this.borders.top),e.borders.right.assign(this.borders.right),e.borders.bottom.assign(this.borders.bottom),e.borders.downDiagonal.assign(this.borders.downDiagonal),e.borders.upDiagonal.assign(this.borders.upDiagonal),e.cellProps=this.cellProps.clone(),e.textProps=this.textProps.clone(),e.cellType=this.cellType}},{key:"getWidth",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.gridItem.positionTool.getCellsWidth(this.childCellsPos,e)}},{key:"getHeight",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.gridItem.positionTool.getCellsHeight(this.childCellsPos,e)}},{key:"getLeft",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=0,n=0;n<this.col;n++)t+=this.gridItem.cols[n].thickness;return t*e}},{key:"getTop",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=0,n=0;n<this.row;n++)t+=this.gridItem.rows[n].thickness;return t*e}},{key:"doHitTest",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.gridItem.lastRenderEditScale;return e>=this.getLeft(n)&&e<=this.getLeft(n)+this.getWidth(n)&&t>=this.getTop(n)&&t<=this.getTop(n)+this.getHeight(n)}},{key:"pushChildCell",value:function(e){this.childCells.every(function(t){return t!==e})&&this.childCells.push(e)}},{key:"pushChildCells",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;Array.isArray(o)?this.pushChildCells(o):this.pushChildCell(o)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"clearChildCell",value:function(){this.childCells=[this]}},{key:"getChildCells",value:function(){return this.childCells}},{key:"textProps",get:function(){return this.childTextItem.props},set:function(e){this.childTextItem.setProps(e)}},{key:"innerText",get:function(){return this.childTextItem.props.getText()},set:function(e){this.childTextItem.props.setText(e)}},{key:"row",get:function(){return this.gridItem.getCellRow(this)}},{key:"col",get:function(){return this.gridItem.getCellCol(this)}},{key:"childCellsPos",get:function(){var e={startPos:{row:this.row,col:this.col},endPos:{row:this.row,col:this.col}};return this.childCells.forEach(function(t){t.col>=0&&t.row>=0&&(e.startPos.row=Math.min(e.startPos.row,t.row),e.startPos.col=Math.min(e.startPos.col,t.col),e.endPos.row=Math.max(e.endPos.row,t.row),e.endPos.col=Math.max(e.endPos.col,t.col))}),e}}]),e}();I.CELL_PADDING=2,function(e){e.NONE="none",e.MASTER="master",e.SLAVE="slave"}(S||(S={}));var T,b=function(){function e(t){i()(this,e),this.ownerCell=t}return o()(e,[{key:"init",value:function(){this.left=new f.a(this.ownerCell,T.LEFT,2),this.top=new f.a(this.ownerCell,T.TOP,2),this.right=new f.a(this.ownerCell,T.RIGHT,2),this.bottom=new f.a(this.ownerCell,T.BOTTOM,2),this.downDiagonal=new f.a(this.ownerCell,T.DOWNDIAGONAL,2),this.downDiagonal.visible=!1,this.upDiagonal=new f.a(this.ownerCell,T.UPDIAGONAL,2),this.upDiagonal.visible=!1}},{key:"assign",value:function(e){this.left.assign(e.left),this.right.assign(e.right),this.top.assign(e.top),this.bottom.assign(e.bottom),this.downDiagonal.assign(e.downDiagonal),this.upDiagonal.assign(e.upDiagonal)}},{key:"clone",value:function(){var t=new e(this.ownerCell);return t.left=this.left.clone(),t.right=this.right.clone(),t.top=this.top.clone(),t.bottom=this.bottom.clone(),t.downDiagonal=this.downDiagonal.clone(),t.upDiagonal=this.upDiagonal.clone(),t}}]),e}();!function(e){e.LEFT="left",e.TOP="top",e.RIGHT="right",e.BOTTOM="bottom",e.DOWNDIAGONAL="downDiagonal",e.UPDIAGONAL="upDiagonal"}(T||(T={}));var w,A=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;i()(this,e),this.minThicknessCellPos=[],this.ownerItem=t,this.lineType=n,this.initThickness=r,this.lineThickness=r}return o()(e,[{key:"updateThicknessRatio",value:function(){this.lineType===w.COL?this.lineThicknessRatio=this.thickness/this.ownerItem.getWidth():this.lineThicknessRatio=this.thickness/this.ownerItem.getHeight()}},{key:"scale",value:function(e){this.lineThickness*=e}},{key:"validateDeltaThickness",value:function(e){return e<0&&this.lineThickness+e<this.minThickness?Math.min(this.minThickness-this.lineThickness,0):e}},{key:"clone",value:function(){var t=new e(this.ownerItem,this.lineType,this.initThickness);return t.lineThicknessRatio=this.lineThicknessRatio,t.lineThickness=this.lineThickness,t}},{key:"assign",value:function(e){this.lineThickness=e.lineThickness}},{key:"minThickness",get:function(){var e=this,t=2*I.CELL_PADDING,n=[],r=t;if(this.lineType===w.COL){var i=this.ownerItem.cols.indexOf(this),a=!0,o=!1,s=void 0;try{for(var u,c=function(){var r=u.value,a=t,o=r[i],s=o.borders.left.getLineThickness(1)/2,c=o.borders.right.getLineThickness(1)/2;if(o.masterCell&&o.masterCell.col!==i&&o.cellType!==S.MASTER?o.masterCell.childTextItem.props.foreach(1,null,function(e,n,r){var i=r.advanceWidth;a=t+i+s+c},null,null,null):o.childTextItem.props.getText().length>0?o.childTextItem.props.foreach(1,null,function(e,n,r){var i=r.advanceWidth;a=t+i+s+c},null,null,null):a=t+s+c,o.masterCell&&o.masterCell.childCellsPos.startPos.col!==o.masterCell.childCellsPos.endPos.col){for(var l=0,h=o.masterCell.childCellsPos.startPos.col;h<=o.masterCell.childCellsPos.endPos.col;h++)h!==i&&(l+=e.ownerItem.cols[h].thickness);a=Math.max(a-l,t+s+c)}n.push(a)},l=this.ownerItem.cells[Symbol.iterator]();!(a=(u=l.next()).done);a=!0)c()}catch(e){o=!0,s=e}finally{try{a||null==l.return||l.return()}finally{if(o)throw s}}for(var h=0,p=n;h<p.length;h++){var d=p[h];r=Math.max(r,d)}this.minThicknessCellPos=[];for(var f=0;f<n.length;f++){n[f]===r&&this.minThicknessCellPos.push(new g.a(f,i))}}else{var v=this.ownerItem.rows.indexOf(this),y=this.ownerItem.cells[v],m=!0,E=!1,k=void 0;try{for(var T,b=y[Symbol.iterator]();!(m=(T=b.next()).done);m=!0){var A=T.value,C=t,x=A.borders.top.getLineThickness(1)/2,R=A.borders.bottom.getLineThickness(1)/2;if(A.masterCell&&A.masterCell.row!==v&&A.cellType!==S.MASTER){var L=A.masterCell.childTextItem.props.getCalculated(!1).bound;C=t+L.height+x+R}else if(A.childTextItem.props.getText().length>0){var _=A.childTextItem.props.getCalculated(!1).bound;C=t+_.height+x+R}else C=t+x+R;if(A.masterCell&&A.masterCell.childCellsPos.startPos.row!==A.masterCell.childCellsPos.endPos.row){for(var P=0,O=A.masterCell.childCellsPos.startPos.row;O<=A.masterCell.childCellsPos.endPos.row;O++)O!==v&&(P+=this.ownerItem.rows[O].thickness);C=Math.max(C-P,t+x+R)}n.push(C)}}catch(e){E=!0,k=e}finally{try{m||null==b.return||b.return()}finally{if(E)throw k}}for(var D=0,M=n;D<M.length;D++){var N=M[D];r=Math.max(r,N)}this.minThicknessCellPos=[];for(var B=0;B<n.length;B++){n[B]===r&&this.minThicknessCellPos.push(new g.a(v,B))}}return r}},{key:"thicknessRatio",get:function(){return this.lineThicknessRatio},set:function(e){this.lineThicknessRatio=e}},{key:"thickness",get:function(){return this.lineThickness},set:function(e){e<this.minThickness&&(e=this.minThickness),this.lineThickness=e;var t=2*I.CELL_PADDING;if(this.lineType===w.COL){var n=this.ownerItem.cols.indexOf(this),r=!0,i=!1,a=void 0;try{for(var o,s=this.ownerItem.cells[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value[n],c=u.borders.left.getLineThickness(1)/2,l=u.borders.right.getLineThickness(1)/2;if(u.childTextItem.props.setRight(u.childTextItem.props.getLeft()+this.thickness-(t+c+l)),u.isResizedByHeightChange){var h=u.childTextItem,p=u.borders.top.getLineThickness(1)/2,d=u.borders.bottom.getLineThickness(1)/2,f=h.props.getCalculated(!1).bound.height+t+p+d;if(u.getHeight()>f)this.ownerItem.rows[u.row].thickness=f}}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}else{var g=this.ownerItem.rows.indexOf(this),v=this.ownerItem.cells[g],y=!0,m=!1,E=void 0;try{for(var k,S=v[Symbol.iterator]();!(y=(k=S.next()).done);y=!0){var T=k.value;T.childTextItem.props.setBottom(T.childTextItem.props.getTop()+this.thickness-t)}}catch(e){m=!0,E=e}finally{try{y||null==S.return||S.return()}finally{if(m)throw E}}}}}]),e}();!function(e){e.ROW="ROW",e.COL="COL"}(w||(w={}))},function(e,t,n){"use strict";n.d(t,"a",function(){return w});var r=n(2),i=n.n(r),a=n(4),o=n.n(a),s=n(0),u=n.n(s),c=n(1),l=n.n(c),h=n(6),p=n.n(h),d=n(3),f=n.n(d),g=n(9),v=n.n(g),y=n(7),m=n.n(y),E=n(249),k=n(410),S=n(292),I=n(454),T=n(228),b=n(246),w=function(e){function t(e,n,r,i){var a,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],c=arguments.length>6&&void 0!==arguments[6]&&arguments[6],l=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],h=!(arguments.length>8&&void 0!==arguments[8])||arguments[8],d=!(arguments.length>9&&void 0!==arguments[9])||arguments[9],g=!(arguments.length>10&&void 0!==arguments[10])||arguments[10];u()(this,t),(a=p()(this,f()(t).call(this,e,r,o,s,c,l,h,d,g,i))).svgScale=1,a.svgData=n,a.data=n;var v=a.data.svg;a.svgUniqueKey=k.a.getUniquekey(),E.a.makeUnicornSvgElement(v,a.svgUniqueKey);var y=r.width/a.data.width,m=r.height/a.data.height;return a.svgScale=Math.min(y,m),a.props.setChangeRotateSetRevision(!0),a.initColors(),a}var n,r,a,s;return m()(t,e),l()(t,[{key:"getUniqueKey",value:function(){return this.svgUniqueKey}},{key:"beforeRender",value:(s=o()(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.updateColor();case 1:case"end":return e.stop()}},e,this)})),function(e){return s.apply(this,arguments)})},{key:"updateAttribute",value:function(){this.keepRatio=!1}},{key:"getSvgScale",value:function(){return this.svgScale}},{key:"scale",value:function(e){return v()(f()(t.prototype),"scale",this).call(this,e),this.svgScale*=e,this}},{key:"setLTRBCoordinate",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0;v()(f()(t.prototype),"setLTRBCoordinate",this).call(this,e,n,r)}},{key:"initColors",value:function(){var e=this.getOriginColors(),t=!0,n=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;this.props.setCurrentOriginColor(o),this.props.setColor(o)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}this.props.initColor()}},{key:"getOriginColors",value:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var i,a=this.data.colorList[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;e.push(o.color)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return e}},{key:"getEditableOriginColors",value:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var i,a=this.data.colorList[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(o.editable){var s=o.color.toLowerCase();4===s.length&&(s=s[0]+s[1]+s[1]+s[2]+s[2]+s[3]+s[3]),e.push(s)}}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return e}},{key:"updateColor",value:function(){this.svgElements.updateColor()}},{key:"render",value:(a=o()(i.a.mark(function e(t,n,r){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=new I.a(this.props,this.svgElements,this.isResourceLoadFail(),this.getResourceLoadStatus(),this.getDisabledResourcePreviewKey()),e.next=3,a.rasterizeSingleItem(t,n,r);case 3:case"end":return e.stop()}},e,this)})),function(e,t,n){return a.apply(this,arguments)})},{key:"renderThumbnail",value:(r=o()(i.a.mark(function e(t,n){var r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new I.a(this.props,this.svgElements,this.isResourceLoadFail(),this.getResourceLoadStatus(),this.getDisabledResourcePreviewKey()),e.next=3,r.rasterizeToPage(t,n);case 3:case"end":return e.stop()}},e,this)})),function(e,t){return r.apply(this,arguments)})},{key:"getThumbUrl",value:(n=o()(i.a.mark(function e(t,n){var r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new I.a(this.props,this.svgElements,this.isResourceLoadFail(),this.getResourceLoadStatus(),this.getDisabledResourcePreviewKey()),e.next=3,r.getSingleItemCanvasDataURL(t,n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})},{key:"renderShadow",value:function(e,t,n,r,i){this.props.isActiveShadow()&&new I.a(this.props).renderShadow(e,t,n,r,i)}},{key:"getShadowCanvasPosData",value:function(e){return new I.a(this.props).getShadowCanvasPosData(e,this.props.isActiveShadow())}},{key:"getSvgString",value:function(e){return this.svgElements.getSvgString(e)}},{key:"getUsedColor",value:function(){var e=this,t=new Set;return this.getEditableOriginColors().forEach(function(n){e.props.setCurrentOriginColor(n);var r=e.props.getColor();t.add(r)}),this.props.isActiveShadow()&&t.add(this.props.getShadowColor()),t}},{key:"getColorCount",value:function(e){if(!e)return null;var t=0;return this.props.getColorMap().forEach(function(n){n.substr(0,7).toLowerCase()===e.substr(0,7).toLowerCase()&&t++}),t}},{key:"getOriginColorsByColor",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;var r=[],i=n?this.getEditableOriginColors():this.getOriginColors();return i.forEach(function(n){t.props.setCurrentOriginColor(n),t.props.getColor().substr(0,7).toLowerCase()===e.substr(0,7).toLowerCase()&&r.push(n)}),r}},{key:"getResourceType",value:function(){return this.svgData.type.getResourceType()}},{key:"getShadowBlur",value:function(e){var t=this.getCanvasPosData(e),n=t.width<t.height?t.width:t.height;return this.props.getShadowBlur()*n*S.a.SHADOW_BLUR_CONSTANT/1265}},{key:"getShadowPosPoint",value:function(e){var t=this.getCanvasPosData(e),n=t.width<t.height?t.width:t.height,r=this.props.getShadowDistance()*n/130;return b.a.getPointByDistanceAngle(r,this.props.getShadowAngle()+90-this.props.getRotate())}},{key:"getCropPosData",value:function(e,t,n){return new I.a(this.props).getCropPosData(e,t,n,this.props.isActiveShadow())}},{key:"isLazyHandlerHandlePosition",value:function(e){return!0}}]),t}(T.d)},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(225),u=n(8),c=n(224),l=n(10),h=n(282),p=n(234),d=function(){function e(){i()(this,e)}return o()(e,null,[{key:"getPageDOMPosition",value:function(){var e=null;return s.a.instance.dispatch(new c.c(function(t,n){var r=t.pages[0].sheetSize,i=n.zoomScale*n.pageEditScale;e={left:0,top:0,width:r.width*i,height:r.height*i}})),e}},{key:"toggleEdgeRoundingModeToBodyElement",value:function(e){var t=u.a.EDGE_ROUNDING_ON;e?document.body.classList.add(t):document.body.classList.remove(t)}},{key:"getHighLevel",value:function(e,t){return e===t?e:e===h.a.WARNING||t===h.a.WARNING?h.a.WARNING:e===h.a.CAUTION||t===h.a.CAUTION?h.a.CAUTION:e===h.a.RECOMMEND||t===h.a.RECOMMEND?h.a.RECOMMEND:null}},{key:"getPageContentElement",value:function(e){return e}},{key:"togglePageContentPrintAreaMode",value:function(t,n){var r=e.getPageContentElement(t);n?r.classList.add(u.a.PRINTOUT_INFO_PRINT_AREA_ON):r.classList.remove(u.a.PRINTOUT_INFO_PRINT_AREA_ON)}},{key:"changeAlertIconCSSbyLevel",value:function(e,t){var n=u.a.PRINTOUT_RESTRICTION_LEVEL_WARNING,r=u.a.PRINTOUT_RESTRICTION_LEVEL_CAUTION,i=u.a.PRINTOUT_RESTRICTION_LEVEL_RECOMMEND;[n,r,i,u.a.PRINTOUT_RESTRICTION_LEVEL_HOLD].forEach(function(t){e.classList.remove(t)});var a="";switch(t){case h.a.WARNING:a=n;break;case h.a.CAUTION:a=r;break;case h.a.RECOMMEND:a=i;break;default:console.log("undefined type")}e.classList.add(a)}},{key:"getAlertAbsoluteLTRB",value:function(e,t,n,r,i){var a=n*i,o=e-(a-n)/2,s=r*i,u=t-(s-r)/2,c=o+a,l=u+s;return new p.a(o,u,c,l)}},{key:"fadeInElement",value:function(e){$(e).stop().animate({opacity:1},200)}},{key:"fadeInItem",value:function(t,n){if(t.has(n)){var r=t.get(n);e.fadeInElement(r.element)}}},{key:"fadeOutElement",value:function(e){$(e).stop().css("opacity",0)}},{key:"fadeOutItem",value:function(t,n){if(t.has(n)){var r=t.get(n);e.fadeOutElement(r.element)}}},{key:"fadeOutItems",value:function(t,n){n?n.forEach(function(n){return e.fadeOutItem(t,n)}):t.forEach(function(t){return e.fadeInElement(t.element)})}},{key:"fadeInItems",value:function(t,n){n?n.forEach(function(n){return e.fadeInItem(t,n)}):t.forEach(function(t){return e.fadeOutElement(t.element)})}},{key:"removeFromParents",value:function(e){e&&e.parentElement&&e.parentElement.removeChild(e)}},{key:"removeItemFromMap",value:function(t,n){if(t.has(n)){var r=t.get(n);e.removeFromParents(r.element),t.delete(n)}}},{key:"appendElementsOfMap",value:function(e,t){e.forEach(function(e){e.element.parentElement||t.appendChild(e.element)})}},{key:"setRotatedLTPosition",value:function(e){e.element.style.left="".concat(e.left,"px"),e.element.style.top="".concat(e.top,"px"),e.element.style.width="".concat(e.width,"px"),e.element.style.height="".concat(e.height,"px"),e.element.style.transform="rotateZ(".concat(e.degree,"deg)")}},{key:"setLTPosition",value:function(e){e.element.style.left="".concat(e.left,"px"),e.element.style.top="".concat(e.top,"px"),e.element.style.width="".concat(e.width,"px"),e.element.style.height="".concat(e.height,"px")}},{key:"setLBPosition",value:function(e){e.element.style.left="".concat(e.left,"px"),e.element.style.bottom="".concat(e.bottom,"px"),e.element.style.width="".concat(e.width,"px"),e.element.style.height="".concat(e.height,"px")}},{key:"setRTPosition",value:function(e){e.element.style.right="".concat(e.right,"px"),e.element.style.top="".concat(e.top,"px"),e.element.style.width="".concat(e.width,"px"),e.element.style.height="".concat(e.height,"px")}},{key:"setRBPosition",value:function(e){e.element.style.right="".concat(e.right,"px"),e.element.style.bottom="".concat(e.bottom,"px"),e.element.style.width="".concat(e.width,"px"),e.element.style.height="".concat(e.height,"px")}},{key:"setElementLeftTopByPx",value:function(e,t,n){e.style.left="".concat(t,"px"),e.style.top="".concat(n,"px")}},{key:"setElementSize",value:function(e,t,n){e.style.width="".concat(t,"px"),e.style.height="".concat(n,"px")}},{key:"removeAllChild",value:function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}},{key:"makeDiv",value:function(e){var t=document.createElement("div");return t.className=e,t}},{key:"makeCheckbox",value:function(){var e=document.createElement("input");return e.type="checkbox",e.checked=!1,e}},{key:"makeCheckWrapper",value:function(t,n,r){var i=e.makeDiv("checkbox_wrapper"),a=e.makeHTMLParagraph(n);return t||(t=e.makeCheckbox()),i.addEventListener("click",function(){t.checked=!t.checked,r()}),i.appendChild(t),Object(l.setToolsIcon)(i,l.ToolsIcon.CHECK,!0),i.appendChild(a),i}},{key:"makeButton",value:function(e){var t=document.createElement("button");return t.className=e,t}},{key:"makeInfoBox",value:function(t,n){var r=e.makeDiv("info_box");r.classList.add(t);var i=e.makeHTMLParagraph(n);return r.appendChild(i),r}},{key:"makeHTMLParagraph",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=document.createElement("p");return t?n.innerHTML=e:n.innerText=e,n}},{key:"makeHTMLSpan",value:function(e){var t=document.createElement("span");return t.innerText=e,t}},{key:"makeSuffix",value:function(e,t){var n=document.createElement("p");return n.className=u.a.ITEM_SUFFIX,n.classList.add(t),n.innerText=e,n}},{key:"makeLabel",value:function(e,t){var n=document.createElement("label");return n.className=t,n.innerText=e,n}},{key:"makeTitle",value:function(e){var t=document.createElement("p");return t.classList.add(u.a.TITLE),t.innerText=e,t}},{key:"makeHeader",value:function(t){var n=e.makeDiv(u.a.HEADER),r=e.makeHTMLParagraph(t);return r.className=u.a.TITLE,n.appendChild(r),n}},{key:"makeContour",value:function(){return e.makeDiv(u.a.CONTOUR)}},{key:"setDisable",value:function(e){e.classList.add(u.a.DISABLE)}},{key:"setEnable",value:function(e){e.classList.remove(u.a.DISABLE)}},{key:"setActive",value:function(e){e.classList.add(u.a.ACTIVE)}},{key:"setInactive",value:function(e){e.classList.remove(u.a.ACTIVE)}},{key:"setActivePage",value:function(t,n){t.forEach(function(t){return e.setInactive(t)}),t.has(n)&&e.setActive(t.get(n))}},{key:"makeComboBox",value:function(t,n,r){var i=e.makeDiv("combobox"),a=e.makeTitle(t);i.appendChild(a);var o=e.makeDiv("dropdown_selected_button"),s=e.makeDiv("dropdown_selected_str");return s.id=n,o.appendChild(s),Object(l.setToolsIcon)(o,l.ToolsIcon.GREATER_THAN,!0),i.appendChild(o),r.classList.add(u.a.HIDE),i.appendChild(r),o.addEventListener("click",function(){e.toggleDropdownUIVisible(r)}),r.addEventListener("click",function(){e.hideDropdownUI()}),i}},{key:"toggleDropdownUIVisible",value:function(t){t.classList.contains(u.a.HIDE)?(e.hideDropdownUI(),t.classList.remove(u.a.HIDE)):t.classList.add(u.a.HIDE)}},{key:"toggleElementVisible",value:function(e){e.classList.contains(u.a.HIDE)?e.classList.remove(u.a.HIDE):e.classList.add(u.a.HIDE)}},{key:"toggleElementClass",value:function(e,t){e.classList.contains(t)?e.classList.remove(t):e.classList.add(t)}},{key:"setElementVisible",value:function(e,t){t?e.classList.remove(u.a.HIDE):e.classList.add(u.a.HIDE)}},{key:"hideDropdownUI",value:function(){var e=document.getElementsByClassName("dropdown_list"),t=!0,n=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){i.value.classList.add(u.a.HIDE)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}}]),e}()},function(e,t,n){"use strict";var r=n(2),i=n.n(r),a=n(4),o=n.n(a),s=n(0),u=n.n(s),c=n(1),l=n.n(c),h=n(275),p=n(16),d=n(86),f=n(41),g=n(344),v=n(229),y=n(224),m=n(226),E=n(362),k=n(317),S=n(136),I=n(305),T=n(74),b=n(393);n.d(t,"a",function(){return b.a});var w=n(100),A=n(253),C=n(366),x=n(230),R=n(11),L=n(426),_=n(271),P=n(427),O=n(279),D=n(37),M=n(319),N=n(225),B=function(){function e(){u()(this,e),this.listeners=new Set,this.isKeepSheetSize=!1}var t,n,r;return l()(e,[{key:"addDesignDocDCListener",value:function(e){this.listeners.add(e)}},{key:"loadDesignMeta",value:(r=o()(i.a.mark(function e(t){var n,r,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.load(I.b.LOADING_ITEM);case 3:if(n=e.sent,m.a.STOP_WATCH.split("designMeta loaded."),t.isTemplateDesign()||(r=t.designBean,v.a.getEditorOpenOption().isUnicornDesign()&&!v.a.getExecutionMode().isChangeUpdateMode()&&(r.idx=0),this.setUserDesign(r,v.a.getEditorOpenOption().isUnicornDesign())),!n.pages[0].reference){e.next=17;break}if(n.pages[0].reference.templateRepositoryType!==d.a.UNICORN){e.next=15;break}return e.next=10,S.a.findOneTemplate(Number(n.pages[0].reference.templateKey));case 10:a=e.sent,g.a.setTemplateTypeList(a.templateTypeList),g.a.setRefTemplateKey(String(a.idx)),e.next=17;break;case 15:g.a.setTemplateTypeList([new f.c(null,0,0,p.a.PX,"타입없음-비즈하우스")]),g.a.setRefTemplateKey(n.pages[0].reference.templateKey);case 17:e.next=27;break;case 19:return e.prev=19,e.t0=e.catch(0),console.error(e.t0),alert("디자인 로드중 에러가 발생하였습니다.\n빈 페이지를 로드합니다."),e.next=25,k.a.makeDesignDC().load();case 25:n=e.sent,E.a.reset();case 27:return n.changePages(v.a.getEditorOpenOption().createNewPagesWithOpenOption(n.pages)),e.abrupt("return",n);case 29:case"end":return e.stop()}},e,this,[[0,19]])})),function(e){return r.apply(this,arguments)})},{key:"setDesignInfo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=["process","r"],r=location.search.substr(1).split("&").some(function(e){return n.includes(e.split("=")[0])}),i=T.a.get().getIdx()!==e.getIdx()&&void 0===E.a.getDesignProject();if(!t&&(i||r)){var a=w.a.getDesignUrl(e.getIdx(),d.a.UNICORN),o=0===location.search.length?"":location.search.substr(1).split("&").map(function(e){return e.split("=")}).filter(function(e){return!n.includes(e[0])}).map(function(e){return e.join("=")}).join("&"),s=a+(o.length>0?"?"+o:"");window.history.replaceState({},null,s)}A.a.setDocumentTitle(e.getTitle()),T.a.reset(e),this.listeners.forEach(function(t){return t.onChangeDesignMeta(e)})}},{key:"setUserDesign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.setDesignInfo(new T.a({idx:e.idx,title:R.b.nvl(e.title),accountId:e.accountId,latestDesignHistoryIdx:e.latestDesignHistoryIdx,sharedPrivate:e.sharedPrivate,sharedPublic:e.sharedPublic}),t),m.a.instance.option&&!v.a.getEditorOpenOption().hasKeyToLoadDesign()&&m.a.instance.option.initByDesignBean(e)}},{key:"load",value:(n=o()(i.a.mark(function e(t,n){var r,a,s,u;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=!1,L.a.open("디자인을 불러오고 있습니다.<br/>잠시만 기다려주세요.","적용 취소",function(){return r=!0}),e.prev=2,a=k.a.makeDesignDC({idx:t,repositoryType:d.a.UNICORN,resourceType:x.a.DESIGN,designProjectIdx:n,templateReference:new C.b}),e.next=6,a.load();case 6:if(s=e.sent,!r){e.next=9;break}return e.abrupt("return");case 9:return _.a.changeStatus(b.a.DEFAULT),u=a.designBean,this.isKeepSheetSize&&this.changeMetaSheetSizeToPresent(s),m.a.setMetaData(s),this.setUserDesign(u),P.a.clear(),N.a.instance.clearQ(),N.a.instance.dispatch(new y.c(function(){var e=o()(i.a.mark(function e(t,n,r){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.canvasAreaVC.updatePagingManager(),r.canvasAreaVC.updateZoomFitAfterRender(),e.next=4,r.renderAll(s,n);case 4:N.a.instance.dispatch(new O.g);case 5:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}())),e.abrupt("return",s);case 20:e.prev=20,e.t0=e.catch(2),alert("디자인을 불러오는 중에 오류가 발생하였습니다."),console.error(e.t0);case 24:return e.prev=24,L.a.close(),e.finish(24);case 27:case"end":return e.stop()}},e,this,[[2,20,24,27]])})),function(e,t){return n.apply(this,arguments)})},{key:"changeMetaSheetSizeToPresent",value:function(e){N.a.instance.dispatch(new y.c(function(t){for(var n=0;n<e.pages.length;n++){var r=e.pages[n].sheetSize,i=e.pages[n];i.sheetSize=t.pages[n].sheetSize,i.arrangeItems(h.a.FIT,r)}}))}},{key:"getInactiveItemCnt",value:(t=o()(i.a.mark(function e(t){var n,r,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.getDisabledSvgItemCount(),r=t.getStickerIds(),D.a.isEmpty(r)){e.next=8;break}return a=M.a.from(d.a.SMILECAT,!0),e.next=6,a.getStickerDataList(r);case 6:e.sent.forEach(function(e){e.active||n++});case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})},{key:"keepSheetSize",value:function(){this.isKeepSheetSize=!0}}]),e}();t.b=new B},function(e,t,n){"use strict";var r=n(6),i=n.n(r),a=n(3),o=n.n(a),s=n(7),u=n.n(s),c=n(0),l=n.n(c),h=n(1),p=n.n(h),d=n(393),f=n(253),g=function(e){function t(){var e,n;l()(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(n=i()(this,(e=o()(t)).call.apply(e,[this].concat(a)))).status=d.a.DEFAULT,n.isRunning=!1,n.callBacksAfterSaving=[],n}return u()(t,e),p()(t,[{key:"reset",value:function(){this.key="",this.isRunning=!1,this.changeStatus(d.a.SAVE_REQUIRE)}},{key:"start",value:function(e){this.key=e,this.isRunning=!0,this.changeStatus(d.a.SAVE_REQUEST)}},{key:"wait",value:function(){this.key="",this.isRunning=!1,this.changeStatus(d.a.SAVE_WAIT)}},{key:"changeStatus",value:function(e){this.status!==e&&(this.status=e,this.onChangeDesignSaveStatus(this.status))}},{key:"initStatusByAction",value:function(){this.changeStatus(!this.isSaving()&&this.isRequireSaveAction()?d.a.DEFAULT:d.a.SAVE_REQUIRE)}},{key:"isRequireSaveAction",value:function(){return f.a.isSaved()}},{key:"executeCallbacks",value:function(e){if(this.key===e){this.isRunning=!1;var t=!0,n=!1,r=void 0;try{for(var i,a=this.callBacksAfterSaving[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){(0,i.value)()}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}this.callBacksAfterSaving.length=0}}},{key:"getSaveStatus",value:function(){return this.status}},{key:"isSaving",value:function(){return this.isRunning}},{key:"addCallbackAfterSave",value:function(e){this.callBacksAfterSaving.push(e)}},{key:"getSaveStatusDisplayTitle",value:function(){return d.a.getDisplayTitle(this.getSaveStatus())}},{key:"isSaveRequire",value:function(){return d.a.isRequiringToSave(this.getSaveStatus())}},{key:"isSaveComplete",value:function(){return d.a.isCompletedToSave(this.getSaveStatus())}}]),t}(function(){function e(){l()(this,e),this.listeners=new Set}return p()(e,[{key:"addListener",value:function(e){this.listeners.add(e)}},{key:"onChangeDocumentTitle",value:function(e){this.listeners.forEach(function(t){return t.onChangeDocumentTitle(e)})}},{key:"onChangeDesignSaveStatus",value:function(e){this.listeners.forEach(function(t){return t.onChangeDesignSaveStatus(e)})}}]),e}());t.a=new g},,,function(e,t,n){"use strict";n.d(t,"f",function(){return C}),n.d(t,"a",function(){return x}),n.d(t,"d",function(){return d}),n.d(t,"e",function(){return f}),n.d(t,"c",function(){return g}),n.d(t,"b",function(){return v});var r,i,a,o,s,u,c,l,h,p,d,f,g,v,y=n(355),m=n.n(y),E=n(0),k=n.n(E),S=n(1),I=n.n(S),T=n(356),b=n.n(T),w=(n(357),n(358)),A=n(250),C=(l=Object(w.b)(function(){return x}),h=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*";k()(this,e),m()(this,"shape",p,this),this.shape=t,this.match=n}return I()(e,[{key:"getShape",value:function(){return this.shape}},{key:"getMatch",value:function(){return this.match}},{key:"fixCompatibility",value:function(){this.shape.fixCompatibility()}}]),e}(),p=b()(h.prototype,"shape",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h),x=(r=Object(w.a)(function(e){return d[e]||d.SQUARE}),i=Object(w.a)(function(e){return f[e]}),a=Object(w.a)(function(e){return e.map(function(e){if(A.c[e])return A.c[e]})}),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.SQUARE,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.XML,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;k()(this,e),m()(this,"type",s,this),m()(this,"vectorFormat",u,this),m()(this,"roundCorners",c,this),this.type=t,this.vectorFormat=n,this.vector=r,this.roundDepth=i,this.roundCorners=a,this.radius=o}return I()(e,[{key:"getType",value:function(){return this.type}},{key:"getVectorFormat",value:function(){return this.vectorFormat}},{key:"getVector",value:function(){return this.vector}},{key:"getRoundDepth",value:function(){return this.roundDepth}},{key:"getRoundCorners",value:function(){return this.roundCorners}},{key:"getRadius",value:function(){return this.radius}},{key:"fillAllRoundCorners",value:function(){this.roundCorners=new Array(A.c.LEFT_TOP,A.c.LEFT_BOTTOM,A.c.RIGHT_TOP,A.c.RIGHT_BOTTOM)}},{key:"fixCompatibility",value:function(){this.roundDepth&&this.roundDepth>0&&0===this.roundCorners.length&&this.fillAllRoundCorners()}}]),e}(),s=b()(o.prototype,"type",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=b()(o.prototype,"vectorFormat",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c=b()(o.prototype,"roundCorners",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o);!function(e){e.VECTOR="VECTOR",e.SQUARE="SQUARE",e.CIRCLE="CIRCLE",e.ROUND_SQUARE="ROUND_SQUARE",e.LINE="LINE"}(d||(d={})),function(e){e.URL="URL",e.XML="XML"}(f||(f={})),function(e){e.NONE="NONE",e.TRANSPARENT="TRANSPARENT",e.COLOR="COLOR",e.TEXTURE="TEXTURE"}(g||(g={})),function(e){e.NONE="NONE",e.SOLID="SOLID",e.DOT="DOT"}(v||(v={}))},,,,,function(e,t,n){"use strict";var r=n(2),i=n.n(r),a=n(62),o=n.n(a),s=n(4),u=n.n(s),c=n(0),l=n.n(c),h=n(1),p=n.n(h),d=n(6),f=n.n(d),g=n(3),v=n.n(g),y=n(7),m=n.n(y),E=n(224),k=n(226),S=n(324),I=n(241),T=n(236),b=n(270),w=n(396),A=n(229),C=n(37),x=n(110),R=n(271),L=n(336),_=n(460),P=n(252),O=n(81),D=n(117),M=function(e){function t(e,n){return l()(this,t),f()(this,v()(t).call(this,{type:e,customTypeElement:document.createElement("span"),customContentElement:document.createElement("div"),title:n},D.a.getNotificationPusher(),5e3))}return m()(t,e),t}(O.a),N=function(){function e(){l()(this,e)}return p()(e,[{key:"openMaxPageAlertPopup",value:function(){this.popupMax||(this.popupMax=new M(e.popupMaxType,e.popupMaxTitle)),this.popupMax.closeInstantly(),this.popupMax.open()}},{key:"openWarningPageAlertPopup",value:function(){this.popupWarning||(this.popupWarning=new M(e.popupWarningType,e.popupWarningTitle)),this.popupWarning.closeInstantly(),this.popupWarning.open()}},{key:"isOverDefaultMaxCount",value:function(){return A.a.getEditorOpenOption().getPageCount().isOverDefaultMaxCount(P.a.getPageCount())}},{key:"isOverDefaultWarningCount",value:function(){return A.a.getEditorOpenOption().getPageCount().isOverDefaultWarningCount(P.a.getPageCount())}},{key:"checkPageCountAlert",value:function(){this.isOverDefaultWarningCount()&&this.openWarningPageAlertPopup(),this.isOverDefaultMaxCount()&&this.openMaxPageAlertPopup()}}]),e}();N.popupMaxType=O.b.CAUTION,N.popupMaxTitle="최대 ".concat(_.a.DEFAULT_MAX_COUNT," 페이지까지 생성할 수 있어요."),N.popupWarningType=O.b.ALERT,N.popupWarningTitle="페이지 수가 많아지면 편집이나 공유, 다운로드시 느려질 수 있어요. 문서를 나눠서 작업하시면 어떨까요?";var B=new N;n.d(t,"i",function(){return G}),n.d(t,"j",function(){return F}),n.d(t,"g",function(){return W}),n.d(t,"h",function(){return K}),n.d(t,"b",function(){return Y}),n.d(t,"a",function(){return Z}),n.d(t,"e",function(){return j}),n.d(t,"d",function(){return q}),n.d(t,"c",function(){return Q}),n.d(t,"f",function(){return $});var U=function(e){function t(){var e,n;l()(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=f()(this,(e=v()(t)).call.apply(e,[this].concat(i)))).isExtendZoomScaleRange=!1,n.commitAction=function(e,r,i){var a=r.zoomScale;w.a.changeZoomScalePresetList(n.isExtendZoomScaleRange);var o=A.a.getPageZoomNavigatorOption().zoomLimit?n.changeZoomScaleByLimited(r,e.pages[0].sheetSize):n.changeZoomScale(r);t.syncScroll(a),o&&n.render(e,r,i)},n}return m()(t,e),p()(t,[{key:"render",value:function(e,t,n){t.pageController.getPageRenderer(e.pages[t.renderPageIdx]).updateHoverLayer()}}],[{key:"syncScroll",value:function(e){var t=k.a.instance.zoomScale/e,n=k.a.instance.editorMainVC.canvasAreaVC.scrollElement;n.setScrollX(n.getScrollX()*t),n.setScrollY(n.getScrollY()*t)}}]),t}(E.d),G=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return l()(this,t),(e=f()(this,v()(t).call(this))).isExtendZoomScaleRange=n,e}return m()(t,e),p()(t,[{key:"changeZoomScale",value:function(e){return w.a.getHighestScale()>e.zoomScale&&(e.zoomScale=w.a.getNextScaleValue(e.zoomScale)/e.pageEditScale,!0)}},{key:"changeZoomScaleByLimited",value:function(e,n){var r=A.a.getPageZoomNavigatorOption(),i=e.pageEditScale*e.zoomScale+r.zoomScaleByStep,a=Math.max(n.width*i,n.height*i);if(i>r.maxScale)return e.zoomScale=r.maxScale/e.pageEditScale,t.changeZoomScalePresetHighest(r.maxScale),!0;if(a>r.maxPx){var o=i*(r.maxPx/a),s=o/e.pageEditScale;return e.zoomScale!==s&&(e.zoomScale=s,t.changeZoomScalePresetHighest(o),!0)}return e.zoomScale=i/e.pageEditScale,!0}}],[{key:"changeZoomScalePresetHighest",value:function(e){var t=100*Number(Number(e).toFixed(2));w.a.changeZoomScalePresetHighest(t)}}]),t}(U),F=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return l()(this,t),(e=f()(this,v()(t).call(this))).isExtendZoomScaleRange=n,e}return m()(t,e),p()(t,[{key:"changeZoomScale",value:function(e){return Number(w.a.getLowestScale().toFixed(3))<Number(e.zoomScale.toFixed(3))&&(e.zoomScale=w.a.getPrevScaleValue(e.zoomScale)/e.pageEditScale,!0)}},{key:"changeZoomScaleByLimited",value:function(e,t){var n=A.a.getPageZoomNavigatorOption(),r=e.pageEditScale*e.zoomScale,i=Math.max(r-n.zoomScaleByStep,n.minScale),a=Math.min(t.width*i,t.height*i);if(a<n.minPx){var o=i*(n.minPx/a)/e.pageEditScale;return e.zoomScale!==o&&(e.zoomScale=o,w.a.changeZoomScalePresetLowest(Math.round(o*e.pageEditScale*100)),!0)}return e.zoomScale=i/e.pageEditScale,!0}}]),t}(U),H=function(e){function t(){var e;return l()(this,t),(e=f()(this,v()(t).call(this))).skipRedo=!1,e.skipUndo=!1,e.newPageIdx=-1,e.actionType=E.a.MOVE_PAGE,e.changeDesign=function(){return!1},e.isActionGroupEquals=function(n){var r=n instanceof t||n instanceof V||n instanceof z;return e.skipRedo=r,n.skipUndo=r,r},e.commitAction=function(t,n,r){e.skipRedo||(e.oldPageIdx=n.renderPageIdx,n.renderPageIdx>0&&(te(n),e.newPageIdx<0&&(e.newPageIdx=n.renderPageIdx-1),n.renderPageIdx=e.newPageIdx,n.mouseAction.mode=I.a.MODE_NONE),r.canvasAreaVC.syncPageRenderers(t.pages))},e.rollbackAction=function(t,n,r){if(!e.skipUndo){if(t.pages.length>n.renderPageIdx){if(null==t.pages[e.oldPageIdx])return;te(n),n.renderPageIdx=e.oldPageIdx,n.mouseAction.mode=I.a.MODE_NONE}r.canvasAreaVC.syncPageRenderers(t.pages)}},e.recycle=function(){},e}return m()(t,e),t}(E.b),V=function(e){function t(){var e;return l()(this,t),(e=f()(this,v()(t).call(this))).skipRedo=!1,e.skipUndo=!1,e.newPageIdx=-1,e.actionType=E.a.MOVE_PAGE,e.changeDesign=function(){return!1},e.isActionGroupEquals=function(n){var r=n instanceof H||n instanceof t||n instanceof z;return e.skipRedo=r,n.skipUndo=r,r},e.commitAction=function(t,n,r){e.skipRedo||(e.oldPageIdx=n.renderPageIdx,t.pages.length>n.renderPageIdx+1&&(te(n),e.newPageIdx<0&&(e.newPageIdx=n.renderPageIdx+1),n.renderPageIdx=e.newPageIdx,n.mouseAction.mode=I.a.MODE_NONE),r.canvasAreaVC.syncPageRenderers(t.pages))},e.rollbackAction=function(t,n,r){if(!e.skipUndo){if(n.renderPageIdx>=0){if(null==t.pages[e.oldPageIdx])return;te(n),n.renderPageIdx=e.oldPageIdx,n.mouseAction.mode=I.a.MODE_NONE}r.canvasAreaVC.syncPageRenderers(t.pages)}},e.recycle=function(){},e}return m()(t,e),t}(E.b),z=function(e){function t(e){var n;return l()(this,t),(n=f()(this,v()(t).call(this))).skipRedo=!1,n.skipUndo=!1,n.actionType=E.a.MOVE_PAGE,n.changeDesign=function(){return!0},n.isActionGroupEquals=function(e){var r=e instanceof H||e instanceof V||e instanceof t;return n.skipRedo=r,e.skipUndo=r,r},n.commitAction=function(e,t,r){n.skipRedo||(n.oldPageIdx=t.renderPageIdx,t.renderPageIdx!==n.newPageIdx&&null!=e.pages[n.newPageIdx]&&(te(t),t.renderPageIdx=n.newPageIdx,t.mouseAction.mode=I.a.MODE_NONE,r.canvasAreaVC.syncPageRenderers(e.pages)))},n.rollbackAction=function(e,t,r){n.skipUndo||t.renderPageIdx!==n.oldPageIdx&&null!=e.pages[n.oldPageIdx]&&(te(t),t.renderPageIdx=n.oldPageIdx,t.mouseAction.mode=I.a.MODE_NONE,r.canvasAreaVC.syncPageRenderers(e.pages))},n.recycle=function(){},n.newPageIdx=e,n}return m()(t,e),t}(E.b),W=function(e){function t(){var e,n;l()(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=f()(this,(e=v()(t)).call.apply(e,[this].concat(i)))).commitAction=function(e,t,n){t.zoomScale=w.a.getFitScale(),t.size.pageDeltaOffsetX=0,t.size.pageDeltaOffsetY=0,n.canvasAreaVC.updateScrollCenterOfCurrentPage()},n}return m()(t,e),t}(E.d),K=function(e){function t(){var e,n;l()(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=f()(this,(e=v()(t)).call.apply(e,[this].concat(i)))).commitAction=function(e,t,n){t.zoomScale=t.zoomScale=w.a.getFullScale(),t.size.pageDeltaOffsetX=0,t.size.pageDeltaOffsetY=0,n.canvasAreaVC.updateScrollCenterOfCurrentPage()},n}return m()(t,e),t}(E.d),X=function(e){function t(e){var n;return l()(this,t),(n=f()(this,v()(t).call(this))).actionType=E.a.ADD_COPIED_PAGE,n.newPages=[],n.renderAuto=!1,n.changeDesign=function(){return!0},n.commitAction=function(){var e=u()(i.a.mark(function e(t,r,a){var s,u,c,l,h,p,d,f;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(B.checkPageCountAlert(),n.doSaveQueue){e.next=3;break}return e.abrupt("return");case 3:0===n.newPages.length&&(n.newPages.push(n.createNewPage(t)),n.oldRenderPageIdx=r.renderPageIdx),n.oldPages=t.pages.slice(),(s=t.pages.slice()).splice.apply(s,[n.newPageIdx,0].concat(o()(n.newPages))),t.pages=s,t.pages[n.oldRenderPageIdx].borderLine=!1,t.pages[n.newPageIdx].borderLine=!0,ee(t.pages),te(r),r.renderPageIdx=n.newPageIdx,r.lastPageIdx=t.pages.length-1,a.canvasAreaVC.syncPageRenderers(t.pages),u=!0,c=!1,l=void 0,e.prev=18,h=t.pages[Symbol.iterator]();case 20:if(u=(p=h.next()).done){e.next=27;break}return d=p.value,e.next=24,a.canvasAreaVC.renderPage(d,r);case 24:u=!0,e.next=20;break;case 27:e.next=33;break;case 29:e.prev=29,e.t0=e.catch(18),c=!0,l=e.t0;case 33:e.prev=33,e.prev=34,u||null==h.return||h.return();case 36:if(e.prev=36,!c){e.next=39;break}throw l;case 39:return e.finish(36);case 40:return e.finish(33);case 41:T.a.unselectAllItems(),a.canvasAreaVC.updatePagingManager(),a.canvasAreaVC.updateScrollCenterOfCurrentPage(),a.renderAuto(t,r),a.renderItemTools(t,r),a.renderHandler(t,r),L.a.changePages(),(f=r.pageController.getPageRenderer(t.pages[n.newPageIdx]))&&f.fadeIn();case 50:case"end":return e.stop()}},e,null,[[18,29,33,41],[34,,36,40]])}));return function(t,n,r){return e.apply(this,arguments)}}(),n.rollbackAction=function(){var e=u()(i.a.mark(function e(t,r,a){var o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o=r.pageController.getPageRenderer(t.pages[n.newPageIdx]))){e.next=4;break}return e.next=4,o.fadeOut();case 4:t.pages=n.oldPages,ee(t.pages),te(r),r.renderPageIdx=n.oldRenderPageIdx,r.lastPageIdx=t.pages.length-1,a.canvasAreaVC.syncPageRenderers(t.pages),T.a.unselectAllItems(),a.canvasAreaVC.updatePagingManager(),a.canvasAreaVC.updateScrollCenterOfCurrentPage(),a.renderCanvas(t,r);case 14:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),n.recycle=function(){n.newPages=[],n.oldPages=[]},n.newPageIdx=e,n.doSaveQueue=!B.isOverDefaultMaxCount(),n}return m()(t,e),t}(E.b),Y=function(e){function t(){var e,n;l()(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=f()(this,(e=v()(t)).call.apply(e,[this].concat(i)))).actionType=E.a.ADD_COPIED_PAGE,n}return m()(t,e),p()(t,[{key:"createNewPage",value:function(e){return e.pages[this.newPageIdx-1].clone(this.newPageIdx)}}]),t}(X),Z=function(e){function t(){var e,n;l()(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=f()(this,(e=v()(t)).call.apply(e,[this].concat(i)))).actionType=E.a.ADD_BLANK_PAGE,n}return m()(t,e),p()(t,[{key:"createNewPage",value:function(e){var t=e.pages[this.newPageIdx-1],n=new S.a(this.newPageIdx);return n.ratioId=t.ratioId,n.sheetSize=t.sheetSize.clone(),n}}]),t}(X),j=function(e){function t(e){var n;return l()(this,t),(n=f()(this,v()(t).call(this))).actionType=E.a.REMOVE_PAGE,n.changeDesign=function(){return!0},n.commitAction=function(){var e=u()(i.a.mark(function e(t,r,a){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.doSaveQueue){e.next=2;break}return e.abrupt("return");case 2:return n.pageIdx===r.renderPageIdx&&(te(r),r.renderPageIdx=0),n.targetPage=t.pages.splice(n.pageIdx,1)[0],ee(t.pages),r.lastPageIdx=t.pages.length-1,a.canvasAreaVC.syncPageRenderers(t.pages),r.renderPageIdx=n.pageIdx>r.lastPageIdx?r.lastPageIdx:n.pageIdx,a.canvasAreaVC.updatePagingManager(),a.canvasAreaVC.printout.removeGuideVCByPageId(n.targetPage.pageId),e.next=12,a.renderAuto(t,r);case 12:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),n.rollbackAction=function(){var e=u()(i.a.mark(function e(t,r,a){var o,s,u,c,l,h,p,d;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(o=t.pages.splice(n.pageIdx)).forEach(function(e){return e.pageIdx=e.pageIdx+1}),t.pages=t.pages.concat([n.targetPage]).concat(o),r.renderPageIdx=n.pageIdx,ee(t.pages),r.lastPageIdx=t.pages.length-1,a.canvasAreaVC.syncPageRenderers(t.pages),T.a.unselectAllItems(),s=!0,u=!1,c=void 0,e.prev=11,l=t.pages[Symbol.iterator]();case 13:if(s=(h=l.next()).done){e.next=20;break}return p=h.value,e.next=17,a.canvasAreaVC.renderPage(p,r);case 17:s=!0,e.next=13;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(11),u=!0,c=e.t0;case 26:e.prev=26,e.prev=27,s||null==l.return||l.return();case 29:if(e.prev=29,!u){e.next=32;break}throw c;case 32:return e.finish(29);case 33:return e.finish(26);case 34:a.canvasAreaVC.updatePagingManager(),a.canvasAreaVC.updateScrollCenterOfCurrentPage(),a.renderAuto(t,r),(d=k.a.instance.pageController.getPageRenderer(n.targetPage))&&d.fadeIn();case 39:case"end":return e.stop()}},e,null,[[11,22,26,34],[27,,29,33]])}));return function(t,n,r){return e.apply(this,arguments)}}(),n.recycle=function(){n.targetPage=null},n.pageIdx=e,n.renderAuto=!1,0===k.a.instance.lastPageIdx&&(n.doSaveQueue=!1),n}return m()(t,e),t}(E.b),q=(E.b,function(e){function t(e){var n;return l()(this,t),(n=f()(this,v()(t).call(this))).actionType=E.a.CHANGE_PAGE_RATIO,n.changeDesign=function(){return!0},n.commitAction=function(e,t,r){n.pageIdx<=0?n.doSaveQueue=!1:(C.a.swapArrayItem(e.pages,n.pageIdx,n.pageIdx-1),e.pages.forEach(function(e,t){return e.pageIdx=t}),t.renderPageIdx=n.pageIdx-1,J(e.pages),r.canvasAreaVC.updatePagingManager(),r.canvasAreaVC.updateScrollCenterOfCurrentPage())},n.rollbackAction=function(e,t,r){C.a.swapArrayItem(e.pages,n.pageIdx,n.pageIdx-1),e.pages.forEach(function(e,t){return e.pageIdx=t}),t.renderPageIdx=n.pageIdx,J(e.pages),r.canvasAreaVC.updatePagingManager(),r.canvasAreaVC.updateScrollCenterOfCurrentPage()},n.recycle=function(){},n.pageIdx=e,n}return m()(t,e),t}(E.b)),Q=function(e){function t(e){var n;return l()(this,t),(n=f()(this,v()(t).call(this))).actionType=E.a.CHANGE_PAGE_RATIO,n.changeDesign=function(){return!0},n.commitAction=function(e,t,r){n.pageIdx>=e.pages.length-1?n.doSaveQueue=!1:(C.a.swapArrayItem(e.pages,n.pageIdx,n.pageIdx+1),e.pages.forEach(function(e,t){return e.pageIdx=t}),t.renderPageIdx=n.pageIdx+1,J(e.pages),r.canvasAreaVC.updatePagingManager(),r.canvasAreaVC.updateScrollCenterOfCurrentPage())},n.rollbackAction=function(e,t,r){C.a.swapArrayItem(e.pages,n.pageIdx,n.pageIdx+1),e.pages.forEach(function(e,t){return e.pageIdx=t}),t.renderPageIdx=n.pageIdx,J(e.pages),r.canvasAreaVC.updatePagingManager(),r.canvasAreaVC.updateScrollCenterOfCurrentPage()},n.recycle=function(){},n.pageIdx=e,n}return m()(t,e),t}(E.b),$=function(e){function t(e,n){var r;return l()(this,t),(r=f()(this,v()(t).call(this))).actionType=E.a.PAGE_TITLE_EDIT,r.changeDesign=function(){return!1},r.commitAction=function(e,t,n){var i=r.lastPage?r.lastPage:r.lastPage=e.pages[r.pageIdx];i.title!==r.title&&(r.lastTitle=i.title,i.title=r.title,r.lastSaveStatus=R.a.getSaveStatus(),R.a.changeStatus(b.a.SAVE_REQUIRE))},r.rollbackAction=function(e,t,n){r.lastPage.title=r.lastTitle,R.a.changeStatus(r.lastSaveStatus)},r.recycle=function(){},r.pageIdx=e,r.title=n,r}return m()(t,e),t}(E.b);function J(e){if(A.a.getPageSettingOption().canForceResetTitle){var t=e.length;e.forEach(function(e){return e.title=A.a.getEditorOpenOption().getPageTitle(e.pageIdx,t)})}}function ee(e){e.forEach(function(e,t){return e.pageIdx=t}),J(e)}function te(e){T.a.unselectAllItems(),e.size.pageDeltaOffsetX=0,e.size.pageDeltaOffsetY=0}},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(255),u=function(){function e(){i()(this,e)}return o()(e,null,[{key:"getForEditingPhotoUrl",value:function(e){return s.b.getUrl(this.getFileKey(e),"forEditing")}},{key:"getOriginalPhotoUrl",value:function(e){return s.b.getUrl(this.getFileKey(e),"original")}},{key:"createPhotoKey",value:function(e){return"".concat(s.a.USER_PHOTO_PREFIX).concat(e)}},{key:"getFileKey",value:function(e){return e.replace(s.a.USER_PHOTO_PREFIX,"")}}]),e}();u.USER_PHOTO_SIZE=800},function(e,t,n){"use strict";n.d(t,"b",function(){return v}),n.d(t,"a",function(){return r});var r,i=n(0),a=n.n(i),o=n(1),s=n.n(o),u=n(6),c=n.n(u),l=n(3),h=n.n(l),p=n(9),d=n.n(p),f=n(7),g=n.n(f),v=function(e){function t(){var e,n;a()(this,t);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return(n=c()(this,(e=h()(t)).call.apply(e,[this].concat(o)))).colorMap=new Map,n.colorRevision=0,n.thumbRevision=0,n.isPropsColorInit=!1,n.shadow={active:!1,color:r.RGB.valueOf(),angle:r.NUMBER.valueOf(),alpha:r.NUMBER.valueOf(),distance:r.NUMBER.valueOf(),blur:r.NUMBER.valueOf()},n}return g()(t,e),s()(t,[{key:"getCurrentOriginColor",value:function(){return this.currentOriginColor}},{key:"setCurrentOriginColor",value:function(e){this.currentOriginColor=e.toLowerCase()}},{key:"getColor",value:function(){var e=this.colorMap.get(this.currentOriginColor);return"none"===e&&(e="#00000000"),e}},{key:"setColor",value:function(e){e=9===e.length&&"00"===e.substr(7,2)?"none":e.toLowerCase(),this.colorMap.get(this.currentOriginColor)!==e&&(this.updateThumbRevision(),this.updateRevision(),this.colorRevision++),this.colorMap.set(this.currentOriginColor,e)}},{key:"setPosition",value:function(e){this.dimensionNotEqualsTo(e)&&this.updateThumbRevision(),d()(h()(t.prototype),"setPosition",this).call(this,e)}},{key:"setLeft",value:function(e){this.boundingBox.left!==Number(e)&&this.updateThumbRevision(),d()(h()(t.prototype),"setLeft",this).call(this,e)}},{key:"setTop",value:function(e){this.boundingBox.top!==Number(e)&&this.updateThumbRevision(),d()(h()(t.prototype),"setTop",this).call(this,e)}},{key:"setRight",value:function(e){this.boundingBox.right!==Number(e)&&this.updateThumbRevision(),d()(h()(t.prototype),"setRight",this).call(this,e)}},{key:"setBottom",value:function(e){this.boundingBox.bottom!==Number(e)&&this.updateThumbRevision(),d()(h()(t.prototype),"setBottom",this).call(this,e)}},{key:"setOpacity",value:function(e){this.opacity!==Number(e)&&this.updateThumbRevision(),d()(h()(t.prototype),"setOpacity",this).call(this,e)}},{key:"setRotate",value:function(e){this.rotate!==Number(e)&&this.isActiveShadow()&&this.changeRotateSetRevision&&this.updateRevision(),d()(h()(t.prototype),"setRotate",this).call(this,e)}},{key:"setFlipH",value:function(e){this.flipH!==e&&this.updateThumbRevision(),d()(h()(t.prototype),"setFlipH",this).call(this,e)}},{key:"setFlipV",value:function(e){this.flipV!==e&&this.updateThumbRevision(),d()(h()(t.prototype),"setFlipV",this).call(this,e)}},{key:"isActiveShadow",value:function(){return this.shadow.active}},{key:"isCanActiveShadow",value:function(){return!0}},{key:"setActiveShadow",value:function(e){this.shadow.active!==e&&(this.updateRevision(),this.setChangePositionSetRevision(!0===e)),this.shadow.active=!0===e}},{key:"getColorCount",value:function(){return this.colorMap.size}},{key:"getColorMap",value:function(){return this.colorMap}},{key:"getColorRevision",value:function(){return this.colorRevision}},{key:"getShadowColor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e||this.shadow.active?this.shadow.color:r.RGB}},{key:"setShadowColor",value:function(e){this.shadow.color!==e&&this.updateRevision(),this.shadow.color=e}},{key:"getShadowAngle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e||this.shadow.active?this.shadow.angle:r.NUMBER}},{key:"setShadowAngle",value:function(e){this.shadow.angle!==Number(e)&&this.updateRevision(),this.shadow.angle=Number(e)}},{key:"getShadowAlpha",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e||this.shadow.active?this.shadow.alpha:r.NUMBER}},{key:"setShadowAlpha",value:function(e){this.shadow.alpha!==Number(e)&&this.updateRevision(),this.shadow.alpha=Number(e)}},{key:"getShadowDistance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e||this.shadow.active?this.shadow.distance:r.NUMBER}},{key:"setShadowDistance",value:function(e){this.shadow.distance!==Number(e)&&this.updateRevision(),this.shadow.distance=Number(e)}},{key:"getShadowBlur",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e||this.shadow.active?this.shadow.blur:r.NUMBER}},{key:"setShadowBlur",value:function(e){this.shadow.blur!==Number(e)&&this.updateRevision(),this.shadow.blur=Number(e)}},{key:"makeClone",value:function(){return new t}},{key:"clone",value:function(){var e=d()(h()(t.prototype),"clone",this).call(this);return e.colorMap=new Map,this.colorMap.forEach(function(t,n){e.colorMap.set(n,t)}),e}},{key:"getThumbnailRevision",value:function(){return this.changeRenderPropsToUpdateThumb&&(this.changeRenderPropsToUpdateThumb=!1,this.thumbRevision++),this.thumbRevision}},{key:"updateThumbRevision",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.changeRenderPropsToUpdateThumb=!0===e}},{key:"isColorInit",value:function(){return this.isPropsColorInit}},{key:"initColor",value:function(){this.isPropsColorInit=!0}}]),t}(n(263).a);v.MIN_PATTERN_COUNT_RATIO=1,v.MAX_PATTERN_COUNT_RATIO=6,function(e){e.RGB="#000000",e[e.NUMBER=0]="NUMBER"}(r||(r={}))},function(e,t,n){"use strict";var r,i,a,o,s;n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a}),n.d(t,"c",function(){return o}),function(e){e.WARNING="WARNING",e.CAUTION="CAUTION",e.RECOMMEND="RECOMMEND",e.DELETE_ITEM="DELETE_ITEM"}(r||(r={})),function(e){e.AREA="AREA",e.ITEM_SIZE="ITEM_SIZE",e.FONT_SIZE="FONT_SIZE",e.IMAGE_DPI="IMAGE_DPI"}(i||(i={})),function(e){e.IN="IN",e.OUT="OUT",e.BETWEEN="BETWEEN"}(a||(a={})),function(e){e.NONE="NONE",e.DOT="DOT",e.SOLID="SOLID"}(o||(o={})),function(e){e.USER="USER",e.MICAN="MICAN",e.BOTH="BOTH"}(s||(s={}))},function(e,t,n){"use strict";function r(){return"".concat((new Date).getTime(),"-").concat(Math.random())}n.d(t,"a",function(){return r})},,function(e,t,n){"use strict";n.d(t,"c",function(){return x}),n.d(t,"b",function(){return R}),n.d(t,"e",function(){return L}),n.d(t,"a",function(){return _}),n.d(t,"d",function(){return P});var r=n(6),i=n.n(r),a=n(3),o=n.n(a),s=n(7),u=n.n(s),c=n(2),l=n.n(c),h=n(4),p=n.n(h),d=n(0),f=n.n(d),g=n(1),v=n.n(g),y=n(86),m=n(230),E=n(224),k=n(392),S=n(225),I=n(236),T=n(286),b=(n(265),n(238)),w=n(466),A=n(90),C=n(67),x=function(){function e(t,n,r,i,a,o,s,u,c){f()(this,e),this.doSaveQueue=!1,this.isActionGroupEquals=function(e){return!1},this.concat=function(e){return!1},this.actionType=E.a.TEXT_CHANGE,this.changeDesign=function(){return!0},this.isLastSavedAction=!1,this.endSelect=s,this.needRender=u,this.setCursorLast=c,this.textItem=t,this.dx=n/this.textItem.lastRenderEditScale,this.dy=r/this.textItem.lastRenderEditScale,i&&a&&(this.ux=i/this.textItem.lastRenderEditScale,this.uy=a/this.textItem.lastRenderEditScale),this.shift=o||!1}return v()(e,[{key:"commit",value:function(e,t,n){I.a.selectItem(this.textItem);var r=t.pageController.getItemRenderer(this.textItem);this.textItem.isEditMode||r.toggleEditMode(),S.a.instance.dispatch(new w.a);var i={isEditMode:!0,moveX:0,moveY:0,orgScale:t.zoomScale};if(C.a.isMobilePortraitSize()){var a=($(window).width()-40)/n.itemHandleVC.getOffsetLTRB().getWidth(),o=($(window).innerHeight()/4-40)/n.itemHandleVC.getOffsetLTRB().getHeight(),s=Math.min(a,o);if(s>1){var u=t.zoomScale*s*t.pageEditScale;S.a.instance.dispatch(new k.a(u,!0))}}if(C.a.isMobileDevice()&&(n.canvasAreaVC.setEditModeContents(!0),n.renderHandler(e,t)),this.needRender&&(n.renderHandler(e,t),n.renderLayer(e,t)),C.a.isMobileDevice()){var c=new A.a($(window).innerWidth()/2,$(window).innerHeight()/4),l=n.itemHandleVC.getOffsetLTRB().getCenterPos();i.moveX=C.a.isMobilePortraitSize()?l.x-c.x:0,i.moveY=l.y-c.y,n.moveScroll(i.moveX,i.moveY)}this.textItem.editModeParam=i}},{key:"rollback",value:function(e,t){}},{key:"recycle",value:function(){this.textItem=null}}]),e}(),R=function(){function e(t){f()(this,e),this.doSaveQueue=!1,this.isActionGroupEquals=function(e){return!1},this.concat=function(e){return!1},this.actionType=E.a.TEXT_CHANGE,this.changeDesign=function(){return!0},this.isLastSavedAction=!1,this.textItem=t}return v()(e,[{key:"commit",value:function(e,t){if(this.textItem.isEditMode){var n=t.pageController.getItemRenderer(this.textItem);n&&n.toggleEditMode();var r=T.a.getItemIncludedPage(e.pages,this.textItem);if(!this.textItem.props.isEmpty()){var i=this.textItem.editModeParam;if(!i.isEditMode||0===i.moveX&&0===i.moveY||t.editorMainVC.moveScroll(-i.moveX,-i.moveY),i.orgScale!==t.zoomScale){var a=i.orgScale*t.pageEditScale;S.a.instance.dispatch(new k.a(a))}t.editorMainVC.canvasAreaVC.setEditModeContents(!1),this.textItem.editModeParam={isEditMode:!1,moveX:0,moveY:0,orgScale:t.zoomScale}}var o=t.pageController.getPageRenderer(r);o&&t.editorMainVC.canvasAreaVC.printout.render({pageWrapper:o.element,pageId:r.pageId,pageIdx:r.pageIdx,pageSize:r.sheetSize.clone(),pageItems:[this.textItem],domRenderParam:{editScale:r.editScale,printAreaBgColor:r.background.color},forceCheckPageItems:!0})}}},{key:"rollback",value:function(e,t){}},{key:"recycle",value:function(){this.textItem=null}}]),e}(),L=function e(t,n,r,i){f()(this,e),this.doSaveQueue=!1,this.actionType=E.a.TEXT_CHANGE,this.isActionGroupEquals=function(e){return!1},this.concat=function(e){return!1},this.changeDesign=function(){return!1},this.isLastSavedAction=!1,this.commit=function(e,t){},this.rollback=function(e,t){},this.recycle=function(){},this.textitem=t,this.x=n,this.y=r,this.shift=i},_=function(e){function t(e,n){var r;return f()(this,t),(r=i()(this,o()(t).call(this))).actionType=E.a.ONE_TIME,r.changeDesign=function(){return!1},r.commitAction=function(e){var t=r.items;if(t&&0!==t.length&&r.designParam){var n=r.designParam;n.repositoryType===y.a.UNICORN&&n.resourceType!==m.a.TEMPLATE||t.forEach(function(e){e instanceof b.a&&(e.templateText=e.text)})}},r.rollbackAction=function(e,t){},r.recycle=function(){},r.items=e,r.designParam=n,r.doSaveQueue=!1,r}return u()(t,e),t}(E.b),P=function(){function e(t,n,r){var i=this;f()(this,e),this.doSaveQueue=!0,this.changeDesign=function(){return!0},this.isLastSavedAction=!1,this.isActionGroupEquals=function(t){return t instanceof e},this.actionType=E.a.TEXT_CHANGE,this.commit=function(){var e=p()(l.a.mark(function e(t,n,r){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i.commitAction(t,n),i.redrawItem(t,n,r);case 2:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),this.rollback=function(){var e=p()(l.a.mark(function e(t,n,r){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i.rollbackAction(t,n),i.redrawItem(t,n,r);case 2:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),this.concat=function(e){return!1},this.commitAction=function(e,t){i.beforeChange=i.textItem.props.getLines(),i.textItem.props.setLines(i.textData,i.instantRender),i.beforeRange=i.textItem.getSavedSelPos()},this.rollbackAction=function(e,t){i.textItem.props.setLines(i.beforeChange,!0),i.beforeChange=null,i.textItem.setSelectionRange(i.beforeRange),i.beforeRange=null},this.recycle=function(){i.textItem=null,i.textData=null,i.beforeChange=null,i.beforeRange=null},this.textItem=t,this.textData=n,this.instantRender=r}return v()(e,[{key:"redrawItem",value:function(e,t,n){this.instantRender&&n.renderCanvas(e,t,[this.textItem]),n.renderHandler(e,t)}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(231),u=n(239),c=n(234),l=function(){function e(){i()(this,e)}return o()(e,null,[{key:"calculateDesignElementPos",value:function(e,t,n){var r=t>=n,i=r?n/t:t/n,a=.6*(e.width>=e.height?e.height:e.width),o=(e.width-(r?a:a*i))/2,s=(e.height-(r?a*i:a))/2,u=o+(r?a:a*i),l=s+(r?a*i:a);return new c.a(o,s,u,l,0)}},{key:"getOffsetBaseRect",value:function(t,n,r,i,a,o,s){var u=e.calculateDesignElementPos(n,o,s);if(t){var l=a/r,h=i/r-u.getWidth()/2,p=l-u.getHeight()/2,d=h+u.getWidth(),f=p+u.getHeight();return new c.a(h,p,d,f)}return u}},{key:"correctPosition",value:function(e,t){e.forEach(function(e){var n=e.getLTRBCoordinate(),r=t.getLTRBCoordinate();n.left===r.left&&n.top===r.top&&t.move(10,10)})}},{key:"getItemIncludedPage",value:function(e,t){return e.find(function(e){var n=e.getAllSingleItems(),r=null;return!!(r=t instanceof s.d&&t.belongsTo===s.c.IMAGEFRAME?n.find(function(e){return e instanceof u.b&&e.innerPhotoItem===t}):t)&&Boolean(n.find(function(e){return e.tbpeId===r.tbpeId}))})}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(27),u=function(){function e(){i()(this,e)}return o()(e,null,[{key:"getSaveCategoryIdx",value:function(){try{var e=s.c.get(s.b.CATEGORY_IDX);return e?Number(e):0}catch(e){return 0}}}]),e}()},,,function(e,t,n){"use strict";var r=n(2),i=n.n(r),a=n(4),o=n.n(a),s=n(0),u=n.n(s),c=n(1),l=n.n(c),h=n(6),p=n.n(h),d=n(3),f=n.n(d),g=n(7),v=n.n(g),y=n(37),m=n(29),E=n(516),k=n(354),S=n(302),I=function(e){function t(){var e,n;u()(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=p()(this,(e=f()(t)).call.apply(e,[this].concat(i)))).fontFamilyResources=new Map,n.replacedFontHistory=new Map,n.fontSizePresets=[{value:"7"},{value:"8"},{value:"9"},{value:"10"},{value:"11"},{value:"12"},{value:"14"},{value:"18"},{value:"24"},{value:"30"},{value:"36"},{value:"48"},{value:"60"},{value:"72"},{value:"96"},{value:"104"},{value:"120"},{value:"144"}],n}var n,r;return v()(t,e),l()(t,[{key:"getFontSizePresets",value:function(){return this.fontSizePresets}},{key:"getReplaceableFontName",value:(r=o()(i.a.mark(function e(t){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.replacedFontHistory.has(t)){e.next=5;break}return e.next=3,this.fetchReplaceableFont(t);case 3:n=e.sent,this.replacedFontHistory.set(t,n?n.name:null);case 5:return e.abrupt("return",this.replacedFontHistory.get(t));case 6:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"fetchReplaceableFont",value:(n=o()(i.a.mark(function e(t){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.fetchReplaceableFont(t);case 2:return(n=e.sent)&&!y.a.isEmpty(n.resourceList)&&this.fontFamilyResources.set(n.name,n.resourceList),e.abrupt("return",n);case 5:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"getAndMapFontFamilyList",value:function(){var e=this;return this.fontFamilyList=k.a.getResourceStyles(S.c.STYLE_TEXT_FONT_FAMILY),this.fontFamilyList.forEach(function(t){e.fontFamilyResources.set(t.name,t.resourceList)}),this.fontFamilyList}},{key:"getFontFamilyList",value:function(){return this.fontFamilyList}},{key:"getFontFamilyResources",value:function(e){return this.fontFamilyResources.get(e)}},{key:"getTextGradationPresets",value:function(){return k.a.getResourceStyles(S.c.STYLE_TEXT_GRADATION)}}]),t}(m.a);t.a=new I},,function(e,t,n){"use strict";n.d(t,"a",function(){return y});var r=n(2),i=n.n(r),a=n(4),o=n.n(a),s=n(0),u=n.n(s),c=n(1),l=n.n(c),h=n(240),p=n(228),d=n(166),f=n(110),g=n(246),v=n(234),y=function(){function e(t,n,r,i){u()(this,e),this.renderLeft=0,this.renderTop=0,this.shadowBlurConstant=e.SHADOW_BLUR_CONSTANT,this.props=t,this.isResourceLoadFail=n,this.resourceLoadStatus=r,this.disabledResourcePreviewKey=i}var t,n,r,a,s,c,y,m;return l()(e,[{key:"getCanvasPosData",value:function(e){return new p.c(Math.ceil(this.props.getWidth()*e),Math.ceil(this.props.getHeight()*e),0,0,0,0)}},{key:"getShadowCanvasPosData",value:function(t,n){var r=this.props.getWidth()*t,i=this.props.getHeight()*t;return new p.c(Math.ceil(n?r*e.VALUE_TO_MULTIPLY:r),Math.ceil(n?i*e.VALUE_TO_MULTIPLY:i),0,0,Math.ceil(n?r*(e.VALUE_TO_MULTIPLY-1)/2:0),Math.ceil(n?i*(e.VALUE_TO_MULTIPLY-1)/2:0))}},{key:"rasterizeSingleItem",value:(m=o()(i.a.mark(function e(t,n){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",void 0);case 1:case"end":return e.stop()}},e)})),function(e,t){return m.apply(this,arguments)})},{key:"rasterizeToPage",value:(y=o()(i.a.mark(function t(n,r,a,s){var u=this;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=o()(i.a.mark(function t(o,c){var l,p,d,g,v,y,m,E,k,S,I,T,b,w,A;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n.save(),t.prev=1,a&&s||(a=n.canvas.width,s=n.canvas.height),!((l=u.getCropPosData(a/r,a/r)).width>0&&l.height>0)){t.next=32;break}if(p=l.width*r,d=l.height*r,g=l.left*r,v=l.top*r,y=e.MAX_IMAGE_SIZE,m=Math.min(Math.min(p,y)/p,Math.min(d,y)/d),E=h.a.createCanvas(new f.a(p,d,m)),!(Math.min(E.width,E.height)<1)){t.next=15;break}return o(),t.abrupt("return");case 15:return k=u.props.getWidth(),S=u.props.getHeight(),u.renderLeft=g*m,u.renderTop=v*m,I=E.getContext("2d"),T=u.props.isFlipV()?S*r-d-v:-v,b=u.props.isFlipH()?k*r-p-g:-g,I.translate(b*m,T*m),n.save(),t.next=26,u.rasterizeSingleItem(I,r*m);case 26:u.renderLeft=0,u.renderTop=0,n.translate(u.props.getLeft()*r,u.props.getTop()*r),u.props.getRotate()&&(w=k/2*r,A=S/2*r,n.translate(w,A),n.rotate(Math.round(u.props.getRotate()*Math.PI/180*1e3)/1e3),n.translate(-w,-A)),n.drawImage(E,g,v,p,d),n.restore();case 32:t.next=38;break;case 34:return t.prev=34,t.t0=t.catch(1),c(t.t0),t.abrupt("return");case 38:n.restore(),o();case 40:case"end":return t.stop()}},t,null,[[1,34]])}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)})),function(e,t,n,r){return y.apply(this,arguments)})},{key:"drawItemCtx",value:(c=o()(i.a.mark(function e(t,n,r,a){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.canvas.width&&0!==t.canvas.height){e.next=2;break}return e.abrupt("return");case 2:return t.translate(n,r),e.next=5,this.rasterizeSingleItem(t,a);case 5:case"end":return e.stop()}},e,this)})),function(e,t,n,r){return c.apply(this,arguments)})},{key:"transformImage",value:function(e,t,n,r){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=this.props.getWidth(),o=this.props.getHeight();if(e.translate(t,n),i&&(e.globalAlpha=this.props.getOpacity()/255),this.props.getRotate()){var s=a/2*r,u=o/2*r;e.translate(s,u),e.rotate(Math.round(this.props.getRotate()*Math.PI/180*1e3)/1e3),e.translate(-s,-u)}}},{key:"rasterizeResourceLoadFail",value:(s=o()(i.a.mark(function e(t,n){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.resourceLoadStatus,e.next=e.t0===p.b.TEMPORARY_ERROR?3:(e.t0,p.b.UNAUTHORIZED,6);break;case 3:return e.next=5,this.rasterizeResourceLoadFailTempError(t,n);case 5:return e.abrupt("break",9);case 6:return e.next=8,this.rasterizeResourceLoadFailUnauthorized(t,n);case 8:return e.abrupt("break",9);case 9:case"end":return e.stop()}},e,this)})),function(e,t){return s.apply(this,arguments)})},{key:"rasterizeResourceLoadFailTempError",value:(a=o()(i.a.mark(function e(t,n){var r,a,o,s,u,c,l,h,f,g;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.save(),r=t.canvas.width,a=t.canvas.height,t.translate(r/2,a/2),t.scale(this.props.isFlipH()?-1:1,this.props.isFlipV()?-1:1),t.translate(-r/2,-a/2),t.fillStyle="#ffffff",t.clearRect(0,0,t.canvas.width,t.canvas.height),t.fillRect(0,0,t.canvas.width,t.canvas.height),e.next=11,d.b.setUrlImage(p.a.RESOURCE_FETCH_ERROR,"https://resource.miricanvas.com/image/common/warning.png");case 11:o=e.sent,s=this.props.getWidth()*n,u=this.props.getHeight()*n,c=o.width,l=o.height,(o.width>s||o.height>u)&&(h=s,f=u,g=o.width/o.height,c=Math.min(f*g,h),l=Math.min(h/g,f)),t.drawImage(o,s/2-c/2,u/2-l/2,c,l),t.restore();case 19:case"end":return e.stop()}},e,this)})),function(e,t){return a.apply(this,arguments)})},{key:"rasterizeResourceLoadFailUnauthorized",value:(r=o()(i.a.mark(function t(n,r){var a,o,s,u,c,l,h,f,g,v,y;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n.save(),a=n.canvas.width,o=n.canvas.height,n.translate(a/2,o/2),n.scale(this.props.isFlipH()?-1:1,this.props.isFlipV()?-1:1),n.translate(-a/2,-o/2),s=this.props.getWidth()*r,u=this.props.getHeight()*r,t.t0=this.disabledResourcePreviewKey,t.next=t.t0===p.a.DISABLED_ORIGIN_ITEM?11:t.t0===p.a.DISABLED_ORIGIN_USER_RESOURCE?16:t.t0===p.a.NOT_FOUND_ORIGIN_ITEM?16:20;break;case 11:return t.next=13,d.b.setUrlImage(p.a.DISABLED_ORIGIN_ITEM_BACKGROUND,e.getDisabledResourcesImagePath(p.a.DISABLED_ORIGIN_ITEM_BACKGROUND));case 13:return c=t.sent,n.drawImage(c,0,0,s,u),t.abrupt("break",20);case 16:return n.fillStyle="#e3e5e7",n.clearRect(0,0,n.canvas.width,n.canvas.height),n.fillRect(0,0,n.canvas.width,n.canvas.height),t.abrupt("break",20);case 20:return t.next=22,d.b.setUrlImage(this.disabledResourcePreviewKey,e.getDisabledResourcesImagePath(this.disabledResourcePreviewKey));case 22:l=t.sent,h=l.width,f=l.height,(l.width>s||l.height>u)&&(g=s,v=u,y=l.width/l.height,h=Math.min(v*y,g),f=Math.min(g/y,v)),n.drawImage(l,s/2-h/2,u/2-f/2,h,f),n.restore();case 28:case"end":return t.stop()}},t,this)})),function(e,t){return r.apply(this,arguments)})},{key:"getCropPosData",value:function(e,t){var n,r=new v.a(this.props.getLeft(),this.props.getTop(),this.props.getRight(),this.props.getBottom());if(0!==this.props.getRotate()){var i=this.props.getRotate(),a=r.left+r.getWidth()/2,o=r.top+r.getHeight()/2,s=g.a.calcLocationByRotate2(0,0,a,o,-i),u=g.a.calcLocationByRotate2(e,0,a,o,-i),c=g.a.calcLocationByRotate2(e,t,a,o,-i),l=g.a.calcLocationByRotate2(0,t,a,o,-i),h=[s.x,u.x,c.x,l.x],p=[s.y,u.y,c.y,l.y];n=new v.a(Math.min.apply(Math,h),Math.min.apply(Math,p),Math.max.apply(Math,h),Math.max.apply(Math,p))}else n=new v.a(0,0,e,t);var d=this.props.getLeft()>n.left?0:n.left-this.props.getLeft(),f=this.props.getTop()>n.top?0:n.top-this.props.getTop(),y=this.props.getRight(),m=this.props.getBottom(),E=this.props.getWidth()-d;E=y<n.right?E:E-(y-n.right);var k=this.props.getHeight()-f;return{width:E,height:k=m<n.bottom?k:k-(m-n.bottom),left:d,top:f}}},{key:"getSingleItemCanvasDataURL",value:(n=o()(i.a.mark(function e(t,n){var r,a,o,s,u,c,l,p;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.props.getWidth(),a=this.props.getHeight(),s=(o=r>a)?t/r:n/a,u=o?t:Math.ceil(r*s),c=o?Math.ceil(a*s):n,l=h.a.createCanvas(new f.a(u,c)),p=l.getContext("2d"),e.next=10,this.rasterizeSingleItem(p,s);case 10:return e.abrupt("return",l.toDataURL());case 11:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})},{key:"getPageCanvasDataURL",value:(t=o()(i.a.mark(function e(t,n){var r,a,o,s,u;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.props.getWidth(),a=this.props.getHeight(),o=r>a?n/a:t/r,s=h.a.createCanvas(new f.a(t,n)),u=s.getContext("2d"),e.next=8,this.rasterizeToPage(u,o);case 8:return e.abrupt("return",s.toDataURL());case 9:case"end":return e.stop()}},e,this)})),function(e,n){return t.apply(this,arguments)})},{key:"drawRotateImage",value:function(e,t,n,r){e.translate(n/2,r/2),e.rotate(Math.round(this.props.getRotate()*Math.PI/180*1e3)/1e3),e.drawImage(t,-n/2,-r/2,n,r)}}],[{key:"getDisabledResourcesImagePath",value:function(e){var t;switch(e){case p.a.DISABLED_ORIGIN_ITEM:t="https://resource.miricanvas.com/image/common/disabled_resource.png";break;case p.a.NOT_FOUND_ORIGIN_ITEM:t="https://resource.miricanvas.com/image/common/not_found_resource.png";break;case p.a.DISABLED_ORIGIN_ITEM_BACKGROUND:t="https://resource.miricanvas.com/image/common/disabled_resource_background.png";break;case p.a.DISABLED_ORIGIN_USER_RESOURCE:t="https://resource.miricanvas.com/image/common/disabled_user_resource.png";break;default:t="https://resource.miricanvas.com/image/common/warning.png"}return t}}]),e}();y.VALUE_TO_MULTIPLY=2,y.MAX_IMAGE_SIZE=2e4,y.SHADOW_BLUR_CONSTANT=3},function(e,t,n){"use strict";var r,i,a,o;n.d(t,"a",function(){return r}),i=r||(r={}),a="1.5.0.2",o="1.5.0.0",i.getLatestVersion=function(){return a},i.getTextConvertVersion=function(){return o}},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=function(){function e(){i()(this,e)}return o()(e,[{key:"parse",value:function(e,t){var n=this;return this.getTargetNodeNames().reduce(function(r,i){return r=r.concat(n.parseNodeList(e,t,i))},[]).reduce(function(e,t){var r=n.parseItem(t.itemSheetNode,t.itemTemplateNode,t.nodeName);return r&&e.push(r),e},[])}},{key:"parseNodeList",value:function(e,t,n){var r=null!=e?e[n]:null,i=null!=t?t[n]:null,a=[];if(null==r&&null==i)return a;if(i=Array.isArray(i)?i:[i],r)for(var o=0,s=(r=Array.isArray(r)?r:[r]).length;o<s;o++)a.push({itemSheetNode:r[o],itemTemplateNode:null!=i[o]?i[o]:r[o].TEMPLATE,nodeName:n});else i.forEach(function(e){a.push({itemSheetNode:null,itemTemplateNode:e,nodeName:n})});return a}}]),e}()},function(e,t,n){"use strict";n.d(t,"b",function(){return M}),n.d(t,"a",function(){return N}),n.d(t,"c",function(){return B}),n.d(t,"d",function(){return U}),n.d(t,"e",function(){return G});var r=n(1),i=n.n(r),a=n(9),o=n.n(a),s=n(2),u=n.n(s),c=n(4),l=n.n(c),h=n(0),p=n.n(h),d=n(6),f=n.n(d),g=n(3),v=n.n(g),y=n(7),m=n.n(y),E=n(255),k=n(236),S=n(228),I=n(231),T=n(239),b=n(286),w=n(166),A=n(413),C=n(280),x=n(224),R=n(226),L=n(467),_=n(260),P=n(322),O=n(227),D=n(234),M=(x.b,x.b,x.b,x.b,function(e){function t(e,n){var r;return p()(this,t),(r=f()(this,v()(t).call(this))).actionType=x.a.CROP_PHOTO,r.changeDesign=function(){return!1},r.commitAction=function(){var e=l()(u.a.mark(function e(t,n,i){var a,o,s,c,l,h;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r.photoItem){e.next=4;break}if(1===n.activeItems.length&&!n.activeItems[0].isLock()&&n.activeItems[0]instanceof I.d){e.next=3;break}return e.abrupt("return");case 3:r.photoItem=n.activeItems[0];case 4:if(a=r.photoItem,o=b.a.getItemIncludedPage(t.pages,a),(s=n.pageController.getItemRenderer(a)).photoCropRenderer.setMainPageElement(n.pageController.getPageRenderer(o).element),a.belongsTo!==I.c.IMAGEFRAME||s.elements.getImageElement()){e.next=11;break}return e.next=11,s.renderAutoAsync(1);case 11:return(c=o.background.backgroundItem)?r.cropParam?s.toggleEditMode(r.cropParam):(l=L.a.getBackgroundCropParam(n,o,c),s.toggleEditMode(l)):r.cropParam?s.toggleEditMode(r.cropParam):(h=L.a.getCropParam(n,o,!0),s.toggleEditMode(h)),k.a.selectItem(a),a.props.updateRevision(!0),e.next=17,s.renderAutoAsync(a.lastRenderEditScale);case 17:s.cloneImageSrcToCropImageElement();case 18:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),r.rollbackAction=function(){},r.recycle=function(){r.photoItem=null},r.photoItem=e,r.cropParam=n,r.doSaveQueue=!1,r}return m()(t,e),t}(x.b)),N=function(e){function t(e,n,r,i){var a,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return p()(this,t),(a=f()(this,v()(t).call(this,e,r,i,o))).actionType=x.a.ADD_PHOTO,a.photoKey=C.a.createPhotoKey(n),a}var n,r;return m()(t,e),i()(t,[{key:"getImageSize",value:(r=l()(u.a.mark(function e(t){var n,r,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=O.a.getUserSetting().devMode?"original":"forEditing",e.next=3,E.b.fetchKeyList([this.photoKey],n);case 3:return r=E.b.getUrl(this.photoKey,n),e.next=6,w.b.setUrlImage(this.photoKey,r);case 6:return i=e.sent,e.abrupt("return",{imgWidth:i.width,imgHeight:i.height});case 8:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"createNewItem",value:(n=l()(u.a.mark(function e(t,n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new I.d(t,n.toRect()));case 1:case"end":return e.stop()}},e)})),function(e,t){return n.apply(this,arguments)})},{key:"setItemOption",value:function(e){o()(v()(t.prototype),"setItemOption",this).call(this,e);var n=e;n.props.setPhotoKey(this.photoKey),n.orgType=I.b.Photo}}]),t}(_.j),B=function(e){function t(e){var n;if(p()(this,t),(n=f()(this,v()(t).call(this))).actionType=x.a.CROP_PHOTO_APPLY,n.isPossibleInCropMode=!0,n.changeDesign=function(){return!0},n.commitAction=function(){var e=l()(u.a.mark(function e(t,r,i){var a,o,s;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.doAction){e.next=2;break}return e.abrupt("return");case 2:return a=b.a.getItemIncludedPage(t.pages,n.photoItem),n.newRect&&n.newImgRect?(n.photoItem.setLTRBCoordinate(n.newRect),n.photoItem.itemPosition=n.newImgRect.clone(),n.photoItem.photoCrop.isCropped=!0):(o=r.pageController.getItemRenderer(n.photoItem),s=L.a.getCropParam(r,a,!0),o.toggleEditMode(s),n.newRect=n.photoItem.getLTRBCoordinate(),n.newImgRect=n.photoItem.itemPosition),n.photoItem.setStatus(S.g.STABLE),n.photoItem.props.updateRevision(),e.next=8,i.canvasAreaVC.renderAuto(t,r,[n.photoItem]);case 8:n.photoItem.belongsTo===I.c.INDEPENDENT&&i.renderLayerThumb([n.photoItem]),r.pageController.getPageRenderer(a).updateHoverLayer();case 10:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),n.rollbackAction=function(e,t,r){n.doAction&&(n.photoItem.setLTRBCoordinate(n.backupRect),n.photoItem.itemPosition=n.backupImgRect.clone(),n.photoItem.setStatus(S.g.STABLE),n.photoItem.props.updateRevision(),n.photoItem.photoCrop.isCropped=n.oldIsCropped,r.renderLayerThumb([n.photoItem]))},n.recycle=function(){n.photoItem=null,n.backupRect=null,n.backupImgRect=null,n.newRect=null,n.newImgRect=null},n.photoItem=e,1!==R.a.instance.activeItems.length)return f()(n);var r=R.a.instance.activeItems[0];return!e&&r instanceof I.d&&(n.photoItem=r),!e&&r instanceof T.b&&(n.photoItem=r.innerPhotoItem),n.photoItem&&(n.backupRect=n.photoItem.backupRect.clone(),n.backupImgRect=n.photoItem.backupImgRect.clone(),n.oldIsCropped=n.photoItem.photoCrop.isCropped,n.doAction=!0),n.doSaveQueue=n.doAction,n}return m()(t,e),t}(x.b),U=function(e){function t(){var e;p()(this,t),(e=f()(this,v()(t).call(this))).doSaveQueue=!1,e.isPossibleInCropMode=!0,e.actionType=x.a.CROP_PHOTO_CANCLE,e.isActionGroupEquals=function(e){return!1},e.concat=function(e){return!1},e.changeDesign=function(){return!1},e.commitAction=function(){var t=l()(u.a.mark(function t(n,r,i){var a,o,s,c,l,h,p,d,f,g,v;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if((a=e.photoItem)&&R.a.isCropMode()){t.next=3;break}return t.abrupt("return");case 3:if(o=b.a.getItemIncludedPage(n.pages,a),e.doAction&&(s=r.pageController.getItemRenderer(a),c=L.a.getCropParam(r,o,!1),s.toggleEditMode(c),a.setStatus(S.g.STABLE),a.props.updateRevision()),a.belongsTo!==I.c.IMAGEFRAME){t.next=37;break}i.renderHandler(n,r),h=!0,p=!1,d=void 0,t.prev=10,f=o.getAllSingleItems()[Symbol.iterator]();case 12:if(h=(g=f.next()).done){t.next=20;break}if(v=g.value,!e.isValieFrame(v)){t.next=17;break}return l=v,t.abrupt("break",20);case 17:h=!0,t.next=12;break;case 20:t.next=26;break;case 22:t.prev=22,t.t0=t.catch(10),p=!0,d=t.t0;case 26:t.prev=26,t.prev=27,h||null==f.return||f.return();case 29:if(t.prev=29,!p){t.next=32;break}throw d;case 32:return t.finish(29);case 33:return t.finish(26);case 34:k.a.selectItem(l),i.renderCanvas(n,r,[l]),i.renderHandler(n,r);case 37:r.pageController.getPageRenderer(o).updateHoverLayer();case 38:case"end":return t.stop()}},t,null,[[10,22,26,34],[27,,29,33]])}));return function(e,n,r){return t.apply(this,arguments)}}(),e.rollbackAction=function(){},e.recycle=function(){e.photoItem=null};var n=R.a.instance.activeItems[0];return e.renderAuto=e.doAction=1===R.a.instance.activeItems.length&&n instanceof I.d&&R.a.isCropMode(),e.doAction&&(e.photoItem=R.a.instance.activeItems[0]),e}return m()(t,e),i()(t,[{key:"isValieFrame",value:function(e){return e instanceof T.b&&e.innerPhotoItem.tbpeId===this.photoItem.tbpeId}}]),t}(x.b),G=function(e){function t(){var e;return p()(this,t),(e=f()(this,v()(t).call(this))).actionType=x.a.INIT_IMAGE,e.changeDesign=function(){return!1},e.commitAction=function(){var t=l()(u.a.mark(function t(n,r,i){var a,o,s;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.photoItem){t.next=2;break}return t.abrupt("return");case 2:if(a=e.photoItem,e.rollbackPhotoInfo={props:a.props.clone(),itemRect:a.getLTRBCoordinate(),imgRect:a.itemPosition.clone(),isCropped:a.photoCrop.isCropped},a.props.clear(),!a.isBackground){t.next=15;break}if(a.orgType!==I.b.BackgroundImage){t.next=11;break}return t.next=9,e.resetBizBackground(n,r,i);case 9:t.next=13;break;case 11:o=n.pages[r.renderPageIdx].sheetSize,e.resetUserPhotoBackground(o.width,o.height);case 13:t.next=17;break;case 15:a.disableCrop(),a.initRectToImageRect();case 17:return s=n.pages[r.renderPageIdx].background.backgroundItem,k.a.selectItem(a.isBackground&&s?s:a),t.next=21,i.renderAuto(n,r);case 21:return t.next=23,i.renderLayerThumb([a]);case 23:case"end":return t.stop()}},t)}));return function(e,n,r){return t.apply(this,arguments)}}(),e.rollbackAction=function(){var t=l()(u.a.mark(function t(n,r,i){var a;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.rollbackItem(),!e.photoSkinSetAction){t.next=4;break}return t.next=4,e.photoSkinSetAction.rollbackAction(n,r,i);case 4:if(k.a.selectItem(e.photoItem),!e.photoItem.isBackground){t.next=11;break}return a=r.pageController.getItemRenderer(e.photoItem),t.next=9,a.renderAutoAsync(r.pageEditScale,!0);case 9:t.next=13;break;case 11:return t.next=13,i.renderAuto(n,r);case 13:i.renderLayerThumb([e.photoItem]);case 14:case"end":return t.stop()}},t)}));return function(e,n,r){return t.apply(this,arguments)}}(),e.recycle=function(){e.photoItem=null,e.photoSkinSetAction&&e.photoSkinSetAction.recycle()},e.renderAuto=!1,1===R.a.instance.activeItems.length&&R.a.instance.activeItems[0]instanceof I.d&&(e.photoItem=R.a.instance.activeItems[0]),e}var n;return m()(t,e),i()(t,[{key:"rollbackItem",value:function(){this.photoItem.setProps(this.rollbackPhotoInfo.props),this.photoItem.setLTRBCoordinate(this.rollbackPhotoInfo.itemRect),this.photoItem.itemPosition=this.rollbackPhotoInfo.imgRect.clone(),this.photoItem.photoCrop.isCropped=this.rollbackPhotoInfo.isCropped}},{key:"resetBizBackground",value:(n=l()(u.a.mark(function e(t,n,r){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.photoSkinSetAction=new P.a(this.photoItem.props.getPhotoKey()),this.photoSkinSetAction.doSaveQueue=!1,e.next=4,this.photoSkinSetAction.commitAction(t,n,r);case 4:case"end":return e.stop()}},e,this)})),function(e,t,r){return n.apply(this,arguments)})},{key:"resetUserPhotoBackground",value:function(e,t){this.photoItem.setLTRBCoordinate(new D.a(0,0,e,t));var n=w.b.getData(this.photoItem.props.getPhotoKey()),r=A.a.getCenterFixRect(e,t,n.width,n.height);this.photoItem.itemPosition=r.clone()}}]),t}(x.b)},function(e,t,n){"use strict";var r,i;n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i}),function(e){e[e.ADMIN=0]="ADMIN",e[e.MOCKUP_EDIT=1]="MOCKUP_EDIT"}(r||(r={})),function(e){e[e.ITEM_TOOLS_UPDATE_PREVENT=0]="ITEM_TOOLS_UPDATE_PREVENT",e[e.NO_RENDER_LAYER=1]="NO_RENDER_LAYER"}(i||(i={}))},function(e,t,n){"use strict";n.d(t,"a",function(){return v});var r=n(2),i=n.n(r),a=n(4),o=n.n(a),s=n(0),u=n.n(s),c=n(224),l=n(228),h=n(226),p=n(236),d=n(233),f=n(266),g=n(225),v=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.b.getGroupItemsAddedArray(h.a.instance.activeItems.slice()),r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.a.instance.renderPageIdx,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];u()(this,e),this.doSaveQueue=!0,this.actionType=c.a.DELETE_ITEM,this.isActionGroupEquals=function(e){return!1},this.concat=function(e){return!1},this.changeDesign=function(){return!0},this.isLastSavedAction=!1,this.targetList=[],this.itemIndexes=[],this.commit=function(){var e=o()(i.a.mark(function e(n,r,a){var o,s,u,c,h,v,y,m,E,k,S,I;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.targetList.length<1)){e.next=2;break}return e.abrupt("return");case 2:if(!((o=n.pages[t.targetPageIdx]).items.indexOf(t.targetList[0])<0)){e.next=36;break}o=null,s=!0,u=!1,c=void 0,e.prev=8,h=n.pages[Symbol.iterator]();case 10:if(s=(v=h.next()).done){e.next=18;break}if(!((y=v.value).items.indexOf(t.targetList[0])>=0)){e.next=15;break}return o=y,e.abrupt("break",18);case 15:s=!0,e.next=10;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(8),u=!0,c=e.t0;case 24:e.prev=24,e.prev=25,s||null==h.return||h.return();case 27:if(e.prev=27,!u){e.next=30;break}throw c;case 30:return e.finish(27);case 31:return e.finish(24);case 32:if(o){e.next=35;break}return t.doSaveQueue=!1,e.abrupt("return");case 35:t.targetPageIdx=o.pageIdx;case 36:p.a.unselectAllItems(),m=t.targetList.length-1;case 38:if(!(m>=0)){e.next=50;break}if((E=t.targetList[m]).canDelete()){e.next=42;break}return e.abrupt("continue",47);case 42:k=[],E instanceof l.d?k.push(E):E instanceof d.a&&(k=k.concat(E.getAllSingleMembers())),k.forEach(function(e){g.a.instance.dispatch(new f.c(e))}),S=o.removeItem(E),t.itemIndexes.push(S);case 47:m--,e.next=38;break;case 50:return(I=r.pageController.getPageRenderer(o)).syncItemRenderers(),I.updateHoverLayer(),e.next=55,a.renderAll(n,r);case 55:case"end":return e.stop()}},e,null,[[8,20,24,32],[25,,27,31]])}));return function(t,n,r){return e.apply(this,arguments)}}(),this.rollback=function(){var e=o()(i.a.mark(function e(n,r,a){var o,s,u;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.pages[t.targetPageIdx],p.a.unselectAllItems(),s=t.itemIndexes.length,t.targetList.forEach(function(e,n){o.addItem(e,t.itemIndexes[s-1-n])}),(u=r.pageController.getPageRenderer(o)).syncItemRenderers(),u.updateHoverLayer(),t.fromMove&&g.a.instance.rollback(),e.next=10,a.renderAll(n,r);case 10:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),this.recycle=function(){t.targetList=null,t.itemIndexes=null},this.targetPageIdx=r,this.fromMove=a,n.length<1?this.doSaveQueue=!1:this.targetList=d.b.convertSinglesToItems(n)}},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(178),u=n(229),c=function(){function e(){i()(this,e)}return o()(e,null,[{key:"getImageElementWithReplaceableThumbnail",value:function(){var e=new Image;return e.onerror=function(){e.src=s.a.DESIGN_HISTORY_PREVIEW_PLACEHOLDER},e}},{key:"getLimitedSize",value:function(e){return e||u.a.getExecutionMode().isBizhowsChannel()?this.MAX_THUMB_SIZE:this.DEFAULT_THUMB_SIZE}}]),e}();c.MAX_THUMB_SIZE=800,c.DEFAULT_THUMB_SIZE=400},function(e,t,n){"use strict";n.d(t,"a",function(){return f}),n.d(t,"b",function(){return r});var r,i=n(2),a=n.n(i),o=n(4),s=n.n(o),u=n(0),c=n.n(u),l=n(1),h=n.n(l),p=n(12),d=n(328),f=function(){function e(){c()(this,e)}var t;return h()(e,null,[{key:"checkFileType",value:function(e){switch(e.type){case r.IMAGE_JPEG:case r.IMAGE_JPG:case r.IMAGE_PNG:case r.IMAGE_SVG_XML:return!0;default:return!1}}},{key:"checkFileSize",value:function(e){return e.size<=this.getMaxFileSize(e.type)}},{key:"checkFileCompatibility",value:(t=s()(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){var i=new FileReader;i.onload=function(){var n,a=new Uint8Array(i.result).subarray(0,4),o="";switch(a.forEach(function(e){return o+=e.toString(16)}),o){case"ffd8ffdb":case"ffd8ffe0":case"ffd8ffe1":case"ffd8ffe2":case"ffd8ffe3":case"ffd8ffe8":n=t.type===r.IMAGE_JPEG||t.type===r.IMAGE_JPG;break;case"89504e47":n=t.type===r.IMAGE_PNG;break;default:n=t.type===r.IMAGE_SVG_XML}e(n)},i.onerror=function(e){i.abort(),n(e)},i.readAsArrayBuffer(t)}));case 1:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})},{key:"getMaxFileSize",value:function(e){switch(e){case r.IMAGE_JPEG:case r.IMAGE_JPG:case r.IMAGE_PNG:return p.a.getUser().getImageUploadSizeLimit();case r.IMAGE_SVG_XML:return p.a.getUser().getSvgUploadSizeLimit();default:return 0}}},{key:"getSizeDescription",value:function(e){return 1024>e?"".concat(parseFloat(e.toFixed(2)),"Bytes"):1024>(e/=1024)?"".concat(parseFloat(e.toFixed(2)),"KB"):1024>(e/=1024)?"".concat(parseFloat(e.toFixed(2)),"MB"):1024>(e/=1024)?"".concat(parseFloat(e.toFixed(2)),"GB"):""}},{key:"beautifyFileName",value:function(e){var t=e.length;return t<20?e:"".concat(e.substring(0,8)," ... ").concat(e.substring(t-8,t))}},{key:"beautifyFolderName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,n=e.length;return n<t+1?e:"".concat(e.substring(0,t),"...")}},{key:"convertMimetypeToCMFileType",value:function(e){switch(e){case"image/jpeg":case"image/jpg":case"image/png":return d.a.USER_IMAGE;case"image/svg+xml":return d.a.USER_SVG}}}]),e}();!function(e){e.IMAGE_JPEG="image/jpeg",e.IMAGE_JPG="image/jpg",e.IMAGE_PNG="image/png",e.IMAGE_SVG_XML="image/svg+xml"}(r||(r={}))},,function(e,t,n){"use strict";var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(6),u=n.n(s),c=n(3),l=n.n(c),h=n(14),p=n.n(h),d=n(7),f=n.n(d),g=n(11),v=n(244),y=n(247),m=n(9),E=n.n(m),k=n(339),S=function(e){function t(e,n){var r;return i()(this,t),(r=u()(this,l()(t).call(this,e,n))).item=e,r}return f()(t,e),o()(t,[{key:"initSvgElementAttrs",value:function(){E()(l()(t.prototype),"initSvgElementAttrs",this).call(this),this.svgElement.setAttribute("preserveAspectRatio","none"),this.svgElement.setAttribute("width","100%"),this.svgElement.setAttribute("height","100%")}},{key:"clone",value:function(){return new t(this.item,this.originElement.cloneNode(!0))}},{key:"isInitRenderDatas",value:function(){return!1}},{key:"renderView",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];E()(l()(t.prototype),"renderView",this).call(this,e,n),n&&(this.svgElement.setAttribute("width","".concat(this.item.getWidth()*e,"px")),this.svgElement.setAttribute("height","".concat(this.item.getHeight()*e,"px")))}}]),t}(k.a),I=n(249),T=n(406),b=n(90),w=function(){function e(t,n){i()(this,e),this.layerRenderDatas=t,this.item=n;var r=document.createElementNS(y.a.SVG,"path"),a=t[0].svgRenderData.data;if(a.fill&&(r.setAttribute("fill",a.fill),r.setAttribute("origin_fill",a.fill)),a.opacity&&r.setAttribute("opacity","".concat(a.opacity)),a.translate){var o=this.getValuesInBracket(a.translate);this.translate=new b.a(Number(o[0]),Number(o[1]))}if(a.scale){var s=this.getValuesInBracket(a.scale);this.scale=new b.a(Number(s[0]),Number(s[1]))}if(a.rotate){var u=this.getValuesInBracket(a.rotate);this.rotate={degree:Number(u[0])}}if(a.matrix){var c=this.getValuesInBracket(a.matrix);this.matrix={a:Number(c[0]),b:Number(c[1]),c:Number(c[2]),d:Number(c[3]),e:Number(c[4]),f:Number(c[5])}}I.a.makeUnicornSvgElement(r),this.pathElement=r}return o()(e,[{key:"getValuesInBracket",value:function(e){return e.split("(")[1].replace(")","").split(" ")}},{key:"renderView",value:function(e){var t="",n=!0,r=!1,i=void 0;try{for(var a,o=this.layerRenderDatas[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,u=s.svgLayer,c=s.svgRenderData,l=u.getRenderBoxTranslate(e),h=l.cx,p=l.cy,d=u.getSvgScale(e,!0),f=d.cx,g=d.cy;t+=c.getPathString(f,g,h-this.viewBoxLeft,p-this.viewBoxTop)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}this.pathElement.setAttribute("d",t);var v=this.item.getSvgScale(),y="";this.translate&&(y+="translate(".concat(this.translate.x*v," ").concat(this.translate.y*v,") ")),this.scale&&(y+="scale(".concat(this.scale.x*v," ").concat(this.scale.y*v,") ")),this.rotate&&(y+="rotate(".concat(this.rotate.degree,") ")),this.matrix&&(y+="matrix(".concat(this.matrix.a," ").concat(this.matrix.b," ").concat(this.matrix.c," ").concat(this.matrix.d," ").concat(this.matrix.e*v," ").concat(this.matrix.f*v,") ")),y&&this.pathElement.setAttribute("transform",y)}},{key:"updatePosition",value:function(e){}},{key:"setViewBoxData",value:function(e,t,n,r){this.viewBoxLeft=e,this.viewBoxTop=t}},{key:"updateColor",value:function(){var e=this.item.props.getColor();e||(e="none")}}]),e}(),A=function(e){function t(e,n){var r;return i()(this,t),(r=u()(this,l()(t).call(this,e,n))).item=e,r}return f()(t,e),o()(t,[{key:"clone",value:function(){return new t(this.item,this.originElement.cloneNode(!0))}},{key:"isInitRenderDatas",value:function(){return!0}},{key:"initSvgElementAttrs",value:function(){E()(l()(t.prototype),"initSvgElementAttrs",this).call(this);var e=this.item.layers;this.layerElements=[];var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=this.svgRenderDatas[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value.data.getHashString();n.includes(u)||n.push(u)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}for(var c=0,h=n;c<h.length;c++){var p=h[c],d=[],f=!0,g=!1,v=void 0;try{for(var m,k=e[Symbol.iterator]();!(f=(m=k.next()).done);f=!0){var S=m.value,I=T.a.makeSvgRenderedDataUnit(S.layerSvgElement),b=!0,A=!1,C=void 0;try{for(var x,R=I[Symbol.iterator]();!(b=(x=R.next()).done);b=!0){var L=x.value;L.data.getHashString()===p&&d.push({svgLayer:S,svgRenderData:L})}}catch(e){A=!0,C=e}finally{try{b||null==R.return||R.return()}finally{if(A)throw C}}}}catch(e){g=!0,v=e}finally{try{f||null==k.return||k.return()}finally{if(g)throw v}}var _=new w(d,this.item);_.setViewBoxData(this.viewLeft,this.viewTop,this.viewWidth,this.viewHeight),this.layerElements.push(_)}for(var P=0,O=Array.from(this.svgElement.getElementsByTagNameNS(y.a.SVG,"path"));P<O.length;P++){var D=O[P];D.parentElement&&D.parentElement.removeChild(D)}this.svgElement.setAttribute("width","100%"),this.svgElement.setAttribute("height","100%");var M=!0,N=!1,B=void 0;try{for(var U,G=this.layerElements[Symbol.iterator]();!(M=(U=G.next()).done);M=!0){var F=U.value;this.svgElement.appendChild(F.pathElement)}}catch(e){N=!0,B=e}finally{try{M||null==G.return||G.return()}finally{if(N)throw B}}}},{key:"updateColor",value:function(){var e=this;E()(l()(t.prototype),"updateColor",this).call(this),this.item.props.getColorMap().forEach(function(t,n){var r=!0,i=!1,a=void 0;try{for(var o,s=e.item.layers[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;I.a.setFillColorByOriginColor(u.element,n,t)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}});var n=!0,r=!1,i=void 0;try{for(var a,o=this.layerElements[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){a.value.updateColor()}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}},{key:"renderView",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.item.getWidth()/this.item.svgData.width,i=this.item.getHeight()/this.item.svgData.height,a=this.viewWidth*e*r,o=this.viewHeight*e*i,s=!0,u=!1,c=void 0;try{for(var h,p=this.layerElements[Symbol.iterator]();!(s=(h=p.next()).done);s=!0){var d=h.value;d.renderView(e)}}catch(e){u=!0,c=e}finally{try{s||null==p.return||p.return()}finally{if(u)throw c}}this.svgElement.setAttribute("viewBox","0 0 ".concat(a," ").concat(o)),n&&(this.svgElement.setAttribute("width","".concat(this.item.getWidth()*e,"px")),this.svgElement.setAttribute("height","".concat(this.item.getHeight()*e,"px"))),E()(l()(t.prototype),"renderView",this).call(this,e,n)}},{key:"updatePosition",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!0,i=!1,a=void 0;try{for(var o,s=this.layerElements[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;u.updatePosition(e)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}E()(l()(t.prototype),"updatePosition",this).call(this,e,n)}}]),t}(k.a),C=function(){function e(t){i()(this,e),this.svgLayer=t}return o()(e,[{key:"setViewBox",value:function(e,t,n,r){this.viewLeft=e,this.viewTop=t,this.viewWidth=n,this.viewHeight=r}}]),e}(),x=function(e){function t(e){var n;i()(this,t),(n=u()(this,l()(t).call(this,e))).svgLayer=e;var r=document.createElementNS(y.a.SVG,"g");return r.appendChild(e.layerSvgElement.cloneNode(!0)),n.svgElement=r,n}return f()(t,e),o()(t,[{key:"renderView",value:function(e){var t=this.svgLayer.getRenderBoxTranslate(e),n=t.cx,r=t.cy,i=this.svgLayer.getSvgScale(e,!0),a=i.cx,o=i.cy;this.svgElement.setAttribute("transform","scale(".concat(a,", ").concat(o,") translate(").concat(n,", ").concat(r,")"))}},{key:"updatePosition",value:function(e){}},{key:"updateColor",value:function(){}}]),t}(C),R=function(e){function t(e){var n;i()(this,t),(n=u()(this,l()(t).call(this,e))).svgLayer=e;var r=g.b.random(10)+e.layerId,a=g.b.random(11)+e.layerId,o=document.createElementNS(y.a.SVG,"svg");o.setAttribute("width","100%"),o.setAttribute("height","100%");var s=document.createElementNS(y.a.SVG,"defs");o.appendChild(s);var c=document.createElementNS(y.a.SVG,"pattern");s.appendChild(c),c.setAttribute("id",a),c.setAttribute("x","0"),c.setAttribute("y","0");var h=document.createElementNS(y.a.SVG,"g");c.appendChild(h),h.appendChild(e.layerSvgElement.cloneNode(!0));var p=document.createElementNS(y.a.SVG,"clipPath");s.appendChild(p),p.setAttribute("id",r);var d=document.createElementNS(y.a.SVG,"rect");p.appendChild(d);var f=document.createElementNS(y.a.SVG,"g");o.appendChild(f),f.setAttribute("clip-path","url(#".concat(r,")"));var v=document.createElementNS(y.a.SVG,"rect");return f.appendChild(v),v.setAttribute("fill","url(#".concat(a,")")),n.svgElement=o,n.patternElement=c,n.transformedPatternElement=h,n.clipRectElement=d,n.renderRectElement=v,n}return f()(t,e),o()(t,[{key:"renderView",value:function(e){var t=this.viewLeft*e*this.svgLayer.scaleCommon,n=this.viewTop*e*this.svgLayer.scaleCommon,r=this.svgLayer.getRenderingCount(e),i=r.cx,a=r.cy,o=this.svgLayer.getRenderBoxTranslate(e),s=o.cx,u=o.cy,c=this.svgLayer.getPatternTranslate(e),l=c.cx,h=c.cy,p=this.svgLayer.getFillRectSize(e),d=p.cx,f=p.cy,g=this.svgLayer.getSvgScale(e,!0),v=g.cx,y=g.cy,m=this.svgLayer.getClipRect(e),E=this.svgLayer.getPatternRatio(),k=Math.pow(10,-4),S=Math.abs(i-1)<k?2:1/i*E,I=Math.abs(a-1)<k?2:1/a*E;this.patternElement.setAttribute("width","".concat(S)),this.patternElement.setAttribute("height","".concat(I)),this.transformedPatternElement.setAttribute("transform","translate(".concat(l*v-t,", ").concat(h*y-n,") scale(").concat(v,", ").concat(y,")")),this.clipRectElement.setAttribute("x","".concat(m.left)),this.clipRectElement.setAttribute("y","".concat(m.top)),this.clipRectElement.setAttribute("width","".concat(m.getWidth())),this.clipRectElement.setAttribute("height","".concat(m.getHeight())),this.renderRectElement.setAttribute("x","".concat(s*v)),this.renderRectElement.setAttribute("y","".concat(u*v)),this.renderRectElement.setAttribute("width","".concat(d*v*i)),this.renderRectElement.setAttribute("height","".concat(f*y*a)),this.svgElement.setAttribute("x","".concat(t)),this.svgElement.setAttribute("y","".concat(n))}},{key:"updatePosition",value:function(e){}},{key:"updateColor",value:function(){}}]),t}(C),L=n(459),_=function(e){function t(e,n){var r;return i()(this,t),(r=u()(this,l()(t).call(this,e,n))).item=e,r}return f()(t,e),o()(t,[{key:"clone",value:function(){return new t(this.item,this.originElement.cloneNode(!0))}},{key:"isInitRenderDatas",value:function(){return!1}},{key:"renderView",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];E()(l()(t.prototype),"renderView",this).call(this,e,n);var r=this.item.getWidth()/this.item.svgData.width,i=this.item.getHeight()/this.item.svgData.height,a=this.viewLeft*e*this.item.svgScale,o=this.viewTop*e*this.item.svgScale,s=this.viewWidth*e*r,u=this.viewHeight*e*i;this.svgElement.setAttribute("viewBox","".concat(a," ").concat(o," ").concat(s," ").concat(u));var c=!0,h=!1,p=void 0;try{for(var d,f=this.layerSvgElements[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var g=d.value;g.renderView(e)}}catch(e){h=!0,p=e}finally{try{c||null==f.return||f.return()}finally{if(h)throw p}}n&&(this.svgElement.setAttribute("width","".concat(this.item.getWidth()*e,"px")),this.svgElement.setAttribute("height","".concat(this.item.getHeight()*e,"px")))}},{key:"updatePosition",value:function(e){E()(l()(t.prototype),"updatePosition",this).call(this,e);var n=!0,r=!1,i=void 0;try{for(var a,o=this.layerSvgElements[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){a.value.updatePosition(e)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}},{key:"updateColor",value:function(){var e=this;this.item.props.getColorMap().forEach(function(t,n){var r=!0,i=!1,a=void 0;try{for(var o,s=e.item.layers[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;I.a.setFillColorByOriginColor(u.element,n,t)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}e.changeColor(n,t)})}},{key:"makeChildElements",value:function(e,n){E()(l()(t.prototype),"makeChildElements",this).call(this,e,n),this.svgElement=document.createElementNS(y.a.SVG,"svg"),this.svgElement.setAttribute("width","100%"),this.svgElement.setAttribute("height","100%"),this.layerSvgElements=[];var r=!0,i=!1,a=void 0;try{for(var o,s=e.layers[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;u instanceof L.a?this.layerSvgElements.push(new R(u)):this.layerSvgElements.push(new x(u))}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}var c=!0,h=!1,p=void 0;try{for(var d,f=this.layerSvgElements[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var g=d.value;g.setViewBox(this.viewLeft,this.viewTop,this.viewWidth,this.viewHeight),this.svgElement.appendChild(g.svgElement)}}catch(e){h=!0,p=e}finally{try{c||null==f.return||f.return()}finally{if(h)throw p}}}},{key:"initSvgElementAttrs",value:function(){E()(l()(t.prototype),"initSvgElementAttrs",this).call(this)}}]),t}(k.a),P=function(e){function t(e,n){var r;return i()(this,t),(r=u()(this,l()(t).call(this,e,n))).item=e,r}return f()(t,e),o()(t,[{key:"isInitRenderDatas",value:function(){return!1}},{key:"makeChildElements",value:function(e,n){E()(l()(t.prototype),"makeChildElements",this).call(this,e,n);for(var r=this.svgElement.cloneNode(!0),i=document.createElementNS(y.a.SVG,"defs");this.svgElement.firstChild;)this.svgElement.removeChild(this.svgElement.firstChild);this.svgElement.appendChild(i);var a=document.createElementNS(y.a.SVG,"pattern");i.appendChild(a);var o="pattern".concat(g.b.random(5));a.setAttribute("x","0"),a.setAttribute("y","0"),a.setAttribute("id",o);var s=document.createElementNS(y.a.SVG,"g");a.appendChild(s),s.appendChild(r);var u=document.createElementNS(y.a.SVG,"clipPath");i.appendChild(u);var c="clipPath".concat(g.b.random(5));u.setAttribute("id",c);var h=document.createElementNS(y.a.SVG,"rect");u.appendChild(h),h.setAttribute("x","0"),h.setAttribute("y","0");var p=document.createElementNS(y.a.SVG,"g");this.svgElement.appendChild(p);var d=document.createElementNS(y.a.SVG,"rect");p.appendChild(d),d.setAttribute("x","0"),d.setAttribute("y","0"),I.a.makeUnicornSvgElement(i,this.item.getUniqueKey()),p.setAttribute("clip-path","url(#".concat(u.id,")")),d.setAttribute("fill","url(#".concat(a.id,")")),this.patternNode=a,this.scaleGroupNode=s,this.clipRectNode=h,this.patternRectNode=d,this.svgElement.removeAttribute("viewBox")}},{key:"clone",value:function(){return new t(this.item,this.originElement.cloneNode(!0))}},{key:"renderView",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];E()(l()(t.prototype),"renderView",this).call(this,e,n);var r=this.item.getWidth()*e,i=this.item.getHeight()*e,a=this.item.layers[0],o=a.getFillRectSize(e),s=o.cx,u=o.cy,c=a.getSvgScale(e,!0),h=c.cx,p=c.cy,d=a.getPatternRatio(),f=a.getClipRect(e),g=Math.pow(10,-3),v=s*h/r,y=u*p/i;this.patternNode.setAttribute("width","".concat(Math.abs(v-1)<g?2:v*d)),this.patternNode.setAttribute("height","".concat(Math.abs(y-1)<g?2:y*d)),this.scaleGroupNode.setAttribute("transform","scale(".concat(h,", ").concat(p,")")),this.clipRectNode.setAttribute("width","".concat(f.getWidth())),this.clipRectNode.setAttribute("height","".concat(f.getHeight())),this.patternRectNode.setAttribute("width","".concat(f.getWidth())),this.patternRectNode.setAttribute("height","".concat(f.getHeight())),this.svgElement.setAttribute("width","".concat(this.item.getWidth()*e,"px")),this.svgElement.setAttribute("height","".concat(this.item.getHeight()*e,"px")),this.svgElement.setAttribute("viewBox","0 0 ".concat(this.item.getWidth()*e," ").concat(this.item.getHeight()*e))}},{key:"updateColor",value:function(){var e=this;this.item.props.getColorMap().forEach(function(t,n){I.a.setFillColorByOriginColor(e.scaleGroupNode,n,t)})}}]),t}(k.a),O=n(235),D=n(337);n.d(t,"a",function(){return M});var M=function(e){function t(e,n,r){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=arguments.length>5&&void 0!==arguments[5]&&arguments[5],h=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],d=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],f=!(arguments.length>8&&void 0!==arguments[8])||arguments[8],g=!(arguments.length>9&&void 0!==arguments[9])||arguments[9];i()(this,t);var v=(a=u()(this,l()(t).call(this,e,n,r,o,s,c,h,d,f,g))).data.svg;return I.a.makeUnicornSvgElement(v,a.svgUniqueKey),a.isEveryLayerIsSVGPattern()&&a.layers.length>0?a.svgElements=new P(p()(a),v):a.isPatternSVG()||a.isExtendSVG()?a.isPatternSVG()||a.isGradientSVG()?a.svgElements=new _(p()(a),v):a.svgElements=new A(p()(a),v):a.svgElements=new S(p()(a),v),a}return f()(t,e),o()(t,[{key:"getItemType",value:function(){return O.b.SVG_GRAPHIC}},{key:"isDisabledSvgItem",value:function(){return this.svgData.status===v.h.DISABLED}},{key:"clone",value:function(){var e=this,n=new t(g.b.random(),this.svgData,this.props.getBoundingBox(),this.props.getRotate(),this.props.isFlipH(),this.props.isFlipV(),this.props.isCanUserSelect(),this.props.isCanUserMove(),this.props.isCanUserResize(),this.props.isCanUserDel());return n.setProps(this.props.clone()),n.updateColor(),n.svgScale=this.svgScale,n.layers.forEach(function(t,n){t.assign(e.layers[n])}),n.isBackground=this.isBackground,this.setCloneItemDefaultAttr(n),n}},{key:"isEveryLayerIsSVGPattern",value:function(){return this.data.layerList.every(function(e){return e.type.value===v.e.SVG_PATTERN.value})}},{key:"isGradientSVG",value:function(){var e=this.data.svg,t=e.getElementsByTagNameNS(y.a.SVG,"linearGradient"),n=e.getElementsByTagNameNS(y.a.SVG,"radialGradient");return t.length+n.length>0}}]),t}(D.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"c",function(){return r}),n.d(t,"b",function(){return i});var r,i,a=n(0),o=n.n(a),s=n(1),u=n.n(s),c=function(){function e(t){o()(this,e),Object.assign(this,t),this.idx&&!this.value&&(this.value=String(this.idx)),this.name&&!this.title&&(this.title=this.name)}return u()(e,null,[{key:"userCustomStyle",value:function(){return new e({value:"-1",title:"사용자 스타일"})}}]),e}();!function(e){e.STYLE="STYLE",e.STYLE_IMAGE_FILTER="STYLE_IMAGE_FILTER",e.STYLE_IMAGE_GRADATION="STYLE_IMAGE_GRADATION",e.STYLE_TEXT_FONT_FAMILY="STYLE_TEXT_FONT_FAMILY",e.STYLE_TEXT_GRADATION="STYLE_TEXT_GRADATION"}(r||(r={})),function(e){e.ACITVE="ACTIVE",e.ADMIN="ADMIN"}(i||(i={}))},function(e,t,n){"use strict";n.d(t,"c",function(){return I}),n.d(t,"a",function(){return r}),n.d(t,"d",function(){return b}),n.d(t,"b",function(){return A});var r,i=n(2),a=n.n(i),o=n(4),s=n.n(o),u=n(6),c=n.n(u),l=n(3),h=n.n(l),p=n(7),d=n.n(p),f=n(0),g=n.n(f),v=n(1),y=n.n(v),m=n(19),E=n(44),k=n(32),S=n(20),I=function(){function e(){g()(this,e),this.lang="ko",this.page=1,this.perPage=30}return y()(e,[{key:"setPage",value:function(e){return this.page=e,this}},{key:"setPerPage",value:function(e){return this.perPage=e,this}},{key:"setKeyword",value:function(e){return this.keyword=e,this}},{key:"setTemp",value:function(e){return this.temp=e,this}},{key:"getKeyword",value:function(){return this.keyword}},{key:"getPageNo",value:function(){return this.page}},{key:"getPerPage",value:function(){return this.perPage}}]),e}(),T=function(e){function t(){return g()(this,t),c()(this,h()(t).apply(this,arguments))}return d()(t,e),y()(t,[{key:"setData",value:function(e){if(void 0!==e.totalHits&&e.totalHits<=0)this._imageInfoList=new Array;else{if(void 0===e.hits)return this._imageInfoList=new Array,void this.getErrorMsg();this.total=e.totalHits,this._imageInfoList=e.hits.map(function(e){return new w(e)})}}},{key:"hasNextPage",value:function(){var e=this.requestOption.data.page,t=this.requestOption.data.per_page;return this.total>e*t}},{key:"imageInfoList",value:function(){return this._imageInfoList}},{key:"getErrorMsg",value:function(){return"Pixabay Image 를 가져오다 에러발생"}},{key:"getTotal",value:function(){return this.total}}]),t}(k.b);!function(e){e.GENESIS="GENESIS",e.FETCHING="FETCHING",e.CACHED="CACHED",e.FAIL="FAIL"}(r||(r={}));var b=function(){function e(){g()(this,e)}var t,n,i,o,u,c,l;return y()(e,null,[{key:"fetchImages",value:(l=s()(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=m.c.getURL("/pixabay-resources".concat("?",$.param(t))),e.next=3,E.a.get(T,n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)})),function(e){return l.apply(this,arguments)})},{key:"downloadStatusAll",value:(c=s()(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"/pixabay-resources/download-status-all",e.abrupt("return",S.b.get("/pixabay-resources/download-status-all",{data:{keys:t}}));case 2:case"end":return e.stop()}},e)})),function(e){return c.apply(this,arguments)})},{key:"downloadComplete",value:(u=s()(a.a.mark(function e(t){var n,i,o,s,u,c,l,h;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.downloadStatusAll(t);case 2:if((n=e.sent).data){e.next=5;break}return e.abrupt("return",!1);case 5:i=!0,o=!1,s=void 0,e.prev=8,u=n.data[Symbol.iterator]();case 10:if(i=(c=u.next()).done){e.next=20;break}if(l=c.value,(h=l.status)!==r.FAIL){e.next=15;break}return e.abrupt("continue",17);case 15:if(h===r.CACHED){e.next=17;break}return e.abrupt("return",!1);case 17:i=!0,e.next=10;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(8),o=!0,s=e.t0;case 26:e.prev=26,e.prev=27,i||null==u.return||u.return();case 29:if(e.prev=29,!o){e.next=32;break}throw s;case 32:return e.finish(29);case 33:return e.finish(26);case 34:return e.abrupt("return",!0);case 35:case"end":return e.stop()}},e,this,[[8,22,26,34],[27,,29,33]])})),function(e){return u.apply(this,arguments)})},{key:"downloadStatus",value:(o=s()(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="/pixabay-resources/${key}/download-status".replace("${key}",t),e.abrupt("return",S.b.get(n));case 2:case"end":return e.stop()}},e)})),function(e){return o.apply(this,arguments)})},{key:"startDownloadCompletePolling",value:(i=s()(a.a.mark(function e(t,n,i){var o,u=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=window.setInterval(s()(a.a.mark(function e(){var s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.downloadStatus(t);case 3:if((s=e.sent).data){e.next=7;break}return window.clearInterval(o),e.abrupt("return");case 7:if(s.data.status!==r.FAIL){e.next=11;break}return i&&i(),window.clearInterval(o),e.abrupt("return");case 11:if(s.data.status!==r.CACHED){e.next=15;break}return n&&n(),window.clearInterval(o),e.abrupt("return");case 15:e.next=22;break;case 17:return e.prev=17,e.t0=e.catch(0),i&&i(),window.clearInterval(o),e.abrupt("return");case 22:case"end":return e.stop()}},e,null,[[0,17]])})),2e3),e.abrupt("return",o);case 2:case"end":return e.stop()}},e)})),function(e,t,n){return i.apply(this,arguments)})},{key:"requestToDownloadPixabayImage",value:(n=s()(a.a.mark(function e(t){var n,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=A.get(t),r=JSON.stringify(n),e.next=4,S.b.post("/pixabay-resources/image",{data:r,contentType:"application/json"});case 4:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})},{key:"fetchImageInfoById",value:(t=s()(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="/pixabay-resources/${id}/info".replace("${id}",t),e.next=3,S.b.get(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})}]),e}(),w=function e(t){g()(this,e),this.id=t.id+"",this.type=t.type,this.tags=t.tags,this.previewURL=t.previewURL,this.webformatURL=t.webformatURL,this.imageURL=t.imageURL,this.imageWidth=t.imageWidth,this.imageHeight=t.imageHeight,this.uploadUser=t.user,A.set(this.id,this)},A=function(){function e(){g()(this,e)}var t;return y()(e,null,[{key:"set",value:function(t,n){e.informationStore.set(t,n)}},{key:"get",value:function(t){return e.informationStore.get(t)}},{key:"fetch",value:(t=s()(a.a.mark(function e(t){var n,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.get(t)){e.next=7;break}return e.next=4,b.fetchImageInfoById(t);case 4:return r=e.sent,this.set(t,r.data),e.abrupt("return",r.data);case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})}]),e}();A.informationStore=new Map},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return y});var r=n(2),i=n.n(r),a=n(4),o=n.n(a),s=n(0),u=n.n(s),c=n(1),l=n.n(c),h=n(258),p=n(67),d=n(18),f=n(11),g=n(90),v=n(246),y=function(){function t(){u()(this,t)}var n,r;return l()(t,null,[{key:"roundedRect",value:function(e,t,n,r,i,a){e.beginPath(),e.moveTo(t+a,n),e.lineTo(t+r-a,n),e.quadraticCurveTo(t+r,n,t+r,n+a),e.lineTo(t+r,n+i-a),e.quadraticCurveTo(t+r,n+i,t+r-a,n+i),e.lineTo(t+a,n+i),e.quadraticCurveTo(t,n+i,t,n+i-a),e.lineTo(t,n+a),e.quadraticCurveTo(t,n,t+a,n),e.closePath()}},{key:"calcFontSize",value:function(e,t,n){for(var r="px "+e.font.split("px")[1],i=1,a=0;a<50;a++)if(i=Math.pow(2,a),e.font=i+r,e.measureText(t).width>n){i/=2;break}for(var o=i/2;o>.05;o/=2)e.font=i+o+r,e.measureText(t).width<n&&(i+=o);return i}},{key:"drawLine",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,s=i%2*.5;e.save(),e.beginPath(),e.strokeStyle=t,e.lineWidth=i,a&&e.setLineDash(a),e.globalAlpha=o,e.moveTo(n.x+s,n.y+s),e.lineTo(r.x,r.y),e.stroke(),e.closePath(),e.restore()}},{key:"drawCircle",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;e.save(),e.beginPath(),e.arc(t.x,t.y,n,0,h.a.PI_DOUBLE),null!=r&&(e.fillStyle=r,e.fill()),null!=i&&(e.strokeStyle=i,e.lineWidth=a,e.stroke()),e.restore()}},{key:"drawText",value:function(e,t,n,r,i,a){e.save(),e.font=i,e.fillStyle=a,e.textBaseline="top",e.textAlign="center",e.fillText(t,n.x,n.y-r/2),e.restore()}},{key:"drawRotatedImage",value:function(e,t,n,r,i){var a=h.a.getRadianByDegree(i),o=n.getCenterPos(),s=v.a.getRotatedVectorByPoint(o,new g.a(n.left,n.top),a),u=v.a.getRotatedVectorByPoint(o,new g.a(n.right,n.top),a),c=v.a.getRotatedVectorByPoint(o,new g.a(n.right,n.bottom),a),l=v.a.getRotatedVectorByPoint(o,new g.a(n.left,n.bottom),a);e.save(),e.beginPath(),e.moveTo(s.x,s.y),e.lineTo(u.x,u.y),e.lineTo(c.x,c.y),e.lineTo(l.x,l.y),e.lineTo(s.x,s.y),e.closePath(),e.clip(),e.drawImage(t,r.left,r.top,r.getWidth(),r.getHeight()),e.restore()}},{key:"drawImage",value:function(e,t,n,r){var i=n.getCenterPos(),a=h.a.getRadianByDegree(r),o=n.getWidth(),s=n.getHeight();e.save(),e.translate(i.x,i.y),e.rotate(a),e.drawImage(t,o/-2,s/-2,o,s),e.rotate(-a),e.translate(-i.x,-i.y),e.restore()}},{key:"drawSVG",value:(r=o()(i.a.mark(function e(t,n,r,a,o,s,u,c,l,h){var p;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.svgStringToImage(n);case 2:p=e.sent,o||s?u||c||l||h?t.drawImage(p,r,a,o,s,u,c,l,h):t.drawImage(p,r,a,o,s):t.drawImage(p,r,a);case 4:case"end":return e.stop()}},e,this)})),function(e,t,n,i,a,o,s,u,c,l){return r.apply(this,arguments)})},{key:"svgStringToImage",value:(n=o()(i.a.mark(function t(n){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,r){var i;if(p.a.getBrowserType()===d.h.EDGE||e.env.IMAGE_PROCESS)i="data:image/svg+xml;base64,"+f.b.b64EncodeUnicode(n);else{var a=$.parseHTML(n)[0],o=(new XMLSerializer).serializeToString(a);i="data:image/svg+xml;base64,"+f.b.b64EncodeUnicode(o)}var s=new Image;s.onload=function(){t(s)},s.onerror=function(e){r(e)},s.src=i}));case 1:case"end":return t.stop()}},t)})),function(e){return n.apply(this,arguments)})},{key:"clone",value:function(e){return JSON.parse(JSON.stringify(e))}},{key:"hasAlpha",value:function(e,t,n){for(var r=e.getImageData(0,0,t,n).data,i=3;i<r.length;i+=4)if(r[i]<255)return!0;return!1}},{key:"CanvasToDataURL",value:function(e,t){return this.hasAlpha(t,e.width,e.height)?e.toDataURL():e.toDataURL("image/jpeg",this.TO_DATA_URL_QUALITY)}}]),t}();y.MAX_CANVAS_SIZE=2e4,y.PI_DOUBLE=2*Math.PI,y.PI_HALF=Math.PI/2,y.TO_DATA_URL_QUALITY=.92}).call(this,n(291))},function(e,t,n){"use strict";n.d(t,"a",function(){return k}),n.d(t,"b",function(){return r});var r,i=n(2),a=n.n(i),o=n(4),s=n.n(o),u=n(0),c=n.n(u),l=n(1),h=n.n(l),p=n(86),d=n(324),f=n(351),g=n(228),v=n(227),y=n(229),m=n(46),E=n(44),k=function(){function e(t){c()(this,e),this.param=t,t&&(this.designRepoType=t.repositoryType)}var t,n,i;return h()(e,[{key:"isTemplateDesign",value:function(){return this.designRepoType!==p.a.UNICORN||this.isTemplate()}},{key:"isTemplate",value:function(){return!1}},{key:"load",value:(i=s()(a.a.mark(function e(){var t,n,i=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:r.FETCH_RESOURCE,e.prev=1,n=this.makeMeta(),e.next=5,this.fetchDesignSheetXMLAsync(n,v.a.getUserSetting().devMode);case 5:return e.next=7,this.loadItemResource(n,t);case 7:return this.setPageThumbnailPath(n),this.setDesignOtherData(n),e.abrupt("return",n);case 12:if(e.prev=12,e.t0=e.catch(1),console.log(e.t0),y.a.getExecutionMode().isMiricanvasChannel()){e.next=21;break}e.next=18;break;case 18:m.a.sendEvent("로그체크","비즈에디터실행.실패.sheet파싱","오류타입.[[sheet 오류]].오류로그.[[".concat(e.t0,"]]")),alert("디자인 로드중 에러가 발생하였습니다.\n다시 시도해주세요."),window.history.back();case 21:throw e.t0;case 22:case"end":return e.stop()}},e,this,[[1,12]])})),function(){return i.apply(this,arguments)})},{key:"loadItemResource",value:(n=s()(a.a.mark(function e(t,n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=n,e.next=e.t0===r.FETCH_RESOURCE?3:e.t0===r.LOADING_PAGE?6:e.t0===r.LOADING_ITEM?8:10;break;case 3:return e.next=5,f.a.loadDesignMetaResource(t);case 5:return e.abrupt("break",11);case 6:return t.pages.forEach(function(e){e.setStatus(d.b.LOADING_WITH_COVER),e.getAllSingleItems().forEach(function(e){e.setStatus(g.g.LOADING)})}),e.abrupt("break",11);case 8:return t.pages.forEach(function(e){e.setStatus(d.b.LOADING),e.getAllSingleItems().forEach(function(e){e.setStatus(g.g.LOADING)})}),e.abrupt("break",11);case 10:throw new Error("정의되지 않은 리소스 로드 방식.");case 11:case"end":return e.stop()}},e)})),function(e,t){return n.apply(this,arguments)})},{key:"setDesignOtherData",value:function(e){}},{key:"setPageThumbnailPath",value:function(e){var t=this.getPageThumbnails();e.pages.forEach(function(e,n){e.thumbnailPath=t[n]})}},{key:"fetchDesignDocXmlList",value:(t=s()(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.getXmlList(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})}],[{key:"isIclickSticker",value:function(e){return e.indexOf("iclick_")>-1||e.indexOf("ica_")>-1}}]),e}();!function(e){e[e.FETCH_RESOURCE=0]="FETCH_RESOURCE",e[e.LOADING_ITEM=1]="LOADING_ITEM",e[e.LOADING_PAGE=2]="LOADING_PAGE"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(228),u=n(231),c=n(233),l=n(234),h=function(){function e(){i()(this,e)}return o()(e,null,[{key:"getAllSingleItems",value:function(t){var n=[];return t.forEach(function(t){t instanceof s.d?n.push(t):t instanceof c.a&&(n=n.concat(e.getAllSingleItems(t.getMembers())))}),n}},{key:"getAllGroupItems",value:function(t){var n=[];return t.forEach(function(t){t instanceof c.a&&(n.push(t),n=n.concat(e.getAllGroupItems(t.getMembers())))}),n}},{key:"getItemsLTRBCoordinate",value:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=Number.MAX_VALUE,i=Number.MAX_VALUE,a=Number.MIN_VALUE,o=Number.MIN_VALUE,h=!0,p=!1,d=void 0;try{for(var f,g=t[Symbol.iterator]();!(h=(f=g.next()).done);h=!0){var v=f.value,y=void 0;v instanceof s.d?y=v.getLTRBCoordinate(n):v instanceof c.a&&(y=e.getItemsLTRBCoordinate(v.getMembers(),n)),v instanceof u.d&&(y.right=Math.ceil(y.right-y.left)+y.left,y.bottom=Math.ceil(y.bottom-y.top)+y.top);var m=y.left,E=y.top,k=y.right,S=y.bottom;r=m<r?m:r,i=E<i?E:i,a=k<a?a:k,o=S<o?o:S}}catch(e){p=!0,d=e}finally{try{h||null==g.return||g.return()}finally{if(p)throw d}}return new l.a(r,i,a,o)}}]),e}()},function(e,t,n){"use strict";n.d(t,"c",function(){return h}),n.d(t,"a",function(){return d}),n.d(t,"b",function(){return p});var r=n(1),i=n.n(r),a=n(0),o=n.n(a),s=n(112),u=n(228),c=n(81),l=function e(t,n){o()(this,e),this.pusherTitle=t,this.pusherContents=n},h=function(){function e(){o()(this,e),this.pusher||(this.makePusher(),e.initPusherParamMap())}return i()(e,[{key:"getCustomTypeElement",value:function(){return e.instance.customTypeElement.cloneNode(!0)}},{key:"getPusherParam",value:function(t){if(t!==u.h.NONE)return{type:c.b.CUSTOM,customTypeElement:e.instance.getCustomTypeElement(),title:e.pusherParamMap.get(t).pusherTitle,content:e.pusherParamMap.get(t).pusherContents}}},{key:"makePusher",value:function(){this.pusher=new s.a({allowSameType:!1});var e=this.customTypeElement=document.createElement("span");e.classList.add("unsupported_license");var t=document.createElement("div");t.classList.add("unsupported_license_alert_icon"),e.appendChild(t)}}],[{key:"initPusherParamMap",value:function(){e.pusherParamMap.clear(),e.pusherParamMap.set(u.h.UNSUPPORTED_LICENSE,new l("라이센스 미지원 요소","해당 요소는 라이센스 지원이 종료되어 사용이 불가능한 요소입니다. 다른 요소로 교체하여 사용해주세요.")),e.pusherParamMap.set(u.h.COMPATIBILITY_FAILURE,new l("호환 실패 요소","해당 요소는 미리캔버스와 호환되지 않아 사용이 불가능합니다. 에디터 좌측 '배경' 또는 '사진' 메뉴에 있는 이미지를 배경으로 활용해보세요.")),e.pusherParamMap.set(u.h.SMILECANVAS_USER_LOGO,new l("미지원 요소","로고캔버스에서 불러온 이미지는 미리캔버스와 호환되지 않아 사용이 불가능합니다. 고객센터로 문의주시면 기존 로고 이미지를 사용하실 수 있도록 안내 도와드리겠습니다."))}},{key:"hidePusher",value:function(){e.instance.pusher.closeAll()}},{key:"showPusher",value:function(t){if(t!==u.h.NONE){var n=e.instance;n.pusher.pushNotification(n.getPusherParam(t))}}},{key:"showAutoClosePusher",value:function(t){if(t!==u.h.NONE){var n=e.instance;n.pusher.pushNotification(n.getPusherParam(t),5e3)}}}]),e}();h.pusherParamMap=new Map,h.instance=new h;var p,d=function(){function e(){o()(this,e),this.contents="미지원 요소를 사용하였습니다. 미지원 요소를 삭제하거나 다른 요소로 교체 후 다시 시도해주세요."}return i()(e,[{key:"hidePopup",value:function(){e.pusher&&e.pusher.closeAll()}},{key:"showFailedActionPopup",value:function(t){var n=document.createElement("span");n.classList.add("unsupported_license");var r=document.createElement("div");r.classList.add("unsupported_license_alert_icon"),n.appendChild(r);var i=e.pusher;i||(i=e.pusher=new s.a({allowSameType:!0,maxNum:1}));var a={type:c.b.CUSTOM,customTypeElement:n,title:t,content:this.contents};i.pushNotification(a)}}]),e}();!function(e){e.NONE="",e.SAVE="저장이 불가능합니다.",e.DOWNLOAD="다운로드가 불가능합니다.",e.PRESENTATION="슬라이드 쇼가 불가능합니다.",e.SHARE="공유가 불가능합니다.",e.ADD_CART="장바구니 추가가 불가능합니다.",e.COPY_DESIGN="복사본 만들기가 불가능합니다."}(p||(p={}))},function(e,t,n){"use strict";var r=n(2),i=n.n(r),a=n(4),o=n.n(a),s=n(0),u=n.n(s),c=n(1),l=n.n(c),h=n(12),p=n(226),d=n(232),f=n(254),g=n(518),v=n(51),y=n(299),m=n(330),E=n(328),k=n(230),S=function(){function e(){u()(this,e),this.isUploading=!1}var t,n,r;return l()(e,[{key:"setListener",value:function(e){this._listener=e}},{key:"isUploadNotPossible",value:function(e,t){return!e||0===e.length||!h.a.getUser().isLogin()&&t||!p.a.isDefaultMode()}},{key:"isImageUploading",value:function(e){var t=(e=e.substr(e.indexOf("__abcd__")+8)).substring(0,e.indexOf("__")),n="".concat(g.a.UPLOAD_KEY_PREFIX,"_").concat(t);return!!g.a.map.has(n)}},{key:"uploadAfterRenderFinish",value:function(){this.uploadParamWaitingListFetched&&(this.listener.openLoginPopupUpload(this.uploadParamWaitingListFetched.files,this.uploadParamWaitingListFetched.isClipboardPasteAction),this.uploadParamWaitingListFetched=null)}},{key:"dispatchUploadUserFile",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!(e instanceof FileList&&0===e.length)){this.listener&&this.listener.onRemoveUploadLayer(),this.uploadParamWaitingListFetched=null;var n=[];if(e instanceof File)n.push(new File([e],e.name,{type:e.type}));else if(e instanceof FileList)for(var r=0;r<e.length;r++)n.push(e[r]);var i=p.a.instance.editorMainVC.leftPanelMainVC.activePanel(d.b.MY_IMAGE_LIB,!1);i.isLoaded?this.listener.openLoginPopupUpload(n,t):this.uploadParamWaitingListFetched={files:n,isClipboardPasteAction:t},i.setActive(!0)}}},{key:"tryUploadUserFile",value:(r=o()(i.a.mark(function e(t,n){var r,a,o=arguments;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o.length>2&&void 0!==o[2]?o[2]:0,a=o.length>3?o[3]:void 0,!this.isUploadNotPossible(t,n)||!a){e.next=4;break}return e.abrupt("return");case 4:return this.isUploading=!0,e.prev=5,e.next=8,this.uploadUserFile(t,n,r);case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(5),console.error(e.t0),this.isUploading=!1;case 14:case"end":return e.stop()}},e,this,[[5,10]])})),function(e,t){return r.apply(this,arguments)})},{key:"uploadUserFile",value:(n=o()(i.a.mark(function e(t,n){var r,a,o,s,u,c,l,p,d,v,S,I,T,b,w,A,C,x,R,L,_,P=arguments;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=P.length>2&&void 0!==P[2]?P[2]:0,!(t.length>50)){e.next=5;break}return alert("한 번에 첨부할 수 있는 파일은 50개 이하입니다."),this.isUploading=!1,e.abrupt("return");case 5:return e.next=7,this.fetchCapacity(f.c.selectedTeamData,!1);case 7:a=[],o=[],s=[],u=[],c=[],l=!0,p=!1,d=void 0,e.prev=15,v=t[Symbol.iterator]();case 17:if(l=(S=v.next()).done){e.next=38;break}if(I=S.value,y.a.checkFileType(I)){e.next=23;break}a.push(I.name),e.next=35;break;case 23:if(y.a.checkFileSize(I)){e.next=27;break}I.type===y.b.IMAGE_SVG_XML?s.push(I.name):o.push(I.name),e.next=35;break;case 27:return e.next=29,y.a.checkFileCompatibility(I);case 29:if(e.sent){e.next=33;break}u.push(I.name),e.next=35;break;case 33:c.push(I),this.updateCapacity(I.size);case 35:l=!0,e.next=17;break;case 38:e.next=44;break;case 40:e.prev=40,e.t0=e.catch(15),p=!0,d=e.t0;case 44:e.prev=44,e.prev=45,l||null==v.return||v.return();case 47:if(e.prev=47,!p){e.next=50;break}throw d;case 50:return e.finish(47);case 51:return e.finish(44);case 52:if(u.length>0&&(T="미리캔버스와 호환할 수 없거나 손상된 파일입니다.\n파일 확장자 또는 파일이 깨지지 않았는지 확인해주세요.\n",u.forEach(function(e){return T+="\n".concat(e)}),alert(T)),s.length>0&&(b="각 파일 크기는 ".concat(y.a.getSizeDescription(h.a.getUser().getSvgUploadSizeLimit())," 미만이어야 합니다.\n파일 크기를 줄인 후 다시 업로드해주세요.\n"),s.forEach(function(e){return b+="\n".concat(e)}),alert(b)),o.length>0&&(w="각 파일 크기는 ".concat(y.a.getSizeDescription(h.a.getUser().getImageUploadSizeLimit())," 미만이어야 합니다.\n파일 크기를 줄인 후 다시 업로드해주세요.\n"),o.forEach(function(e){return w+="\n".concat(e)}),alert(w)),a.length>0&&(A="미리캔버스에서 지원하지 않는 파일 형식입니다.\n.jpg, .png, .svg 파일만 업로드할 수 있어요.\n",a.forEach(function(e){return A+="\n".concat(e)}),alert(A)),c&&0!==c.length){e.next=59;break}return this.isUploading=!1,e.abrupt("return");case 59:C=0,x=c;case 60:if(!(C<x.length)){e.next=80;break}return R=x[C],e.next=64,g.a.reserveFileKey();case 64:return L=e.sent.data,e.prev=65,e.next=68,g.a.loadThumbnail(R,L);case 68:n&&(_=y.a.convertMimetypeToCMFileType(R.type)===E.a.USER_SVG?k.a.SVG:k.a.PHOTO,this.listener.onCanvasDrop(m.a.getResourceKey(_,L))),e.next=75;break;case 71:return e.prev=71,e.t1=e.catch(65),alert("미리캔버스와 호환할 수 없거나 손상된 파일입니다.\n파일 확장자 또는 파일이 깨지지 않았는지 확인해주세요.\n\n".concat(R.name)),e.abrupt("continue",77);case 75:return e.next=77,g.a.uploadUserFile(R,L,r);case 77:C++,e.next=60;break;case 80:case"end":return e.stop()}},e,this,[[15,40,44,52],[45,,47,51],[65,71]])})),function(e,t){return n.apply(this,arguments)})},{key:"fetchCapacity",value:(t=o()(i.a.mark(function e(){var t,n=arguments;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]?n[0]:v.a.getDefaultSelectedTeamData(h.a.getUser().accountId),!(!(n.length>1&&void 0!==n[1])||n[1])&&this.capacity){e.next=6;break}return e.next=5,g.a.fetchUploadCapacity(t);case 5:this.capacity=e.sent;case 6:return this.listener&&this.listener.onChangeCapacity(this.capacity),e.abrupt("return",this.capacity);case 8:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"updateCapacity",value:function(e){this.capacity+=e,this.listener&&this.listener.onChangeCapacity(this.capacity)}},{key:"listener",get:function(){return this._listener}}]),e}();t.a=new S},function(e,t,n){"use strict";n.d(t,"c",function(){return r}),n.d(t,"b",function(){return i}),n.d(t,"a",function(){return E});var r,i,a,o=n(2),s=n.n(o),u=n(4),c=n.n(u),l=n(0),h=n.n(l),p=n(1),d=n.n(p),f=n(325),g=n(37),v=n(19),y=n(44),m=n(20);!function(e){e.MOCKUP="MOCKUP",e.COMBINATION="COMBINATION",e.STYLE="STYLE",e.MOCKUP_TEXT="MOCKUP_TEXT",e.MOCKUP_TEXT_DEFAULT="MOCKUP_TEXT_DEFAULT",e.MOCKUP_GRID="MOCKUP_GRID",e.MOCKUP_TEMPLATE="MOCKUP_TEMPLATE"}(r||(r={})),function(e){e.ACTIVE="ACTIVE",e.DISABLED="DISABLED",e.DELETED="DELETED"}(i||(i={})),function(e){e.CREATE="/api/template/design",e.UPDATE="/api/template/design/${idx}/update",e.UPDATE_SHEET="/api/template/design/${idx}/updateSheet",e.DELETE="/api/template/design/${idx}/delete",e.LIST="/api/template/design",e.SHEET="/api/template/design/${idx}/sheet",e.FIND_ONE="/api/template/design/${idx}"}(a||(a={}));var E=function(){function e(){h()(this,e)}var t,n,o,u,l,p;return d()(e,null,[{key:"makeUrl",value:function(e){return e}},{key:"create",value:function(t){var n=e.makeUrl(a.CREATE);return m.b.post(n,{traditional:!0,data:t})}},{key:"update",value:(p=c()(s.a.mark(function t(n,r){var i;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.makeUrl(a.UPDATE).replace("${idx}",String(n)),t.abrupt("return",m.b.post(i,{traditional:!0,data:r}));case 2:case"end":return t.stop()}},t)})),function(e,t){return p.apply(this,arguments)})},{key:"updateSheet",value:(l=c()(s.a.mark(function t(n,r){var i;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.makeUrl(a.UPDATE_SHEET).replace("${idx}",String(n)),t.abrupt("return",m.b.post(i,{data:r}));case 2:case"end":return t.stop()}},t)})),function(e,t){return l.apply(this,arguments)})},{key:"delete",value:function(t){return new Promise(function(){var n=c()(s.a.mark(function n(r,i){var o,u;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o=e.makeUrl(a.DELETE).replace("${idx}",String(t)),n.next=4,m.b.post(o);case 4:u=n.sent,r(u),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),i(n.t0);case 11:case"end":return n.stop()}},n,null,[[0,8]])}));return function(e,t){return n.apply(this,arguments)}}())}},{key:"getListByType",value:(u=c()(s.a.mark(function t(n){var r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=v.c.getURL(e.makeUrl(a.LIST)),t.next=3,y.a.get(f.k,r,{data:n,traditional:!0});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t)})),function(e){return u.apply(this,arguments)})},{key:"getSheetData",value:(o=c()(s.a.mark(function t(n){var r,i;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.makeUrl(a.SHEET).replace("${idx}",String(n)),t.next=3,y.a.getXml(v.c.getURL(r));case 3:return i=t.sent,t.abrupt("return",i.data);case 5:case"end":return t.stop()}},t)})),function(e){return o.apply(this,arguments)})},{key:"findOne",value:(n=c()(s.a.mark(function t(n){var r,i;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.makeUrl(a.FIND_ONE).replace("${idx}",String(n)),t.next=3,m.b.get(r);case 3:return i=t.sent,t.abrupt("return",i.data);case 5:case"end":return t.stop()}},t)})),function(e){return n.apply(this,arguments)})},{key:"getDefaultText",value:(t=c()(s.a.mark(function t(){var n;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.defaultText){t.next=5;break}return t.next=3,e.getListByType({type:r.MOCKUP_TEXT_DEFAULT,status:i.ACTIVE,pageSize:1,page:1});case 3:n=t.sent,g.a.isEmpty(n.data)||(this.defaultText=n.data[0]);case 5:return t.abrupt("return",this.defaultText);case 6:case"end":return t.stop()}},t,this)})),function(){return t.apply(this,arguments)})}]),e}()},,,,,,,,function(e,t,n){"use strict";var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(86),u=n(6),c=n.n(u),l=n(3),h=n.n(l),p=n(7),d=n.n(p),f=n(443),g=n(416),v=n(417),y=n(446),m=n(418),E=n(421),k=n(422),S=n(423),I=n(424),T=function(e){function t(){return i()(this,t),c()(this,h()(t).apply(this,arguments))}return d()(t,e),o()(t,[{key:"getTextParser",value:function(e){return"1.2.0.2"===e?new g.b:new g.c}},{key:"getStickerParser",value:function(e){return new v.a}},{key:"getPhotoParser",value:function(e){return new y.a}},{key:"getCalendarParser",value:function(e){return null}},{key:"getSvgParser",value:function(e){return new m.a}},{key:"getBasicSvgParser",value:function(e){return new k.a}},{key:"getShapeSvgParser",value:function(e){return new S.a}},{key:"getSvgImageframeParser",value:function(e){return new E.a(this.getPhotoParser(e))}},{key:"getGridParser",value:function(e){return new I.a(this.getTextParser(e))}},{key:"getRepositoryType",value:function(){return s.a.BIZHOWS}}]),t}(f.a),b=n(2),w=n.n(b),A=n(4),C=n.n(A),x=n(319),R=n(325),L=n(70),_=n(231),P=n(235),O=n(21),D=n(461),M=function(e){function t(e){var n;return i()(this,t),(n=c()(this,h()(t).call(this,e))).param=e,e.cmdtIdx&&(e.copyIdx=e.cmdtIdx),n}var n,r,a,u,l,p;return d()(t,e),o()(t,[{key:"getDesignRepo",value:function(){return x.a.from(this.param.repositoryType,!0)}},{key:"fetchDesignSheetXMLAsync",value:(p=C()(w.a.mark(function e(t,n){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.param.copyIdx>0)){e.next=4;break}return e.abrupt("return",this.fetchCopySheetData(t));case 4:return e.abrupt("return",this.fetchNewSheetData(t));case 5:case"end":return e.stop()}},e,this)})),function(e,t){return p.apply(this,arguments)})},{key:"fetchCopySheetData",value:(l=C()(w.a.mark(function e(t){var n;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=t,e.next=4,D.a.fetchCopySheetXml(this.getDesignRepo(),this.param.copyIdx);case 4:return e.t1=e.sent,e.next=7,e.t0.parseCopyXML.call(e.t0,e.t1);case 7:return n=e.sent,e.next=10,this.setSmileCanvasPhotoResources(n.pages,this.param.copyIdx);case 10:return e.abrupt("return",n);case 13:if(e.prev=13,e.t2=e.catch(0),!(e.t2 instanceof O.b)){e.next=20;break}throw e.t2.gaData="".concat(this.param.copyIdx),e.t2;case 20:throw new O.b(L.a.COPY_SHEETS,"".concat(this.param.copyIdx));case 21:case"end":return e.stop()}},e,this,[[0,13]])})),function(e){return l.apply(this,arguments)})},{key:"setSmileCanvasPhotoResources",value:(u=C()(w.a.mark(function e(t,n){var r,i;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,D.a.fetchPhotoList(this.getDesignRepo(),n);case 4:r=e.sent,i=r.slice(),t.forEach(function(e,t){e.items.filter(function(e){return e.getItemType()===P.b.PHOTO&&e instanceof _.d&&e.props.getPhotoKey().includes(R.e.SMILECANVAS_PHOTO_SIGNAL)}).forEach(function(e){var n=i.find(function(e){return e.pageIdx===t});n&&(e.props.setPhotoKey(n.getPhotoKey()),e.props.setSmileCanvasOriginImgWidth(n.originWidth),e.props.setSmileCanvasOriginImgHeight(n.originHeight),i.splice(i.indexOf(n),1))})});case 7:case"end":return e.stop()}},e,this)})),function(e,t){return u.apply(this,arguments)})},{key:"fetchNewSheetData",value:(a=C()(w.a.mark(function e(t){var n;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.param.repositoryType===s.a.BIZHOWS){e.next=2;break}throw Error("스마일캣 뉴모드 시트는 나중에 정리후 추가.");case 2:if(n=this.param.pkName.indexOf("THEME")>-1,e.prev=3,!n){e.next=10;break}return e.next=7,this.fetchThemeNewSheetsData(t);case 7:return e.abrupt("return",e.sent);case 10:return e.next=12,this.fetchTemplateNewSheetsData(t);case 12:return e.abrupt("return",e.sent);case 13:e.next=19;break;case 15:throw e.prev=15,e.t0=e.catch(3),e.t0.gaData=this.param.pkName,e.t0;case 19:case"end":return e.stop()}},e,this,[[3,15]])})),function(e){return a.apply(this,arguments)})},{key:"fetchThemeNewSheetsData",value:(r=C()(w.a.mark(function e(t){var n,r,i,a;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.a.fetchTemplateThemeMeta(this.getDesignRepo(),this.param.pkName);case 3:return n=e.sent,e.next=6,t.parseNewThemeXML(n.dataList,this.getDesignRepo());case 6:r=e.sent,i=0;case 8:if(!(i<n.dataList.length)){e.next=15;break}return a=n.dataList[i],e.next=12,this.setSmileCanvasPhotoResources([r.pages[i]],a.commIdx);case 12:i++,e.next=8;break;case 15:return e.abrupt("return",r);case 18:throw e.prev=18,e.t0=e.catch(0),new O.b(L.a.NEW_THEME_SHEETS);case 21:case"end":return e.stop()}},e,this,[[0,18]])})),function(e){return r.apply(this,arguments)})},{key:"fetchTemplateNewSheetsData",value:(n=C()(w.a.mark(function e(n){var r,i,a;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.a.fetchTemplateMeta(this.getDesignRepo(),this.param.pkName);case 3:return r=e.sent,i=t.isLogoDesign(r.layoutTypeId,r.ratioId)?null:r.skinId,e.next=7,D.a.fetchLayout(this.getDesignRepo(),r.layoutUrl);case 7:return a=e.sent,e.next=10,n.parseNewXML([{layout:a,skinId:i,ratioId:r.ratioId}]);case 10:return e.abrupt("return",e.sent);case 13:throw e.prev=13,e.t0=e.catch(0),new O.b(L.a.NEW_TEMPLATE_SHEETS);case 16:case"end":return e.stop()}},e,this,[[0,13]])})),function(e){return n.apply(this,arguments)})},{key:"getPageThumbnails",value:function(){return this.param.thumbnailPaths||[]}},{key:"setDesignOtherData",value:function(e){var t=this;e.pages.forEach(function(e,n){e.reference={templateRepositoryType:t.designRepoType,templateKey:t.param.copyIdx>0?String(t.param.copyIdx):t.param.pkName,templatePageNo:n}})}}],[{key:"isLogoDesign",value:function(e,t){return"LOGO"===e&&"1X1"===t}}]),t}(n(305).a),N=function(e){function t(e){return i()(this,t),c()(this,h()(t).call(this,e))}return d()(t,e),o()(t,[{key:"makeMeta",value:function(){var e=this.param.code1,t=this.param.code2,n=this.param.code3;return new T(e,t,n)}}]),t}(M),B=function(e){function t(){return i()(this,t),c()(this,h()(t).apply(this,arguments))}return d()(t,e),o()(t,[{key:"getTextParser",value:function(e){return"1.2.0.2"===e?new g.b:new g.c}},{key:"getStickerParser",value:function(e){return new v.a}},{key:"getPhotoParser",value:function(e){return new y.b}},{key:"getCalendarParser",value:function(e){return null}},{key:"getSvgParser",value:function(e){return new m.a}},{key:"getBasicSvgParser",value:function(e){return new k.a}},{key:"getShapeSvgParser",value:function(e){return new S.a}},{key:"getSvgImageframeParser",value:function(e){return new E.a(this.getPhotoParser(e))}},{key:"getGridParser",value:function(e){return new I.a(this.getTextParser(e))}},{key:"getRepositoryType",value:function(){return s.a.SMILECAT}}]),t}(f.a),U=function(e){function t(e){return i()(this,t),c()(this,h()(t).call(this,e))}return d()(t,e),o()(t,[{key:"makeMeta",value:function(){var e=this.param.code1,t=this.param.code2,n=this.param.code3;switch(e){case 100:case 200:default:return new B(e,t,n)}}}]),t}(M),G=n(230),F=n(37),H=n(27),V=n(329);n.d(t,"a",function(){return z});var z=function(){function e(){i()(this,e)}return o()(e,null,[{key:"makeDesignDC",value:function(e){if(null==e)return new V.c({blank:!0,idx:0,repositoryType:s.a.UNICORN,resourceType:G.a.TEMPLATE,width:Number(H.c.get(H.b.SHEET_W)),height:Number(H.c.get(H.b.SHEET_H)),templateTypeId:H.c.get(H.b.TEMPLATE_TYPE_ID)});switch(e.repositoryType){case s.a.UNICORN:if(F.a.isEmpty(e.sheetUrlList)){var t=e;return t.resourceType===G.a.TEMPLATE?new V.c(t):new V.d(t)}return new V.b(e);case s.a.BIZHOWS:return new N(e);case s.a.SMILECAT:return new U(e)}throw new Error("디자인 초기화 실패 'ㅡ' : ".concat(e.repositoryType,", ").concat(e))}}]),e}()},,function(e,t,n){"use strict";var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(6),u=n.n(s),c=n(3),l=n.n(c),h=n(7),p=n.n(h),d=n(453),f=n(19),g=function(e){function t(){return i()(this,t),u()(this,l()(t).apply(this,arguments))}return p()(t,e),o()(t,[{key:"getCommodityInstancePath",value:function(e){var t="/tbpe30/commodity_instance.jsp?comm_idx=${commodityIdx}".replace("${commodityIdx}",e);return f.a.getURL(t)}},{key:"getSkinPath",value:function(e,t){var n="/bhfile01/__ADMIN.SKIN/${skinId}/${ratioId}/thumb400.png".replace("${skinId}",e.trim()).replace("${ratioId}",t.trim());return f.a.getImageServerURL(n)}},{key:"getSkinListPath",value:function(e){var t="/tbpe30/list/skins2.jsp?ratio_id=${ratioId}".replace("${ratioId}",e.trim());return f.a.getURL(t)}},{key:"getTemplateMetaPath",value:function(e){var t="/tbpe30/template_meta.jsp?name=${designName}".replace("${designName}",e.trim());return f.a.getURL(t)}},{key:"getThemeMetaPath",value:function(e){var t="/tbpe30/theme_meta.jsp?name=${designName}".replace("${designName}",e.trim());return f.a.getURL(t)}},{key:"getLayoutListPath",value:function(e,t){var n="/tbpe30/theme_meta.jsp?name=${designName}".replace("${ratioId}",e.trim()).replace("${layoutType}",t.trim());return f.a.getURL(n)}},{key:"getLayoutPath",value:function(e){var t="/tbpe30/template_layout.jsp?id=${layoutId}".replace("${layoutId}",e.trim());return f.a.getURL(t)}},{key:"getLayoutThumbnailPath",value:function(e){var t="/tbpe30/template_layout.jsp?id=${layoutId}".replace("${layoutId}",e.trim());return f.a.getURL(t)}}]),t}(d.a),v=n(380),y=n(86);n.d(t,"a",function(){return m});var m=function(){function e(){i()(this,e)}return o()(e,null,[{key:"from",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(e){case y.a.UNICORN:case y.a.BIZHOWS:return new g(t);case y.a.SMILECAT:return new v.a(t)}return null}}]),e}()},,function(e,t,n){"use strict";var r=n(2),i=n.n(r),a=n(4),o=n.n(a),s=n(0),u=n.n(s),c=n(1),l=n.n(c),h=n(255),p=n(290),d=n(264),f=function(){function e(t,n,r,i,a,o,s,c,l){u()(this,e),this.glyphs=new Map,this.ascender=t||0,this.descender=n||0,this.xMax=r||0,this.xMin=i||0,this.yMax=a||0,this.yMin=o||0,this.unitsPerEm=s||0,this.lineGap=c||0,this.advanceWidthMax=l||0}var t,n,r;return l()(e,[{key:"getGlyph",value:function(e){var t=e.charCodeAt(0);return this.glyphs.has(t)?this.glyphs.get(t):null}},{key:"has",value:function(e){var t=e.charCodeAt(0);return this.glyphs.has(t)}},{key:"addGlyph",value:function(e,t){this.glyphs.has(e)||this.glyphs.set(e,t)}},{key:"load",value:(r=o()(i.a.mark(function e(t,n,r,a,o){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([this.loadMap(o),this.loadCSS(t,n,r,a)]));case 1:case"end":return e.stop()}},e,this)})),function(e,t,n,i,a){return r.apply(this,arguments)})},{key:"loadMap",value:(n=o()(i.a.mark(function t(n){var r,a,o,s,u,c;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=Number.MAX_SAFE_INTEGER,o=0;case 2:if(!(o<n.length)){t.next=19;break}return s=n[o],u=void 0,t.prev=5,t.next=8,e.getView(s,o);case 8:u=t.sent,t.next=14;break;case 11:return t.prev=11,t.t0=t.catch(5),t.abrupt("continue",16);case 14:c=u.getUint32(8),r>c&&(a=u,r=c);case 16:o++,t.next=2;break;case 19:this.loadData(a);case 20:case"end":return t.stop()}},t,this,[[5,11]])})),function(e){return n.apply(this,arguments)})},{key:"getDefault",value:function(){return this.default}},{key:"loadCSS",value:(t=o()(i.a.mark(function e(t,n,r,a){var o,s,u,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:document.fonts?(o={},a.size>1&&a.has("all")&&a.delete("all"),a.forEach(function(e,i){var a="";e.woff2&&(a+='url("'.concat(e.woff2,'")')),e.woff&&(a+=(a.length>0?",":"")+'url("'.concat(e.woff,'")')),0===a.length&&(a+='url("'.concat(e.ttf,'")')),"all"!==i?o.unicodeRange=i:o.unicodeRange&&delete o.unicodeRange,r&&(o.style="italic"),n&&(o.weight="bold");var s=new FontFace(d.a.getRegisteredFontName(t),a,o);s.display="swap",document.fonts.add(s)})):("text_font_styles",(s=document.getElementById("text_font_styles"))||((s=document.createElement("style")).id="text_font_styles",document.head.appendChild(s)),u="",c="",u=n?"font-weight: bold;":"font-weight: normal;",c=r?"font-style: italic;":"font-style: normal;",a.size>1&&a.has("all")&&a.delete("all"),a.forEach(function(e,n){var r="",i="";e.woff2&&(r+='url("'.concat(e.woff2,'")')),e.woff&&(r+=(r.length>0?",":"")+'url("'.concat(e.woff,'")')),r+=(r.length>0?",":"")+'url("'.concat(e.ttf,'")'),"all"!==n&&(i="unicode-range:".concat(n,";"));var a="@font-face {font-family: ".concat(d.a.getRegisteredFontName(t),";src:").concat(r,";font-display: swap;").concat(u).concat(c).concat(i,"}");s.textContent+=a}));case 1:case"end":return e.stop()}},e)})),function(e,n,r,i){return t.apply(this,arguments)})},{key:"loadData",value:function(e){this.font=e;for(var t=0,n="",r=0;r<4;r++)n+=String.fromCharCode(e.getInt8(t)),t++;if("ftmp"!==n)throw Error("Wrong font map file");var i=e.getUint32(t),a=0;t+=4;for(var o=8;o<e.byteLength;o+=4)o+4>e.byteLength?a+=e.getUint16(o):a+=e.getUint32(o);if((a&=4294967295)<0&&(a+=4294967296),i!==a)throw Error("Wrong checksum");var s=e.getUint32(t);if(t+=4,16777216===s){this.ascender=e.getInt16(t),t+=2,this.descender=e.getInt16(t),t+=2,this.xMax=e.getInt16(t),t+=2,this.xMin=e.getInt16(t),t+=2,this.yMax=e.getInt16(t),t+=2,this.yMin=e.getInt16(t),t+=2,this.unitsPerEm=e.getUint16(t),t+=2,this.lineGap=e.getUint16(t),t+=2,this.advanceWidthMax=e.getUint16(t),t+=2,this.drawAscender=this.ascender,this.drawDescender=this.descender;var u=e.getUint16(t);t+=2;for(var c=0;c<u;c++){var l=e.getUint16(t);t+=2;var h=e.getInt16(t);t+=2;var p=e.getInt16(t);t+=2;var d=e.getInt16(t);t+=2;var f=e.getInt16(t);t+=2;var g={advanceWidth:l,x1:h,x2:p,y1:d,y2:f};0===c&&(this.default=g);var v=e.getUint16(t);t+=2;for(var y=void 0,m=0;m<v;m++)y=e.getUint16(t),this.addGlyph(y,g),t+=2}}else if(1048576===s){this.ascender=e.getInt16(t),t+=2,this.descender=e.getInt16(t),t+=2,this.xMax=e.getInt16(t),t+=2,this.xMin=e.getInt16(t),t+=2,this.yMax=e.getInt16(t),t+=2,this.yMin=e.getInt16(t),t+=2,this.unitsPerEm=e.getUint16(t),t+=2,this.lineGap=e.getUint16(t),t+=2,this.advanceWidthMax=e.getUint16(t),t+=2,this.drawAscender=e.getInt16(t),t+=2,this.drawDescender=e.getInt16(t),t+=2;var E=e.getUint16(t);t+=2;for(var k=0;k<E;k++){var S=e.getUint16(t);t+=2;var I=e.getInt16(t);t+=2;var T=e.getInt16(t);t+=2;var b=e.getInt16(t);t+=2;var w=e.getInt16(t);t+=2;var A={advanceWidth:S,x1:I,x2:T,y1:b,y2:w};0===k&&(this.default=A);var C=e.getUint16(t);t+=2;for(var x=void 0,R=0;R<C;R++)x=e.getUint16(t),this.addGlyph(x,A),t+=2}}return this}}],[{key:"getView",value:function(e,t){return new Promise(function(t,n){var r=new XMLHttpRequest;r.open("get",e,!0),r.responseType="arraybuffer",r.onload=function(){200!==r.status&&n("Font could not be loaded: "+r.statusText),t(new DataView(r.response))},r.onerror=function(){n("Font map could not be loaded")},r.send()})}}]),e}(),g=function(){function e(){u()(this,e),this.fonts=new Map,this.proms=new Map,this.getUrl=function(e){var t=[],n=p.a.getFontFamilyResources(e.family),r=new Map;if(!(n&&n.length>0))throw new Error("존재하지 않는 폰트입니다: "+e.family);var i=!0,a=!1,o=void 0;try{for(var s,u=n[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value,l=h.b.getUrl(c.resourceKey),d="";e.bold&&e.italic?d="BOLD_ITALIC_":e.bold?d="BOLD_":e.italic&&(d="ITALIC_");var f=void 0,g=void 0;f=c.unicodeRange?c.unicodeRange:"all",r.get(f)?g=r.get(f):-1===c.type.indexOf("MAP")&&(g={ttf:""},r.set(f,g)),c.type===d+"WOFF2"?g.woff2=l:c.type===d+"WOFF"?g.woff=l:c.type===d+"MAP"?t.push(l):c.type===d+"TTF"&&(g.ttf=l)}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}return{woff:r,maps:t}}}var t,n,r,a;return l()(e,[{key:"getFontStyleStr",value:function(e){return e.bold&&e.italic?"bold italic":e.bold?"bold":e.italic?"italic":"normal"}},{key:"loadDefaultFont",value:(a=o()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.addFamilies(d.a.DEFAULT_FONTS));case 1:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})},{key:"getFontStr",value:function(e,t,n){var r=this.getAvailableStyle(e.family),i=Object.assign({},e);!r.boldItalic&&e.bold&&e.italic&&(r.bold||(i.bold=!1),r.italic||(i.italic=!1)),!r.bold&&e.bold&&(i.bold=!1),!r.italic&&e.italic&&(i.italic=!1);var a=this.get(e),o=e.family;return a.has(n)||(o=this.getDefaultFontFamily(n)),this.getFontStyleStr(i)+" "+t+'px "'+d.a.getRegisteredFontName(o)+'"'}},{key:"getKey",value:function(e){var t=this.getAvailableStyle(e.family);if(!t)return e.family;var n=e.family;return(e.bold||e.italic)&&(e.bold&&e.italic?t.boldItalic?n+="_bold_italic":t.bold?n+="_bold":t.italic&&(n+="_italic"):e.bold&&t.bold?n+="_bold":e.italic&&t.italic&&(n+="_italic")),n}},{key:"getKeys",value:function(e){var t=this.getStyles(e),n=[];return n.push({family:e,bold:!1,italic:!1}),t&&(t.bold&&n.push({family:e,bold:!0,italic:!1}),t.italic&&n.push({family:e,bold:!1,italic:!0}),t.boldItalic&&n.push({family:e,bold:!0,italic:!0})),n}},{key:"addFamily",value:(r=o()(i.a.mark(function e(t){var n,r,a,o=this;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.proms.has(t)){e.next=4;break}return e.abrupt("return",this.proms.get(t));case 4:return n=this.getKeys(t),r=n.map(function(e){return o.addKeyy(e)}),a=Promise.all(r),this.proms.set(t,a),e.abrupt("return",a);case 9:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"addFamilies",value:(n=o()(i.a.mark(function e(t){var n=this;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t.map(function(e){return n.addFamily(e)})));case 1:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})},{key:"addKeyy",value:(t=o()(i.a.mark(function e(t){var n=this;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=o()(i.a.mark(function e(r,a){var o,s,u,c,l,d;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,o=n.getKey(t),n.fonts.get(o)){e.next=14;break}if(!((s=p.a.getFontFamilyResources(t.family))&&s.length>0)){e.next=7;break}return e.next=7,h.b.fetchKeyList(s.map(function(e){return e.resourceKey}));case 7:u=n.getUrl(t),c=u.woff,l=u.maps,n.fonts.set(o,{matrics:null,font:null}),d=new f,d.load(t.family,t.bold,t.italic,c,l).then(function(){n.fonts.get(o).matrics=d,r()}).catch(function(e){n.fonts.get(o).matrics=null,a(e)}),e.next=15;break;case 14:r();case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),a(e.t0);case 20:case"end":return e.stop()}},e,null,[[0,17]])}));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})},{key:"setUrlFunc",value:function(e){this.getUrl=e}},{key:"getOpenFont",value:function(e,t){var n=this.fetchClosestFontStyle(e);return n.matrics.has(t)?n.font:this.getDefault(t).font}},{key:"getLineHeightInEM",value:function(e,t){" "===t&&(t=" ");var n=this.get(e,t);return n?(n.drawAscender+n.drawDescender)/n.unitsPerEm:1}},{key:"clear",value:function(){this.fonts.clear(),this.proms.clear()}},{key:"getDefaultMatrics",value:function(e){var t=this.getDefault(e);return t?t.matrics:null}},{key:"getDefaultFontFamily",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=d.a.DEFAULT_FONTS[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(this.fonts.get(o).matrics.has(e))return o}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return""}},{key:"getDefault",value:function(e){var t=this.getDefaultFontFamily(e);return t?this.fonts.get(t):null}},{key:"get",value:function(e,t){var n=this.fetchClosestFontStyle(e);return" "===t&&(t=" "),!t||n&&n.matrics&&n.matrics.has(t)?n?n.matrics:null:this.getDefaultMatrics(t)}},{key:"fetchClosestFontStyle",value:function(e){var t=this.getKey(e);if(!this.fonts.has(t)){var n=this.getAvailableStyle(e.family);t=e.bold&&n.bold?this.getKey({family:e.family,bold:!0,italic:!1}):this.getKey({family:e.family,bold:!1,italic:!1})}return this.fonts.get(t)}},{key:"isAvailableChar",value:function(e,t){var n=this.fetchClosestFontStyle(e);return!(1!==t.length||!n||!n.matrics||!n.matrics.has(t))}},{key:"getStyles",value:function(e){var t=p.a.getFontFamilyResources(e),n=null;if(t&&t.length>0){n={bold:!1,italic:!1,boldItalic:!1};var r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;"BOLD_ITALIC_MAP"===u.type?n.boldItalic=!0:"BOLD_MAP"===u.type?n.bold=!0:"ITALIC_MAP"===u.type&&(n.italic=!0)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}return n}},{key:"getAvailableStyle",value:function(e){var t=this.getStyles(e);return t||(t={bold:!1,italic:!1,boldItalic:!1}),t}},{key:"isAvailableFamily",value:function(e){return null!==this.getStyles(e)}},{key:"setManual",value:function(e,t){var n=this.getKey(e);this.fonts.set(n,t)}},{key:"getFakeData",value:function(e){var t=this.getAvailableStyle(e.family),n=e.bold&&!t.bold;return{fakeBold:n,fakeItalic:e.italic&&!t.italic,boldWeight:n?300:700}}}]),e}();t.a=new g},function(e,t,n){"use strict";var r=n(1),i=n.n(r),a=n(2),o=n.n(a),s=n(4),u=n.n(s),c=n(0),l=n.n(c),h=n(6),p=n.n(h),d=n(3),f=n.n(d),g=n(7),v=n.n(g),y=n(110),m=n(46),E=n(236),k=n(231),S=n(286),I=n(470),T=n(319),b=n(166),w=n(266),A=n(232),C=n(413),x=n(224),R=n(226),L=n(225),_=n(297),P=n(241),O=function(){function e(){l()(this,e)}return i()(e,null,[{key:"getConvertedFilterNumberValue",value:function(e,t,n,r){if(!e)return e;var i=r*((e-t)/(n-t));return i>r?r:i}},{key:"getValuesFromProperties",value:function(e){return{brightness:e.getBrightness(),contrast:e.getContrast(),lightness:e.getLightness(),saturation:e.getSaturation(),hue:e.getTint(),colorTone:e.getColorTone(),temperature:e.getTemperature(),blur:e.getBlur(),vignette:e.getVignette(),isActiveBorder:e.isActiveSolidLine(),borderColor:e.getSolidLineColor(),borderThickness:e.getSolidLineThickness(),borderAlpha:e.getSolidLineAlpha(),isActiveShapeMask:e.isActiveBitmapMask(),shapeId:e.getBitmapMaskBitmapId(),isActiveGradationMask:e.isActiveGradationMask(),gradationDirection:e.getGradationMaskDirection(),gradationDepth:e.getGradationMaskDepth()}}}]),e}(),D=n(234);n.d(t,"b",function(){return N}),n.d(t,"e",function(){return B}),n.d(t,"d",function(){return U}),n.d(t,"c",function(){return G}),n.d(t,"a",function(){return F});var M=function(e){function t(e,n){var r;return l()(this,t),(r=p()(this,f()(t).call(this))).actionType=x.a.BACKGROUND_CHANGE,r.renderAuto=!1,r.changeDesign=function(){return!0},r.commitAction=function(){var e=u()(o.a.mark(function e(t,n,i){var a,s,u,c,l;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.pageIdx<0)&&r.skinItem){e.next=2;break}return e.abrupt("return");case 2:return a=t.pages[r.pageIdx],r.oldSkin=a.background.backgroundItem,a.setSkin(r.skinItem),r.skinItem instanceof k.d&&(s=r.skinItem.itemPosition.clone(),u=a.sheetSize,c=new D.a(0,0,u.width,u.height),r.skinItem.setLTRBCoordinate(c),r.skinItem.itemPosition=s,r.skinItem.photoCrop.isCropped=!0),r.oldSkin&&new w.c(r.oldSkin).commitAction(t,n,i),l=a.sheetSize,e.next=10,i.canvasAreaVC.printout.render({pageWrapper:n.pageController.getPageRenderer(a).element,pageId:a.pageId,pageIdx:a.pageIdx,pageSize:new y.a(l.width,l.height),pageItems:[r.skinItem],domRenderParam:{editScale:a.editScale,printAreaBgColor:a.background.color},forceCheckPageItems:!0});case 10:return E.a.unselectAllItems(),n.pageController.getPageRenderer(a).syncItemRenderers(),e.next=15,i.renderAuto(t,n);case 15:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),r.rollbackAction=function(){var e=u()(o.a.mark(function e(t,n,i){var a,s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.pages[r.pageIdx],s=r.oldSkin,a.setSkin(s),s&&E.a.selectItem(s),n.pageController.getPageRenderer(a).syncItemRenderers(),e.next=8,i.renderAuto(t,n);case 8:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),r.recycle=function(){r.oldSkin=null},r.pageIdx=e,r.skinItem=n,r}return v()(t,e),t}(x.b),N=function(e){function t(e){var n;return l()(this,t),(n=p()(this,f()(t).call(this))).actionType=x.a.BACKGROUND_CHANGE,n.changeDesign=function(){return!0},n.commitAction=function(){var e=u()(o.a.mark(function e(t,r,i){var a,s,u,c;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.photo){e.next=3;break}return e.abrupt("return");case 3:if(s=n.backupPage?n.backupPage:n.backupPage=S.a.getItemIncludedPage(t.pages,a)){e.next=6;break}return e.abrupt("return");case 6:return u=s.background,c=u.createNewPhotoBackgroundItem(a.props.getPhotoKey(),a),s.removeItem(a),n.skinChangeAction=new M(s.pageIdx,c),n.skinChangeAction.doSaveQueue=!1,e.next=13,n.skinChangeAction.commitAction(t,r,i);case 13:L.a.instance.dispatch(new w.c(n.photo));case 14:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),n.rollbackAction=function(){var e=u()(o.a.mark(function e(t,r,i){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.photo,n.backupPage.addItem(a),e.next=4,n.skinChangeAction.rollbackAction(t,r,i);case 4:E.a.selectItem(a);case 5:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),n.recycle=function(){n.photo=null,n.skinChangeAction.recycle()},n.photo=e,n}return v()(t,e),t}(x.b),B=function(e){function t(e,n){var r;return l()(this,t),(r=p()(this,f()(t).call(this))).actionType=x.a.BACKGROUND_CHANGE,r.changeDesign=function(){return!0},r.commitAction=function(){var e=u()(o.a.mark(function e(t){var n,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.pages[r.pageIdx].background,i=n.createNewSvgBackgroundItem(r.svgData),L.a.instance.dispatch(new M(r.pageIdx,i));case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),r.rollbackAction=function(){},r.recycle=function(){},r.pageIdx=e,r.svgData=n,r.doSaveQueue=!1,r}return v()(t,e),t}(x.b),U=function(e){function t(){var e;return l()(this,t),(e=p()(this,f()(t).call(this))).actionType=x.a.BACKGROUND_DELETE,e.changeDesign=function(){return!0},e.commitAction=function(e,t){if(1===t.activeItems.length){var n=S.a.getItemIncludedPage(e.pages,t.activeItems[0]).background.backgroundItem;n&&(E.a.selectItem(n),L.a.instance.dispatch(new _.a))}},e.rollbackAction=function(){},e.recycle=function(){},e.doSaveQueue=!1,e}return v()(t,e),t}(x.b),G=function(e){function t(e,n){var r,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return l()(this,t),(r=p()(this,f()(t).call(this))).actionType=x.a.BACKGROUND_CHANGE_COLOR,r.changeDesign=function(){return!0},r.isSameAction=!1,r.mouseActionMode=P.a.MODE_NONE,r.commitAction=function(){var e=u()(o.a.mark(function e(n,i,a){var s,u,c,l,h;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s=n.pages[r.pageIdx],u=i.pageController.getPageRenderer(s),c=u.backgroundRenderer,r.oldColor=s.background.color,c.updateColor(r.newColor),(l=s.background.backgroundItem)&&(l.props.updateRevision(!0),r.isForceChangeSkin&&(E.a.selectItem(l),r.itemDeleteAction=new _.a,r.itemDeleteAction.doSaveQueue=!1,r.itemDeleteAction.commit(n,i,i.editorMainVC))),t.updateBackgroundLib(n,i,a),r.isForceChangeSkin&&(h="#FF".concat(r.newColor.replace("#","")).toUpperCase(),m.a.sendItemUseEvent({type:m.b.BG_ITEM,category:null,keyword:null,customAction:"단색",customLabel:h},null));case 9:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),r.rollbackAction=function(){var e=u()(o.a.mark(function e(n,i,a){var s,u;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s=n.pages[r.pageIdx],u=i.pageController.getPageRenderer(s),u.backgroundRenderer.updateColor(r.oldColor),s.background.backgroundItem&&s.background.backgroundItem.props.updateRevision(!0),r.itemDeleteAction&&r.itemDeleteAction.rollback(n,i,a),t.updateBackgroundLib(n,i,a);case 7:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),r.recycle=function(){r.itemDeleteAction&&r.itemDeleteAction.recycle()},r.concat=function(e){return r.newColor=e.newColor,!0},r.isActionGroupEquals=function(e){return!!(e&&e.actionType===r.actionType&&e instanceof t)&&(R.a.instance.mouseAction.mode!==P.a.MODE_NONE&&(r.isSameAction=e.mouseActionMode===P.a.MODE_MOVE_CHANGE_VALUE),r.isSameAction)},r.pageIdx=e,r.newColor=n,r.isForceChangeSkin=i,r.mouseActionMode=R.a.instance.mouseAction.mode,r}return v()(t,e),i()(t,null,[{key:"updateBackgroundLib",value:function(e,t,n){var r=n.leftPanelMainVC.getPanel(A.b.BACKGROUND_LIB);r&&r.onDataChanged(e)}}]),t}(x.b),F=function(e){function t(e){var n;return l()(this,t),(n=p()(this,f()(t).call(this))).actionType=x.a.BACKGROUND_PHOTO_USE,n.changeDesign=function(){return!0},n.pageIdx=R.a.instance.renderPageIdx,n.commitAction=function(){var e=u()(o.a.mark(function e(t,r,i){var a,s,u,c,l;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.pages[n.pageIdx],e.next=3,I.a.getData(n.photoIdx);case 3:return s=e.sent,e.next=6,T.a.from(t.getRepositoryType(),!0).getStickerData(n.photoIdx);case 6:return u=e.sent,s||(s={stickerId:n.photoIdx,centerX:Math.floor(u.orgWidth/2),centerY:Math.floor(u.orgHeight/2),originalWidth:u.orgWidth,originalHeight:u.orgHeight,color:"#ffffff",opacity:.8}),e.next=10,b.b.setUrlImage(n.photoIdx,u.thumb800url);case 10:return c=e.sent,l=n.backupPhotoItem?n.backupPhotoItem:n.getPhotoItem(s.stickerId,c,a,s),!1,n.skinChangeSolidColorAction=new G(n.pageIdx,s.color,!1),n.skinChangeAction=new M(n.pageIdx,l),n.skinChangeSolidColorAction.doSaveQueue=!1,n.skinChangeAction.doSaveQueue=!1,e.next=19,n.skinChangeSolidColorAction.commitAction(t,r,i);case 19:return e.next=21,n.skinChangeAction.commitAction(t,r,i);case 21:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),n.rollbackAction=function(){var e=u()(o.a.mark(function e(t,r,i){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.skinChangeAction){e.next=3;break}return e.next=3,n.skinChangeAction.rollbackAction(t,r,i);case 3:if(!n.skinChangeSolidColorAction){e.next=6;break}return e.next=6,n.skinChangeSolidColorAction.rollbackAction(t,r,i);case 6:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),n.recycle=function(){n.skinChangeSolidColorAction&&n.skinChangeSolidColorAction.recycle(),n.skinChangeAction&&n.skinChangeAction.recycle()},n.photoIdx=e,n.renderAuto=!1,n}return v()(t,e),i()(t,[{key:"getPhotoItem",value:function(e,t,n,r){var i=t.width/r.originalWidth,a=r.originalWidth/2*i,o=r.originalHeight/2*i,s=r.centerX*i,u=r.centerY*i,c=C.a.getOffsetRect(n.sheetSize.width,n.sheetSize.height,t.width,t.height,a,o,s,u),l="".concat((new Date).getTime(),"-").concat(Math.random()),h=this.backupPhotoItem=new k.d(l,c.toRect());return h.props.setPhotoKey(e),h.props.setOpacity(O.getConvertedFilterNumberValue(r.opacity,0,1,255)),h.orgType=k.b.BackgroundImage,h.skinRatioId=n.ratioId,h.backgroundState=k.a.ORIGIN,h}}]),t}(x.b)},,function(e,t,n){"use strict";n.d(t,"a",function(){return w}),n.d(t,"b",function(){return r});var r,i=n(2),a=n.n(i),o=n(4),s=n.n(o),u=n(0),c=n.n(u),l=n(1),h=n.n(l),p=n(228),d=n(452),f=n(226),g=n(233),v=n(240),y=n(275),m=n(304),E=n(306),k=n(11),S=n(110),I=n(234),T=n(337),b=n(231),w=function(){function e(t){c()(this,e),this.items=[],this.sheetSize=new S.a,this.status=r.DEFAULT,this.pageIdx=t,this.background=new d.a(this),this.pageId="tbpePage".concat(99*t).concat((new Date).getTime()).concat(k.b.random(10)),this.borderLine=!1}var t,n,i;return h()(e,[{key:"setMemo",value:function(e){this.memo=e}},{key:"getAllSingleItems",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.items;return E.a.getAllSingleItems(e)}},{key:"getPrivateItemCount",value:function(){return this.getAllSingleItems().filter(function(e){return e.isPrivateItem()}).length}},{key:"getDisabledSvgItemCount",value:function(){return this.getAllSingleItems().filter(function(e){return e.isDisabledSvgItem()}).length}},{key:"getStickerIds",value:function(){return this.getAllSingleItems().map(function(e){return e.getPropsPhotoKey()}).filter(function(e){return void 0!==e})}},{key:"unsetAllSingleItemHover",value:function(){this.getAllSingleItems().forEach(function(e){e.hover=!1})}},{key:"getAllGroupItems",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.items;return E.a.getAllGroupItems(e)}},{key:"renderThumbnail",value:(i=s()(a.a.mark(function e(t,n,r){var i,o,s,u,c,l,h,p,d,f,g,y,m=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=m.length>3&&void 0!==m[3]&&m[3],o=m.length>4&&void 0!==m[4]&&m[4],s=v.a.createCanvas(new S.a(t,n)),u=s.getContext("2d"),i&&this.background.isWhiteColor()?u.fillStyle="rgba(0,0,0,0)":u.fillStyle=this.background.color,u.fillRect(0,0,t,n),c=!0,l=!1,h=void 0,e.prev=9,p=this.items[Symbol.iterator]();case 11:if(c=(d=p.next()).done){e.next=18;break}return f=d.value,e.next=15,f.renderThumbnail(u,r);case 15:c=!0,e.next=11;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(9),l=!0,h=e.t0;case 24:e.prev=24,e.prev=25,c||null==p.return||p.return();case 27:if(e.prev=27,!l){e.next=30;break}throw h;case 30:return e.finish(27);case 31:return e.finish(24);case 32:return g=o?"image/jpeg":"",y=o?1:void 0,e.abrupt("return",s.toDataURL(g,y));case 35:case"end":return e.stop()}},e,this,[[9,20,24,32],[25,,27,31]])})),function(e,t,n){return i.apply(this,arguments)})},{key:"renderThumbnailByMaximumSize",value:(n=s()(a.a.mark(function e(t){var n,r,i,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Math.max(this.sheetSize.width,this.sheetSize.height),r=n>t?t/n:1,i=this.sheetSize.width*r,o=this.sheetSize.height*r,e.next=6,this.renderThumbnail(i,o,r);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"renderThumbnailToServer",value:(t=s()(a.a.mark(function e(t,n,r){var i,o,s,u,c,l,h,p;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=v.a.createCanvas(new S.a(t,n)),(o=i.getContext("2d")).fillStyle=this.background.color,o.fillRect(0,0,t,n),s=!0,u=!1,c=void 0,e.prev=7,l=this.items[Symbol.iterator]();case 9:if(s=(h=l.next()).done){e.next=16;break}return p=h.value,e.next=13,p.renderThumbnail(o,r);case 13:s=!0,e.next=9;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(7),u=!0,c=e.t0;case 22:e.prev=22,e.prev=23,s||null==l.return||l.return();case 25:if(e.prev=25,!u){e.next=28;break}throw c;case 28:return e.finish(25);case 29:return e.finish(22);case 30:return e.abrupt("return",i.toDataURL("image/jpeg",m.a.TO_DATA_URL_QUALITY));case 31:case"end":return e.stop()}},e,this,[[7,18,22,30],[23,,25,29]])})),function(e,n,r){return t.apply(this,arguments)})},{key:"addItem",value:function(e,t){var n=[];if(e instanceof p.d?n.push(e):e instanceof g.a&&(n=n.concat(e.getAllSingleMembers())),this.getAllSingleItems().forEach(function(e){n.forEach(function(t){e.tbpeId===t.tbpeId&&t.changeTbpeId((new Date).getTime()+"_"+k.b.random(10))})}),e instanceof p.d?e.setStatus(p.g.NEW):e instanceof g.a&&e.getAllSingleMembers().forEach(function(e){e.setStatus(p.g.NEW)}),null==t)this.items.push(e);else{var r=this.items.splice(0,t);this.setItems(r.concat([e]).concat(this.items),!0)}}},{key:"removeItem",value:function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.items.length-1;n>=0;n--){var r=this.items[n];if(e===r){this.items.splice(n,1);var i=[];return e instanceof p.d?i.push(e):e instanceof g.a&&(i=i.concat(e.getAllSingleMembers())),i.forEach(function(e){t&&e.setStatus(p.g.DELETE);for(var n=0,r=f.a.instance.activeItems.length;n<r;n++)if(f.a.instance.activeItems[n].tbpeId===e.tbpeId){f.a.instance.activeItems.splice(n,1);break}}),n}}throw new Error("페이지에 없는아이템 삭제하려고함!!")}},{key:"setItems",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.items.splice(0),i=this.getAllSingleItems(r);i.forEach(function(e){e.getStatus()===p.g.STABLE&&e.setStatus(p.g.CHANGE)});var a=this.getAllSingleItems(e);a.forEach(function(e){e.getStatus()===p.g.CHANGE?e.setStatus(p.g.STABLE):e.setStatus(p.g.NEW)}),i.forEach(function(e){if(e.getStatus()===p.g.STABLE)if(n);else{var i=g.b.getRootGroup(e.groupId,r);i&&t.items.indexOf(i)<0?t.items.push(i):i||t.items.push(e)}else e.getStatus()===p.g.LOADING||e.setStatus(p.g.DELETE)}),a.forEach(function(r){if(n||r.getStatus()===p.g.NEW){var i=g.b.getRootGroup(r.groupId,e);i&&t.items.indexOf(i)<0?t.items.push(i):i||t.items.push(r)}})}},{key:"setSkin",value:function(e){this.background.setSkin(e)}},{key:"setSheetSizeWithItemScaled",value:function(e){var t=this.getValidLTRB();this.sheetSize=e;var n=e.width/t.getWidth(),r=e.height/t.getHeight(),i=Math.min(n,r);t.changeScale(i)}},{key:"getValidLTRB",value:function(){var e=this.sheetSize.width,t=this.sheetSize.height,n=0,r=0;return this.getAllSingleItems().forEach(function(i){var a=i.getLTRBCoordinate().getRotatedLTRB(i.props.getRotate());e=e>a.left?a.left:e,t=t>a.top?a.top:t,n=n<a.right?a.right:n,r=r<a.bottom?a.bottom:r}),new I.a(e>0?e:0,t>0?t:0,n<this.sheetSize.width?n:this.sheetSize.width,r<this.sheetSize.height?r:this.sheetSize.height)}},{key:"clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pageIdx,n=new e(t);return n.title=this.title,n.editScale=this.editScale,n.layoutId=this.layoutId,n.ratioId=this.ratioId,n.sheetSize=this.sheetSize.clone(),n.status=this.status,n.thumbnailPath=this.thumbnailPath,n.memo=this.memo,this.guidelineManager?n.guidelineFactoryInfos=this.guidelineManager.getGuidelineFactoryInfos():n.guidelineFactoryInfos=this.guidelineFactoryInfos,n.templateName=this.templateName,n.setItems(this.items.map(function(e){return e.clone()}),!0),n.background.color=this.background.color,n.reference=this.reference,n}},{key:"changeSheetSize",value:function(e,t){if(this.sheetSize.width!==e.width||this.sheetSize.height!==e.height){var n=this.sheetSize.clone();this.background.changeSize(e),this.sheetSize=e,t&&this.arrangeItems(t,n)}}},{key:"arrangeItems",value:function(t,n){var r=n.clone(),i=e.getScale(r,this.sheetSize,t);r.scale(i);var a=this.sheetSize.width/2-r.width/2,o=this.sheetSize.height/2-r.height/2,s=!0,u=!1,c=void 0;try{for(var l,h=this.getAllSingleItems()[Symbol.iterator]();!(s=(l=h.next()).done);s=!0){var p=l.value;p.isOnlyOneItem()||(p.scale(i),p.move(a,o,{forceMove:!0}))}}catch(e){u=!0,c=e}finally{try{s||null==h.return||h.return()}finally{if(u)throw c}}}},{key:"isStatusLoading",value:function(){return this.status===r.LOADING||this.status===r.LOADING_WITH_COVER}},{key:"getStatus",value:function(){return this.status}},{key:"setStatus",value:function(e){this.status=e}},{key:"getCommonFileKeyList",value:function(){return this.getAllSingleItems().reduce(function(e,t){return e.concat(t.getCommonFileKeyList())},[])}},{key:"hasCommonFileKeyList",value:function(){return this.getCommonFileKeyList().length>0}},{key:"hasItemsExceptBackground",value:function(){return this.background?this.items.some(function(e){return!(e instanceof T.a)&&(!(e instanceof b.d)||!e.isBackground)}):!!this.items.length}},{key:"includesItem",value:function(e){return this.getAllSingleItems().includes(e)}},{key:"hasPhotoItem",value:function(){return Boolean(this.getAllSingleItems().find(function(e){return e.isPhotoItem()}))}},{key:"isSkinCompatibilityFailure",value:function(){var e=this.getAllSingleItems();return e&&e.length>0&&e[0].getUnsupportedItemType()===p.h.COMPATIBILITY_FAILURE}}],[{key:"getScale",value:function(e,t,n){var r=t.width/e.width,i=t.height/e.height;switch(n){case y.a.FILL:return Math.max(r,i);case y.a.FIT:return Math.min(r,i);case y.a.ORIGINAL:return 1}}}]),e}();!function(e){e.DEFAULT="stable",e.LOADING="loading",e.LOADING_WITH_COVER="loading_with_cover"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"d",function(){return v}),n.d(t,"e",function(){return y}),n.d(t,"i",function(){return m}),n.d(t,"h",function(){return E}),n.d(t,"j",function(){return k}),n.d(t,"b",function(){return S}),n.d(t,"a",function(){return I}),n.d(t,"c",function(){return T}),n.d(t,"k",function(){return b}),n.d(t,"f",function(){return w}),n.d(t,"g",function(){return A});var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(6),u=n.n(s),c=n(3),l=n.n(c),h=n(7),p=n.n(h),d=n(379),f=n(70),g=n(32),v=function(e){function t(){return i()(this,t),u()(this,l()(t).apply(this,arguments))}return p()(t,e),o()(t,[{key:"setData",value:function(e){var t=d.a.build(e)["SMILE-CANVAS-V2"]["TBPE-COMMODITY-INSTANCE"];this.copySheetUrl=t["@sheet_url"];var n=t["TBPE-LAYER-PHOTO"];if(n){var r=Array.isArray(n)?n:[n];this.smileCanvasPhotoList=r.map(function(e){return new y(e["@key"],e["@width"],e["@height"],e["@original_url"],e["@large_url"],Number(e["@page_index"]),Number(e["@item_index"]))})}}},{key:"getErrorMsg",value:function(){return f.a.COMMODITY_INSTANCE}}]),t}(g.b),y=function(){function e(t,n,r,a,o,s,u){i()(this,e),this.key=t,this.originWidth=n,this.originHeight=r,this.imgOriginalUrl=a,this.imgLargeUrl=o,this.pageIdx=s,this.itemIdx=u}return o()(e,[{key:"getPhotoKey",value:function(){return this.imgOriginalUrl}}]),e}();y.SMILECANVAS_PHOTO_SIGNAL="smileCanvasPhoto";var m=function(e){function t(){return i()(this,t),u()(this,l()(t).apply(this,arguments))}return p()(t,e),o()(t,[{key:"setData",value:function(e){var t=d.a.build(e)["SMILE-CANVAS-V2"]["TBPE-THEME"]["TBPE-THEME-ITEM"];this.sort(t),this.dataList=[];for(var n=0,r=t.length;n<r;n++){var i=t[n],a=i["TBPE-TEMPLATE"],o=a["TBPE-TEMPLATE-LAYOUT"]["@layout_url"],s=i["TBPE-TEMPLATE"]["TBPE-TEMPLATE-SKIN-RATIO-ITEM"];this.dataList.push({commIdx:Number(a["@from_comm_idx"]),layoutUrl:o,skinId:s["@skin_id"],ratioId:s["@ratio_id"]})}}},{key:"getErrorMsg",value:function(){return f.a.NEW_THEME_SHEETS}},{key:"sort",value:function(e){if(!(e.length<=1)){var t=e[0]["@page_location"];if(isNaN(t)){if("EVEN"===t&&2===e.length){var n=e[0];e[0]=e[1],e[1]=n}}else e.sort(function(e,t){return Number(e["@page_location"])-Number(t["@page_location"])})}}}]),t}(g.b),E=function(e){function t(){return i()(this,t),u()(this,l()(t).apply(this,arguments))}return p()(t,e),o()(t,[{key:"setData",value:function(e){var t=d.a.build(e)["SMILE-CANVAS-V2"]["TBPE-TEMPLATE"];this.skinId=t["TBPE-TEMPLATE-SKIN-RATIO-ITEM"]["@skin_id"],this.ratioId=t["@ratio_id"],this.layoutTypeId=t["@layout_type_id"],this.layoutUrl=t["TBPE-TEMPLATE-LAYOUT"]["@layout_url"]}},{key:"getErrorMsg",value:function(){return f.a.NEW_TEMPLATE_SHEETS}}]),t}(g.b),k=function(e){function t(){return i()(this,t),u()(this,l()(t).apply(this,arguments))}return p()(t,e),o()(t,[{key:"setData",value:function(e){this.idx=e.data.idx,this.title=e.data.title,this.pageList=e.data.pageList,this.accountId=e.data.accountId,this.categoryIdx=e.data.categoryIdx,this.status=e.data.status,this.keywords=e.data.keywords,this.templateIdx=e.data.templateIdx,this.templateRepositoryType=e.data.templateRepositoryType,this.accountName=e.data.accountName,this.sizeOption=e.data.sizeOption,this.latestDesignHistoryIdx=e.data.latestDesignHistoryIdx,this.templateType=e.data.templateType}},{key:"getErrorMsg",value:function(){return f.a.UNICORN_DESIGN_API}}]),t}(g.b),S=function(e){function t(){return i()(this,t),u()(this,l()(t).apply(this,arguments))}return p()(t,e),o()(t,[{key:"setData",value:function(e){this.data=e.aResJob.data,this.pagination=e.aResJob.paging}},{key:"getErrorMsg",value:function(){return f.a.BIZHOWS_DESIGN_API}}]),t}(g.b),I=function(e){function t(){return i()(this,t),u()(this,l()(t).apply(this,arguments))}return p()(t,e),o()(t,[{key:"setData",value:function(e){this.data=e.data}},{key:"getErrorMsg",value:function(){return f.a.BIZHOWS_DESIGN_API}}]),t}(g.b),T=(g.b,function(e){function t(){return i()(this,t),u()(this,l()(t).apply(this,arguments))}return p()(t,e),o()(t,[{key:"setData",value:function(e){this.data=e.data}},{key:"getErrorMsg",value:function(){return f.a.BIZHOWS_SKIN_API}}]),t}(g.b)),b=function(e){function t(){return i()(this,t),u()(this,l()(t).apply(this,arguments))}return p()(t,e),o()(t,[{key:"setData",value:function(e){this.data=e.data.list,this.pagination=e.data.pagination}},{key:"getErrorMsg",value:function(){return f.a.TEMPLATE_DESIGN_API}}]),t}(g.b),w=function(e){function t(){return i()(this,t),u()(this,l()(t).apply(this,arguments))}return p()(t,e),o()(t,[{key:"setData",value:function(e){this.data=e.list,this.totalCount=e.totalCount}},{key:"getErrorMsg",value:function(){return f.a.EXTERNAL_STICKER_API}}]),t}(g.b),A=function(e){function t(){return i()(this,t),u()(this,l()(t).apply(this,arguments))}return p()(t,e),o()(t,[{key:"setData",value:function(e){var n=d.a.build(e).SMILECAT.STICKER;Array.isArray(n)?this.data=n.map(function(e){return t.parse(e)}):this.data=[t.parse(n)]}},{key:"getErrorMsg",value:function(){return f.a.TBPE_STICKER}}],[{key:"parse",value:function(e){return{idx:e["@ts_idx"],id:e["@id"],name:e["@name"],active:"Y"===e["@active"],fileSize:e["@file_size"],stickerUrl:e["@sticker_url"],orgWidth:e["@ts_org_width"],orgHeight:e["@ts_org_height"],thumb400url:(e["@sticker_thumb_400_url"]||"").replace("http:","https:"),thumb800url:(e["@sticker_thumb_800_url"]||"").replace("http:","https:"),designerId:e["@designer_id"],deployType:Number(e["@deploy_type"])}}}]),t}(g.b);g.b},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r;n(0);!function(e){e.ACTIVE="ACTIVE",e.INACTIVE="INACTIVE",e.PERMANENTLY_INACTIVE="PERMANENTLY_INACTIVE"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"a",function(){return C}),n.d(t,"b",function(){return x}),n.d(t,"c",function(){return R});var r=n(62),i=n.n(r),a=n(0),o=n.n(a),s=n(1),u=n.n(s),c=n(6),l=n.n(c),h=n(3),p=n.n(h),d=n(9),f=n.n(d),g=n(7),v=n.n(g),y=n(263),m=n(384),E=n(265),k=n(264),S=n(257),I=n(455),T=n(360),b=n(258),w=n(90),A=n(246),C=function(e){function t(){var e;o()(this,t),(e=l()(this,p()(t).call(this))).textdata=new Array,e.upperCase=!1,e.verticalAlign=S.g.TOP,e.listStyle=S.b.NONE,e.curve={active:!1,cw:!0},e.gradient=new I.a,e.mask={active:!1,stickerId:""};var n=new m.b(S.f.LEFT,S.e.LINE_SPACE.valueOf());e.textdata[0]=n;var r=new m.a;return e.textdata[0].chars[0]=r,e}return v()(t,e),u()(t,[{key:"isForcedUpdate",value:function(){var e=f()(p()(t.prototype),"isForcedUpdate",this).call(this);return this.forcedUpdate=!1,e}},{key:"forceUpdate",value:function(){this.forcedUpdate=!0}},{key:"makeClone",value:function(){return new t}},{key:"clone",value:function(){var e=f()(p()(t.prototype),"clone",this).call(this);e.textdata=[];for(var n=0;n<this.textdata.length;n++){for(var r=this.textdata[n],i=new m.b(r.align,r.lineSpace),a=0;a<r.chars.length;a++)i.chars[a]=r.chars[a].clone();e.textdata[n]=i}return e.gradient=this.gradient.clone(),e}},{key:"getRGBA",value:function(e,t){return"rgba("+parseInt(e.substr(1,2),16)+", "+parseInt(e.substr(3,2),16)+", "+parseInt(e.substr(5,2),16)+", "+t+")"}},{key:"checkEachChar",value:function(e,t,n,r){var i=0,a=this.textdata.length-1;if(n&&r&&(n.col!==r.col||n.row!==r.row)){var o=E.a.getSortedSelRange(n,r);n=o.firstSel,r=o.lastSel,n.col===this.textdata[n.row].chars.length&&0===r.col?(n=null,r=null):(i=n.row,a=r.row)}else n=null,r=null;try{for(var s=i;s<=a;s++){var u=this.textdata[s];t&&t(u);var c=0,l=u.chars.length;s===i&&n&&(c=n.col),s===a&&r&&r.col<l&&(l=r.col);for(var h=c;h<l;h++)e(u.chars[h])}}catch(e){console.log("여기서 에러남!!"+e)}}},{key:"getCharProp",value:function(e,t,n,r){var i,a=!0;return this.checkEachChar(function(n){a?(i=e(n),a=!1):i!==e(n)&&(i=t)},null,n,r),void 0===i&&(i=t),i}},{key:"setCharProp",value:function(e,t,n,r,i){arguments.length>5&&void 0!==arguments[5]&&arguments[5];var a=!1;this.checkEachChar(function(r){e(r)!==n&&(t(r),a=!0)},null,r,i),a&&this.updateRevision()}},{key:"checkEachLine",value:function(e,t,n){var r=0,i=this.textdata.length-1;if(t&&n){var a=E.a.getSortedSelRange(t,n);r=a.firstSel.row,i=a.lastSel.row}for(var o=r;o<=i;o++){e(this.textdata[o])}}},{key:"getLineProps",value:function(e,t,n,r){var i,a=!0;return this.checkEachLine(function(n){if(a)i=e(n),a=!1;else if(i!==e(n))return i=t,!1;return!0},n,r),i}},{key:"setLineProp",value:function(e,t,n,r,i){arguments.length>5&&void 0!==arguments[5]&&arguments[5];var a=!1;this.checkEachLine(function(r){return e(r)!==n&&(t(r),a=!0),!0},r,i),a&&this.updateRevision()}},{key:"forEachChar",value:function(e){e&&this.textdata.forEach(function(t){return t.chars.forEach(function(t){return e(t)})})}},{key:"getCharList",value:function(){var e=[];return this.textdata.forEach(function(t){return t.chars.forEach(function(t){return e.push(t)})}),e}},{key:"getCharsOfLines",value:function(){var e=[];return this.textdata.forEach(function(t){return e.push(t.chars)}),e}},{key:"triggerBoundaryEvent",value:function(){if(this.adjustLTRB&&!this.isActiveCurve()){var e=this.adjustLTRB(this.getBoundingBox());this.boundingBox.equalsTo(e)||(this.boundingBox=e,this.onBoundaryChanged&&this.onBoundaryChanged(this.boundingBox))}}},{key:"getLines",value:function(){return this.textdata}},{key:"setLines",value:function(e,t){this.textdata=e,this.triggerBoundaryEvent(),t&&this.updateRevision()}},{key:"getLineLength",value:function(){return this.textdata.length}},{key:"getLine",value:function(e){return this.textdata[e]}},{key:"isEmpty",value:function(){return 0===this.getLineLength()||1===this.getLineLength()&&this.getLine(0).isEmpty()}},{key:"getXmlText",value:function(){for(var e="",t=0;t<this.textdata.length;t++)for(var n=0;n<this.textdata[t].chars.length;n++)e+=this.textdata[t].chars[n].char;return e}},{key:"getText",value:function(){for(var e="",t=0;t<this.textdata.length;t++){for(var n=0;n<this.textdata[t].chars.length;n++)e+=this.textdata[t].chars[n].char;t+1<this.textdata.length&&(e+="\n")}return e}},{key:"isEmptyText",value:function(){return 1===this.textdata.length&&this.textdata[0].isEmpty()}},{key:"correctTextdata",value:function(e){for(var t=0;t<this.textdata.length;t++){var n=this.textdata[t];if(0===n.chars.length){var r=e.clone();r.char="",n.chars.push(r)}else n.isEmpty()||""!==n.chars[n.chars.length-1].char||n.chars.splice(n.chars.length-1)}}},{key:"deleteText",value:function(e,t){if(e.col===t.col&&e.row===t.row)return[];this.updateRevision();var n=E.a.getSortedSelRange(e,t),r=n.firstSel,a=n.lastSel,o=[];if(r.row===a.row){if(r.col!==a.col){var s=this.textdata[r.row],u=new m.b(s.align,s.lineSpace);u.chars=this.textdata[r.row].chars.splice(r.col,a.col-r.col),o.push(u)}}else{var c,l=this.textdata[r.row];o.push(new m.b(l.align,l.lineSpace,l.chars.splice(r.col))),l=this.textdata[a.row];var h=new m.b(l.align,l.lineSpace,l.chars.splice(0,a.col)),p=this.textdata[a.row].chars;a.row-1-r.row>0&&o.push.apply(o,i()(this.textdata.splice(r.row+1,a.row-1-r.row))),o.push(h),(c=this.textdata[r.row].chars).push.apply(c,i()(p)),this.textdata.splice(r.row+1,1)}var d=o[0].chars[0].clone();return d.char="",this.correctTextdata(d),this.triggerBoundaryEvent(),o}},{key:"insertText",value:function(e,t){var n,r,a=new E.a(0,0);if("string"==typeof t){if(0===t.length)return e;var o,s=(t=t.replace("\r","")).split("\n");o=0===e.col?0:e.col-1,r=this.textdata[e.row].chars[o];var u=this.textdata[e.row];n=[];for(var c=0;c<s.length;c++){var l=u.cloneWithoutChars();l.chars.splice(0);for(var h=0;h<s[c].length;h++){var p=r.clone();s[c][h].charCodeAt(0)>31&&(p.char=s[c][h],l.chars.push(p))}n[c]=l}}else Array.isArray(t)&&(n=t);if(n.length>0){this.updateRevision(),a.row=e.row+n.length-1,1===n.length&&(a.col=e.col);var d,f=0;if(n[n.length-1].isEmpty()||(f=n[n.length-1].chars.length),a.col+=f,this.textdata[e.row].isEmpty())n[0].isEmpty()||(this.textdata[e.row].chars=n[0].chars);else{var g,v,y=this.textdata[e.row].chars.splice(e.col);if(y.length>0)if(n[n.length-1].isEmpty())n[n.length-1].chars=y;else(g=n[n.length-1].chars).push.apply(g,i()(y));if(!n[0].isEmpty())(v=this.textdata[e.row].chars).splice.apply(v,[e.col,0].concat(i()(n[0].chars)))}if(n.splice(0,1),n.length>0)(d=this.textdata).splice.apply(d,[e.row+1,0].concat(i()(n)));return this.correctTextdata(r),this.triggerBoundaryEvent(),a}}},{key:"setText",value:function(e){this.getText()!==e&&this.updateRevision();var t=this.textdata[0].chars[0],n=this.textdata[0];if(this.textdata.splice(0),""===e)t.char="",n.chars.splice(0),n.chars.push(t),this.textdata.push(n);else for(var r=e.toString().split("\n"),i=0;i<r.length;i++){var a=n.cloneWithoutChars();a.chars.splice(0),this.textdata.push(a);for(var o=0;o<r[i].length;o++){var s=t.clone();s.char=r[i][o],a.chars.push(s)}}this.correctTextdata(t),this.triggerBoundaryEvent()}},{key:"getCharValues",value:function(e,t,n){var r,i=[];return this.checkEachChar(function(t){r.push(e(t))},function(e){r=[],i.push(r)},t,n),i}},{key:"getDuplicateValExcludedCharValues",value:function(e,t,n){var r=[];return this.checkEachChar(function(t){var n=e(t);r.indexOf(n)<0&&r.push(n)},null,t,n),r}},{key:"getLineValues",value:function(e,t,n){var r=[];return this.checkEachLine(function(t){r.push(e(t))},t,n),r}},{key:"setCharValues",value:function(e,t,n,r,i){var a,o;Array.isArray(e)?a=function(t,n){return e[t][n]}:(o=e,a=function(){return o});var s=!1,u=-1,c=0;this.checkEachChar(function(e){var r=a(u,c++);r!==t(e)&&(n(e,r),s=!0)},function(){c=0,u++},r,i),s&&this.updateRevision()}},{key:"setLineValues",value:function(e,t,n,r,i){var a;a=Array.isArray(e)?function(t){return e[t]}:function(){return e};var o=!1,s=0;this.checkEachLine(function(e){var r=a(s);r!==t(e)&&(n(e,r),o=!0),s++},r,i),o&&this.updateRevision()}},{key:"getSize",value:function(e,t){return this.getCharProp(function(e){return e.size},NaN,e,t)}},{key:"getSizes",value:function(e,t){return this.getCharValues(function(e){return e.size},e,t)}},{key:"setSize",value:function(e,t,n){var r;if(Array.isArray(e)){var i=JSON.parse(JSON.stringify(e)),a=!0,o=!1,s=void 0;try{for(var u,c=i[Symbol.iterator]();!(a=(u=c.next()).done);a=!0)for(var l=u.value,h=0;h<l.length;h++)l[h]=Number(l[h])}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}r=i}else r=Number(e);this.setCharValues(r,function(e){return e.size},function(e,t){return e.size=t},t,n),this.triggerBoundaryEvent()}},{key:"getAbsSize",value:function(e,t){return this.getCharProp(function(e){return e.size},-1,e,t)}},{key:"setAbsSize",value:function(e,t,n){var r=Number(e);this.setCharProp(function(e){return e.size},function(e){e.size=r},e,t,n),this.triggerBoundaryEvent()}},{key:"getColor",value:function(e,t){return this.getCharProp(function(e){return e.color},S.e.RGB,e,t)}},{key:"getColors",value:function(e,t){return this.getCharValues(function(e){return e.color},e,t)}},{key:"getDuplicateValExcludedColors",value:function(e,t){return this.getDuplicateValExcludedCharValues(function(e){return e.color},e,t)}},{key:"setColor",value:function(e,t,n){this.setCharValues(e,function(e){return e.color},function(e,t){return e.color=t},t,n)}},{key:"getBackgroundColors",value:function(e,t){return this.getCharValues(function(e){return e.backgroundColor},e,t)}},{key:"getBackgroundColor",value:function(e,t){return this.getCharProp(function(e){return e.backgroundColor},S.e.RGBA_TRANSPARENT,e,t)}},{key:"getDuplicateValExcludedBacgroundColors",value:function(e,t){return this.getDuplicateValExcludedCharValues(function(e){return e.backgroundColor},e,t)}},{key:"setBackgroundColor",value:function(e,t,n){this.setCharValues(e,function(e){return e.backgroundColor},function(e,t){return e.backgroundColor=t},t,n)}},{key:"getFamily",value:function(e,t){return this.getCharProp(function(e){return e.styles.family},"",e,t)}},{key:"getFamilys",value:function(e,t){return this.getCharValues(function(e){return e.styles.family},e,t)}},{key:"setFamily",value:function(e,t,n){this.setCharValues(e,function(e){return e.styles.family},function(e,t){return e.styles.family=t},t,n),this.triggerBoundaryEvent()}},{key:"isBold",value:function(e,t){return this.getCharProp(function(e){return e.styles.bold},!1,e,t)}},{key:"isBolds",value:function(e,t){return this.getCharValues(function(e){return e.styles.bold},e,t)}},{key:"setBold",value:function(e,t,n){var r;if(Array.isArray(e)){r=[];for(var i=0;i<e.length;i++){r[i]=[];for(var a=0;a<e[i].length;a++)r[i][a]=!0===e[i][a]}}else r=!0===e;this.setCharValues(r,function(e){return e.styles.bold},function(e,t){return e.styles.bold=t},t,n),this.triggerBoundaryEvent()}},{key:"isItalic",value:function(e,t){return this.getCharProp(function(e){return e.styles.italic},!1,e,t)}},{key:"isItalics",value:function(e,t){return this.getCharValues(function(e){return e.styles.italic},e,t)}},{key:"setItalic",value:function(e,t,n){var r;if(Array.isArray(e)){r=[];for(var i=0;i<e.length;i++){r[i]=[];for(var a=0;a<e[i].length;a++)r[i][a]=!0===e[i][a]}}else r=!0===e;this.setCharValues(r,function(e){return e.styles.italic},function(e,t){return e.styles.italic=t},t,n),this.triggerBoundaryEvent()}},{key:"isStrikeout",value:function(e,t){return this.getCharProp(function(e){return e.styles.strikeout},!1,e,t)}},{key:"isStrikeouts",value:function(e,t){return this.getCharValues(function(e){return e.styles.strikeout},e,t)}},{key:"setStrikeout",value:function(e,t,n){var r;if(Array.isArray(e)){r=[];for(var i=0;i<e.length;i++){r[i]=[];for(var a=0;a<e[i].length;a++)r[i][a]=!0===e[i][a]}}else r=!0===e;this.setCharValues(r,function(e){return e.styles.strikeout},function(e,t){return e.styles.strikeout=t},t,n)}},{key:"isUnderline",value:function(e,t){return this.getCharProp(function(e){return e.styles.underline},!1,e,t)}},{key:"isUnderlines",value:function(e,t){return this.getCharValues(function(e){return e.styles.underline},e,t)}},{key:"setUnderline",value:function(e,t,n){var r;if(Array.isArray(e)){r=[];for(var i=0;i<e.length;i++){r[i]=[];for(var a=0;a<e[i].length;a++)r[i][a]=!0===e[i][a]}}else r=!0===e;this.setCharValues(r,function(e){return e.styles.underline},function(e,t){return e.styles.underline=t},t,n)}},{key:"isUpperCase",value:function(){return this.upperCase}},{key:"setUpperCase",value:function(e){this.upperCase!==e&&this.updateRevision(),this.upperCase=!0===e}},{key:"setFontColor",value:function(e,t,n){var r=y.a.parseColorString(e);this.opacity=r.alpha,this.setCharProp(function(e){return e.color},function(e){e.color=r.rgb},r.rgb,t,n)}},{key:"getHorizontalAlign",value:function(e,t){return this.getLineProps(function(e){return e.align},S.f.LEFT,e,t)}},{key:"setHorizontalAlign",value:function(e,t,n){return this.setLineProp(function(e){return e.align},function(t){t.align=e},e,t,n)}},{key:"getTextAlignXml",value:function(){return S.f.getAlignXml(this.textdata[0].align)}},{key:"setTextAlignXml",value:function(e){this.setHorizontalAlign(S.f.getTextHorizontalAlign(e))}},{key:"getVerticalAlign",value:function(){return this.verticalAlign}},{key:"setVerticalAlign",value:function(e){this.verticalAlign!==e&&this.updateRevision(),this.verticalAlign=e}},{key:"getVerticalAlignXml",value:function(){return S.g.getVerticalAlignXml(this.verticalAlign)}},{key:"setVerticalAlignXml",value:function(e){this.setVerticalAlign(S.g.getVerticalAlign(e))}},{key:"isActiveFontDetail",value:function(e,t){return this.getCharProp(function(e){return e.fontdetail.active},!0,e,t)}},{key:"isActiveOutline",value:function(e,t){return this.getCharProp(function(e){return e.outline.active},!1,e,t)}},{key:"isActiveOutlines",value:function(e,t){return this.getCharValues(function(e){return e.outline.active},e,t)}},{key:"isActiveShadow",value:function(e,t){return this.getCharProp(function(e){return e.shadow.active},!1,e,t)}},{key:"isCanActiveShadow",value:function(){return!0}},{key:"isActiveShadows",value:function(e,t){return this.getCharValues(function(e){return e.shadow.active},e,t)}},{key:"setActiveFontDetail",value:function(e,t,n){this.setCharProp(function(e){return e.fontdetail.active},function(t){t.fontdetail.active=!0===e},!0===e,t,n),this.triggerBoundaryEvent()}},{key:"setActiveShadow",value:function(e,t,n){this.setCharProp(function(e){return e.shadow.active},function(t){t.shadow.active=!0===e},!0===e,t,n)}},{key:"setActiveOutline",value:function(e,t,n){this.setCharProp(function(e){return e.outline.active},function(t){t.outline.active=!0===e,t.outline.alpha=255},!0===e,t,n)}},{key:"getGradient",value:function(){return this.gradient}},{key:"isActiveGradient",value:function(){return this.gradient.active}},{key:"setActiveGradient",value:function(e,t,n){this.setCharProp(function(e){return e.filltype===S.c.GRADIENT},function(e){e.filltype=S.c.GRADIENT},!0===e,t,n),this.gradient.active=!0===e,this.gradient.active||this.setFillType(S.c.COLOR)}},{key:"setGradientColor",value:function(e,t){this.gradient.setColor(e,t)&&this.updateRevision()}},{key:"setGradientColor1",value:function(e){this.setGradientColor(1,e)}},{key:"setGradientColor2",value:function(e){this.setGradientColor(2,e)}},{key:"setGradientColor3",value:function(e){this.setGradientColor(3,e)}},{key:"setGradientColor4",value:function(e){this.setGradientColor(4,e)}},{key:"getGradientColor1",value:function(){return this.gradient.getColor(1)}},{key:"getGradientColor2",value:function(){return this.gradient.getColor(2)}},{key:"getGradientColor3",value:function(){return this.gradient.getColor(3)}},{key:"getGradientColor4",value:function(){return this.gradient.getColor(4)}},{key:"getGradientAngle",value:function(e){return this.gradient.getAngle(e)}},{key:"setGradientAngle",value:function(e){this.gradient.setAngle(e)&&this.updateRevision()}},{key:"getMaskId",value:function(e){return e||this.mask.active?this.mask.stickerId:""}},{key:"setActiveMask",value:function(e,t,n,r){this.mask.active!==e&&this.updateRevision(),this.mask.active=!0===e&&"string"==typeof t,this.mask.active&&(this.mask.stickerId=t)}},{key:"setMaskStickerId",value:function(e){this.mask.stickerId!==e&&this.updateRevision(),this.mask.stickerId=e}},{key:"getFillType",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0;return this.getCharProp(function(e){return e.filltype},S.c.COLOR,e,t)}},{key:"setFillType",value:function(e,t,n){var r;this.updateRevision(),r="string"==typeof e?S.c.fromString(e):e,this.setCharProp(function(e){return e.filltype},function(e){e.filltype=r},r,t,n)}},{key:"getFontDetailTextSpace",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return Math.floor(this.getCharProp(function(t){return e||t.fontdetail.active?t.fontdetail.textSpace:S.e.TEXT_SPACE},S.e.TEXT_SPACE,t,n))}},{key:"getFontDetailTextSpaces",value:function(e,t){return this.getCharValues(function(e){return e.fontdetail.textSpace},e,t)}},{key:"setFontDetailTextSpaceXml",value:function(e){var n=t.limitTextSpace(Math.round(10*e));this.setCharProp(function(e){return e.fontdetail.textSpace},function(e){e.fontdetail.textSpace=n},n,void 0,void 0,!0)}},{key:"setFontDetailTextSpace",value:function(e,n,r){var i;if(Array.isArray(e)){i=[];for(var a=0;a<e.length;a++){i[a]=[];for(var o=0;o<e[a].length;o++)i[a][o]=t.limitTextSpace(Number(e[a][o]))}}else i=t.limitTextSpace(Number(e));this.setCharValues(i,function(e){return e.fontdetail.textSpace},function(e,t){return e.fontdetail.textSpace=t},n,r),this.triggerBoundaryEvent()}},{key:"getFontDetailLineSpace",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0;return this.getLineProps(function(e){return e.lineSpace},S.e.LINE_SPACE,e,t)}},{key:"getFontDetailLineSpaces",value:function(e,t){return this.getLineValues(function(e){return e.lineSpace},e,t)}},{key:"setFontDetailLineSpaceXml",value:function(e){var t=Math.round(e);this.setLineProp(function(e){return e.lineSpace},function(e){e.lineSpace=t},t,null,null,!0)}},{key:"setFontDetailLineSpace",value:function(e,t,n){if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]=Number(e[r]);else e=Number(e);this.setLineValues(e,function(e){return e.lineSpace},function(e,t){return e.lineSpace=t},t,n),this.triggerBoundaryEvent()}},{key:"getFontDetailScaleXAcc",value:function(){return this.getCharProp(function(e){return e.fontdetail.active?e.fontdetail.scaleX:S.e.SCALE_X},S.e.SCALE_X)}},{key:"getFontDetailScaleX",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return Math.floor(this.getCharProp(function(t){return e||t.fontdetail.active?t.fontdetail.scaleX:S.e.SCALE_X},S.e.SCALE_X,t,n))}},{key:"setFontDetailScaleX",value:function(e,t,n,r){if(t){var i=Math.round(100*e);this.setCharProp(function(e){return e.fontdetail.scaleX},function(e){return e.fontdetail.scaleX=i},i,n,r,!0)}else this.setCharProp(function(e){return e.fontdetail.scaleX},function(t){return t.fontdetail.scaleX=Number(e)},Number(e),n,r);this.triggerBoundaryEvent()}},{key:"isActiveCurve",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.curve.active}},{key:"setActiveCurve",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.updateRevision(),this.curve.active=!0===e,this.curve.active&&!t?this.boundingBox.bottom=this.boundingBox.width+this.boundingBox.top:this.triggerBoundaryEvent()}},{key:"isCurveCw",value:function(){return this.curve.cw}},{key:"setCurveCw",value:function(e){this.updateRevision(),this.curve.cw=!0===e}},{key:"getOutlineColor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.getCharProp(function(t){return e||t.outline.active?t.outline.color:S.e.RGB},S.e.RGB,t,n)}},{key:"getOutlineColors",value:function(e,t){return this.getCharValues(function(e){return e.outline.color},e,t)}},{key:"getDuplicateValExcludedOutlineColors",value:function(e,t){return this.getDuplicateValExcludedCharValues(function(e){return e.outline.color},e,t)}},{key:"setOutlineColor",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(r){var i=y.a.parseColorString(e);this.setCharValues(e,function(e){return e.outline.color},function(e,t){e.outline.color=i.rgb,e.outline.alpha=i.alpha},t,n)}else this.setCharValues(e,function(e){return e.outline.color},function(e,t){e.outline.color=t},t,n)}},{key:"getOutlineStyleStr",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;return this.getCharProp(function(n){return t||n.outline.active?e.getRGBA(n.outline.color,n.outline.alpha):S.e.RGBA},S.e.RGBA,n,r)}},{key:"getOutlineAlpha",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.getCharProp(function(t){return e||t.outline.active?t.outline.alpha:S.e.NUMBER},S.e.NUMBER,t,n)}},{key:"getOutlineSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.getCharProp(function(t){return e||t.outline.active?t.outline.size:S.e.NUMBER},S.e.NUMBER,t,n)}},{key:"getOutlineSizes",value:function(e,t){return this.getCharValues(function(e){return e.outline.size},e,t)}},{key:"setOutlineSize",value:function(e,t,n){var r;if(Array.isArray(e)){r=[];for(var i=0;i<e.length;i++){r[i]=[];for(var a=0;a<e[i].length;a++)r[i][a]=Number(e[i][a])}}else r=Number(e);this.setCharValues(r,function(e){return e.outline.size},function(e,t){e.outline.size=t},t,n)}},{key:"getShadowColor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.getCharProp(function(t){return e||t.shadow.active?t.shadow.color:S.e.RGB},S.e.RGB,t,n)}},{key:"getShadowColors",value:function(e,t){return this.getCharValues(function(e){return e.shadow.color},e,t)}},{key:"getDuplicateValExcludedShadowColors",value:function(e,t){return this.getDuplicateValExcludedCharValues(function(e){return e.shadow.color},e,t)}},{key:"setShadowColor",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(r){this.updateRevision();var i=y.a.parseColorString(e);this.setCharValues(e,function(e){return e.shadow.color},function(e,t){e.shadow.color=i.rgb,e.shadow.alpha=i.alpha},t,n)}else this.setCharValues(e,function(e){return e.shadow.color},function(e,t){e.shadow.color=t},t,n)}},{key:"getShadowAlpha",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.getCharProp(function(t){return e||t.shadow.active?t.shadow.alpha:S.e.NUMBER},S.e.NUMBER,t,n)}},{key:"getShadowAlphas",value:function(e,t){return this.getCharValues(function(e){return e.shadow.alpha},e,t)}},{key:"setShadowAlpha",value:function(e,t,n){Array.isArray(e)||(e=Number(e)),this.setCharValues(e,function(e){return e.shadow.alpha},function(e,t){e.shadow.alpha=t},t,n)}},{key:"getShadowDistance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.getCharProp(function(t){return e||t.shadow.active?t.shadow.distance:S.e.NUMBER},S.e.NUMBER,t,n)}},{key:"getShadowDistances",value:function(e,t){return this.getCharValues(function(e){return e.shadow.distance},e,t)}},{key:"setShadowDistance",value:function(e,t,n){Array.isArray(e)||(e=Number(e)),this.setCharValues(e,function(e){return e.shadow.distance},function(e,t){e.shadow.distance=t},t,n)}},{key:"getShadowAngle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=this.getCharProp(function(t){return e||t.shadow.active?t.shadow.angle:S.e.NUMBER},S.e.NUMBER,t,n)-180;return r<0&&(r+=360),r}},{key:"getShadowAngles",value:function(e,t){return this.getCharValues(function(e){var t=e.shadow.angle-180;return t<0&&(t+=360),t},e,t)}},{key:"setShadowAngle",value:function(e,t,n){function r(e){var t=e;return(t+=360===t?540:180)>=360&&(t-=360),t}if(Array.isArray(e))for(var i=0;i<e.length;i++)for(var a=0;a<e[i].length;a++)e[i][a]=r(Number(e[i][a]));else e=r(Number(e));this.setCharValues(e,function(e){return e.shadow.angle},function(e,t){e.shadow.angle=t},t,n)}},{key:"setShadowSize",value:function(e,t,n){this.setCharProp(function(e){return e.shadow.size},function(e){e.shadow.size=1},1,t,n)}},{key:"getShadowSpread",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.getCharProp(function(t){return e||t.shadow.active?t.shadow.spread:S.e.NUMBER},S.e.NUMBER,t,n)}},{key:"getShadowSpreads",value:function(e,t){return this.getCharValues(function(e){return e.shadow.spread},e,t)}},{key:"setShadowSpread",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=e;Array.isArray(e)||(i=r?10*e:Number(e)),this.setCharValues(i,function(e){return e.shadow.spread},function(e,t){e.shadow.spread=t},t,n)}},{key:"isListStyleBullet",value:function(){return this.listStyle===S.b.BULLET}},{key:"setListStyleBullet",value:function(e){var t=!0===e?S.b.BULLET:S.b.NONE;this.listStyle!==t&&this.updateRevision(),this.listStyle=t}},{key:"isListStyleNumber",value:function(){return this.listStyle===S.b.NUMBER}},{key:"setListStyleNumber",value:function(e){var t=!0===e?S.b.NUMBER:S.b.NONE;this.listStyle!==t&&this.updateRevision(),this.listStyle=t}},{key:"setTextData",value:function(e){var n;try{n=JSON.parse(e.replace(/\n/g,""))}catch(t){n=JSON.parse(e.replace(/\n/g,"").replace(/\\\\"/g,'\\"'))}for(var r=[],i=0;i<n.length;i++){var a=n[i],o=new m.b(S.f.LEFT);o.align=S.f.getTextHorizontalAlign(a.a),o.lineSpace=a.s;for(var s=1===a.c.length&&0===a.c[0].t.length,u=0;u<a.c.length;u++){var c=a.c[u];if(""!==c.yf){var l=new m.a;l.color=c.c,l.size=c.z>0?c.z:S.e.FONT_SIZE,l.backgroundColor=c.g||S.e.RGBA_TRANSPARENT,l.filltype=S.c.fromXML(c.f),l.fontdetail.active=c.da,l.fontdetail.scaleX=c.dx,l.fontdetail.textSpace=t.limitTextSpace(c.ds),l.outline.active=c.oa,l.outline.alpha=c.ol,l.outline.color=c.oc,l.outline.presetKey=c.op,l.outline.size=c.oz,l.shadow.active=c.sa,l.shadow.alpha=null!=c.sl?c.sl:255,l.shadow.active?l.shadow.angle=c.sg||S.e.NUMBER:l.shadow.angle=S.e.NUMBER,l.shadow.color=c.sc||"#000000",l.shadow.distance=c.sd||0,l.shadow.presetKey=c.sp,l.shadow.size=c.sz||0,l.shadow.spread=c.sr||0,l.styles.bold=c.yb,l.styles.family=c.yf,l.styles.italic=c.yi,l.styles.underline=c.yu,l.styles.strikeout=c.yt;var h=(c.t||"").replace(k.a.FORBIDDEN_CHAR,"");if(h.length>0)for(var p=0;p<h.length;p++){var d=l.clone();d.char=h[p],o.chars.push(d)}else if(s){var f=l.clone();f.char="",o.chars.push(f)}}}o.chars.length>0&&r.push(o)}r.length>0&&(this.textdata=r)}},{key:"getTextData",value:function(){for(var e=[],t=0;t<this.textdata.length;t++){var n={},r=this.textdata[t];n.a=S.f.toXMLValue(r.align),n.s=r.lineSpace,n.c=[];for(var i=void 0,a=0;a<r.chars.length;a++){var o=r.chars[a];"\n"!==o.char&&(0!==a&&r.chars[a-1].equalsAlmostWith(o)?i.t+=o.char:((i={}).t=o.char,i.c=o.color,i.z=o.size,i.g=o.backgroundColor,i.f=S.c.toXMLValue(o.filltype),i.da=o.fontdetail.active,i.dx=o.fontdetail.scaleX,i.ds=o.fontdetail.textSpace,i.oa=o.outline.active,i.ol=o.outline.alpha,i.oc=o.outline.color,i.op=o.outline.presetKey,i.oz=o.outline.size,i.sa=o.shadow.active,i.sl=o.shadow.alpha,i.sg=o.shadow.angle,i.sc=o.shadow.color,i.sd=o.shadow.distance,i.sp=o.shadow.presetKey,i.sz=o.shadow.size,i.sr=o.shadow.spread,i.yb=o.styles.bold,i.yf=o.styles.family,i.yi=o.styles.italic,i.yu=o.styles.underline,i.yt=o.styles.strikeout,n.c.push(i)))}e.push(n)}return JSON.stringify(e)}},{key:"isLegacy",value:function(){return!0===this.legacyMode}},{key:"setLegacy",value:function(e){this.legacyMode=e}},{key:"getLastCharPos",value:function(){return new E.a(this.textdata.length-1,this.textdata[this.textdata.length-1].chars.length)}},{key:"isShadowAngleDefault",value:function(){return!this.getCharList().some(function(e){return e.shadow.angle!==S.e.NUMBER})}},{key:"getUsedFonts",value:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var i,a=this.textdata[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value,s=!0,u=!1,c=void 0;try{for(var l,h=o.chars[Symbol.iterator]();!(s=(l=h.next()).done);s=!0){var p=l.value;-1===e.indexOf(p.styles.family)&&e.push(p.styles.family)}}catch(e){u=!0,c=e}finally{try{s||null==h.return||h.return()}finally{if(u)throw c}}}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return e}},{key:"hasFont",value:function(e){return this.getUsedFonts().every(function(t){return e===t})}},{key:"getMinFontSize",value:function(){var e;return this.forEachChar(function(t){return e=!e||t.size<e?t.size:e}),e}}],[{key:"limitTextSpace",value:function(e){return isNaN(e)?0:Math.max(Math.min(e,this.MAX_TEXT_SPACE),this.MIN_TEXT_SPACE)}}]),t}(y.a);C.MIN_TEXT_SPACE=-50,C.MAX_TEXT_SPACE=200,C.TEXT_SHADOW_ANGLE_FIX=90;var x=function e(){o()(this,e),this.active=!1,this.presetKey="",this.color=S.e.RGB,this.size=20,this.alpha=S.e.ALPHA},R=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S.e.RGB,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:12,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:S.e.NUMBER,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:5;o()(this,e),this.presetKey="",this.active=t,this.color=n,this.alpha=r,this.distance=i,this.angle=a,this.size=s,this.spread=u}return u()(e,[{key:"copyFrom",value:function(e){this.active=e.active,this.color=e.color,this.alpha=e.alpha,this.distance=e.distance,this.angle=e.angle,this.size=e.size,this.spread=e.spread}},{key:"applyCSSStyle",value:function(e,t,n,r){this.active=!0;var i=e.replace("drop-shadow(","").slice(0,-1),a=/(?:#|0x)(?:[a-f0-9]{3}|[a-f0-9]{6})\b|(?:rgb|hsl)a?\([^\)]*\)/gi,o=i.match(a),s=(i=i.replace(a,"")).trim().split(" "),u=new w.a(Number(s[0].replace("px",""))/r,Number(s[1].replace("px",""))/r),c=Math.round(Number(s[2].replace("px",""))/k.a.SHADOW_BLUR/t*k.a.SHADOW_LENGTH*k.a.SHADOW_BLUR_DRAW_CONST)/r,l=new T.a;l.readValue(o[0]);var h=200*A.a.getDistanceBetweenTwoPoints(new w.a(0,0),u)/t,p=b.a.getDegreeByRadian(Math.atan2(u.y,u.x))+C.TEXT_SHADOW_ANGLE_FIX+n;p=p>360?p-360:p,this.alpha=l.alpha/255*100,this.angle=p,this.color=l.rgb,this.distance=h,this.spread=c}},{key:"getShadowDrawInfo",value:function(e,t,n){var r=A.a.getPointByDistanceAngle(this.distance/200*e*n/k.a.SHADOW_LENGTH,this.angle-t-C.TEXT_SHADOW_ANGLE_FIX),i=this.spread*k.a.SHADOW_BLUR*e/k.a.SHADOW_LENGTH*n/k.a.SHADOW_BLUR_DRAW_CONST;return{shadowX:r.x,shadowY:r.y,blur:i}}}]),e}()},,function(e,t,n){"use strict";n.d(t,"a",function(){return B}),n.d(t,"d",function(){return U}),n.d(t,"c",function(){return G}),n.d(t,"b",function(){return F});var r=n(9),i=n.n(r),a=n(2),o=n.n(a),s=n(4),u=n.n(s),c=n(0),l=n.n(c),h=n(1),p=n.n(h),d=n(6),f=n.n(d),g=n(3),v=n.n(g),y=n(7),m=n.n(y),E=n(464),k=n(305),S=n(390),I=n(324),T=n(403),b=n(325),w=n(230),A=n(448),C=n(11),x=n(227),R=n(41),L=n(136),_=n(275),P=n(86),O=n(110),D=n(43),M=n(16),N=n(239),B=function(e){function t(e){var n;return l()(this,t),(n=f()(this,v()(t).call(this,e))).param=e,n}var n,r;return m()(t,e),p()(t,[{key:"makeMeta",value:function(){return new E.a}},{key:"fetchDesignSheetXMLAsync",value:(r=u()(o.a.mark(function e(t){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadDesignBean();case 2:return e.next=4,this.fetchPageSheetDataList();case 4:return n=e.sent,e.next=7,t.parseUnicornDesign(n);case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"isTemplate",value:function(){return this.param.resourceType===w.a.TEMPLATE}},{key:"fetchPageSheetDataList",value:(n=u()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchDesignDocXmlList(this.getSheetFileUrls());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})}],[{key:"getMaxSheetSize",value:function(e){return e?D.a.DEV_MAX_SHEET_SIZE:D.a.MAX_SHEET_SIZE}}]),t}(k.a);B.MIN_SHEET_SIZE=32,B.DEFAULT_PAGE_SIZE=1080;var U=function(e){function t(e){var n;return l()(this,t),(n=f()(this,v()(t).call(this,e))).param=e,n}var n,r;return m()(t,e),p()(t,[{key:"loadDesignBean",value:(r=u()(o.a.mark(function e(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.param.designProjectIdx>0)){e.next=7;break}return e.next=3,A.a.getDesign(this.param.designProjectIdx,this.param.idx);case 3:t=e.sent,this.designBean=(new b.j).doProcess({data:t}),e.next=17;break;case 7:if(!this.param.historyIdx){e.next=13;break}return e.next=10,S.a.findOneWithHistoryIndex(this.param.idx,this.param.historyIdx);case 10:e.t0=e.sent,e.next=16;break;case 13:return e.next=15,S.a.findOne(this.param.idx);case 15:e.t0=e.sent;case 16:this.designBean=e.t0;case 17:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"getSheetFileUrls",value:function(){if(!this.designBean)throw new Error("designBean이 로드되지 않고 호출됨");return this.designBean.pageList.map(function(e){return e.sheetUrl})}},{key:"getPageThumbnails",value:function(){if(!this.designBean)throw new Error("designBean이 로드되지 않고 호출됨");return this.designBean.pageList.map(function(e){return e.thumb300Url})}},{key:"fetchDesignSheetXMLAsync",value:(n=u()(o.a.mark(function e(n){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i()(v()(t.prototype),"fetchDesignSheetXMLAsync",this).call(this,n);case 2:return n.templateType=this.designBean.templateType,e.abrupt("return",n);case 4:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"setDesignOtherData",value:function(e){var t=this;this.designBean&&(e.templateType=this.designBean.templateType,e.pages.forEach(function(e,n){e.reference=t.designBean.pageList[n].designPageReference}))}}]),t}(B),G=function(e){function t(e){var n;return l()(this,t),(n=f()(this,v()(t).call(this,e))).param=e,n}var n,r;return m()(t,e),p()(t,[{key:"loadDesignBean",value:(r=u()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.param.templateTypeId&&this.param.referenceIdxList&&this.param.referenceIdxList.length>0)){e.next=6;break}return e.next=3,L.a.findOneOfTypeAndIndexList(this.param.templateTypeId,this.param.referenceIdxList);case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,L.a.findOneTemplate(this.param.idx);case 8:e.t0=e.sent;case 9:this.templateBean=e.t0;case 10:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"getItemArrangeType",value:function(e,t){var n=this.templateBean,r=n.arrangeTypeOverWidth,i=n.arrangeTypeOverHeight,a=n.pageList[0],o=a.width,s=t/a.height*o;return r&&i&&e!==s?e>s?r:i:_.a.FIT}},{key:"getSheetFileUrls",value:function(){if(this.param.blank)return[""];if(!this.templateBean)throw new Error("templateBean이 로드되지 않고 호출됨");return this.templateBean.pageList.map(function(e){return e.sheetUrl})}},{key:"getPageThumbnails",value:function(){if(this.param.blank)return[""];if(!this.templateBean)throw new Error("templateBean이 로드되지 않고 호출됨");return this.templateBean.pageList.map(function(e){return e.thumb300Url})}},{key:"fetchDesignSheetXMLAsync",value:(n=u()(o.a.mark(function e(n){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==this.param.blank){e.next=5;break}return this.setBlank(n),e.abrupt("return",n);case 5:return e.next=7,i()(v()(t.prototype),"fetchDesignSheetXMLAsync",this).call(this,n);case 7:return this.changeSheetSize(n),this.resetImageframeItemImageLock(n),t.setTemplateType(n,this.param.templateTypeId),e.abrupt("return",n);case 11:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"resetImageframeItemImageLock",value:function(e){e.pages.forEach(function(e){e.items.forEach(function(e){e instanceof N.b&&(e.props.canInsertPhotoItem=!0)})})}},{key:"changeSheetSize",value:function(e){if(M.a.isValidSize(this.param.width)&&M.a.isValidSize(this.param.height)){var n=t.checkSheetSize(new O.a(this.param.width,this.param.height)),r=this.templateBean?this.getItemArrangeType(n.width,n.height):_.a.FIT;e.changeSheetSize(n,r)}}},{key:"setDesignOtherData",value:function(e){var t=this;this.templateBean&&this.templateBean.idx>0&&e.pages.forEach(function(e,n){e.reference={templateRepositoryType:P.a.UNICORN,templateKey:String(t.templateBean.idx),templatePageNo:n}})}},{key:"setBlank",value:function(e){var n=t.checkSheetSize(new O.a(this.param.width,this.param.height));return t.setBlank(e,n,this.param.templateTypeId)}}],[{key:"setBlank",value:function(e,t,n){var r=new I.a(0);return r.sheetSize=t,e.pages=[r],e.sheets=T.a.blank(),this.setTemplateType(e,n),e}},{key:"setTemplateType",value:function(e,t){C.b.isEmpty(t)||(e.templateType=new R.c(t))}},{key:"checkSheetSize",value:function(e){return new O.a(this.checkSheetSizeWH(e.width),this.checkSheetSizeWH(e.height))}},{key:"checkSheetSizeWH",value:function(e){return M.a.isValidSize(e)?(e=Math.min(e,this.getMaxSheetSize(x.a.getUserSetting().devMode)),e=Math.max(e,D.a.MIN_SHEET_SIZE)):e=B.DEFAULT_PAGE_SIZE,e}}]),t}(B),F=function(e){function t(e){var n;return l()(this,t),(n=f()(this,v()(t).call(this,e))).pageThumbnails=[],n.param=e,n}var n;return m()(t,e),p()(t,[{key:"makeMeta",value:function(){return new E.a}},{key:"fetchDesignSheetXMLAsync",value:(n=u()(o.a.mark(function e(t){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchDesignDocXmlList(this.param.sheetUrlList);case 2:return n=e.sent,e.next=5,t.parseUnicornDesign(n);case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"getPageThumbnails",value:function(){return this.pageThumbnails}},{key:"setPageThumbnails",value:function(e){this.pageThumbnails=e}}]),t}(k.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=function(){function e(){i()(this,e)}return o()(e,null,[{key:"getResourceKey",value:function(t,n,r){var i=t+e.DELIMITER+n;return null!=r&&(i+=e.DELIMITER+r),i}},{key:"parseResourceKey",value:function(t){var n=t.split(e.DELIMITER);return n&&n.length>1?{resourceType:n[0],key:n[1],repositoryType:n.length>2?n[2]:null}:null}}]),e}();s.DELIMITER="__abcd__"},,,,function(e,t,n){"use strict";var r=n(2),i=n.n(r),a=n(4),o=n.n(a),s=n(0),u=n.n(s),c=n(1),l=n.n(c),h=n(6),p=n.n(h),d=n(3),f=n.n(d),g=n(9),v=n.n(g),y=n(7),m=n.n(y),E=n(11),k=n(258),S=n(230),I=n(247),T=n(290),b=n(226),w=n(235),A=n(228),C=n(256),x=n(321),R=n(264),L=n(327),_=n(22),P=n.n(_),O=n(62),D=n.n(O),M=n(384),N=n(257),B=n(237),U=n(456);function G(e,t,n,r){var i=4*-(r-n)/3;return{sx:n,sy:e,c1x:n-i,c1y:e,c2x:n-i,c2y:t,ex:n,ey:t}}var F=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];u()(this,e),this.curve=[],this.width=t,this.height=n,this.cw=r}return l()(e,[{key:"update",value:function(t,n,r){if(this.width!==t||this.height!==n||this.cw!==r){this.width=t,this.height=n,this.cw=r,this.curve.length=0;var i,a=t,o=n,s=0,u=0+(a-0)/2;i=r?[G(o,0,u,0),G(0,o,u,a)]:[G(0,o,u,0),G(o,0,u,a)];for(var c=0;c<i.length;c++)for(var l=i[c],h=e.CURVE_SAMPLE/i.length,p=new H(l.sx,l.sy,l.c1x,l.c1y,l.c2x,l.c2y,l.ex,l.ey),d=0;d<h;d++){var f=new K(d/h,p.startX,p.startY,p.control1X,p.control1Y,p.control2X,p.control2Y,p.endX,p.endY),g=new K((d+1)/h,p.startX,p.startY,p.control1X,p.control1Y,p.control2X,p.control2Y,p.endX,p.endY),v=new V(f,g,s);s+=v.curve.dist,this.curve.push({bezier:f,curve:v.curve})}}}}]),e}();F.CURVE_SAMPLE=2e3;var H=function e(t,n,r,i,a,o,s,c){u()(this,e),this.startX=t,this.startY=n,this.control1X=r,this.control1Y=i,this.control2X=a,this.control2Y=o,this.endX=s,this.endY=c},V=function e(t,n,r){u()(this,e),this.b1=t,this.b2=n,this.rad=Math.atan(t.point.mY/t.point.mX),t.point.mX<0&&(this.rad+=Math.PI),this.dist=Math.sqrt((n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y)),this.curve={rad:this.rad,dist:this.dist,cDist:r+this.dist}},z=function e(t,n,r,i,a,o,s){u()(this,e),this.x=(1-t)*(1-t)*n+2*(1-t)*t*i+t*t*o,this.y=(1-t)*(1-t)*r+2*(1-t)*t*a+t*t*s},W=function e(t,n,r,i,a,o,s,c,l){u()(this,e),this.mx=3*(1-t)*(1-t)*(i-n)+6*(1-t)*t*(o-i)+3*t*t*(c-o),this.my=3*(1-t)*(1-t)*(a-r)+6*(1-t)*t*(s-a)+3*t*t*(l-s)},K=function e(t,n,r,i,a,o,s,c,l){u()(this,e),this.bezier1=new z(t,n,r,i,a,o,s),this.bezier2=new z(t,i,a,o,s,c,l),this.x=(1-t)*this.bezier1.x+t*this.bezier2.x,this.y=(1-t)*this.bezier1.y+t*this.bezier2.y,this.slope=new W(t,n,r,i,a,o,s,c,l),this.point={t:t,x:this.x,y:this.y,mX:this.slope.mx,mY:this.slope.my}},X=function e(t,n,r,i){u()(this,e),this.angle=t,this.curveX=n,this.curveY=r,this.trans=i},Y=function(e){function t(){var e,n;u()(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=p()(this,(e=f()(t)).call.apply(e,[this].concat(i)))).curveData=new F,n}var n;return m()(t,e),l()(t,[{key:"foreach",value:function(e,t,n,r,i,a){var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6];if(""!==this.getText()){var s=this.getCalculated(!0),u=s.lineData,c=s.tightBound,l=s.calculatedLayout;t&&t(c);var h=this.isActiveCurve()?1:u.length,p=this.isUpperCase()?function(e){return e.toUpperCase()}:function(e){return e};d(a),d(i),d(r),d(n)}function d(e){if(e)for(var t=0,n=0;n<h;n++)for(var r=u[n],i=l[n],a=0;a<r.chars.length;a++){if(r.chars.length>a){var s=void 0,c=i.chars[a],d=p(c.char);o?((s=Object.assign({},r.chars[a])).x=Math.round(s.x),s.y=Math.round(s.y)):s=r.chars[a],e(d,c,s,t,r.bound)}t++}}}},{key:"getCalculated",value:function(e,t){this.drawRev!==this.getRevision()&&(this.drawRev=this.getRevision(),this.calculatedData=null,this.noScaleXcalculatedData=null);var n=this.calculate(e,t);return e?this.noScaleXcalculatedData||t||(this.noScaleXcalculatedData=n):this.calculatedData||t||(this.calculatedData=n),n}},{key:"getMinHeight",value:function(e){var t=this.getCalculated(!0,e).lineData;return t[t.length-1].bound.bottom-t[0].bound.top}},{key:"calculate",value:function(e,t){var n=this,r=[],i=this.getLineLength();this.isActiveCurve()&&this.curveData.update(this.getWidth(),this.getHeight(),this.isCurveCw());var a,o=this.isUpperCase()?function(e){return e.toUpperCase()}:function(e){return e},s=e?function(){return 1}:function(e){return e.fontdetail.scaleX/100},u=e?function(e){return e.fontdetail.scaleX/100}:function(){return 1},c=this.isActiveCurve()?this.curveData.curve[this.curveData.curve.length-1].curve.cDist:t||this.getWidth(),l=0,h=[],p=!1,d=0;if(this.isActiveCurve()){var f,g=this.getLine(0),v=new M.b(g.align,g.lineSpace,[]);g.isEmpty()&&(f=g.chars);for(var y=0;y<i;y++){var m,E=this.getLine(y);E.isEmpty()||(m=v.chars).push.apply(m,D()(E.chars.slice())),E.chars.forEach(function(e){return d=e.size>d?e.size:d})}0===v.chars.length&&(v.chars=f),h.push(v)}else for(var k=0;k<i;k++){var S=this.getLine(k);h.push(S),0===k&&S.chars.forEach(function(e){return d=e.size>d?e.size:d})}for(var I,T,b=.2*d,w=0,A=function(e){var t=h[e],i={chars:[],bound:null},a=0,f=[],g=0,v=0,y=0;if(t.isEmpty()){var m=t.chars[0],E=t.getLineSpaceGivenCharSize(d)*(0===e?.5:1),k=t.getLineSpaceGivenCharSize(g)*(0===l?0:.5),S=m.size;i.bound=B.a.createWithRightBottom(0,b,0,b+S+k),I=i.bound.createUnionWith(I),b+=S+E}else!function(){for(var e=[],r=0,h=!1,d=function(d){var m=t.chars[d],E=o(m.char);E=" "===E?" ":E;var k=x.a.get(m.styles,E),S=m.size/k.unitsPerEm,w=k.getGlyph(E);w||(w=k.getGlyph(" "));var A=w.advanceWidth*S*s(m)+m.fontdetail.textSpace/100*m.size*s(m),C=w.advanceWidth*S*s(m),R=B.a.createWithRightBottom(w.x1*S,w.y1*S,w.x2*S,w.y2*S),L=t.getLineSpaceGivenCharSize(m.size)/2,_=(k.drawAscender+k.drawDescender-k.unitsPerEm)/2,P={charData:m,advanceWidth:w.advanceWidth*S,ascend:k.drawAscender*S,lineGap:L,descend:(k.drawDescender-_)*S,char:m.char,charSize:m.size,posWidth:A,charWidth:C,drawasc:k.drawAscender*S,drawdesc:k.drawDescender*S,bound:R,ignored:!1},O=P.charSize;g=g>O?g:O;var D=P.drawasc,M=P.drawasc+P.drawdesc;y=y>M?y:M,v=v>D?v:D;var G=function(){var e,r;if(!(n.isActiveCurve()&&l>0)){for(var o=[],s=[];f[0]&&" "===f[0].char;){var u=f.shift();u.ignored=!0,a-=u.posWidth,o.push(u)}for(;f[f.length-1]&&" "===f[f.length-1].char;){var h=f.pop();h.ignored=!0,a-=h.posWidth,s.push(h)}var p=f.length>0?a-f[f.length-1].posWidth+f[f.length-1].charWidth:0,d=N.f.getBasePositionX(t.align,c-p);o.length>0&&(e=f).splice.apply(e,[0,0].concat(o)),s&&(r=f).push.apply(r,s);for(var m,E=t.getLineSpaceGivenCharSize(g)/2,k=E*(0===l?1:2)+g,S=E*(0===l?0:1)+g,w=0,A=b+(0===l?0:E)+(v-(y-g)/2),C=0,R=f;C<R.length;C++){var L=R[C],_=x.a.getFakeData(L.charData.styles),P={advanceWidth:L.advanceWidth,ascend:L.ascend,descend:L.descend,fakeBold:_.fakeBold,fakeItalic:_.fakeItalic,x:d+w,y:A,ylength:k+g,ignored:L.ignored,drawAscend:L.drawasc,drawDescend:L.drawdesc};i.chars.push(P),L.ignored||(w+=L.posWidth),m=L.bound.clone().translate(P.x,0).createUnionWith(m)}i.bound=B.a.createWithRightBottom(d,0===l?0:b+E,d+p,b+(0===l?0:E)+S).createUnionWith(i.bound),I=i.bound.createUnionWith(I),b+=k,T=m.clone().translate(0,A).createUnionWith(T),g=O,a=0,f=[],l++}};function F(){e.forEach(function(e){f.push(e),a+=e.posWidth}),e.splice(0)}e.push(P),h||(r=0),r+=P.posWidth;var H=t.chars.length>d+1?t.chars[d+1].char:void 0;if(U.a.isNoBreak(P.char,H)){if(h=!0,d+1<t.chars.length)return"continue"}else h=!1;0===f.length||a+r<c/u(P.charData)?F():(G(),F(),p=!0),r=0,d+1>=t.chars.length&&G()},m=0;m<t.chars.length;m++)d(m)}();w<g&&(w=g),r.push(i)},C=0;C<h.length;C++)A(C);var R=this.getHeight(),L=r[r.length-1].bound.bottom;a=N.g.getBasePositionX(this.getVerticalAlign(),R-L);for(var _=0,P=r;_<P.length;_++){var O=P[_];O.chars.forEach(function(e){return e.y+=a}),O.bound.translate(0,a)}if(I||(I=new B.a(0,0,0,0)),I.translate(0,a),T||(T=new B.a(0,0,0,0)),T.translate(0,a),this.isActiveCurve())for(var G=this.curveData.curve,H=0,V=0;V<r[0].chars.length;V++){for(var z=r[0].chars[V].x+r[0].chars[V].advanceWidth/2,W=H;W<F.CURVE_SAMPLE;W++){if(G[W].curve.cDist>=z){H=W;break}}r[0].chars[V].arcData=new X(G[H].curve.rad,G[H].bezier.point.x,G[H].bezier.point.y,r[0].chars[V].advanceWidth/2)}return{calculatedLayout:h,lineData:r,tightBound:T,bound:I,lineChanged:p}}},{key:"makeClone",value:function(){return new t}},{key:"clone",value:function(){var e=v()(f()(t.prototype),"clone",this).call(this);return e.noScaleXcalculatedData=null,e.calculatedData=null,e.curveData=new F,e}},{key:"isTowardsToDirection",value:function(e,t){var n,r=t.col,i=t.row,a=this.getLineLength()-1,o=this.textdata[a].chars,s=1===o.length&&""===o[0].char?0:o.length;return(n={},P()(n,N.a.LEFT,0===r&&0===i),P()(n,N.a.UP,0===i),P()(n,N.a.RIGHT,r===s&&i===a),P()(n,N.a.DOWN,i===a),P()(n,N.a.NONE,!1),n)[e]}},{key:"loadFonts",value:(n=o()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",x.a.addFamilies(this.getUsedFonts()));case 1:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})}]),t}(L.a),Z=n(292),j=n(263),q=n(240),Q=n(110),$=function(e){function t(e,n){var r;return u()(this,t),(r=p()(this,f()(t).call(this,e))).shadowLengthConstant=n,r}var n,r;return m()(t,e),l()(t,[{key:"rasterizeSingleItem",value:(r=o()(i.a.mark(function e(t,n){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.loadFonts();case 2:this.renderToCtx(t,n);case 3:case"end":return e.stop()}},e,this)})),function(e,t){return r.apply(this,arguments)})},{key:"renderToCtx",value:function(e,t){var n=this,r=this.props.isUpperCase()?this.props.getText().toUpperCase():this.props.getText(),i=r.length;if(r&&0!==i){var a=Math.floor(this.props.getWidth()*t),o=Math.floor(this.props.getHeight()*t);e.save(),e.scale(t,t),this.props.isFlipH()&&e.translate(a,0),this.props.isFlipV()&&e.translate(0,o),e.scale(this.props.isFlipH()?-1:1,this.props.isFlipV()?-1:1);this.props.getFontDetailScaleXAcc();var s,u=q.a.createCanvas(),c=u.getContext("2d");this.props.foreach(t,function(t){if(!n.props.isActiveCurve()){var r=N.f.getMatrix(n.props.getHorizontalAlign(),n.props.getWidth(),n.props.getFontDetailScaleXAcc()/100);e.transform(r.m11,r.m12,r.m21,r.m22,r.m31,r.m32)}e.save(),e.restore(),n.props.isActiveGradient()&&(s=n.getLinearGrad(e,t))},function(r,i,a){var o=Math.round(a.x*t)/t,l=Math.round(a.y*t)/t;e.font=x.a.getFontStr(i.styles,i.size,i.char);var h=j.a.parseColorString(i.color);e.globalAlpha=h.alpha/255,n.props.isActiveGradient()?(e.fillStyle=s,e.strokeStyle=s):(e.fillStyle=h.rgb,e.strokeStyle=h.rgb),e.save(),c.save();var p=o,d=l;void 0!==a.arcData&&(e.translate(a.arcData.curveX,a.arcData.curveY),e.rotate(a.arcData.angle),e.translate(-a.arcData.trans,0),e.translate(-o,-l));var f=x.a.getAvailableStyle(i.styles.family);if(i.styles.italic&&!f.italic||i.styles.bold&&!f.bold)if(1===e.globalAlpha)i.styles.italic&&!f.italic&&(e.translate(p,d),e.transform(1,0,-R.a.ITALIC_SKEW,1,0,0),e.translate(-p,-d)),e.fillText(r,p,d),i.styles.bold&&!f.bold&&(e.lineWidth=R.a.getFakeBoldStroke(i.size),e.strokeText(r,p,d));else{var g=i.size;c.font=x.a.getFontStr(i.styles,g,r);var v=c.measureText(r).width,y=t;if(u.width=5*v*t*y,u.height=4*g*t*y,0===u.width||0===u.height)return;c.scale(t,t),c.scale(y,y),c.font=x.a.getFontStr(i.styles,g,r),c.fillStyle=e.fillStyle,c.strokeStyle=e.strokeStyle,c.lineWidth=R.a.getFakeBoldStroke(i.size),c.translate(2*v,1.5*g),c.translate(-p,-d),n.drawStyles(c,r,p,d,i,f),i.styles.bold&&!f.bold&&c.strokeText(r,p,d),c.fillText(r,p,d),e.drawImage(u,p-2*v,d-1.5*g,5*v,4*g)}else e.fillText(r,p,d);if(i.styles.strikeout){var m=a.drawAscend/3;e.beginPath(),e.moveTo(p,d-m),e.lineWidth=1*R.a.getDecoStrokeWidth(i.size),e.lineTo((p+a.advanceWidth+i.fontdetail.textSpace/100*i.size)*R.a.DECO_GAB_FILL_CONST,d-m),e.strokeStyle=e.fillStyle,e.stroke()}if(i.styles.underline){var E=a.drawDescend/2;e.beginPath(),e.moveTo(p,d+E),e.lineWidth=R.a.getDecoStrokeWidth(i.size),e.lineTo((p+a.advanceWidth+i.fontdetail.textSpace/100*i.size)*R.a.DECO_GAB_FILL_CONST,d+E),e.strokeStyle=e.fillStyle,e.stroke()}c.restore(),e.restore()},function(r,i,a){if(i.outline.active&&i.outline.size>0){e.save(),c.save();try{var o=Math.round(a.x*t*1)/t/1,s=Math.round(a.y*t*1)/t/1,l=x.a.getAvailableStyle(i.styles.family);n.translateArc(e,a,o,s),e.translate(o,s);var h=i.size;c.font=x.a.getFontStr(i.styles,h,r);var p=c.measureText(r).width;if(u.width=5*p*t,u.height=4*h*t,0===u.width||0===u.height)return;c.scale(t,t),c.translate(2*p,1.5*h),c.font=x.a.getFontStr(i.styles,h,r),n.rotateArc(c,a),n.drawStyles(c,r,0,0,i,l),c.lineJoin="round";var d=i.outline.color,f=Math.round(i.outline.size/200*i.size);c.strokeStyle=d,c.lineWidth=f,!l.bold&&i.styles.bold&&(c.lineWidth+=R.a.getFakeBoldStroke(i.size)),c.lineWidth/=1,c.strokeText(r,0,0),e.strokeStyle="black",e.drawImage(u,2*-p,-1.5*h,5*p,4*h)}finally{c.restore(),e.restore()}}},function(r,i,a){if(i.shadow.active){e.save(),c.save();try{var o=Math.round(a.x*t)/t,s=Math.round(a.y*t)/t,l=x.a.getAvailableStyle(i.styles.family);n.translateArc(e,a,o,s),e.translate(o,s);var h=i.size;c.font=x.a.getFontStr(i.styles,h,r);var p=c.measureText(r).width;if(u.width=5*p*t,u.height=4*h*t,0===u.width||0===u.height)return;c.scale(t,t),c.translate(2*p,1.5*h),c.font=x.a.getFontStr(i.styles,h,r),e.shadowColor=i.shadow.color;var d=8*i.size/t;e.beginPath(),e.moveTo(-d,-d),e.lineTo(a.advanceWidth+d,-d),e.lineTo(a.advanceWidth+d,d),e.lineTo(-d,d),e.closePath(),e.clip();var f=i.shadow.getShadowDrawInfo(i.size,n.props.getRotate(),t),g=f.blur,v=f.shadowX,y=f.shadowY;if(e.shadowBlur=g,e.shadowOffsetX=v,e.shadowOffsetY=y+10*i.size,e.globalAlpha=i.shadow.alpha/100,n.rotateArc(c,a),n.drawStyles(c,r,0,0,i,l),i.styles.bold&&!l.bold&&(c.lineWidth=R.a.getFakeBoldStroke(i.size),c.strokeText(r,0,0)),i.outline.active&&i.outline.size>0){c.lineJoin="round";var m=i.outline.color,E=Math.round(i.outline.size/200*i.size);c.strokeStyle=m,c.lineWidth=E,!l.bold&&i.styles.bold&&(c.lineWidth+=R.a.getFakeBoldStroke(i.size)),c.strokeText(r,0,0)}if(c.fillStyle=i.color,c.fillText(r,0,0),i.styles.strikeout){var k=a.drawAscend/3;c.beginPath(),c.moveTo(0,-k),c.lineWidth=R.a.getDecoStrokeWidth(i.size),c.lineTo(a.advanceWidth*R.a.DECO_GAB_FILL_CONST,-k),c.strokeStyle=c.fillStyle,c.stroke()}if(i.styles.underline){var S=-a.drawDescend/2;c.beginPath(),c.moveTo(0,S),c.lineWidth=R.a.getDecoStrokeWidth(i.size),c.lineTo(a.advanceWidth*R.a.DECO_GAB_FILL_CONST,S),c.strokeStyle=c.fillStyle,c.stroke()}e.strokeStyle="black",e.drawImage(u,2*-p,-1.5*h-10*i.size/(t/n.shadowLengthConstant),5*p,4*h)}finally{c.restore(),e.restore()}}},function(t,n,r){n.backgroundColor!==N.e.RGBA_TRANSPARENT&&(e.save(),void 0!==r.arcData&&(e.translate(r.arcData.curveX,r.arcData.curveY),e.rotate(r.arcData.angle),e.translate(-r.arcData.trans,0),e.translate(-r.x,-r.y)),e.fillStyle=n.backgroundColor,e.fillRect(r.x,r.y-r.drawAscend,(r.advanceWidth+n.fontdetail.textSpace/100*n.size)*R.a.BACKGROUND_GAB_FILL_CONST,r.drawAscend+r.drawDescend),e.restore())},!0),e.restore()}}},{key:"getLinearGrad",value:function(e,t){var n=t.clone(),r=-1*k.a.getRadianByDegree(this.props.getGradient().getAngle()),i=0,a=this.props.getWidth();if(this.props.isActiveCurve())i=n.left,a=n.right;else{var o=this.props.getWidth()/(this.props.getFontDetailScaleXAcc()/100);switch(this.props.getHorizontalAlign()){case N.f.LEFT:a/=this.props.getFontDetailScaleXAcc()/100;break;case N.f.CENTER:i+=(this.props.getWidth()-o)/2,a-=(this.props.getWidth()-o)/2;break;case N.f.RIGHT:i+=this.props.getWidth()-o}}var s=k.a.getGradientPoints(B.a.createWithRightBottom(i,n.top,a,n.bottom),r),u=s.startPoint,c=s.endPoint,l=e.createLinearGradient(u.x,u.y,c.x,c.y);return this.props.getGradient().getColorItems().forEach(function(e){return l.addColorStop(e.offset,e.color)}),l}},{key:"rasterizeToPage",value:(n=o()(i.a.mark(function e(t,n){var r=this;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=o()(i.a.mark(function e(a,o){var s,u,c,l,h,p,d,f,g;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,s=r.getCanvasPosData(n),u=s.width,c=s.height,l=s.contentLeft,h=s.contentTop,p=s.offsetX,d=s.offsetY,0!==(f=q.a.createCanvas(new Q.a(u,c))).width&&0!==f.height){e.next=5;break}return e.abrupt("return",a());case 5:return t.save(),g=f.getContext("2d"),e.next=9,r.drawItemCtx(g,Math.round(-l+p),Math.round(-h+d),n);case 9:r.transformImage(t,Math.round(r.props.getLeft()*n),Math.round(r.props.getTop()*n),n),t.translate(Math.round(l-p),Math.round(h-d)),t.drawImage(f,0,0),t.restore(),a(),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),o(e.t0);case 19:case"end":return e.stop()}},e,null,[[0,16]])}));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)})),function(e,t){return n.apply(this,arguments)})},{key:"getCanvasPosData",value:function(e){var t=this.props.getCalculated(!0).bound,n=this.props.getFontDetailScaleXAcc()/100,r=new Q.a(this.props.getWidth(),this.props.getHeight(),e),i=.3,a=!1,o=!1,s=0,u=0;this.props.forEachChar(function(e){var t=x.a.get(e.styles,e.char),n=e.size;s=s<n?n:s;var r=e.size*((t.drawAscender+t.drawDescender)/t.unitsPerEm);u=u<r?r:u,e.outline.active&&e.outline.size>0&&!o&&(i+=.5,o=!0),e.shadow.active&&e.shadow.alpha>0&&e.shadow.spread>0&&!a&&(i+=1.5,a=!0)});var c,l=s*i;if(this.props.isActiveCurve())c=new A.c(r.width+(2*u+l)*e,r.height+(2*u+l)*e,0,0,(l/2+u)*e,(l/2+u)*e);else{var h=N.f.getScaledWidth(this.props.getHorizontalAlign(),t,n,this.props.getWidth()),p=h.x,d=h.y;c=new A.c((d-p+l)*e,(t.height+l)*e,p*e,t.top*e,l/2*e,l/2*e)}return c}},{key:"translateArc",value:function(e,t,n,r){void 0!==t.arcData&&(e.translate(t.arcData.curveX,t.arcData.curveY),e.translate(-n,-r))}},{key:"rotateArc",value:function(e,t){void 0!==t.arcData&&(e.rotate(t.arcData.angle),e.translate(-t.arcData.trans,0))}},{key:"drawStyles",value:function(e,t,n,r,i,a){i.styles.italic&&!a.italic&&(e.translate(n,r),e.transform(1,0,-R.a.ITALIC_SKEW,1,0,0),e.translate(-n,-r))}}]),t}(Z.a),J=n(234),ee=n(84);n.d(t,"a",function(){return te});var te=function(e){function t(e,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],c=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],l=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],h=!(arguments.length>8&&void 0!==arguments[8])||arguments[8];return u()(this,t),(r=p()(this,f()(t).call(this,e,n,i,a,o,s,c,l,h,A.e))).isMaskImageLoaded=!1,r.isEditMode=!1,r.editModeParam={isEditMode:!1,moveX:0,moveY:0,orgScale:1},r.shadowBlurConstant=3,r.shadowLengthConstant=1,r.props.setChangeRotateSetRevision(!0),r}var n,r;return m()(t,e),l()(t,[{key:"makeProps",value:function(){var e=new Y;return e.adjustLTRB=this.getAdjustLTRBFunction(),e}},{key:"getItemBound",value:function(){var e=v()(f()(t.prototype),"getItemBound",this).call(this);if(this.props.isActiveCurve()){if(this.props.isCurveCw()){var n=0;this.props.forEachChar(function(e){n=n<e.size?e.size:n}),e.pureLTRB.left-=n,e.pureLTRB.top-=n,e.pureLTRB.right+=n,e.pureLTRB.bottom+=n}}else{var r=this.props.getCalculated(!1).tightBound,i={leftTopPt:r.leftTop,width:r.width,height:r.height};e.pureBound=i,e.pureLTRB=new J.a(this.props.getLeft()+i.leftTopPt.x,this.props.getTop()+i.leftTopPt.y,this.props.getLeft()+i.leftTopPt.x+i.width,this.props.getTop()+i.leftTopPt.y+i.height)}return e}},{key:"getItemType",value:function(){return w.b.TEXT}},{key:"renderThumbnail",value:(r=o()(i.a.mark(function e(t,n){var r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new $(this.props,this.shadowLengthConstant),e.abrupt("return",r.rasterizeToPage(t,n));case 2:case"end":return e.stop()}},e,this)})),function(e,t){return r.apply(this,arguments)})},{key:"getCanvasPosData",value:function(e){var t=this.props.getCalculated(!0).bound,n=this.props.getFontDetailScaleXAcc()/100,r=new Q.a(this.props.getWidth(),this.props.getHeight(),e),i=.3,a=!1,o=!1,s=0,u=0;this.props.forEachChar(function(e){var t=x.a.get(e.styles,e.char),n=e.size;s=s<n?n:s;var r=e.size*((t.drawAscender+t.drawDescender)/t.unitsPerEm);u=u<r?r:u,e.outline.active&&e.outline.size>0&&!o&&(i+=.5,o=!0),e.shadow.active&&e.shadow.alpha>0&&e.shadow.spread>0&&!a&&(i+=1.5,a=!0)});var c=s*i;return this.props.isActiveCurve()?new A.c(r.width+(2*u+c),r.height+(2*u+c),0,0,c/2+u,c/2+u,e):new A.c((t.right+c)*n,t.bottom+c,0,0,c/2*e,c/2,e)}},{key:"render",value:(n=o()(i.a.mark(function e(t,n){var r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new $(this.props,this.shadowLengthConstant),e.abrupt("return",r.rasterizeSingleItem(t,n));case 2:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})},{key:"canFlip",value:function(){return!1}},{key:"scale",value:function(e,n){v()(f()(t.prototype),"scale",this).call(this,e,n);var r=this.props.adjustLTRB;return this.props.adjustLTRB=null,this.props.forEachChar(function(t){return t.size*=e}),this.props.adjustLTRB=r,this}},{key:"clone",value:function(){var e=new t(E.b.random(),this.props.getBoundingBox(),this.props.getRotate(),this.props.isFlipH(),this.props.isFlipV(),this.props.isCanUserSelect(),this.props.isCanUserMove(),this.props.isCanUserResize(),this.props.isCanUserDel());return e.setProps(this.props.clone()),e.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),e.svg.style.position="absolute",this.setCloneItemDefaultAttr(e),e}},{key:"setProps",value:function(e){v()(f()(t.prototype),"setProps",this).call(this,e),this.props.adjustLTRB=this.getAdjustLTRBFunction()}},{key:"areFontsLoaded",value:function(){var e=this.props.getUsedFonts(),t=!0,n=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(!x.a.get({family:o,bold:!1,italic:!1}))return!1}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return!0}},{key:"getAdjustLTRBFunction",value:function(){var e=this;return function(t){if(e.areFontsLoaded()){var n=e.props.getCalculated(!1).bound,r=N.g.getTopBottomOfAlignValue(e.props.getVerticalAlign(),n.height,t.top,t.bottom),i=r.top,a=r.bottom;return B.a.createWithRightBottom(t.left,i,t.right,a)}return t}}},{key:"getUsedColor",value:function(){var e=new Set,t=this.props.getColors(),n=this.props.isActiveOutlines(),r=this.props.getOutlineColors(),i=this.props.isActiveShadows(),a=this.props.getShadowColors();(t.forEach(function(t,o){t.forEach(function(t,s){e.add(t),n[o][s]&&e.add(r[o][s]),i[o][s]&&e.add(a[o][s])})}),this.props.isActiveGradient())&&this.props.getGradient().getColors().forEach(function(t){return e.add(t)});return e}},{key:"isEditArea",value:function(e,t){arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.lastRenderEditScale;return!0}},{key:"setLTRBCoordinate",value:function(e,n,r){this.adjustLTRB(e,r),v()(f()(t.prototype),"setLTRBCoordinate",this).call(this,e)}},{key:"adjustLTRB",value:function(e,n){if(!this.props.isActiveCurve()){if(t.isResizeHandlerCrossDirection(n)){t.resizeWidthToMinWidth(e,n);var r=this.props.getMinHeight(e.getWidth()),i=N.g.getTopBottomOfAlignValue(this.props.getVerticalAlign(),r,e.top,e.bottom),a=i.top,o=i.bottom;e.getHeight()!==r&&(e.top=a,e.bottom=o)}else{var s=this.props.getHeight(),u=this.props.getWidth(),c=e.getHeight()/s,l=e.getWidth()/(u*c)*this.props.getFontDetailScaleXAcc();this.props.forEachChar(function(e){return e.size=e.size*c}),this.props.setFontDetailScaleX(l,!1)}this.lastHeight&&(this.props.isActiveCurve()||n!==C.b.TOP&&n!==C.b.BOTTOM)||(this.lastHeight=e.getHeight())}}},{key:"getHeaderTitle",value:function(){return"텍스트"}},{key:"isRBRound",value:function(){return this.props.isActiveCurve()}},{key:"getHitRegion",value:function(){return new J.a(this.props.getLeft(),this.props.getTop(),this.props.getRight(),this.props.getBottom())}},{key:"isTinyHandle",value:function(){return this.props.isActiveCurve()}},{key:"getFooterDistance",value:function(){return this.props.isActiveCurve()&&this.props.isCurveCw()?this.props.getCalculated(!0).lineData[0].bound.height*this.lastRenderEditScale*b.a.instance.zoomScale-10:0}},{key:"isLazyHandlerHandlePosition",value:function(e){return e===C.b.TOP_LEFT||e===C.b.TOP_RIGHT||e===C.b.BOTTOM_LEFT||e===C.b.BOTTOM_RIGHT}},{key:"getSmallPlusPos",value:function(){return this.props.isActiveCurve()&&this.props.getCalculated(!1).lineChanged?this.props.isCurveCw():void 0}},{key:"isChangeableHeight",value:function(){return this.props.isActiveCurve()}},{key:"getResourceType",value:function(){return S.a.TEXT}},{key:"isBrowserDefaultAction",value:function(){return this.isEditMode}},{key:"getCommonFileKeyList",value:function(){for(var e=[],t={},n=0,r=this.props.getLineLength();n<r;n++){var i=this.props.getLine(n),a=!0,o=!1,s=void 0;try{for(var u,c=i.chars[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value.styles.family;null==t[l]&&(t[l]=!0)}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}}for(var h=0,p=Object.keys(t);h<p.length;h++){var d=p[h];x.a.getKeys(d).forEach(function(t){var n=T.a.getFontFamilyResources(t.family);n&&n.length>0&&(e=e.concat(n.map(function(e){return e.resourceKey})))})}return e}},{key:"getCharEl",value:function(e,t,n,r,i,a){return e||((e=document.createElementNS("http://www.w3.org/2000/svg","text")).id=a),this.setAttributeNS(e,"font-family",R.a.getRegisteredFontName(n.styles.family)+", "+R.a.getRegisteredFontName(x.a.getDefaultFontFamily(t)),"font-size","".concat(n.size,"px"),"x","".concat(r.x,"px"),"y","".concat(r.y,"px")),n.styles.bold?i.fakeBold?e.removeAttributeNS(null,"font-weight"):e.setAttributeNS(null,"font-weight","bold"):(e.removeAttributeNS(null,"stroke"),e.removeAttributeNS(null,"stroke-width"),e.removeAttributeNS(null,"font-weight")),n.styles.italic?e.setAttributeNS(null,"font-style","italic"):(e.removeAttributeNS(null,"transform"),e.removeAttributeNS(null,"font-style")),e.textContent=t,e}},{key:"setAttributeNS",value:function(e){for(var t=0;t<(arguments.length<=1?0:arguments.length-1);t+=2)e.setAttributeNS(null,t+1<1||arguments.length<=t+1?void 0:arguments[t+1],t+1+1<1||arguments.length<=t+1+1?void 0:arguments[t+1+1])}},{key:"createNewSVGGroup",value:function(e,t,n,r){var i=e.querySelector("#".concat(t));if(i){if(r)for(;i.lastChild;)i.removeChild(i.lastChild)}else(i=document.createElementNS("http://www.w3.org/2000/svg",n)).id=t,e.appendChild(i);return i}},{key:"fillInSVG",value:function(e,t,n,r,i,a,o,s){var u=this;e.style.display="block";var c=function(e,a,o,s,c,l,h){var p=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],d=arguments.length>8&&void 0!==arguments[8]&&arguments[8],f=x.a.getFakeData(a.styles),g=h||document.createElementNS("http://www.w3.org/2000/svg","g");g.firstChild||g.appendChild(document.createElementNS("http://www.w3.org/2000/svg","g"));var v=g.firstChild,y=a.size*a.fontdetail.textSpace/100;if(p){var m="le_".concat(s,"_").concat(n),E=g.querySelector("#".concat(m));c&&" "!==e&&" "!==e?(E=u.getCharEl(E,e,a,o,f,m),v.appendChild(E)):E&&v.removeChild(E);var k="lt_".concat(s,"_").concat(n),S=g.querySelector("#".concat(k));if(i&&a.styles.strikeout){S||((S=document.createElementNS("http://www.w3.org/2000/svg","path")).id=k,v.appendChild(S));var I=o.y-o.drawAscend/3;u.setAttributeNS(S,"d","M".concat(o.x," ").concat(I," h").concat(o.advanceWidth*R.a.DECO_GAB_FILL_CONST+y," v0.1 z"),"stroke-width","".concat(R.a.getDecoStrokeWidth(a.size),"px"))}else S&&v.removeChild(S);var T="us_".concat(s,"_").concat(n),b=g.querySelector("#".concat(T));if(r&&a.styles.underline){b||((b=document.createElementNS("http://www.w3.org/2000/svg","path")).id=T,v.appendChild(b));var w=o.y+o.drawDescend/2;u.setAttributeNS(b,"d","M".concat(o.x," ").concat(w," h").concat(o.advanceWidth*R.a.DECO_GAB_FILL_CONST+y," v0.1 z"),"stroke-width","".concat(R.a.getDecoStrokeWidth(a.size),"px"))}else b&&v.removeChild(b)}if(d){var A="bg_".concat(s,"_").concat(n),C=g.querySelector("#".concat(A));C||((C=document.createElementNS("http://www.w3.org/2000/svg","rect")).id=A,v.appendChild(C)),C.setAttribute("x","".concat(o.x,"px")),C.setAttribute("y","".concat(o.y-o.drawAscend,"px")),C.setAttribute("width","".concat((o.advanceWidth+y)*R.a.BACKGROUND_GAB_FILL_CONST,"px")),C.setAttribute("height","".concat(o.drawAscend+o.drawDescend,"px"))}return t.isActiveCurve()?v.setAttributeNS(null,"transform","translate(".concat(o.arcData.curveX,",").concat(o.arcData.curveY,") rotate(").concat(180*o.arcData.angle/Math.PI,") translate(").concat(-o.arcData.trans-o.x,",").concat(-o.y,")")):v.removeAttributeNS(null,"transform"),{element:g,fakebold:f.fakeBold}},l="defs_".concat(n),h="fill_".concat(n),p="out_".concat(n),d="sha_".concat(n),f="bg_".concat(n);e.style.position="absolute";var g,v=this.createNewSVGGroup(e,l,"defs",!0),y=this.createNewSVGGroup(e,f,"g",!0),m=this.createNewSVGGroup(e,d,"g",!0),E=this.createNewSVGGroup(e,p,"g",!1),S=this.createNewSVGGroup(e,h,"g",!1),I=new Set(E.children),T=new Set(S.children),b=new Set(y.children);this.props.foreach(1,function(r){if(t.isActiveGradient()){g="grad_".concat(n,"_");var i=e.querySelector("#".concat(g));i||((i=document.createElementNS("http://www.w3.org/2000/svg","linearGradient")).id=g),i.setAttributeNS(null,"gradientUnits","userSpaceOnUse");var a=-1*k.a.getRadianByDegree(t.getGradient().getAngle()),o=k.a.getGradientPoints(r,a),s=o.startPoint,c=o.endPoint;u.setAttributeNS(i,"x1","".concat(s.x),"x2","".concat(c.x),"y1","".concat(s.y),"y2","".concat(c.y)),t.getGradient().getColorItems().forEach(function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","stop");u.setAttributeNS(t,"offset",Math.round(100*e.offset)+"%","style","stop-color:".concat(e.color,";stop-opacity:1")),i.appendChild(t)}),v.appendChild(i)}},function(e,n,o,s,l){if(a||i||r){var h=t.isActiveGradient()?"url(#".concat(g,")"):n.color,p=c(e,n,o,s,a,l,S.children[s]),d=p.element,f=p.fakebold;d.parentNode!==S&&S.appendChild(d);var v=0;f&&(v+=R.a.getFakeBoldStroke(n.size)),T.delete(d),u.setAttributeNS(d,"fill",h,"stroke-width","".concat(v),"stroke",h)}},function(e,t,n,r,i){if(o&&t.outline.active&&t.outline.size>0){var a=c(e,t,n,r,!0,i,E.children[r]),s=a.element,l=a.fakebold;s.parentNode!==E&&E.appendChild(s),I.delete(s);var h=t.outline.size/200*t.size;l&&(h+=R.a.getFakeBoldStroke(t.size)),u.setAttributeNS(s,"fill",t.outline.color,"stroke-width","".concat(h),"stroke","".concat(t.outline.color),"stroke-linejoin","round")}},function(e,n,r,i,a){if(s&&t.isActiveShadow()){var o=t.isActiveGradient()?"url(#".concat(g,")"):n.color,l=c(e,n,r,i,!0,a,m.children[i]),h=l.element,p=l.fakebold;h.setAttributeNS(null,"stroke",o),h.parentNode!==m&&m.appendChild(h);var d=0;h.setAttribute("stroke-linejoin","round"),p&&(d+=R.a.getFakeBoldStroke(n.size)),n.outline.active&&(d+=n.outline.size/200*n.size,h.setAttribute("stroke",n.outline.color));var f=u.renderTextShadow(v,n.size,n.shadow,t.getRotate());u.setAttributeNS(h,"stroke-width","".concat(d,"px"),"filter","url(#".concat(f,")"))}},function(e,t,n,r,i){if(t.backgroundColor!==N.e.RGBA_TRANSPARENT){var a=c(e,t,n,r,!1,i,y.children[r],!1,!0).element;a.parentNode!==y&&y.appendChild(a),b.delete(a),a.setAttribute("fill",t.backgroundColor)}});var w=t.getFontDetailScaleXAcc()/100,A=N.f.getMatrix(t.getHorizontalAlign(),t.getWidth(),w),C=t.isActiveCurve()?"":"matrix(".concat(A.m11,",").concat(A.m12,",").concat(A.m21,",").concat(A.m22,",").concat(A.m31,",").concat(A.m32,")");S.setAttributeNS(null,"transform",C),m.setAttributeNS(null,"transform",C),E.setAttributeNS(null,"transform",C),y.setAttributeNS(null,"transform",C),T.forEach(function(e){return S.removeChild(e)}),I.forEach(function(e){return E.removeChild(e)}),b.forEach(function(e){return y.removeChild(e)})}},{key:"renderTextShadow",value:function(e,t,n,r){var i=n.angle-r-L.a.TEXT_SHADOW_ANGLE_FIX,a="".concat(t).concat(i).concat(n.alpha).concat(n.color.replace("#","")).concat(n.distance).concat(n.spread),o=n.getShadowDrawInfo(t,this.props.getRotate(),1),s=o.blur,u=o.shadowX,c=o.shadowY,l=e.getElementsByTagNameNS(I.a.SVG,"filter"),h=!0,p=!1,d=void 0;try{for(var f,g=l[Symbol.iterator]();!(h=(f=g.next()).done);h=!0){if(f.value.id===a)return a}}catch(e){p=!0,d=e}finally{try{h||null==g.return||g.return()}finally{if(p)throw d}}var v=document.createElementNS(I.a.SVG,"filter");v.id=a,this.setAttributeNS(v,"x","-100%","y","-100%","width","300%","height","300%");var y=document.createElementNS(I.a.SVG,"feOffset");this.setAttributeNS(y,"result","offOut","in","SourceAlpha","dx","".concat(ee.a.round(u,3)),"dy","".concat(ee.a.round(c,3))),v.appendChild(y);var m=document.createElementNS(I.a.SVG,"feGaussianBlur");this.setAttributeNS(m,"result","blurOut","in","offOut","stdDeviation","".concat(ee.a.round(s,3))),v.appendChild(m);var E=document.createElementNS(I.a.SVG,"feBlend");this.setAttributeNS(E,"in","SourceGraphic","in2","blurOut","mode","normal"),v.appendChild(E);var k=document.createElementNS(I.a.SVG,"feFlood");this.setAttributeNS(k,"result","colorOut","flood-color",n.color,"flood-opacity","".concat(ee.a.round(n.alpha/100,3))),v.appendChild(k);var S=document.createElementNS(I.a.SVG,"feComposite");return this.setAttributeNS(S,"result","compOut","in","colorOut","in2","blurOut","operator","in"),v.appendChild(S),e.appendChild(v),a}},{key:"text",get:function(){return this.props.getText()},set:function(e){this.props.setText(e)}},{key:"templateText",get:function(){return this.props.templateText},set:function(e){this.props.templateText=e}}],[{key:"isResizeHandlerCrossDirection",value:function(e){return e===C.b.TOP||e===C.b.BOTTOM||e===C.b.LEFT||e===C.b.RIGHT}},{key:"resizeWidthToMinWidth",value:function(e,n){Math.abs(e.left-e.right)>t.TEXT_BOX_MIN_WIDTH||(n===C.b.RIGHT?e.right=e.left+t.TEXT_BOX_MIN_WIDTH:n===C.b.LEFT&&(e.left=e.right-t.TEXT_BOX_MIN_WIDTH))}}]),t}(A.d);te.TEXT_BOX_MIN_WIDTH=5},function(e,t,n){"use strict";var r,i,a=n(0),o=n.n(a),s=n(1),u=n.n(s),c=n(6),l=n.n(c),h=n(14),p=n.n(h),d=n(3),f=n.n(d),g=n(9),v=n.n(g),y=n(7),m=n.n(y),E=n(11),k=n(62),S=n.n(k),I=n(281),T=n(263),b=function(e){function t(){var e;return o()(this,t),(e=l()(this,f()(t).call(this))).outLineGroup={active:!1,color:i.RGB.valueOf(),size:i.SIZE.valueOf(),alpha:i.ALPHA.valueOf(),lineType:r.SOLID},e}return m()(t,e),u()(t,[{key:"isActiveOutline",value:function(){return this.outLineGroup.active}},{key:"setActiveOutline",value:function(e){this.outLineGroup.active!==e&&this.updateRevision(),this.outLineGroup.active=e}},{key:"getOutlineColor",value:function(){return this.outLineGroup.color}},{key:"setOutlineColor",value:function(e){var t=T.a.parseColorString(e);this.outLineGroup.color!==t.rgb&&this.updateRevision(),this.outLineGroup.color=t.rgb}},{key:"getOutlineSize",value:function(){return this.outLineGroup.size}},{key:"setOutlineSize",value:function(e){this.outLineGroup.size!==e&&this.updateRevision(),this.outLineGroup.size=e}},{key:"getOutlineAlpha",value:function(){return this.outLineGroup.alpha}},{key:"setOutlineAlpha",value:function(e){this.outLineGroup.alpha!==e&&this.updateRevision(),this.outLineGroup.alpha=e}},{key:"getOutlineType",value:function(){return this.outLineGroup.lineType}},{key:"setOutlineType",value:function(e){this.outLineGroup.lineType!==e&&this.updateRevision(),this.outLineGroup.lineType=e}},{key:"makeClone",value:function(){return new t}},{key:"clone",value:function(){return v()(f()(t.prototype),"clone",this).call(this)}}]),t}(I.b);!function(e){e.SOLID="solid",e.DASH="dash"}(r||(r={})),function(e){e.RGB="#000000",e[e.SIZE=1]="SIZE",e[e.ALPHA=255]="ALPHA"}(i||(i={}));var w=n(249),A=n(406),C=n(247),x=function(e){function t(e,n){var r;return o()(this,t),(r=l()(this,f()(t).call(this,e,n))).item=e,r}return m()(t,e),u()(t,[{key:"clone",value:function(){return new t(this.item,this.originElement.cloneNode(!0))}},{key:"isInitRenderDatas",value:function(){return!0}},{key:"getRenderingElement",value:function(e){var t=e.nodeName.toLowerCase();if("rect"===t||"circle"===t||"ellipse"===t||"polygon"===t||"path"===t)return e;var n=!0,r=!1,i=void 0;try{for(var a,o=e.childNodes[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(s instanceof SVGElement){var u=this.getRenderingElement(s);if(void 0!==u)return u}}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}},{key:"initRenderDatas",value:function(){var e;v()(f()(t.prototype),"initRenderDatas",this).call(this),(e=this.svgRenderDatas).push.apply(e,S()(A.a.makeSvgRenderedDataUnit(this.clipPathElement)))}},{key:"makeChildElements",value:function(e,n){var r=document.createElementNS(C.a.SVG,"defs"),i=document.createElementNS(C.a.SVG,"clipPath"),a="".concat(e.getUniqueKey(),"outlineclippath");r.appendChild(i);var o=this.getRenderingElement(n);if(o){var s=o.cloneNode(!0);s.id&&(s.id="".concat(s,"clip-path")),i.appendChild(s)}var u=document.createElementNS(C.a.SVG,"g");for(u.setAttribute("clip-path","url(#".concat(a,")"));n.firstChild;){var c=n.firstChild;u.appendChild(c)}n.appendChild(r),n.appendChild(u),this.clipPathElement=i,this.defsElement=r,this.strokeGroupElement=u,this.renderingElement=o,w.a.makeUnicornSvgElement(r,e.getUniqueKey()),i.id=a,v()(f()(t.prototype),"makeChildElements",this).call(this,e,n)}},{key:"updatePosition",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.item.scaleX*e,a=this.item.scaleY*e,o=this.viewLeft*e*this.item.svgScale,s=this.viewTop*e*this.item.svgScale,u=this.viewWidth*e*this.item.scaleX,c=this.viewHeight*e*this.item.scaleY;this.svgElement.setAttribute("viewBox","".concat(o," ").concat(s," ").concat(u," ").concat(c));var l=!0,h=!1,p=void 0;try{for(var d,g=this.svgRenderDatas[Symbol.iterator]();!(l=(d=g.next()).done);l=!0){var y=d.value;y.scale(i,a)}}catch(e){h=!0,p=e}finally{try{l||null==g.return||g.return()}finally{if(h)throw p}}var m=1;if(m=this.item.scaleX<this.item.scaleY?this.item.scaleX*e/(this.item.svgData.width/100):this.item.scaleY*e/(this.item.svgData.height/100),this.item.props.isActiveOutline()){var E=this.item.props.getOutlineSize()*m;if(this.strokeGroupElement.setAttribute("stroke",this.item.props.getOutlineColor()),this.strokeGroupElement.setAttribute("stroke-width","".concat(E)),this.item.props.getOutlineType()===r.DASH){var k=E;this.strokeGroupElement.setAttribute("stroke-dasharray","".concat(k,",").concat(k,",").concat(k,",").concat(k,",").concat(k,",").concat(k))}else this.strokeGroupElement.removeAttribute("stroke-dasharray")}else this.strokeGroupElement.setAttribute("stroke","none");this.svgElement.setAttribute("width","".concat(this.item.getWidth()*e,"px")),this.svgElement.setAttribute("height","".concat(this.item.getHeight()*e,"px")),v()(f()(t.prototype),"updatePosition",this).call(this,e,n)}}]),t}(n(339).a),R=n(235),L=n(228),_=n(268),P=n(256);n.d(t,"a",function(){return O});var O=function(e){function t(e,n,r){var i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=arguments.length>5&&void 0!==arguments[5]&&arguments[5],c=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],h=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],d=!(arguments.length>8&&void 0!==arguments[8])||arguments[8],g=!(arguments.length>9&&void 0!==arguments[9])||arguments[9];o()(this,t),(i=l()(this,f()(t).call(this,e,n,r,L.e,a,s,u,c,h,d,g))).arrayOfSVGPathUnit=[],i.svgData=n,i.scaleCommon=1,i.scaleX=r.width/i.data.width,i.scaleY=r.height/i.data.height,i.props.setChangePositionSetRevision(!1);var v=i.data.svg;return w.a.makeUnicornSvgElement(v,i.svgUniqueKey),i.svgElements=new x(p()(i),v),i}return m()(t,e),u()(t,[{key:"updateScale",value:function(){var e=this.getLTRBCoordinate();this.scaleX=(e.right-e.left)/this.data.width,this.scaleY=(e.bottom-e.top)/this.data.height}},{key:"getNotUpdateRevisionRubberbandHandleList",value:function(){return[]}},{key:"makeProps",value:function(){return new b}},{key:"getItemType",value:function(){return R.b.SVG_SHAPE}},{key:"clone",value:function(){var e=new t(E.b.random(),this.svgData,this.props.getBoundingBox(),this.props.getRotate(),this.props.isFlipH(),this.props.isFlipV(),this.props.isCanUserSelect(),this.props.isCanUserMove(),this.props.isCanUserResize(),this.props.isCanUserDel());return e.setProps(this.props.clone()),e.updateColor(),e.svgScale=this.svgScale,e.scaleX=this.scaleX,e.scaleY=this.scaleY,e.scaleCommon=this.scaleCommon,this.setCloneItemDefaultAttr(e),e}},{key:"scale",value:function(e){return v()(f()(t.prototype),"scale",this).call(this,e),this.updateScale(),this}},{key:"setLTRBCoordinate",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0;if(r===P.b.TOP_LEFT||r===P.b.TOP_RIGHT||r===P.b.BOTTOM_LEFT||r===P.b.BOTTOM_RIGHT){var i=e.getWidth()/this.getWidth();this.scaleCommon*=i}v()(f()(t.prototype),"setLTRBCoordinate",this).call(this,e,n,r),this.updateScale()}},{key:"getHeaderTitle",value:function(){return"도형"}},{key:"getUsedColor",value:function(){var e=v()(f()(t.prototype),"getUsedColor",this).call(this);return this.props.isActiveOutline()&&e.add(this.props.getOutlineColor()),e}}]),t}(_.a)},function(e,t,n){"use strict";var r=n(2),i=n.n(r),a=n(4),o=n.n(a),s=n(0),u=n.n(s),c=n(1),l=n.n(c),h=function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];u()(this,e),this.tbpeId=t,this.title=n,this.level=r,this.isSelected=i},p=n(282),d=n(269),f=n(385),g=function(){function e(){var t=this;u()(this,e),this.itemToShow=!1,this.checkedListConfirmFromUser=!1,this.checkedTypoFromUser=!1,this.addItemAlert=function(e,n){e?(n===p.a.DELETE_ITEM?(t.alertItemMap.get(e)&&t.alertItemMap.delete(e),t.itemToShow=!0):t.addItemAlertInternal(e,n),t.onChangeAlerts(t.itemToShow),t.itemToShow=!1):t.fetchAlerts()},this.alertItemMap=new Map}return l()(e,[{key:"setListener",value:function(e){this.listener=e}},{key:"removeListener",value:function(){this.listener=void 0}},{key:"setCallbackReference",value:function(e){this.callbackReference=e}},{key:"clearAlerts",value:function(){this.alertItemMap.clear(),this.listener&&this.listener.onClear()}},{key:"fetchAlerts",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.alertItemMap.clear(),f.a.getAllAlerts().forEach(function(t){return e.addItemAlertInternal(t.itemTbpeId,t.getHighAlertLevel())}),this.onChangeAlerts(this.itemToShow||t),this.itemToShow=!1}},{key:"getListByLevel",value:function(e){var t=this,n=[];return this.alertItemMap.forEach(function(r,i){r.level&&r.level===e&&n.push(new h(i,t.callbackReference.getItemTitle(i),r.level,r.isSelected))}),n}},{key:"addItemAlertInternal",value:function(e,t){if(null!=t){if(!this.alertItemMap.get(e)){var n=this.callbackReference.isSelected(e);return this.alertItemMap.set(e,new h(e,this.callbackReference.getItemTitle(e),t,n)),void(this.itemToShow=!0)}this.updateAlert(e,t)}}},{key:"updateAlert",value:function(e,t){var n=this.alertItemMap.get(e);if(t){var r=d.a.getHighLevel(n.level,t);n.level!==r&&(n.level=r)}var i=this.callbackReference.isSelected(e);n.isSelected!==i&&(n.isSelected=i),this.alertItemMap.set(e,n),this.alertItemMap.forEach(function(t,n){e!==n&&(t.isSelected=!1)})}},{key:"onDrawItemClicked",value:function(){this.itemToShow=!0}},{key:"onItemClicked",value:function(e){var t=this;o()(i.a.mark(function n(){return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.callbackReference.selectItemByIdList([e]);case 2:t.alertItemMap.forEach(function(t,n){return t.isSelected=e===n}),t.onChangeAlerts(!0);case 4:case"end":return n.stop()}},n)}))().catch(function(e){console.log(e),t.fetchAlerts()})}},{key:"onErrorClicked",value:function(e){this.onItemClicked(e),this.callbackReference.showAlertPopup(e)}},{key:"onChangeAlerts",value:function(e){this.listener&&this.listener.onChangeAlerts(this.getListByLevel(p.a.CAUTION),this.getListByLevel(p.a.WARNING),this.getListByLevel(p.a.RECOMMEND),e)}},{key:"changePages",value:function(){this.listener&&this.listener.onChangePages()}}]),e}();t.a=new g},function(e,t,n){"use strict";var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(6),u=n.n(s),c=n(3),l=n.n(c),h=n(9),p=n.n(h),d=n(7),f=n.n(d),g=n(459),v=n(244),y=n(268),m=function(e){function t(){var e,n;i()(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=u()(this,(e=l()(t)).call.apply(e,[this].concat(a)))).patternCountRatio=1,n}return f()(t,e),o()(t,[{key:"clone",value:function(){var e=p()(l()(t.prototype),"clone",this).call(this);return e.patternCountRatio=this.patternCountRatio,e}}]),t}(n(281).b),E=n(228);n.d(t,"a",function(){return k});var k=function(e){function t(e,n,r){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=arguments.length>5&&void 0!==arguments[5]&&arguments[5],h=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],p=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],d=!(arguments.length>8&&void 0!==arguments[8])||arguments[8],f=!(arguments.length>9&&void 0!==arguments[9])||arguments[9];i()(this,t),(a=u()(this,l()(t).call(this,e,n,r,E.e,o,s,c,h,p,d,f))).RESIZE_EPSILON=Math.pow(10,-3),a.layers=[],a.isBackground=!1,a.data.layerList.forEach(function(e){var t=g.b.createSVGLayer(e.type,n,e.layerId,a.svgUniqueKey);a.layers.push(t)});var v=r.width/a.data.width,y=r.height/a.data.height,m=!0,k=!1,S=void 0;try{for(var I,T=a.layers[Symbol.iterator]();!(m=(I=T.next()).done);m=!0){var b=I.value;b.scale(a.svgScale),b.scaleX=v/a.svgScale,b.scaleY=y/a.svgScale}}catch(e){k=!0,S=e}finally{try{m||null==T.return||T.return()}finally{if(k)throw S}}return a.updateAttribute(),a}return f()(t,e),o()(t,[{key:"updateSvgData",value:function(e){}},{key:"scale",value:function(e){p()(l()(t.prototype),"scale",this).call(this,e);var n=!0,r=!1,i=void 0;try{for(var a,o=this.layers[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){a.value.scale(e)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return this}},{key:"updateAttribute",value:function(){this.keepRatio=this.layers.some(function(e){return e.isKeepRatio()})}},{key:"isPatternSVG",value:function(){return this.data.layerList.some(function(e){return e.type.value!==v.e.NO_PATTERN.value})}},{key:"isExtendSVG",value:function(){return this.layers.some(function(e){return e.isExtend()})}},{key:"makeProps",value:function(){return new m}},{key:"initScaleAndLayers",value:function(){var e=this.getWidth()/this.data.width,t=this.getHeight()/this.data.height,n=Math.min(e,t);this.svgScale=n;var r=!0,i=!1,a=void 0;try{for(var o,s=this.layers[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;u.scaleCommon=n,u.scaleX=e/n,u.scaleY=t/n}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}},{key:"isSkinable",value:function(e){return this.isBackground&&Math.round(this.props.getLeft())<=0&&Math.round(this.props.getTop())<=0&&Math.round(this.props.getRight())>=e.width&&Math.round(this.props.getBottom())>=e.height}},{key:"isBackgroundType",value:function(){return this.svgData.type===v.g.BACKGROUND_PATTERN||this.svgData.type===v.g.BACKGROUND_IMAGE}},{key:"isOnlyOneItem",value:function(){return this.isBackground&&this.isBackgroundType()}},{key:"updatePatternByRatio",value:function(e){this.props.patternCountRatio=e;var t=0;t=e>0?e:this.props.patternCountRatio;var n=this.getLTRBCoordinate(),r=n.right,i=n.bottom;n.right=n.getWidth()*t,this.setLTRBCoordinate(n,null,null),n.bottom=n.getHeight()*t,this.setLTRBCoordinate(n,null,null),n.right=r,n.bottom=i,this.setLTRBCoordinate(n,null,null),this.props.updateStyleRevision()}},{key:"validateBoundLtrb",value:function(e){var t=this.data.minWidth*this.svgScale;if(e.getWidth()<t)if(e.left===this.props.getLeft())e.right=e.left+t;else if(e.right===this.props.getRight())e.left=e.right-t;else{var n=(e.left+e.right)/2;e.left=n-t/2,e.right=e.left+t}var r=this.data.minHeight*this.svgScale;if(e.getHeight()<r)if(e.top===this.props.getTop())e.bottom=e.top+r;else if(e.bottom===this.props.getBottom())e.top=e.bottom-r;else{var i=(e.top+e.bottom)/2;e.top=i-r/2,e.bottom=e.top+r}return e.clone()}},{key:"setLTRBCoordinate",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0;if(this.keepRatio){var i=e.getWidth()-this.props.getWidth(),a=e.getHeight()-this.props.getHeight();if(Math.abs(i)>this.RESIZE_EPSILON&&Math.abs(a)>this.RESIZE_EPSILON){var o=e.getWidth()/this.props.getWidth(),s=!0,u=!1,c=void 0;try{for(var h,d=this.layers[Symbol.iterator]();!(s=(h=d.next()).done);s=!0){var f=h.value;f.scale(o)}}catch(e){u=!0,c=e}finally{try{s||null==d.return||d.return()}finally{if(u)throw c}}this.svgScale*=o}else{this.isBackground||(e=this.validateBoundLtrb(e)),i=e.getWidth()-this.props.getWidth(),a=e.getHeight()-this.props.getHeight();var g=!0,v=!1,y=void 0;try{for(var m,E=this.layers[Symbol.iterator]();!(g=(m=E.next()).done);g=!0){var k=m.value;k.resize(i/k.scaleCommon,a/k.scaleCommon)}}catch(e){v=!0,y=e}finally{try{g||null==E.return||E.return()}finally{if(v)throw y}}}}else{var S=e.getWidth()-this.props.getWidth(),I=e.getHeight()-this.props.getHeight(),T=!0,b=!1,w=void 0;try{for(var A,C=this.layers[Symbol.iterator]();!(T=(A=C.next()).done);T=!0){var x=A.value;x.resize(S/x.scaleCommon,I/x.scaleCommon)}}catch(e){b=!0,w=e}finally{try{T||null==C.return||C.return()}finally{if(b)throw w}}}p()(l()(t.prototype),"setLTRBCoordinate",this).call(this,e,n,r)}},{key:"getHeaderTitle",value:function(){switch(this.svgData.type.value){case v.g.GRAPHIC.value:return"그래픽";case v.g.LINE.value:return"선";case v.g.FIGURE.value:return"도형";case v.g.ILLUST.value:return"일러스트";case v.g.BACKGROUND_PATTERN.value:return"패턴 배경";case v.g.BACKGROUND_IMAGE.value:return"사진형 배경";default:return null}}},{key:"isChangeableWidth",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.layers[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){if(r.value.isChangeableWidth())return!0}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}return!1}},{key:"isChangeableHeight",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.layers[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){if(r.value.isChangeableHeight())return!0}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}return!1}},{key:"canDisplayHyperlink",value:function(){return p()(l()(t.prototype),"canDisplayHyperlink",this).call(this)&&!this.isBackground}}]),t}(y.a)},function(e,t,n){"use strict";var r=n(2),i=n.n(r),a=n(4),o=n.n(a),s=n(0),u=n.n(s),c=n(1),l=n.n(c),h=n(255),p=n(11),d=n(44),f=n(20),g=n(244),v=n(442),y=n(247),m=n(249),E=n(110),k=function(){function e(){u()(this,e)}return l()(e,null,[{key:"createFromObject",value:function(t){var n=Object.assign({},t);return n.dimension=E.a.createFromObject(t.dimension),Object.setPrototypeOf(n,e.prototype),n}}]),e}(),S=n(420),I=n(328);n.d(t,"a",function(){return T});var T=function(){function e(){u()(this,e)}var t,n,r,a,s,c,E;return l()(e,null,[{key:"getValue",value:function(e){var t=String(e),n=t.indexOf(".");if(n<0)return e;if(t.substring(n+1).length<7)return e;var r=Math.pow(10,7),i=Math.ceil(e*r)/r;return Number(i.toFixed(7))}},{key:"makeSvgData",value:function(t){var n=[],r=new g.b,i=t.cloneNode(!0),a=document.createElementNS(y.a.SVG,"svg");a.style.position="absolute",a.style.left="0px",a.style.top="0px",a.style.visibility="hidden",a.setAttribute("transform","scale(".concat(e.CALC_LAYER_SIZE_SCALE,", ").concat(e.CALC_LAYER_SIZE_SCALE,")")),m.a.makeUnicornSvgElement(i),i.style.position="absolute",i.style.visibility="hidden",a.appendChild(i),document.body.appendChild(a);var o=i.getBoundingClientRect(),s=o.left,u=o.top,c=o.width,l=o.height;r.type=g.g.ILLUST,r.status=g.h.INACTIVE,r.svg=t.cloneNode(!0),r.width=this.getValue(c/e.CALC_LAYER_SIZE_SCALE),r.height=this.getValue(l/e.CALC_LAYER_SIZE_SCALE),r.minWidth=r.width,r.minHeight=r.height;for(var h=0,d=0;d<i.childNodes.length;d++){var f=i.childNodes.item(d);if(m.a.validateSvgElement(f)){for(var v=f,E=v.getBoundingClientRect(),k=p.b.random(10);n.indexOf(k)>-1;)k=p.b.random(10);n.push(k);var S=new g.d;S.layerId=k,S.idx=h,S.type=g.e.NO_PATTERN,S.extendOffsetX=this.getValue(E.width/c),S.extendOffsetY=this.getValue(E.height/l),S.moveOffsetX=this.getValue((E.left-s)/c),S.moveOffsetY=this.getValue((E.top-u)/l),S.width=this.getValue(E.width/e.CALC_LAYER_SIZE_SCALE),S.height=this.getValue(E.height/e.CALC_LAYER_SIZE_SCALE),S.left=this.getValue((E.left-s)/e.CALC_LAYER_SIZE_SCALE),S.top=this.getValue((E.top-u)/e.CALC_LAYER_SIZE_SCALE);for(var I=t.cloneNode(!0),T=v.cloneNode(!0);I.firstChild;)I.removeChild(I.firstChild);I.appendChild(T),S.svg=I,S.layerSvg=v,r.addLayer(S),h++}}var b=m.a.getOriginFillColors(i),w=!0,A=!1,C=void 0;try{for(var x,R=b[Symbol.iterator]();!(w=(x=R.next()).done);w=!0){var L=x.value,_=new g.a;_.color=L,_.editable=!0,r.addColor(_)}}catch(e){A=!0,C=e}finally{try{w||null==R.return||R.return()}finally{if(A)throw C}}return document.body.removeChild(a),r}},{key:"appendSvgInsertData",value:(E=o()(i.a.mark(function e(t,n){var r,a,o,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(t.append("type",n.type.value),t.append("status",n.status.value),t.append("width",String(n.width)),t.append("height",String(n.height)),t.append("minWidth",String(n.minWidth)),t.append("minHeight",String(n.minHeight)),r=0;r<n.layerList.length;r++)a=n.layerList[r],t.append("layerDtoList[".concat(r,"].layerId"),a.layerId),t.append("layerDtoList[".concat(r,"].type"),a.type.value),t.append("layerDtoList[".concat(r,"].extendOffsetX"),String(a.extendOffsetX)),t.append("layerDtoList[".concat(r,"].extendOffsetY"),String(a.extendOffsetY)),t.append("layerDtoList[".concat(r,"].moveOffsetX"),String(a.moveOffsetX)),t.append("layerDtoList[".concat(r,"].moveOffsetY"),String(a.moveOffsetY)),t.append("layerDtoList[".concat(r,"].width"),String(a.width)),t.append("layerDtoList[".concat(r,"].height"),String(a.height)),t.append("layerDtoList[".concat(r,"].positionLeft"),String(a.left)),t.append("layerDtoList[".concat(r,"].positionTop"),String(a.top));for(o=0;o<n.colorList.length;o++)s=n.colorList[o],t.append("colorDtoList[".concat(o,"].color"),s.color),t.append("colorDtoList[".concat(o,"].editable"),String(s.editable));return e.t0=t,e.next=11,S.a.makeThumbnail(n);case 11:e.t1=e.sent,e.t0.append.call(e.t0,"thumbnailEncodedB64",e.t1);case 13:case"end":return e.stop()}},e)})),function(e,t){return E.apply(this,arguments)})},{key:"containsWaterPattern",value:function(e){var t=e.svg.getElementsByTagName("pattern"),n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){if("물방울_패턴"===a.value.id)return!0}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}},{key:"fetchUserSvgList",value:(c=o()(i.a.mark(function t(n){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(n.map(function(t){return e.makeSvgDataFromFileKey(t)}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)})),function(e){return c.apply(this,arguments)})},{key:"makeSvgDataFromFileKeySync",value:function(e){var t=this.svgFilesMap.get(e),n=this.docMap.get(e),r=this.makeSvgDataFromXml(n);return r.key=e,r.status=t.deleted?g.h.DISABLED:g.h.ACTIVE,r.name=t.originalName,r}},{key:"makeSvgDataFromFileKey",value:(s=o()(i.a.mark(function e(t){var n,r,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSvgFileInfo(t);case 2:return n=e.sent,e.next=5,this.getSvgFile(t);case 5:return r=e.sent,(a=this.makeSvgDataFromXml(r)).key=t,a.status=n.deleted?g.h.DISABLED:g.h.ACTIVE,a.name=n.originalName,e.abrupt("return",a);case 11:case"end":return e.stop()}},e,this)})),function(e){return s.apply(this,arguments)})},{key:"makeSvgDataFromXml",value:function(t){var n=t.getElementsByTagName("svg").item(0);m.a.makeUnicornSvgElement(n),v.a.changeElement(n);var r=e.makeSvgData(n);return r.svg=n,r}},{key:"getSvgFile",value:(a=o()(i.a.mark(function e(t){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.docMap.has(t)){e.next=7;break}return e.next=3,h.b.fetchKeyList([t]);case 3:return e.next=5,d.a.getDefault(h.b.getUrl(t),{headers:{Accept:"image/svg+xml"}});case 5:n=e.sent.data,this.docMap.set(t,n);case 7:return e.abrupt("return",this.docMap.get(t));case 8:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"getSvgFileInfo",value:(r=o()(i.a.mark(function e(t){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.svgFilesMap.has(t)){e.next=5;break}return e.next=3,f.b.get("/file/".concat(t,"/info"));case 3:n=e.sent,this.svgFilesMap.set(t,k.createFromObject(n.data));case 5:return e.abrupt("return",this.svgFilesMap.get(t));case 6:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"convertFileToXmlDocument",value:(n=o()(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){var r=new FileReader;r.onload=o()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:try{e((new DOMParser).parseFromString(r.result,"image/svg+xml"))}catch(e){n(e)}case 1:case"end":return t.stop()}},t)})),r.onerror=function(){r.abort(),n()},r.readAsText(t)}));case 1:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})},{key:"setCacheFromFile",value:(t=o()(i.a.mark(function e(t,n){var r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.convertFileToXmlDocument(n);case 2:return r=e.sent,e.next=5,this.getSvgFileInfo(t);case 5:if(e.sent.type===I.a.RESERVED_KEY){e.next=8;break}return e.abrupt("return");case 8:this.docMap.set(t,r),this.svgFilesMap.set(t,k.createFromObject({originalName:n.name,type:I.a.USER_SVG}));case 10:case"end":return e.stop()}},e,this)})),function(e,n){return t.apply(this,arguments)})}]),e}();T.CALC_LAYER_SIZE_SCALE=1e3,T.svgFilesMap=new Map,T.docMap=new Map},function(e,t,n){"use strict";var r=n(62),i=n.n(r),a=n(0),o=n.n(a),s=n(1),u=n.n(s),c=n(249),l=n(406),h=n(247),p=n(292),d=n(11),f=function(){function e(t,n){o()(this,e),this.item=t,this.svgShadowElement=document.createElementNS(h.a.SVG,"svg"),this.svgShadowElement.style.position="absolute",this.svgShadowElement.style.left="0px",this.svgShadowElement.style.top="0px",this.svgShadowElement.setAttribute("xmlns",h.a.SVG),this.svgShadowElement.setAttribute("xlink",h.a.XLINK);var r=document.createElementNS(h.a.SVG,"defs");this.svgShadowElement.appendChild(r);var i=document.createElementNS(h.a.SVG,"filter");r.appendChild(i);var a="".concat(t.getUniqueKey(),"filter").concat(d.b.random());i.setAttribute("id",a),i.setAttribute("x","0px"),i.setAttribute("y","0px"),i.setAttribute("width","400%"),i.setAttribute("height","400%"),this.offsetElement=document.createElementNS(h.a.SVG,"feOffset"),i.appendChild(this.offsetElement),this.offsetElement.setAttribute("result","offOut"),this.offsetElement.setAttribute("in","SourceAlpha"),this.blurElement=document.createElementNS(h.a.SVG,"feGaussianBlur"),i.appendChild(this.blurElement),this.blurElement.setAttribute("result","blurOut"),this.blurElement.setAttribute("in","offOut"),this.floodElement=document.createElementNS(h.a.SVG,"feFlood"),i.appendChild(this.floodElement),this.floodElement.setAttribute("result","colorOut");var s=document.createElementNS(h.a.SVG,"feComposite");i.appendChild(s),s.setAttribute("result","compOut"),s.setAttribute("in","colorOut"),s.setAttribute("in2","blurOut"),s.setAttribute("operator","in"),this.useElement=document.createElementNS(h.a.SVG,"use"),this.useElement.setAttribute("filter","url(#".concat(a,")")),this.useElement.setAttribute("href","#".concat(t.getUniqueKey())),this.svgShadowElement.appendChild(this.useElement),this.offsetElement.setAttribute("dx","".concat(t.svgData.width*(p.a.VALUE_TO_MULTIPLY-1)/2)),this.offsetElement.setAttribute("dy","".concat(t.svgData.height*(p.a.VALUE_TO_MULTIPLY-1)/2))}return u()(e,[{key:"renderView",value:function(e){this.item.props.isActiveShadow()&&(this.floodElement.setAttribute("flood-color","".concat(this.item.props.getShadowColor())),this.blurElement.setAttribute("stdDeviation","".concat(this.item.getShadowBlur(e))),this.svgShadowElement.style.width="".concat(this.item.getWidth()*e*p.a.VALUE_TO_MULTIPLY,"px"),this.svgShadowElement.style.height="".concat(this.item.getHeight()*e*p.a.VALUE_TO_MULTIPLY,"px"),this.floodElement.setAttribute("flood-opacity","".concat(this.item.props.getShadowAlpha()/100)),this.offsetElement.setAttribute("dx","".concat(this.item.getWidth()*(p.a.VALUE_TO_MULTIPLY-1)/2)),this.offsetElement.setAttribute("dy","".concat(this.item.getHeight()*(p.a.VALUE_TO_MULTIPLY-1)/2)),this.useElement.setAttribute("width","".concat(this.item.getWidth()*e,"px")),this.useElement.setAttribute("height","".concat(this.item.getHeight()*e,"px")))}},{key:"updatePosition",value:function(e){}}]),e}();n.d(t,"a",function(){return g});var g=function(){function e(t,n){o()(this,e),this.item=t,this.init(t,n)}return u()(e,[{key:"init",value:function(e,t){this.initSvgElement(t),this.initViewBox(t),this.makeChildElements(e,t),this.initRenderDatas(),this.initSvgElementAttrs(),this.initColorMap(),this.svgElement.setAttribute("id","".concat(this.item.getUniqueKey()))}},{key:"initSvgElement",value:function(e){this.originElement=e.cloneNode(!0),this.svgElement=e}},{key:"initViewBox",value:function(e){var t=e.getAttribute("viewBox");if(t){var n=t.split(" ");this.viewLeft=Number(n[0]),this.viewTop=Number(n[1]),this.viewWidth=Number(n[2]),this.viewHeight=Number(n[3])}else this.viewLeft=0,this.viewTop=0,this.viewWidth=this.item.svgData.width,this.viewHeight=this.item.svgData.height}},{key:"makeChildElements",value:function(e,t){this.shadowElements=new f(e,t)}},{key:"initRenderDatas",value:function(){this.isInitRenderDatas()&&(this.svgRenderDatas=l.a.makeSvgRenderedDataUnit(this.svgElement))}},{key:"initSvgElementAttrs",value:function(){this.svgElement.style.display="block",this.svgElement.style.overflow="hidden",this.svgElement.style.position="absolute",this.svgElement.style.left="0px",this.svgElement.style.top="0px"}},{key:"getFillAttrWithOriginFill",value:function(e,t){var n=[];if(e.hasAttribute("origin_fill")&&e.hasAttribute("fill")&&e.getAttribute("origin_fill").toLowerCase()===t){var r=e.attributes.getNamedItem("fill");n.push(r)}var a=!0,o=!1,s=void 0;try{for(var u,c=e.childNodes[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value;l instanceof SVGElement&&n.push.apply(n,i()(this.getFillAttrWithOriginFill(l,t)))}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}return n}},{key:"initColorMap",value:function(){this.svgColorAttrMap=new Map;var e=c.a.getOriginFillColors(this.svgElement),t=!0,n=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value,s=this.getFillAttrWithOriginFill(this.svgElement,o.toLowerCase());this.svgColorAttrMap.set(o.toLowerCase(),s)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"renderView",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.shadowElements.renderView(e)}},{key:"updatePosition",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.shadowElements.updatePosition(e);var t=this.item.isUnsupported()?.5:this.item.props.getOpacity()/255;this.svgElement.setAttribute("opacity","".concat(t))}},{key:"getSvgString",value:function(e){var t=this.clone();return t.updateColor(),t.renderView(e,!0),t.updatePosition(e,!0),t.svgElement.outerHTML}},{key:"updateColor",value:function(){var e=this;this.item.props.getColorMap().forEach(function(t,n){e.changeColor(n,t)})}},{key:"changeColor",value:function(e,t){var n=this.svgColorAttrMap.get(e.toLowerCase());if(n){t=t.toLowerCase();var r=!0,i=!1,a=void 0;try{for(var o,s=n[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){o.value.value=t}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}}}]),e}()},,function(e,t,n){"use strict";n.d(t,"a",function(){return g});var r=n(2),i=n.n(r),a=n(4),o=n.n(a),s=n(0),u=n.n(s),c=n(1),l=n.n(c),h=n(231),p=n(303),d=n(166),f=n(239),g=function(){function e(){u()(this,e)}var t;return l()(e,null,[{key:"getFileIDWithKey",value:function(t){return t.replace(e.PIXABAY_SUFFIX,"")}},{key:"getEditImgURL",value:function(t){return"/file/thumbnails/"+t+"/"+e.EDIT_PHOTO_SIZE}},{key:"getEditImg",value:(t=o()(i.a.mark(function t(n){var r,a,o;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.getEditImgURL(n),t.prev=1,t.next=4,d.b.setUrlImage(n,r);case 4:return a=t.sent,t.abrupt("return",a);case 8:return t.prev=8,t.t0=t.catch(1),o=e.getImageInfoByKey(n).webformatURL,t.abrupt("return",d.b.setUrlImage(n,o));case 12:case"end":return t.stop()}},t,this,[[1,8]])})),function(e){return t.apply(this,arguments)})},{key:"getImageInfoByKey",value:function(t){var n=e.getFileIDWithKey(t);return p.b.get(n)}},{key:"getPixabayKeyWithId",value:function(e){return"".concat(e).concat(this.PIXABAY_SUFFIX)}},{key:"isPixabayItem",value:function(e){return e instanceof h.d?this.isPixabayOriginType(e.orgType):e instanceof f.b&&this.isPixabayOriginType(e.innerPhotoItem.orgType)}},{key:"isPixabayOriginType",value:function(e){return e===h.b.Pixabay||e===h.b.BackgroundPixabay}},{key:"pixabayItemsIn",value:function(t,n){for(var r=new Array,i=0;i<n.length;i++){var a=n[i];e.containPixabayImage(t[a])&&(r=r.concat(e.pixabayKeysIn(t[a])))}return r}},{key:"pixabayKeysIn",value:function(t){var n=this;return t.getAllSingleItems().filter(function(t){return e.isPixabayItem(t)}).map(function(e){return n.getKey(e)})}},{key:"getKey",value:function(e){return e instanceof f.b?e.innerPhotoItem.props.getPhotoKey():e.props.getPhotoKey()}},{key:"containPixabayImage",value:function(t){var n=!0,r=!1,i=void 0;try{for(var a,o=t.getAllSingleItems()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(e.isPixabayItem(s))return!0}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return!1}}]),e}();g.PIXABAY_SUFFIX="PIXABAY",g.EDIT_PHOTO_SIZE=800},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(231),u=n(337),c=function(){function e(){i()(this,e)}return o()(e,null,[{key:"isItemSkinable",value:function(e,t){return(e instanceof s.d||e instanceof u.a)&&e.isSkinable(t)}}]),e}()},function(e,t,n){"use strict";n.d(t,"d",function(){return r}),n.d(t,"c",function(){return i}),n.d(t,"b",function(){return a}),n.d(t,"a",function(){return u});var r,i,a,o,s,u,c=n(0),l=n.n(c),h=n(1),p=n.n(h),d=function(){function e(t,n,r){l()(this,e),this._priority=t,this._value=n,this._viewText=r,e.all.push(this)}return p()(e,[{key:"priority",get:function(){return this._priority}},{key:"value",get:function(){return this._value}},{key:"viewText",get:function(){return this._viewText}}],[{key:"values",value:function(){return this.all}},{key:"valueOf",value:function(e){return this.values().filter(function(t){return t.value===e})[0]}}]),e}();d.all=[],d.READONLY=new d(1,"READONLY","보기만가능"),d.COPY=new d(2,"COPY","복제가능"),d.EDITABLE=new d(3,"EDITABLE","편집가능"),function(e){e.ALL="ALL",e.MIRICANVAS="MIRICANVAS",e.BIZHOWS="BIZHOWS"}(r||(r={})),function(e){e.UPDATE_DATE="UPDATE_DATE",e.TITLE="TITLE",e.CREATE_DATE="CREATE_DATE"}(i||(i={})),function(e){e.ASC="ASC",e.DESC="DESC"}(a||(a={})),function(e){e.SHARED_DATE="SHARED_DATE",e.UPDATE_DATE="UPDATE_DATE",e.TITLE="TITLE"}(o||(o={})),function(e){e.ACTIVE="ACTIVE",e.DISABLED="DISABLED",e.DELETED="DELETED",e.PERMANENTLY_DELETE="PERMANENTLY_DELETE"}(s||(s={})),function(e){e.MIRICANVAS="MIRICANVAS",e.BIZHOWS="BIZHOWS"}(u||(u={}))},function(e,t,n){"use strict";var r,i,a=n(0),o=n.n(a),s=n(1),u=n.n(s),c=n(12),l=n(100),h=n(229),p=function(){function e(){o()(this,e),this.userInfo={userId:null,designIdx:null,refTemplateKey:null,ip:null,templateTypeList:[],editorUseType:{from:null,mode:null}},c.a.addOnLoginListener(this.onLogin.bind(this))}return u()(e,[{key:"onLogin",value:function(e){this.setUserId(e.accountId||null)}},{key:"setUserId",value:function(e){this.userInfo.userId=e,this.setUserInfoText()}},{key:"setDesignIdx",value:function(e){this.userInfo.designIdx=e,this.setUserInfoText()}},{key:"setRefTemplateKey",value:function(e){this.userInfo.refTemplateKey=e,this.setUserInfoText()}},{key:"setTemplateTypeList",value:function(e){this.userInfo.templateTypeList=e,this.setUserInfoText()}},{key:"setIp",value:function(){$.getJSON("https://api.ipify.org?format=json",function(e){this.userInfo.ip=e.ip,this.setUserInfoText()})}},{key:"setUserInfoText",value:function(){window.usrInfoText=JSON.stringify(this.userInfo)}},{key:"setEditorUseType",value:function(e,t){this.userInfo.editorUseType.from=r.MIRICANVAS===e.toLowerCase()?r.MIRICANVAS:e.toLowerCase(),this.userInfo.editorUseType.mode=i.NEW===t.toLowerCase()?i.NEW:i.UPDATE,this.setUserInfoText()}},{key:"report",value:function(e){this.setDesignIdx(e?l.a.encodeIdx(e.idx):null),this.setEditorUseType(h.a.getExecutionMode().channel,h.a.getExecutionMode().isMiricanvasChannel()?null!=e?i.UPDATE:i.NEW:h.a.getExecutionMode().changeMode)}}]),e}();t.a=new p,function(e){e.MIRICANVAS="miricanvas",e.BIZHOWS="bizhows"}(r||(r={})),function(e){e.NEW="new",e.UPDATE="update"}(i||(i={}))},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var r=n(2),i=n.n(r),a=n(4),o=n.n(a),s=n(0),u=n.n(s),c=n(1),l=n.n(c),h=function(){function e(t,n){u()(this,e),this.execCallBack=!0,this.ms=t,this.callBack=n,this.setTimeout()}return l()(e,[{key:"setTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=this;this.timeoutId=setTimeout(o()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.execCallBack){t.next=3;break}return t.next=3,e.callBack(e);case 3:case"end":return t.stop()}},t)})),this.ms)})},{key:"setExecCallBack",value:function(e){this.execCallBack=e}},{key:"getExecCallBack",value:function(){return this.execCallBack}},{key:"resetExecCallBack",value:function(){clearTimeout(this.timeoutId),this.setTimeout()}},{key:"clear",value:function(){clearTimeout(this.timeoutId)}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(2),i=n.n(r),a=n(4),o=n.n(a),s=n(0),u=n.n(s),c=n(1),l=n.n(c),h=n(20),p=function(){function e(){u()(this,e)}var t,n,r,a,s,c,p,d;return l()(e,null,[{key:"movePhotosToFolder",value:function(e,t,n,r){var i={resourceKeys:e,toFolderIdx:t,teamIdx:n.teamIdx,teamScope:n.teamScope};h.b.post("/user-resources/photo/folder",{data:JSON.stringify(i),contentType:"application/json"}).then(function(e){r(e.data)})}},{key:"withdrawPhotos",value:function(e,t,n,r){var i={resourceKeys:e,teamIdx:n.teamIdx,teamScope:n.teamScope};h.b.delete("/user-resources/photo/folder",{data:JSON.stringify(i),contentType:"application/json"}).then(function(e){r(e.data)})}},{key:"updateStatusFoldersAndPhotos",value:(d=o()(i.a.mark(function e(t,n,r,a){var o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"/user-resources/folders-photos/status",o={foldersPhotosParams:t,status:n,teamIdx:r.teamIdx,teamScope:r.teamScope},e.next=4,h.b.post("/user-resources/folders-photos/status",{data:JSON.stringify(o),contentType:"application/json"});case 4:e.sent,a();case 7:case"end":return e.stop()}},e)})),function(e,t,n,r){return d.apply(this,arguments)})},{key:"updateStatusAll",value:(p=o()(i.a.mark(function e(t,n,r){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"/user-resources/folders-photos/status/all",e.next=3,h.b.post("/user-resources/folders-photos/status/all",{data:{status:t,teamIdx:n.teamIdx,teamScope:n.teamScope}});case 3:e.sent,r();case 6:case"end":return e.stop()}},e)})),function(e,t,n){return p.apply(this,arguments)})},{key:"changeName",value:(c=o()(i.a.mark(function e(t,n,r){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"/user-resources/folder/name",e.next=4,h.b.post("/user-resources/folder/name",{data:t});case 4:(a=e.sent).success?n(a.data):r(a.code),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),r(e.t0.statusCode);case 11:case"end":return e.stop()}},e,null,[[0,8]])})),function(e,t,n){return c.apply(this,arguments)})},{key:"createFolder",value:(s=o()(i.a.mark(function e(t,n,r){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"/user-resources/folder",e.next=4,h.b.post("/user-resources/folder",{data:t});case 4:a=e.sent,console.log(a),a.success?n(a.data):r(a.code),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),r(e.t0.statusCode);case 12:case"end":return e.stop()}},e,null,[[0,9]])})),function(e,t,n){return s.apply(this,arguments)})},{key:"userFolders",value:(a=o()(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"/user-resources/folders",e.next=3,h.b.get("".concat("/user-resources/folders","?").concat($.param(t)));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)})},{key:"photosAndFolders",value:(r=o()(i.a.mark(function e(t,n,r){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.mergeParam(t,n,r),"/user-resources/folders-photos",e.abrupt("return",h.b.get("".concat("/user-resources/folders-photos","?").concat($.param(a,!0))));case 3:case"end":return e.stop()}},e,this)})),function(e,t,n){return r.apply(this,arguments)})},{key:"getPhotos",value:(n=o()(i.a.mark(function e(t,n,r){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.mergeParam(t,n,r),"/user-resources",e.abrupt("return",h.b.get("".concat("/user-resources","?").concat($.param(a,!0))));case 3:case"end":return e.stop()}},e,this)})),function(e,t,r){return n.apply(this,arguments)})},{key:"getPhotosInFolder",value:function(e,t,n,r){var i=this.mergeParam(t,n,r),a="/user-resources/${folderIdx}/photos".replace("${folderIdx}",String(e));return h.b.get("".concat(a,"?").concat($.param(i,!0)))}},{key:"copy",value:(t=o()(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"/user-resources/copy",e.abrupt("return",h.b.post("/user-resources/copy",{data:JSON.stringify(t),contentType:"application/json"}));case 2:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})},{key:"mergeParam",value:function(e,t,n){return{type:t.types,status:t.status,orderBy:t.orderBy,orderField:t.orderField,searchKeyword:t.keyword,teamIdx:n.teamIdx,teamScope:n.teamScope,page:e.page,pageSize:e.pageSize}}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=function(){function e(){i()(this,e)}return o()(e,null,[{key:"setDefaultFolderImg",value:function(t){this.defaultFolderImg=this.baseUrl+(t?e.folderImg:"team_folder_default.png")}}]),e}();s.baseUrl="https://resource.miricanvas.com/image/common/",s.folderImg="folder_default.png",s.defaultFolderImg=s.baseUrl+s.folderImg,s.reCycleImg=s.baseUrl+"recycle_bin.png",s.recycleBin={idx:-1,name:"휴지통",accountId:-1,parentIdx:-1,folderStoreInfo:{fileCount:0,fileSize:0}},s.addFolderBin={idx:-2,name:"새 폴더",accountId:-2,parentIdx:-2,folderStoreInfo:{fileCount:0,fileSize:0}}},,,function(e,t,n){"use strict";var r;n.d(t,"a",function(){return r}),function(e){var t;function n(e){e.focus(),e.setSelectionRange(0,999999)}function i(e){if("input"===e.tagName.toLowerCase())return t[e.getAttribute("type")||t.text.toString()]||t.unknown}!function(e){e.unknown="unknown",e.text="text",e.number="number",e.range="range"}(t||(t={})),e.InputType=t,e.copyValue=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n(e),document.execCommand("copy"),t&&(window.getSelection().removeAllRanges(),e.blur())},e.selectAll=n,e.getInputType=i,e.isFocusableElement=function(e){var t=i(e);return void 0===t||t!==r.InputType.text&&t!==r.InputType.number}}(r||(r={}))},function(e,t,n){"use strict";var r,i=n(2),a=n.n(i),o=n(4),s=n.n(o),u=n(0),c=n.n(u),l=n(1),h=n.n(l),p=n(324),d=n(86),f=n(228),g=n(6),v=n.n(g),y=n(3),m=n.n(y),E=n(7),k=n.n(E),S=n(319),I=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];c()(this,e),this.items=[],this.disableCompleteCallback=n,this.resourceRepository=S.a.from(t,Boolean(!1))}var t,n,r;return h()(e,[{key:"addItem",value:function(e){this.items.push(e)}},{key:"success",value:(r=s()(a.a.mark(function e(t){var n,r,i,o,s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n=!0,r=!1,i=void 0,e.prev=3,o=t[Symbol.iterator]();!(n=(s=o.next()).done);n=!0)s.value.setResourceLoadStatus(f.b.COMPLETE);e.next=11;break;case 7:e.prev=7,e.t0=e.catch(3),r=!0,i=e.t0;case 11:e.prev=11,e.prev=12,n||null==o.return||o.return();case 14:if(e.prev=14,!r){e.next=17;break}throw i;case 17:return e.finish(14);case 18:return e.finish(11);case 19:this.complete(t);case 20:case"end":return e.stop()}},e,this,[[3,7,11,19],[12,,14,18]])})),function(e){return r.apply(this,arguments)})},{key:"fail",value:(n=s()(a.a.mark(function e(t,n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.forEach(function(e){e.setResourceLoadStatus(n)}),this.complete(t);case 2:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})},{key:"complete",value:(t=s()(a.a.mark(function e(t){var n,r,i,o,s,u;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.disableCompleteCallback){e.next=2;break}return e.abrupt("return");case 2:n=!0,r=!1,i=void 0,e.prev=5,o=t[Symbol.iterator]();case 7:if(n=(s=o.next()).done){e.next=20;break}return u=s.value,e.prev=9,e.next=12,ge.renderItem(u);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(9),console.error(e.t0);case 17:n=!0,e.next=7;break;case 20:e.next=26;break;case 22:e.prev=22,e.t1=e.catch(5),r=!0,i=e.t1;case 26:e.prev=26,e.prev=27,n||null==o.return||o.return();case 29:if(e.prev=29,!r){e.next=32;break}throw i;case 32:return e.finish(29);case 33:return e.finish(26);case 34:case"end":return e.stop()}},e,this,[[5,22,26,34],[9,14],[27,,29,33]])})),function(e){return t.apply(this,arguments)})}]),e}(),T=n(166),b=function(e){function t(){return c()(this,t),v()(this,m()(t).apply(this,arguments))}var n;return k()(t,e),h()(t,[{key:"load",value:(n=s()(a.a.mark(function e(){var t=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){try{!function(){0===t.items.length&&e();var n=t.items.length,r=!0,i=!1,a=void 0;try{for(var o,s=function(){var r=o.value,i=t.resourceRepository.getSkinPath(r.props.getPhotoKey(),r.skinRatioId);T.b.setUrlImage(r.getImgResourceKey(),i).then(function(){t.success([r])}).catch(function(e){console.error(e),t.fail([r],f.b.TEMPORARY_ERROR)}).finally(function(){0==--n&&e()})},u=t.items[Symbol.iterator]();!(r=(o=u.next()).done);r=!0)s()}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}}()}catch(e){t.fail(t.items,f.b.TEMPORARY_ERROR),n(e)}}));case 1:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)})}]),t}(I),w=n(62),A=n.n(w),C=n(9),x=n.n(C),R=function(e){function t(){var e,n;c()(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=v()(this,(e=m()(t)).call.apply(e,[this].concat(i)))).itemMap=new Map,n}return k()(t,e),h()(t,[{key:"addItem",value:function(e){x()(m()(t.prototype),"addItem",this).call(this,e);var n=e.props.getPhotoKey();this.itemMap.has(n)||this.itemMap.set(n,[]),this.itemMap.get(n).push(e)}}]),t}(I),L=n(229),_=function(e){function t(){return c()(this,t),v()(this,m()(t).apply(this,arguments))}var n;return k()(t,e),h()(t,[{key:"load",value:(n=s()(a.a.mark(function e(){var t=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=s()(a.a.mark(function e(n,r){var i,o,s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,0===t.itemMap.size&&n(),t.items.forEach(function(e){return e.unsupportedResource=e.isSmileCanvasUserLogo()}),e.next=5,t.resourceRepository.getStickerDataList(A()(t.itemMap.keys()));case 5:i=e.sent,o=new Map,i.forEach(function(e){return o.set(String(e.id),e)}),s=t.itemMap.size,t.itemMap.forEach(function(e,r){var i=o.get(r);if(!i)return t.fail(e,f.b.TEMPORARY_ERROR),void(0==--s&&n());L.a.getResourceLoadOption().checkUnsupportedResource&&!i.active&&e.forEach(function(e){return e.unsupportedResource=!0}),T.b.setUrlImage(i.id,i.thumb800url).then(function(){t.success(e)}).catch(function(n){console.error(n),t.fail(e,f.b.TEMPORARY_ERROR)}).finally(function(){0==--s&&n()})}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),t.fail(t.items,f.b.TEMPORARY_ERROR),r(e.t0);case 16:case"end":return e.stop()}},e,null,[[0,12]])}));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)})}]),t}(R),P=n(20),O=n(51),D=n(12),M=n(280),N=n(326),B=n(340),U=n.n(B),G=n(68),F=function(e){function t(){return c()(this,t),v()(this,m()(t).apply(this,arguments))}var n,r,i;return k()(t,e),h()(t,[{key:"load",value:(i=s()(a.a.mark(function e(){var t=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){try{!function(){0===t.itemMap.size&&e();var n=t.itemMap.size,r=!0,i=!1,o=void 0;try{for(var u,c=function(){var r=U()(u.value,2),i=r[0],o=r[1];s()(a.a.mark(function r(){return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.loadPhotoKey(i,o);case 3:r.next=10;break;case 5:return r.prev=5,r.t0=r.catch(0),console.error(r.t0),r.next=10,t.retryLoadPhotoKey(i,o);case 10:return r.prev=10,0==--n&&e(),r.finish(10);case 13:case"end":return r.stop()}},r,null,[[0,5,10,13]])}))()},l=t.itemMap.entries()[Symbol.iterator]();!(r=(u=l.next()).done);r=!0)c()}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}}()}catch(e){t.fail(t.items,f.b.TEMPORARY_ERROR),n(e)}}));case 1:case"end":return e.stop()}},e)})),function(){return i.apply(this,arguments)})},{key:"loadPhotoKey",value:(r=s()(a.a.mark(function e(t,n){var r,i,o=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]&&o[2],i=this.isStaticKey(t)?this.getStaticUrl(t):this.getUrl(t),!r||i.startsWith("data:")||i.includes("?")||(i+="?".concat(G.a.toString(new Date,"yyyyMMddHH")).concat(Math.floor((new Date).getMinutes()/10))),e.next=5,T.b.setUrlImage(t,i);case 5:this.success(n);case 6:case"end":return e.stop()}},e,this)})),function(e,t){return r.apply(this,arguments)})},{key:"retryLoadPhotoKey",value:(n=s()(a.a.mark(function e(t,n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.loadPhotoKey(t,n,!0);case 3:e.next=15;break;case 5:return e.prev=5,e.t0=e.catch(0),console.error(e.t0),e.t1=this,e.t2=n,e.next=12,this.getFailType(t);case 12:return e.t3=e.sent,e.next=15,e.t1.fail.call(e.t1,e.t2,e.t3);case 15:case"end":return e.stop()}},e,this,[[0,5]])})),function(e,t){return n.apply(this,arguments)})}]),t}(R),H=n(255),V=n(227),z=function(e){function t(){return c()(this,t),v()(this,m()(t).apply(this,arguments))}var n;return k()(t,e),h()(t,[{key:"getItems",value:function(){return this.items}},{key:"getUrl",value:function(e){var t=V.a.getUserSetting().devMode?"original":"forEditing";return H.b.getUrl(e,t)}},{key:"getFailType",value:(n=s()(a.a.mark(function e(t){var n,r,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n="/user-resources/${key}".replace("${key}",M.a.getFileKey(t)),e.next=4,O.a.getDefaultSelectedTeamData(D.a.getUser().accountId);case 4:return r=e.sent,e.next=7,P.b.get("".concat(n,"?").concat($.param(r)));case 7:if(!(i=e.sent).data||i.data.status!==N.a.PERMANENTLY_INACTIVE){e.next=12;break}return e.abrupt("return",f.b.UNAUTHORIZED);case 12:return e.abrupt("return",f.b.TEMPORARY_ERROR);case 13:e.next=18;break;case 15:return e.prev=15,e.t0=e.catch(0),e.abrupt("return",f.b.TEMPORARY_ERROR);case 18:case"end":return e.stop()}},e,null,[[0,15]])})),function(e){return n.apply(this,arguments)})},{key:"getStaticUrl",value:function(e){return""}},{key:"isStaticKey",value:function(e){return"imageframe_basic_png"===e}}]),t}(F),W=n(231),K=n(303),X=function(e){function t(){return c()(this,t),v()(this,m()(t).apply(this,arguments))}var n;return k()(t,e),h()(t,[{key:"getUrl",value:function(e){return H.b.getUrl(e)}},{key:"getFailType",value:(n=s()(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,K.d.downloadStatus(t);case 3:if((n=e.sent).data&&n.data.status!==K.a.FAIL){e.next=8;break}return e.abrupt("return",f.b.UNAUTHORIZED);case 8:return e.abrupt("return",f.b.TEMPORARY_ERROR);case 9:e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",f.b.UNAUTHORIZED);case 15:case"end":return e.stop()}},e,null,[[0,11]])})),function(e){return n.apply(this,arguments)})},{key:"getStaticUrl",value:function(e){return""}},{key:"isStaticKey",value:function(e){return!1}}]),t}(F),Y=n(259),Z=n(37);!function(e){e.STICKER="STICKER",e.SKIN="SKIN",e.USER_IMAGE="USER_IMAGE",e.PIXABAY="PIXABAY"}(r||(r={}));var j=function(e){function t(e){var n;return c()(this,t),(n=v()(this,m()(t).call(this,e))).itemGroupMap=new Map,n.repositoryType=e,n}var n;return k()(t,e),h()(t,[{key:"addItem",value:function(e){x()(m()(t.prototype),"addItem",this).call(this,e);var n,i=e.innerPhotoItem;if(i.isRepoStickerDB())n=r.STICKER;else if(i.orgType===W.b.Skin)n=r.SKIN;else if(i.addedByUser())switch(i.orgType){case W.b.Photo:case W.b.BackgroundPhoto:n=r.USER_IMAGE;break;case W.b.Pixabay:case W.b.BackgroundPixabay:n=r.PIXABAY}this.itemGroupMap.has(n)||this.itemGroupMap.set(n,new Map);var a=i.props.getPhotoKey();this.itemGroupMap.get(n).has(a)||this.itemGroupMap.get(n).set(a,[]),this.itemGroupMap.get(n).get(a).push(e)}},{key:"getItems",value:function(){return this.items}},{key:"load",value:(n=s()(a.a.mark(function e(){var t=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=s()(a.a.mark(function e(n,r){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{!function(){0===t.itemGroupMap.size&&n();var e=0;t.itemGroupMap.forEach(function(t){return e+=t.size});var r=!0,i=!1,a=void 0;try{for(var o,s=t.itemGroupMap.entries()[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=U()(o.value,2),c=u[0],l=u[1],h=!0,p=!1,d=void 0;try{for(var g,v=function(){var r=g.value,i=[],a=[];if(r.forEach(function(e){e.svgData.status!==Y.g.DISABLED?i.push(e):a.push(e)}),t.fail(a,f.b.UNAUTHORIZED),Z.a.isEmpty(i))return 0==--e&&n(),"continue";var o=t.createResourceLoader(c);o.addItem(i[0].innerPhotoItem),o.load().then(function(){i[0].innerPhotoItem.isResourceLoadFail()?t.fail(i,i[0].innerPhotoItem.getResourceLoadStatus()):t.success(i)}).catch(function(e){console.error(e),t.fail(i,f.b.TEMPORARY_ERROR)}).finally(function(){0==--e&&n()})},y=l.values()[Symbol.iterator]();!(h=(g=y.next()).done);h=!0)v()}catch(e){p=!0,d=e}finally{try{h||null==y.return||y.return()}finally{if(p)throw d}}}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}()}catch(e){t.fail(t.items,f.b.TEMPORARY_ERROR),r(e)}case 1:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)})},{key:"createResourceLoader",value:function(e){switch(e){case r.STICKER:return new _(this.repositoryType,!1);case r.SKIN:return new b(this.repositoryType,!1);case r.USER_IMAGE:return new z(this.repositoryType,!1);case r.PIXABAY:return new X(this.repositoryType,!1)}}}]),t}(I),q=n(321),Q=function(e){function t(){var e,n;c()(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=v()(this,(e=m()(t)).call.apply(e,[this].concat(i)))).itemsMap=new Map,n.downloadFontCntMap=new Map,n}var n,r;return k()(t,e),h()(t,[{key:"addItem",value:function(e){var n=this;x()(m()(t.prototype),"addItem",this).call(this,e);for(var r=[],i=e.props.getLineLength(),a=0;a<i;a++){e.props.getLine(a).chars.forEach(function(e){-1===r.indexOf(e.styles.family)&&r.push(e.styles.family)})}this.downloadFontCntMap.set(e.tbpeId,r.length),r.forEach(function(t){n.itemsMap.has(t)||n.itemsMap.set(t,[]),n.itemsMap.get(t).push(e)})}},{key:"load",value:(r=s()(a.a.mark(function e(){var t=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=s()(a.a.mark(function e(n,r){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{!function(){0===t.itemsMap.size&&n();var e=t.itemsMap.size,r=!0,i=!1,a=void 0;try{for(var o,s=function(){var r=U()(o.value,2),i=r[0],a=r[1];q.a.addFamily(i).then(function(){}).catch(function(e){console.error("요소를 구성하기 위해 필요한 폰트를 불러오지 못했습니다.",i,e)}).finally(function(){t.fontLoadComplete(i,a).catch(function(e){return console.error(e)}),0==--e&&n()})},u=t.itemsMap.entries()[Symbol.iterator]();!(r=(o=u.next()).done);r=!0)s()}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}}()}catch(e){t.success(t.items),r(e)}case 1:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)})),function(){return r.apply(this,arguments)})},{key:"fontLoadComplete",value:(n=s()(a.a.mark(function e(t,n){var r,i=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],n.forEach(function(e){var t=i.downloadFontCntMap.get(e.tbpeId);0!==t&&(i.downloadFontCntMap.set(e.tbpeId,--t),0===t&&r.push(e))}),e.next=4,this.success(r);case 4:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})}]),t}(I),J=n(239),ee=n(238),te=n(226),ne=n(225),re=n(244),ie=function(e){function t(){return c()(this,t),v()(this,m()(t).apply(this,arguments))}var n;return k()(t,e),h()(t,[{key:"load",value:(n=s()(a.a.mark(function e(){var t,n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=[],this.items.forEach(function(e){e.svgData.status!==re.h.DISABLED?t.push(e):n.push(e)}),this.success(t),this.fail(n,f.b.UNAUTHORIZED);case 5:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})}]),t}(I),ae=n(268),oe=n(224),se=n(243),ue=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return c()(this,t),(n=v()(this,m()(t).call(this,e,r))).textLoader=new Q(e),n}var n;return k()(t,e),h()(t,[{key:"addItem",value:function(e){var n=this;x()(m()(t.prototype),"addItem",this).call(this,e),e.cells.forEach(function(e){e.forEach(function(e){n.textLoader.addItem(e.childTextItem)})})}},{key:"load",value:(n=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.textLoader.load();case 2:this.success(this.items);case 3:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})}]),t}(I),ce=n(240),le=n(110),he=function(e){function t(){return c()(this,t),v()(this,m()(t).apply(this,arguments))}var n,r;return k()(t,e),h()(t,[{key:"load",value:(r=s()(a.a.mark(function e(){var n=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=s()(a.a.mark(function e(r,i){var o,s,u,c,l,h;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.items.length<=0&&r(),o=!0,s=!1,u=void 0,e.prev=4,c=a.a.mark(function e(){var o,s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=h.value,e.next=3,t.createResizedImageSrc(o);case 3:s=e.sent,T.b.setUrlImage(o.props.getPhotoKey(),s).then(function(){n.success([o]),r()}).catch(function(e){console.error(e),n.fail([o],f.b.TEMPORARY_ERROR),i(e)});case 5:case"end":return e.stop()}},e)}),l=n.items[Symbol.iterator]();case 7:if(o=(h=l.next()).done){e.next=12;break}return e.delegateYield(c(),"t0",9);case 9:o=!0,e.next=7;break;case 12:e.next=18;break;case 14:e.prev=14,e.t1=e.catch(4),s=!0,u=e.t1;case 18:e.prev=18,e.prev=19,o||null==l.return||l.return();case 21:if(e.prev=21,!s){e.next=24;break}throw u;case 24:return e.finish(21);case 25:return e.finish(18);case 26:case"end":return e.stop()}},e,null,[[4,14,18,26],[19,,21,25]])}));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)})),function(){return r.apply(this,arguments)})}],[{key:"createResizedImageSrc",value:(n=s()(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){var r=M.a.USER_PHOTO_SIZE,i=t.props.getSmileCanvasOriginImgWidth(),a=t.props.getSmileCanvasOriginImgHeight(),o=Math.max(i,a);o<=r&&e(t.props.getPhotoKey());var s=r/o,u=new Image;u.crossOrigin="Anonymous",u.onerror=function(e){n(e)},u.onload=function(){try{var t=ce.a.createCanvas(new le.a(i,a,s));t.getContext("2d").drawImage(u,0,0,t.width,t.height),e(t.toDataURL())}catch(e){n(e)}},u.src=t.props.getPhotoKey()}));case 1:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})}]),t}(I),pe=n(378),de=n(449),fe=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return c()(this,t),v()(this,m()(t).call(this,e,n))}var n,r;return k()(t,e),h()(t,[{key:"load",value:(r=s()(a.a.mark(function e(){var t=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(this.items.map(function(e){return t.loadItem(e)}));case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0),this.fail(this.items,f.b.TEMPORARY_ERROR);case 9:case"end":return e.stop()}},e,this,[[0,5]])})),function(){return r.apply(this,arguments)})},{key:"loadItem",value:(n=s()(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,de.a.fetchThumbnailResource(t.props.youtubeId);case 3:this.success([t]),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0),this.fail([t],f.b.TEMPORARY_ERROR);case 10:case"end":return e.stop()}},e,this,[[0,6]])})),function(e){return n.apply(this,arguments)})}]),t}(I);n.d(t,"a",function(){return ge});var ge=function(){function e(){c()(this,e)}var t,n,r,i,o,u;return h()(e,null,[{key:"loadDesignMetaResource",value:(u=s()(a.a.mark(function e(t){var n=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.b.fetch(t.pages,"forEditing");case 2:return e.next=4,Promise.all(t.pages.map(function(e){return new Promise(function(){var r=s()(a.a.mark(function r(i,o){return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,n.loadPageResource(e,t.getRepositoryType());case 3:i(),r.next=9;break;case 6:r.prev=6,r.t0=r.catch(0),o(r.t0);case 9:case"end":return r.stop()}},r,null,[[0,6]])}));return function(e,t){return r.apply(this,arguments)}}())}));case 4:return e.next=6,this.renderOther();case 6:case"end":return e.stop()}},e,this)})),function(e){return u.apply(this,arguments)})},{key:"loadPageResource",value:(o=s()(a.a.mark(function e(t){var n,r,i=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:d.a.UNICORN,r=t.getAllSingleItems(),e.prev=2,e.next=5,this.loadItemResource(r,n);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("필요한 리소스를 모두 로드하지 못했습니다.",e.t0);case 10:t.setStatus(p.b.DEFAULT);case 11:case"end":return e.stop()}},e,this,[[2,7]])})),function(e){return o.apply(this,arguments)})},{key:"loadItemResource",value:(i=s()(a.a.mark(function t(n){var r,i,o,s,u,c,l,h,p,g,v,y,m,E,k,S,I,T=arguments;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=T.length>1&&void 0!==T[1]?T[1]:d.a.UNICORN,i=new b(r),o=new _(r),s=new he(r),u=new z(r),c=new j(r),l=new Q(r),h=new ie(r),p=new X(r),g=new ue(r),v=new fe(r),y=!0,m=!1,E=void 0,t.prev=14,k=n[Symbol.iterator]();case 16:if(y=(S=k.next()).done){t.next=69;break}if(I=S.value,!0,!(I instanceof W.d)){t.next=42;break}if(!I.isRepoStickerDB()){t.next=24;break}o.addItem(I),t.next=40;break;case 24:if(I.orgType!==W.b.Skin){t.next=28;break}i.addItem(I),t.next=40;break;case 28:if(I.orgType!==W.b.SmileCanvasPhoto){t.next=32;break}s.addItem(I),t.next=40;break;case 32:if(!I.addedByUser()){t.next=40;break}t.t0=I.orgType,t.next=t.t0===W.b.Photo?36:t.t0===W.b.BackgroundPhoto?36:t.t0===W.b.Pixabay?38:t.t0===W.b.BackgroundPixabay?38:40;break;case 36:return u.addItem(I),t.abrupt("break",40);case 38:return p.addItem(I),t.abrupt("break",40);case 40:t.next=66;break;case 42:if(!(I instanceof J.b)){t.next=46;break}c.addItem(I),t.next=66;break;case 46:if(!(I instanceof ee.a)){t.next=50;break}l.addItem(I),t.next=66;break;case 50:if(!(I instanceof se.a)){t.next=54;break}g.addItem(I),t.next=66;break;case 54:if(!(I instanceof ae.a)){t.next=58;break}h.addItem(I),t.next=66;break;case 58:if(!(I instanceof pe.a)){t.next=62;break}v.addItem(I),t.next=66;break;case 62:return I.setResourceLoadStatus(f.b.COMPLETE),t.next=65,e.renderItem(I);case 65:!1;case 66:y=!0,t.next=16;break;case 69:t.next=75;break;case 71:t.prev=71,t.t1=t.catch(14),m=!0,E=t.t1;case 75:t.prev=75,t.prev=76,y||null==k.return||k.return();case 78:if(t.prev=78,!m){t.next=81;break}throw E;case 81:return t.finish(78);case 82:return t.finish(75);case 83:return t.next=85,H.b.fetch(n,"forEditing");case 85:if(!V.a.getUserSetting().devMode){t.next=90;break}return t.next=88,H.b.fetch(u.getItems(),"original");case 88:return t.next=90,H.b.fetch(c.getItems(),"original");case 90:return t.abrupt("return",Promise.all([i,o,s,u,c,l,h,p,g,v].map(function(e){return e.load()})));case 91:case"end":return t.stop()}},t,null,[[14,71,75,83],[76,,78,82]])})),function(e){return i.apply(this,arguments)})},{key:"renderPage",value:(r=s()(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!te.a.instance.pageController){e.next=5;break}if(!(n=te.a.instance.pageController.getPageRenderer(t))){e.next=5;break}return e.next=5,n.render();case 5:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)})},{key:"renderItem",value:(n=s()(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){try{if(te.a.instance.pageController){var r=te.a.instance.pageController.getItemRenderer(t);r&&setTimeout(s()(a.a.mark(function n(){return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.renderAutoAsync(t.lastRenderEditScale);case 2:e();case 3:case"end":return n.stop()}},n)})),0)}}catch(e){n(e)}}));case 1:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})},{key:"renderOther",value:(t=s()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(te.a.instance.editorMainVC){e.next=2;break}return e.abrupt("return");case 2:ne.a.instance.dispatch(new oe.c(function(){var e=s()(a.a.mark(function e(t,n,r){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.renderLayer(t,n);case 2:t.pages.forEach(function(e){var t=te.a.instance.pageController.getPageRenderer(e);t&&t.pageSettingVC.renderView()});case 3:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)})}]),e}()},function(e,t,n){"use strict";var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(247),u=n(90),c=function e(t,n,r,a,o,s,c,p,d){var f=this;i()(this,e),this.getTotalLength=function(){return f.length},this.getPointAtLength=function(e){e<0?e=0:e>f.length&&(e=f.length);var t=l(new u.a(f.x0,f.y0),f.rx,f.ry,f.xAxisRotate,f.largeArcFlag,f.sweepFlag,new u.a(f.x1,f.y1),e/f.length);return new u.a(t.x,t.y)},this.getTangentAtLength=function(e){e<0?e=0:e>f.length&&(e=f.length);var t=l(new u.a(f.x0,f.y0),f.rx,f.ry,f.xAxisRotate,f.largeArcFlag,f.sweepFlag,new u.a(f.x1,f.y1),e/f.length);return new u.a(Math.cos(t.ellipticalArcAngle-Math.PI/2),Math.sin(t.ellipticalArcAngle-Math.PI/2))},this.getPropertiesAtLength=function(e){var t=f.getTangentAtLength(e),n=f.getPointAtLength(e);return{x:n.x,y:n.y,tangentX:t.x,tangentY:t.y}},this.x0=t,this.y0=n,this.rx=r,this.ry=a,this.xAxisRotate=o,this.largeArcFlag=s,this.sweepFlag=c,this.x1=p,this.y1=d;var g=h(300,function(e){var i=l(new u.a(t,n),r,a,o,s,c,new u.a(p,d),e);return new u.a(i.x,i.y)});this.length=g.arcLength},l=function(e,t,n,r,i,a,o,s){t=Math.abs(t),n=Math.abs(n),r=p(r,360);var c=d(r);if(e.x===o.x&&e.y===o.y)return{x:e.x,y:e.y,ellipticalArcAngle:0};if(0===t||0===n)return{x:0,y:0,ellipticalArcAngle:0};var l=(e.x-o.x)/2,h=(e.y-o.y)/2,f=new u.a(Math.cos(c)*l+Math.sin(c)*h,-Math.sin(c)*l+Math.cos(c)*h),g=Math.pow(f.x,2)/Math.pow(t,2)+Math.pow(f.y,2)/Math.pow(n,2);g>1&&(t=Math.sqrt(g)*t,n=Math.sqrt(g)*n);var y=(Math.pow(t,2)*Math.pow(n,2)-Math.pow(t,2)*Math.pow(f.y,2)-Math.pow(n,2)*Math.pow(f.x,2))/(Math.pow(t,2)*Math.pow(f.y,2)+Math.pow(n,2)*Math.pow(f.x,2));y=y<0?0:y;var m=(i!==a?1:-1)*Math.sqrt(y),E=new u.a(m*(t*f.y/n),m*(-n*f.x/t)),k=new u.a(Math.cos(c)*E.x-Math.sin(c)*E.y+(e.x+o.x)/2,Math.sin(c)*E.x+Math.cos(c)*E.y+(e.y+o.y)/2),S=new u.a((f.x-E.x)/t,(f.y-E.y)/n),I=v(new u.a(1,0),S),T=new u.a((-f.x-E.x)/t,(-f.y-E.y)/n),b=v(S,T);!a&&b>0?b-=2*Math.PI:a&&b<0&&(b+=2*Math.PI);var w=I+(b%=2*Math.PI)*s,A=t*Math.cos(w),C=n*Math.sin(w);return{x:Math.cos(c)*A-Math.sin(c)*C+k.x,y:Math.sin(c)*A+Math.cos(c)*C+k.y,ellipticalArcStartAngle:I,ellipticalArcEndAngle:I+b,ellipticalArcAngle:w,ellipticalArcCenter:k,resultantRx:t,resultantRy:n}},h=function(e,t){e=e||500;for(var n,r=0,i=[],a=[],o=t(0),s=0;s<e;s++){var u=g(s*(1/e),0,1);n=t(u),r+=f(o,n),a.push([o,n]),i.push({t:u,arcLength:r}),o=n}return n=t(1),a.push([o,n]),r+=f(o,n),i.push({t:1,arcLength:r}),{arcLength:r,arcLengthMap:i,approximationLines:a}},p=function(e,t){return(e%t+t)%t},d=function(e){return e*(Math.PI/180)},f=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},g=function(e,t,n){return Math.min(Math.max(e,t),n)},v=function(e,t){var n=e.x*t.x+e.y*t.y,r=Math.sqrt((Math.pow(e.x,2)+Math.pow(e.y,2))*(Math.pow(t.x,2)+Math.pow(t.y,2)));return(e.x*t.y-e.y*t.x<0?-1:1)*Math.acos(n/r)},y=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],m=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],E=[[1],[1,1],[1,2,1],[1,3,3,1]],k=function(e,t,n){var r=(1-n)*(1-n)*(1-n)*e[0]+3*(1-n)*(1-n)*n*e[1]+3*(1-n)*n*n*e[2]+n*n*n*e[3],i=(1-n)*(1-n)*(1-n)*t[0]+3*(1-n)*(1-n)*n*t[1]+3*(1-n)*n*n*t[2]+n*n*n*t[3];return new u.a(r,i)},S=function(e,t,n){return T([3*(e[1]-e[0]),3*(e[2]-e[1]),3*(e[3]-e[2])],[3*(t[1]-t[0]),3*(t[2]-t[1]),3*(t[3]-t[2])],n)},I=function(e,t,n){var r,i,a;r=n/2,i=0;for(var o=0;o<20;o++)a=r*y[20][o]+r,i+=m[20][o]*A(e,t,a);return r*i},T=function(e,t,n){var r=(1-n)*(1-n)*e[0]+2*(1-n)*n*e[1]+n*n*e[2],i=(1-n)*(1-n)*t[0]+2*(1-n)*n*t[1]+n*n*t[2];return new u.a(r,i)},b=function(e,t,n){void 0===n&&(n=1);var r=e[0]-2*e[1]+e[2],i=t[0]-2*t[1]+t[2],a=2*e[1]-2*e[0],o=2*t[1]-2*t[0],s=4*(r*r+i*i),u=4*(r*a+i*o),c=a*a+o*o;if(0===s)return n*Math.sqrt(Math.pow(e[2]-e[0],2)+Math.pow(t[2]-t[0],2));var l=u/(2*s),h=n+l,p=c/s-l*l,d=h*h+p>0?Math.sqrt(h*h+p):0,f=l*l+p>0?Math.sqrt(l*l+p):0,g=l+Math.sqrt(l*l+p)!==0?p*Math.log(Math.abs((h+d)/(l+f))):0;return Math.sqrt(s)/2*(h*d-l*f+g)},w=function(e,t,n){return new u.a(2*(1-n)*(e[1]-e[0])+2*n*(e[2]-e[1]),2*(1-n)*(t[1]-t[0])+2*n*(t[2]-t[1]))};function A(e,t,n){var r=C(1,n,e),i=C(1,n,t),a=r*r+i*i;return Math.sqrt(a)}var C=function e(t,n,r){var i,a,o=r.length-1;if(0===o)return 0;if(0===t){a=0;for(var s=0;s<=o;s++)a+=E[o][s]*Math.pow(1-n,o-s)*Math.pow(n,s)*r[s];return a}i=new Array(o);for(var u=0;u<o;u++)i[u]=o*(r[u+1]-r[u]);return e(t-1,n,i)},x=function(e,t,n,r,i){for(var a=1,o=e/t,s=(e-n(r,i,o))/t,u=0;a>.001;){var c=n(r,i,o+s),l=n(r,i,o-s),h=Math.abs(e-c)/t,p=Math.abs(e-l)/t;if(h<a?(a=h,o+=s):p<a?(a=p,o-=s):s/=2,++u>500)break}return o},R=function e(t,n,r,a,o,s,c,l){var h=this;i()(this,e),this.getTotalLength=function(){return h.length},this.getPointAtLength=function(e){var t=x(e,h.length,h.getArcLength,[h.a.x,h.b.x,h.c.x,h.d.x],[h.a.y,h.b.y,h.c.y,h.d.y]);return h.getPoint([h.a.x,h.b.x,h.c.x,h.d.x],[h.a.y,h.b.y,h.c.y,h.d.y],t)},this.getTangentAtLength=function(e){var t=x(e,h.length,h.getArcLength,[h.a.x,h.b.x,h.c.x,h.d.x],[h.a.y,h.b.y,h.c.y,h.d.y]),n=h.getDerivative([h.a.x,h.b.x,h.c.x,h.d.x],[h.a.y,h.b.y,h.c.y,h.d.y],t),r=Math.sqrt(n.x*n.x+n.y*n.y);return r>0?new u.a(n.x/r,n.y/r):new u.a(0,0)},this.getPropertiesAtLength=function(e){var t,n=x(e,h.length,h.getArcLength,[h.a.x,h.b.x,h.c.x,h.d.x],[h.a.y,h.b.y,h.c.y,h.d.y]),r=h.getDerivative([h.a.x,h.b.x,h.c.x,h.d.x],[h.a.y,h.b.y,h.c.y,h.d.y],n),i=Math.sqrt(r.x*r.x+r.y*r.y);t=i>0?new u.a(r.x/i,r.y/i):new u.a(0,0);var a=h.getPoint([h.a.x,h.b.x,h.c.x,h.d.x],[h.a.y,h.b.y,h.c.y,h.d.y],n);return{x:a.x,y:a.y,tangentX:t.x,tangentY:t.y}},this.getC=function(){return h.c},this.getD=function(){return h.d},this.a=new u.a(t,n),this.b=new u.a(r,a),this.c=new u.a(o,s),void 0!==c&&void 0!==l?(this.getArcLength=I,this.getPoint=k,this.getDerivative=S,this.d=new u.a(c,l)):(this.getArcLength=b,this.getPoint=T,this.getDerivative=w,this.d=new u.a(0,0)),this.length=this.getArcLength([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],1)},L=function e(t,n,r,a){var o=this;i()(this,e),this.getTotalLength=function(){return Math.sqrt(Math.pow(o.x0-o.x1,2)+Math.pow(o.y0-o.y1,2))},this.getPointAtLength=function(e){var t=e/Math.sqrt(Math.pow(o.x0-o.x1,2)+Math.pow(o.y0-o.y1,2)),n=(o.x1-o.x0)*t,r=(o.y1-o.y0)*t;return new u.a(o.x0+n,o.y0+r)},this.getTangentAtLength=function(e){var t=Math.sqrt((o.x1-o.x0)*(o.x1-o.x0)+(o.y1-o.y0)*(o.y1-o.y0));return new u.a((o.x1-o.x0)/t,(o.y1-o.y0)/t)},this.getPropertiesAtLength=function(e){var t=o.getPointAtLength(e),n=o.getTangentAtLength(e);return{x:t.x,y:t.y,tangentX:n.x,tangentY:n.y}},this.x0=t,this.x1=n,this.y0=r,this.y1=a},_=n(62),P=n.n(_),O={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},D=/([astvzqmhlc])([^astvzqmhlc]*)/gi,M=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi,N=function(e){var t=e.match(M);return t?t.map(Number):[]},B=function e(t){var n=this;i()(this,e),this.length=0,this.partialLengths=[],this.functions=[],this.getPartAtLength=function(e){e<0?e=0:e>n.length&&(e=n.length);for(var t=n.partialLengths.length-1;n.partialLengths[t]>=e&&n.partialLengths[t]>0;)t--;return t++,{fraction:e-n.partialLengths[t-1],i:t}},this.getTotalLength=function(){return n.length},this.getPointAtLength=function(e){var t=n.getPartAtLength(e),r=n.functions[t.i];if(r)return r.getPointAtLength(t.fraction);throw new Error("Wrong function at this part.")},this.getTangentAtLength=function(e){var t=n.getPartAtLength(e),r=n.functions[t.i];if(r)return r.getTangentAtLength(t.fraction);throw new Error("Wrong function at this part.")},this.getPropertiesAtLength=function(e){var t=n.getPartAtLength(e),r=n.functions[t.i];if(r)return r.getPropertiesAtLength(t.fraction);throw new Error("Wrong function at this part.")},this.getParts=function(){for(var e=[],t=0;t<n.functions.length;t++)if(null!==n.functions[t]){n.functions[t]=n.functions[t];var r={start:n.functions[t].getPointAtLength(0),end:n.functions[t].getPointAtLength(n.partialLengths[t]-n.partialLengths[t-1]),length:n.partialLengths[t]-n.partialLengths[t-1],getPointAtLength:n.functions[t].getPointAtLength,getTangentAtLength:n.functions[t].getTangentAtLength,getPropertiesAtLength:n.functions[t].getPropertiesAtLength};e.push(r)}return e};for(var r,a=function(e){var t=e.match(D);if(!t)throw new Error("No path elements found in string ".concat(e));return t.reduce(function(e,t){var n=t.charAt(0),r=n.toLowerCase(),i=N(t.substr(1));for("m"===r&&i.length>2&&(e.push([n].concat(P()(i.splice(0,2)))),r="l",n="m"===n?"l":"L");i.length>=0;){if(i.length===O[r]){e.push([n].concat(P()(i.splice(0,O[r]))));break}if(i.length<O[r])throw new Error('Malformed path data: "'.concat(n,'" must have ').concat(O[r]," elements and has ").concat(i.length,": ").concat(t));e.push([n].concat(P()(i.splice(0,O[r]))))}return e},[])}(t),o=[0,0],s=[0,0],u=[0,0],l=0;l<a.length;l++){if("M"===a[l][0])u=[(o=[a[l][1],a[l][2]])[0],o[1]],this.functions.push(null);else if("m"===a[l][0])u=[(o=[a[l][1]+o[0],a[l][2]+o[1]])[0],o[1]],this.functions.push(null);else if("L"===a[l][0])this.length+=Math.sqrt(Math.pow(o[0]-a[l][1],2)+Math.pow(o[1]-a[l][2],2)),this.functions.push(new L(o[0],a[l][1],o[1],a[l][2])),o=[a[l][1],a[l][2]];else if("l"===a[l][0])this.length+=Math.sqrt(Math.pow(a[l][1],2)+Math.pow(a[l][2],2)),this.functions.push(new L(o[0],a[l][1]+o[0],o[1],a[l][2]+o[1])),o=[a[l][1]+o[0],a[l][2]+o[1]];else if("H"===a[l][0])this.length+=Math.abs(o[0]-a[l][1]),this.functions.push(new L(o[0],a[l][1],o[1],o[1])),o[0]=a[l][1];else if("h"===a[l][0])this.length+=Math.abs(a[l][1]),this.functions.push(new L(o[0],o[0]+a[l][1],o[1],o[1])),o[0]=a[l][1]+o[0];else if("V"===a[l][0])this.length+=Math.abs(o[1]-a[l][1]),this.functions.push(new L(o[0],o[0],o[1],a[l][1])),o[1]=a[l][1];else if("v"===a[l][0])this.length+=Math.abs(a[l][1]),this.functions.push(new L(o[0],o[0],o[1],o[1]+a[l][1])),o[1]=a[l][1]+o[1];else if("z"===a[l][0]||"Z"===a[l][0])this.length+=Math.sqrt(Math.pow(u[0]-o[0],2)+Math.pow(u[1]-o[1],2)),this.functions.push(new L(o[0],u[0],o[1],u[1])),o=[u[0],u[1]];else if("C"===a[l][0])r=new R(o[0],o[1],a[l][1],a[l][2],a[l][3],a[l][4],a[l][5],a[l][6]),this.length+=r.getTotalLength(),o=[a[l][5],a[l][6]],this.functions.push(r);else if("c"===a[l][0])(r=new R(o[0],o[1],o[0]+a[l][1],o[1]+a[l][2],o[0]+a[l][3],o[1]+a[l][4],o[0]+a[l][5],o[1]+a[l][6])).getTotalLength()>0?(this.length+=r.getTotalLength(),this.functions.push(r),o=[a[l][5]+o[0],a[l][6]+o[1]]):this.functions.push(new L(o[0],o[0],o[1],o[1]));else if("S"===a[l][0]){if(l>0&&["C","c","S","s"].indexOf(a[l-1][0])>-1){if(r){var h=r.getC();r=new R(o[0],o[1],2*o[0]-h.x,2*o[1]-h.y,a[l][1],a[l][2],a[l][3],a[l][4])}}else r=new R(o[0],o[1],o[0],o[1],a[l][1],a[l][2],a[l][3],a[l][4]);r&&(this.length+=r.getTotalLength(),o=[a[l][3],a[l][4]],this.functions.push(r))}else if("s"===a[l][0]){if(l>0&&["C","c","S","s"].indexOf(a[l-1][0])>-1){if(r){var p=r.getC(),d=r.getD();r=new R(o[0],o[1],o[0]+d.x-p.x,o[1]+d.y-p.y,o[0]+a[l][1],o[1]+a[l][2],o[0]+a[l][3],o[1]+a[l][4])}}else r=new R(o[0],o[1],o[0],o[1],o[0]+a[l][1],o[1]+a[l][2],o[0]+a[l][3],o[1]+a[l][4]);r&&(this.length+=r.getTotalLength(),o=[a[l][3]+o[0],a[l][4]+o[1]],this.functions.push(r))}else if("Q"===a[l][0]){if(o[0]===a[l][1]&&o[1]===a[l][2]){var f=new L(a[l][1],a[l][3],a[l][2],a[l][4]);this.length+=f.getTotalLength(),this.functions.push(f)}else r=new R(o[0],o[1],a[l][1],a[l][2],a[l][3],a[l][4],void 0,void 0),this.length+=r.getTotalLength(),this.functions.push(r);o=[a[l][3],a[l][4]],s=[a[l][1],a[l][2]]}else if("q"===a[l][0]){if(0!==a[l][1]||0!==a[l][2])r=new R(o[0],o[1],o[0]+a[l][1],o[1]+a[l][2],o[0]+a[l][3],o[1]+a[l][4],void 0,void 0),this.length+=r.getTotalLength(),this.functions.push(r);else{var g=new L(o[0]+a[l][1],o[0]+a[l][3],o[1]+a[l][2],o[1]+a[l][4]);this.length+=g.getTotalLength(),this.functions.push(g)}s=[o[0]+a[l][1],o[1]+a[l][2]],o=[a[l][3]+o[0],a[l][4]+o[1]]}else if("T"===a[l][0]){if(l>0&&["Q","q","T","t"].indexOf(a[l-1][0])>-1)r=new R(o[0],o[1],2*o[0]-s[0],2*o[1]-s[1],a[l][1],a[l][2],void 0,void 0),this.functions.push(r),this.length+=r.getTotalLength();else{var v=new L(o[0],a[l][1],o[1],a[l][2]);this.functions.push(v),this.length+=v.getTotalLength()}s=[2*o[0]-s[0],2*o[1]-s[1]],o=[a[l][1],a[l][2]]}else if("t"===a[l][0]){if(l>0&&["Q","q","T","t"].indexOf(a[l-1][0])>-1)r=new R(o[0],o[1],2*o[0]-s[0],2*o[1]-s[1],o[0]+a[l][1],o[1]+a[l][2],void 0,void 0),this.length+=r.getTotalLength(),this.functions.push(r);else{var y=new L(o[0],o[0]+a[l][1],o[1],o[1]+a[l][2]);this.length+=y.getTotalLength(),this.functions.push(y)}s=[2*o[0]-s[0],2*o[1]-s[1]],o=[a[l][1]+o[0],a[l][2]+o[0]]}else if("A"===a[l][0]){var m=new c(o[0],o[1],a[l][1],a[l][2],a[l][3],1===a[l][4],1===a[l][5],a[l][6],a[l][7]);this.length+=m.getTotalLength(),o=[a[l][6],a[l][7]],this.functions.push(m)}else if("a"===a[l][0]){var E=new c(o[0],o[1],a[l][1],a[l][2],a[l][3],1===a[l][4],1===a[l][5],o[0]+a[l][6],o[1]+a[l][7]);this.length+=E.getTotalLength(),o=[o[0]+a[l][6],o[1]+a[l][7]],this.functions.push(E)}this.partialLengths.push(this.length)}},U=function(){function e(){i()(this,e)}return o()(e,null,[{key:"convertPolygonPointsNodeToPathNode",value:function(e){for(var t=document.createElementNS(s.a.SVG,"path"),n=this.getCoordinatePoints(e.getAttribute("points")),r="M",i=n.length,a=0;a<i-1;a++){var o=n[a];r+="".concat(o.x," ").concat(o.y,"L")}var u=n[i-1];r+="".concat(u.x," ").concat(u.y,"Z"),t.setAttribute("d","".concat(r));var c=!0,l=!1,h=void 0;try{for(var p,d=e.attributes[Symbol.iterator]();!(c=(p=d.next()).done);c=!0){var f=p.value;"points"!==f.name&&t.setAttribute(f.name,f.value)}}catch(e){l=!0,h=e}finally{try{c||null==d.return||d.return()}finally{if(l)throw h}}return t}},{key:"getCoordinatePoints",value:function(e){for(var t,n,r,i,a=[],o=e.slice().split(" "),s=0;s<o.length;s++){var c=o[s].split(",");if(1===c.length){if(!c[0])continue;t?(i=Number(c[0]),n=!0):(r=Number(c[0]),t=!0)}else{if(2!==c.length)continue;t||(r=Number(c[0]),t=!0),null==c[1]||""===c[1]?(i=Number(c[0]),n=!0):(i=Number(c[1]),n=!0)}t&&n&&(a.push(new u.a(r,i)),r=0,i=0,t=!1,n=!1)}return a}},{key:"getVectorPointsBySize",value:function(t,n,r,i,a){if(!t||!t.querySelector("polygon")||i<=0||a<=0)return new Array;var o=t.getAttribute("viewBox"),s=1,u=1;if(o){var c=o.split(" ");s=i/Number(c[2]),u=a/Number(c[3])}var l=t.querySelector("polygon"),h=e.getCoordinatePoints(l.getAttribute("points"));return h.forEach(function(e){e.x=e.x*s+n,e.y=e.y*u+r}),h}},{key:"convertPathStringToPolygonElement",value:function(e,t){for(var n=new B(e),r=t<100?.1:1,i="",a=0;a<n.getTotalLength();a+=r){var o=n.getPointAtLength(a),u="".concat(o.x," ").concat(o.y," ");i=i.concat(u)}var c=document.createElementNS(s.a.SVG,"polygon");return c.setAttribute("points",i),c}},{key:"changePathToPolygonInSvg",value:function(e){var t=e.querySelector("path");if(!t||!t.getAttribute("d"))return e;var n=e.getAttribute("viewBox").split(" "),r=this.convertPathStringToPolygonElement(t.getAttribute("d"),Math.max(Number(n[2]),Number(n[3])));return t.parentElement.removeChild(t),e.appendChild(r),e}}]),e}();t.a=U},function(e,t,n){"use strict";var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(6),u=n.n(s),c=n(14),l=n.n(c),h=n(3),p=n.n(h),d=n(9),f=n.n(d),g=n(7),v=n.n(g),y=n(11),m=function(e){function t(e,n){var r;return i()(this,t),(r=u()(this,p()(t).call(this,e,n))).item=e,r}return v()(t,e),o()(t,[{key:"initSvgElementAttrs",value:function(){f()(p()(t.prototype),"initSvgElementAttrs",this).call(this),this.svgElement.setAttribute("preserveAspectRatio","none"),this.svgElement.setAttribute("width","100%"),this.svgElement.setAttribute("height","100%")}},{key:"clone",value:function(){return new t(this.item,this.originElement.cloneNode(!0))}},{key:"isInitRenderDatas",value:function(){return!1}},{key:"renderView",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];f()(p()(t.prototype),"renderView",this).call(this,e,n),n&&(this.svgElement.setAttribute("width","".concat(this.item.getWidth()*e,"px")),this.svgElement.setAttribute("height","".concat(this.item.getHeight()*e,"px")))}}]),t}(n(339).a),E=n(249),k=n(235),S=n(281),I=n(228),T=n(268);n.d(t,"a",function(){return b});var b=function(e){function t(e,n,r){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=arguments.length>5&&void 0!==arguments[5]&&arguments[5],h=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],d=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],f=!(arguments.length>8&&void 0!==arguments[8])||arguments[8],g=!(arguments.length>9&&void 0!==arguments[9])||arguments[9];i()(this,t),(a=u()(this,p()(t).call(this,e,n,r,I.e,o,s,c,h,d,f,g))).svgData=n,a.scaleX=r.width/a.data.width,a.scaleY=r.height/a.data.height,a.props.setChangePositionSetRevision(!1);var v=a.data.svg;return E.a.makeUnicornSvgElement(v,a.svgUniqueKey),a.svgElements=new m(l()(a),v),a}return v()(t,e),o()(t,[{key:"makeProps",value:function(){return new S.b}},{key:"getItemType",value:function(){return k.b.SVG_BASIC}},{key:"isPrivateItem",value:function(){return!0}},{key:"clone",value:function(){var e=new t(y.b.random(),this.svgData,this.props.getBoundingBox(),this.props.getRotate(),this.props.isFlipH(),this.props.isFlipV(),this.props.isCanUserSelect(),this.props.isCanUserMove(),this.props.isCanUserResize(),this.props.isCanUserDel());return e.setProps(this.props.clone()),e.updateColor(),e.svgScale=this.svgScale,this.setCloneItemDefaultAttr(e),e}},{key:"scale",value:function(e){return f()(p()(t.prototype),"scale",this).call(this,e),this.scaleX*=e,this.scaleY*=e,this}},{key:"setLTRBCoordinate",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0;f()(p()(t.prototype),"setLTRBCoordinate",this).call(this,e,n,r),this.scaleX=(e.right-e.left)/this.data.width,this.scaleY=(e.bottom-e.top)/this.data.height}},{key:"getHeaderTitle",value:function(){return"SVG"}},{key:"getDisabledResourcePreviewKey",value:function(){return I.a.DISABLED_ORIGIN_USER_RESOURCE}}]),t}(T.a)},function(e,t,n){"use strict";var r=n(2),i=n.n(r),a=n(4),o=n.n(a),s=n(0),u=n.n(s),c=n(1),l=n.n(c),h=n(6),p=n.n(h),d=n(3),f=n.n(d),g=n(7),v=n.n(g),y=n(29),m=n(227),E=n(516),k=n(302),S=function(e){function t(){var e,n;u()(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=p()(this,(e=f()(t)).call.apply(e,[this].concat(i)))).resourceStyleTypesToLoad=[k.c.STYLE_IMAGE_FILTER,k.c.STYLE_IMAGE_GRADATION,k.c.STYLE_TEXT_FONT_FAMILY,k.c.STYLE_TEXT_GRADATION],n.resourceStylesMap=new Map,n.adminResourceStylesMap=new Map,n}var n,r,a,s,c,h;return v()(t,e),l()(t,[{key:"fetchAllResourceStylesMap",value:(h=o()(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={typeList:this.resourceStyleTypesToLoad,hasResource:!0,paging:!1,status:k.b.ACITVE},e.next=3,E.a.fetchResourceStyleMap(t);case 3:return this.resourceStylesMap=e.sent,t.status=k.b.ADMIN,e.next=7,E.a.fetchResourceStyleMap(t);case 7:this.adminResourceStylesMap=e.sent;case 8:case"end":return e.stop()}},e,this)})),function(){return h.apply(this,arguments)})},{key:"getResourceStyles",value:function(e){var t=this.resourceStylesMap.get(e)||[];return m.a.getUserSetting().adminMode?t.concat(this.adminResourceStylesMap.get(e)):t}},{key:"createResourceStyle",value:(c=o()(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.createResourceStyle(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),function(e){return c.apply(this,arguments)})},{key:"updateResourceStyle",value:(s=o()(i.a.mark(function e(t,n){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.updateResourceStyle(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),function(e,t){return s.apply(this,arguments)})},{key:"deleteResourceStyle",value:(a=o()(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.deleteResourceStyle(t);case 2:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)})},{key:"fetchResourceStyleList",value:(r=o()(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.fetchResourceStyleList(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)})},{key:"fetchResourceStyle",value:(n=o()(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.fetchResourceStyle(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})}]),t}(y.a);t.a=new S},,,,function(e,t,n){"use strict";n(525);var r=n(114);n.d(t,"c",function(){return r.plainToClass}),n.d(t,"a",function(){return r.Transform}),n.d(t,"b",function(){return r.Type})},function(e,t,n){"use strict";n.d(t,"c",function(){return S}),n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i});var r,i,a,o,s=n(0),u=n.n(s),c=n(1),l=n.n(c),h=n(6),p=n.n(h),d=n(3),f=n.n(d),g=n(9),v=n.n(g),y=n(7),m=n.n(y),E=n(263),k=n(110),S=function(e){function t(){var e;return u()(this,t),(e=p()(this,f()(t).call(this))).changeImage=!0,e.preset="",e.photoKey="",e.smileCanvasOriginImgWidth=0,e.smileCanvasOriginImgHeight=0,e.intensity=0,e.brightness=0,e.contrast=0,e.lightness=0,e.saturation=0,e.tint=0,e.colorTone=0,e.temperature=0,e.blur=0,e.vignette=0,e.solidLine={active:!1,color:i.RGB.valueOf(),alpha:i.NUMBER.valueOf(),thickness:i.NUMBER.valueOf()},e.bitmapMask={active:!1,bitmapId:""},e.stickerFrame={active:!1,stickerId:""},e.gradationMask={active:!1,direction:r.NONE,depth:i.NUMBER.valueOf()},e.shadow={active:!1,color:i.RGB.valueOf(),angle:i.NUMBER.valueOf(),alpha:i.NUMBER.valueOf(),distance:i.NUMBER.valueOf(),blur:i.NUMBER.valueOf()},e.setDefault(),e}return m()(t,e),l()(t,[{key:"setDefault",value:function(){this.setGradationMaskDirection("T"),this.setGradationMaskDepth(65)}},{key:"getChangeImage",value:function(){return this.changeImage}},{key:"setChangeImage",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.changeImage=e}},{key:"getPreset",value:function(){return this.preset}},{key:"setPreset",value:function(e){this.preset!==e&&this.updateRevision(),this.preset=e}},{key:"getPhotoKey",value:function(){return this.photoKey}},{key:"setPhotoKey",value:function(e){var t=""+e;this.photoKey!==t&&(this.updateRevision(),this.setChangeImage()),this.photoKey=t}},{key:"getItemRotate",value:function(){return this.itemRotate}},{key:"setItemRotate",value:function(e){this.itemRotate!==Number(e)&&this.updateRevision(),this.itemRotate=Number(e)}},{key:"getSmileCanvasOriginImgSize",value:function(){return new k.a(this.smileCanvasOriginImgWidth,this.smileCanvasOriginImgHeight)}},{key:"getSmileCanvasOriginImgWidth",value:function(){return this.smileCanvasOriginImgWidth}},{key:"setSmileCanvasOriginImgWidth",value:function(e){this.smileCanvasOriginImgWidth=e}},{key:"getSmileCanvasOriginImgHeight",value:function(){return this.smileCanvasOriginImgHeight}},{key:"setSmileCanvasOriginImgHeight",value:function(e){this.smileCanvasOriginImgHeight=e}},{key:"getColorEffect",value:function(){return this.colorEffect}},{key:"setColorEffect",value:function(e){this.colorEffect!==e&&this.updateRevision(),this.colorEffect=e}},{key:"getIntensity",value:function(){return this.intensity}},{key:"setIntensity",value:function(e){this.intensity!==Number(e)&&this.updateRevision(),this.intensity=Number(e)}},{key:"getBrightness",value:function(){return this.brightness}},{key:"setBrightness",value:function(e){this.brightness!==Number(e)&&this.updateRevision(),this.brightness=Number(e)}},{key:"getContrast",value:function(){return this.contrast}},{key:"setContrast",value:function(e){this.contrast!==Number(e)&&this.updateRevision(),this.contrast=Number(e)}},{key:"getLightness",value:function(){return this.lightness}},{key:"setLightness",value:function(e){this.lightness!==Number(e)&&this.updateRevision(),this.lightness=Number(e)}},{key:"getSaturation",value:function(){return this.saturation}},{key:"setSaturation",value:function(e){this.saturation!==Number(e)&&this.updateRevision(),this.saturation=Number(e)}},{key:"getTint",value:function(){return this.tint}},{key:"setTint",value:function(e){this.tint!==Number(e)&&this.updateRevision(),this.tint=Number(e)}},{key:"getColorTone",value:function(){return this.colorTone}},{key:"setColorTone",value:function(e){this.colorTone!==Number(e)&&this.updateRevision(),this.colorTone=Number(e)}},{key:"getTemperature",value:function(){return this.temperature}},{key:"setTemperature",value:function(e){this.temperature!==Number(e)&&this.updateRevision(),this.temperature=Number(e)}},{key:"getBlur",value:function(){return this.blur}},{key:"setBlur",value:function(e){this.blur!==Number(e)&&this.updateRevision(),this.blur=Number(e)}},{key:"getVignette",value:function(){return this.vignette}},{key:"setVignette",value:function(e){this.vignette!==Number(e)&&this.updateRevision(),this.vignette=Number(e)}},{key:"isFilterValuesAllDefault",value:function(){return 0===this.brightness&&0===this.contrast&&0===this.lightness&&0===this.saturation&&0===this.blur&&0===this.vignette&&0===this.colorTone&&0===this.temperature}},{key:"isActiveSolidLine",value:function(){return this.solidLine.active}},{key:"isActiveBitmapMask",value:function(){return this.bitmapMask.active}},{key:"isActiveStickerFrame",value:function(){return this.stickerFrame.active}},{key:"isActiveGradationMask",value:function(){return this.gradationMask.active}},{key:"isActiveShadow",value:function(){return this.shadow.active}},{key:"isCanActiveShadow",value:function(){return!0}},{key:"setGroupActiveOff",value:function(e){this.updateRevision(),!0===e&&(this.solidLine.active=!1,this.bitmapMask.active=!1,this.gradationMask.active=!1,this.stickerFrame.active=!1)}},{key:"setActiveSolidLine",value:function(e){this.setGroupActiveOff(e),this.solidLine.active=!0===e}},{key:"setActiveBitmapMask",value:function(e){this.setGroupActiveOff(e),this.bitmapMask.active=!0===e}},{key:"setActiveStickerFrame",value:function(e){this.setGroupActiveOff(e),this.stickerFrame.active=!0===e}},{key:"setActiveGradationMask",value:function(e){this.setGroupActiveOff(e),this.gradationMask.active=!0===e}},{key:"setActiveShadow",value:function(e){this.shadow.active!==e&&this.updateRevision(),this.shadow.active=!0===e}},{key:"getSolidLineColor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e||this.solidLine.active?this.solidLine.color:i.RGB}},{key:"setSolidLineColor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t){this.updateRevision();var n=E.a.parseColorString(e);this.solidLine.color=n.rgb,this.solidLine.alpha=n.alpha}else this.solidLine.color!==e&&this.updateRevision(),this.solidLine.color=e}},{key:"getSolidLineThickness",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e||this.solidLine.active?this.solidLine.thickness:i.NUMBER}},{key:"setSolidLineThickness",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.solidLine.thickness!==Number(e)&&this.updateRevision(),this.solidLine.thickness=Number(e)}},{key:"getSolidLineAlpha",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e||this.solidLine.active?this.solidLine.alpha:i.NUMBER}},{key:"setSolidLineAlpha",value:function(e){this.solidLine.alpha!==Number(e)&&this.updateRevision(),this.solidLine.alpha=Number(e)}},{key:"getBitmapMaskBitmapId",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e||this.bitmapMask.active?this.bitmapMask.bitmapId:""}},{key:"setBitmapMaskBitmapId",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.bitmapMask.bitmapId!==e&&this.updateRevision(),this.bitmapMask.bitmapId=e}},{key:"getStickerFrameStickerId",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e||this.stickerFrame.active?this.stickerFrame.stickerId:""}},{key:"setStickerFrameStickerId",value:function(e){this.stickerFrame.stickerId!==e&&this.updateRevision(),this.stickerFrame.stickerId=e}},{key:"getGradationMaskDirection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e||this.gradationMask.active?this.gradationMask.direction:""}},{key:"setGradationMaskDirection",value:function(e){this.gradationMask.direction!==e&&this.updateRevision(),this.gradationMask.direction=e}},{key:"getGradationMaskDepth",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e||this.gradationMask.active?this.gradationMask.depth:i.NUMBER}},{key:"setGradationMaskDepth",value:function(e){this.gradationMask.depth!==Number(e)&&this.updateRevision(),this.gradationMask.depth=Number(e)}},{key:"getShadowColor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e||this.shadow.active?this.shadow.color:i.RGB}},{key:"setShadowColor",value:function(e){this.shadow.color!==e&&this.updateRevision(),this.shadow.color=e}},{key:"getShadowAngle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e||this.shadow.active?this.shadow.angle:i.NUMBER}},{key:"setShadowAngle",value:function(e){this.shadow.angle!==Number(e)&&this.updateRevision(),this.shadow.angle=Number(e)}},{key:"getShadowAlpha",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e||this.shadow.active?this.shadow.alpha:i.NUMBER}},{key:"setShadowAlpha",value:function(e){this.shadow.alpha!==Number(e)&&this.updateRevision(),this.shadow.alpha=Number(e)}},{key:"getShadowDistance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e||this.shadow.active?this.shadow.distance:i.NUMBER}},{key:"setShadowDistance",value:function(e){this.shadow.distance!==Number(e)&&this.updateRevision(),this.shadow.distance=Number(e)}},{key:"getShadowBlur",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e||this.shadow.active?this.shadow.blur:i.NUMBER}},{key:"setShadowBlur",value:function(e){this.shadow.blur!==Number(e)&&this.updateRevision(),this.shadow.blur=Number(e)}},{key:"setFramePhotoType",value:function(e){switch(this.updateRevision(),e){case o.SOLID_LINE:return void(this.solidLine.active=!0);case o.BITMAP_MASK:return void(this.bitmapMask.active=!0);case o.GRADATION:return void(this.gradationMask.active=!0);case o.STICKER_FRAME:return void(this.stickerFrame.active=!0);case o.SHADOW:return void(this.shadow.active=!0)}}},{key:"getFramePhotoType",value:function(){return this.solidLine.active?o.SOLID_LINE:this.bitmapMask.active?o.BITMAP_MASK:this.gradationMask.active?o.GRADATION:this.stickerFrame.active?o.STICKER_FRAME:this.shadow.active?o.SHADOW:o.NONE}},{key:"makeClone",value:function(){return new t}},{key:"setBitmapMaskPresetKey",value:function(e){this.bitmapMask.presetKey=e}},{key:"getBitmapMaskPresetKey",value:function(){return this.bitmapMask.presetKey}},{key:"setStickerFramePresetKey",value:function(e){this.stickerFrame.presetKey=e}},{key:"getStickerFramePresetKey",value:function(){return this.stickerFrame.presetKey}},{key:"setSolidLinePresetKey",value:function(e){this.solidLine.presetKey=e}},{key:"getSolidLinePresetKey",value:function(){return this.solidLine.presetKey}},{key:"setGradationMaskPresetKey",value:function(e){this.gradationMask.presetKey=e}},{key:"getGradationMaskPresetKey",value:function(){return this.gradationMask.presetKey}},{key:"setShadowPresetKey",value:function(e){this.shadow.presetKey=e}},{key:"getShadowPresetKey",value:function(){return this.shadow.presetKey}},{key:"clear",value:function(){v()(f()(t.prototype),"clear",this).call(this),this.itemRotate=0,this.preset="",this.intensity=0,this.brightness=0,this.contrast=0,this.lightness=0,this.saturation=0,this.blur=0,this.vignette=0,this.temperature=0,this.colorTone=0,this.solidLine.active=!1,this.solidLine.alpha=255,this.solidLine.color="",this.solidLine.thickness=1,this.bitmapMask.active=!1,this.bitmapMask.bitmapId="",this.gradationMask.active=!1,this.gradationMask.depth=1,this.gradationMask.direction=r.L,this.shadow.active=!1,this.shadow.color="#000000",this.shadow.angle=0,this.shadow.alpha=255,this.shadow.distance=0,this.shadow.blur=0,this.updateRevision()}}]),t}(E.a);!function(e){e.NONE="",e.L="L",e.R="R",e.T="T",e.B="B"}(r||(r={})),function(e){e.RGB="#000000",e[e.NUMBER=0]="NUMBER"}(i||(i={})),function(e){e.COLOR="color",e.GRAY="gray",e.NONE="none"}(a||(a={})),function(e){e.NONE="none",e.SOLID_LINE="solid_line",e.BITMAP_MASK="bitmap_mask",e.GRADATION="gradation",e.STICKER_FRAME="sticker",e.SHADOW="shadow"}(o||(o={}))},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=function(){function e(t,n){i()(this,e),t=t||"#000000",this.readValue(t),this._alpha=n||this._alpha}return o()(e,null,[{key:"parseRGBAColorSet",value:function(e,t){var n=t.toString(16).toUpperCase(),r="";"rgb"===e.substring(1,3)?(e=(e=(e=e.replace("rgb(","")).replace(")","")).replace(")","")).split(",").forEach(function(e){r+=Number(e.trim()).toString(16).toUpperCase()}):r=e.substring(1);return n+r.toUpperCase()}}]),o()(e,[{key:"getHex",value:function(e){var t=e.toString(16);return 1===t.length?"0"+t:t}},{key:"toString",value:function(){return(this.rgb+this.getHex(this._alpha)).toUpperCase()}},{key:"toRGB",value:function(){return 255===this._alpha?"rgb(".concat(this._r,", ").concat(this._g,", ").concat(this._b,")"):"rgba(".concat(this._r,", ").concat(this._g,", ").concat(this._b,", ").concat(this.alpha/255,")")}},{key:"readValue",value:function(e){if("string"!=typeof e){if("number"==typeof e&&0===e)return this._alpha=0,this._r=0,this._g=0,void(this._b=0);this._r=0,this._g=0,this._b=0,this._alpha=255}else if(e.startsWith("rgba")){var t=e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/);this._r=parseInt(t[1]),this._g=parseInt(t[2]),this._b=parseInt(t[3]),this._alpha=255*parseFloat(t[4])}else if(e.startsWith("rgb")){var n=e.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i);this._r=parseInt(n[1]),this._g=parseInt(n[2]),this._b=parseInt(n[3]),this._alpha=255}else switch(e.length){case 6:this._r=parseInt(e.substr(0,2),16),this._g=parseInt(e.substr(2,2),16),this._b=parseInt(e.substr(4,2),16),this._alpha=255;break;case 7:this._r=parseInt(e.substr(1,2),16),this._g=parseInt(e.substr(3,2),16),this._b=parseInt(e.substr(5,2),16),this._alpha=255;break;case 8:this._alpha=parseInt(e.substr(0,2),16),this._r=parseInt(e.substr(2,2),16),this._g=parseInt(e.substr(4,2),16),this._b=parseInt(e.substr(6,2),16);break;case 9:this._r=parseInt(e.substr(1,2),16),this._g=parseInt(e.substr(3,2),16),this._b=parseInt(e.substr(5,2),16),this._alpha=parseInt(e.substr(7,2),16);break;default:this._r=0,this._g=0,this._b=0,this._alpha=255}}},{key:"rgb",get:function(){return"#"+(this.getHex(this._r)+this.getHex(this._g)+this.getHex(this._b))}},{key:"alpha",get:function(){return this._alpha},set:function(e){this._alpha=e}}]),e}()},,function(e,t,n){"use strict";var r=n(2),i=n.n(r),a=n(4),o=n.n(a),s=n(0),u=n.n(s),c=n(1),l=n.n(c),h=n(86),p=n(230),d=n(317),f=n(329),g=n(448),v=n(464),y=n(225),m=n(224),E=n(16),k=n(12),S=n(43),I=n(110),T=n(253),b=n(74),w=function(){function e(){u()(this,e),this.MAX_DESIGN_CNT=999}var t,n,r,a,s,c;return l()(e,[{key:"fetchDesignProject",value:(c=o()(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==this.designProject&&this.designProject.idx===t){e.next=12;break}return this.designProject=void 0,e.prev=2,e.next=5,g.a.getDesignProject(t);case 5:this.designProject=e.sent,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),alert("디자인 프로젝트 로드 실패"),console.error(e.t0);case 12:return e.abrupt("return",this.designProject);case 13:case"end":return e.stop()}},e,this,[[2,8]])})),function(e){return c.apply(this,arguments)})},{key:"reset",value:function(){this.designProject=void 0}},{key:"getDesignProject",value:function(){return this.designProject}},{key:"getDesignDC",value:(s=o()(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!this.designProject||this.designProject.hasDesign()){e.next=7;break}return e.next=4,this.addDesign();case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0=this.designProject.getDesign(0);case 8:return t=e.t0,e.abrupt("return",this.makeDesignDC(t));case 12:return e.prev=12,e.t1=e.catch(0),console.error(e.t1),this.designProject=void 0,e.abrupt("return",d.a.makeDesignDC());case 17:case"end":return e.stop()}},e,this,[[0,12]])})),function(){return s.apply(this,arguments)})},{key:"addDesign",value:(a=o()(i.a.mark(function e(t,n){var r,a,o,s,u,c=arguments;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]?c[2]:-1,a=new v.a,o=t?t.getPixelLimitMax(f.a.getMaxSheetSize(!1)):new I.a(f.a.DEFAULT_PAGE_SIZE,f.a.DEFAULT_PAGE_SIZE),f.c.setBlank(a,o,n),t||(t=new S.a(o.width,o.height,E.a.PX,S.a.DEFAULT_DPI)),e.next=7,T.a.makeSaveParam({designDoc:a,categoryIdx:0,title:b.a.getDefaultTitle(),pageSize:t});case 7:return s=e.sent,e.next=10,g.a.createDesign(this.designProject.idx,s,r,k.a.getUser().accountId);case 10:return u=e.sent,this.designProject.insertDesign(u,r),e.abrupt("return",u);case 13:case"end":return e.stop()}},e,this)})),function(e,t){return a.apply(this,arguments)})},{key:"makeDesignDC",value:function(e){return d.a.makeDesignDC({repositoryType:h.a.UNICORN,resourceType:p.a.DESIGN,idx:e.idx,designProjectIdx:this.designProject.idx})}},{key:"copyDesign",value:(r=o()(i.a.mark(function e(t){var n,r,a,o,s,u,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=0,a=!0,o=!1,s=void 0,e.prev=4,u=this.designProject.designList[Symbol.iterator]();case 6:if(a=(c=u.next()).done){e.next=17;break}if(c.value.idx!==t){e.next=13;break}return e.next=11,g.a.copyDesign(this.designProject.idx,t,k.a.getUser().accountId);case 11:return n=e.sent,e.abrupt("break",17);case 13:r++;case 14:a=!0,e.next=6;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(4),o=!0,s=e.t0;case 23:e.prev=23,e.prev=24,a||null==u.return||u.return();case 26:if(e.prev=26,!o){e.next=29;break}throw s;case 29:return e.finish(26);case 30:return e.finish(23);case 31:if(n){e.next=33;break}throw new Error("복사 실패");case 33:return this.designProject.insertDesign(n,r+1),e.abrupt("return",n);case 35:case"end":return e.stop()}},e,this,[[4,19,23,31],[24,,26,30]])})),function(e){return r.apply(this,arguments)})},{key:"deleteDesign",value:(n=o()(i.a.mark(function e(t){var n,r,a,o,s,u;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=0,r=!0,a=!1,o=void 0,e.prev=4,s=this.designProject.designList[Symbol.iterator]();case 6:if(r=(u=s.next()).done){e.next=17;break}if(u.value.idx!==t){e.next=13;break}return e.next=11,g.a.deleteDesign(this.designProject.idx,t);case 11:return this.designProject.deleteDesign(n),e.abrupt("break",17);case 13:n++;case 14:r=!0,e.next=6;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(4),a=!0,o=e.t0;case 23:e.prev=23,e.prev=24,r||null==s.return||s.return();case 26:if(e.prev=26,!a){e.next=29;break}throw o;case 29:return e.finish(26);case 30:return e.finish(23);case 31:case"end":return e.stop()}},e,this,[[4,19,23,31],[24,,26,30]])})),function(e){return n.apply(this,arguments)})},{key:"updateDesignData",value:function(e){var t=0,n=!0,r=!1,i=void 0;try{for(var a,o=this.designProject.designList[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){if(a.value.idx===e.idx){this.designProject.designList.splice(t,1,e);break}t++}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}y.a.instance.dispatch(new m.c(function(e,t,n){return n.renderDesignProjectMenu(t)}))}},{key:"updateDesignProject",value:(t=o()(i.a.mark(function e(t,n){var r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.updateDesignProject(t,n);case 2:return r=e.sent,this.designProject=r,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)})),function(e,n){return t.apply(this,arguments)})}]),e}();t.a=new w},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(8),u=n(236),c=n(10),l=n(226),h=function(){function e(){i()(this,e)}return o()(e,[{key:"makeElement",value:function(){var t=this,n=this.element=document.createElement("div");n.id=e.ID,n.addEventListener("click",function(e){e.stopPropagation(),l.a.instance.editorMainVC.leftBarVC.setActive(!0),u.a.selectBackgroundItem(!1),t.hide()});var r=document.createElement("div");r.className="label",r.innerText="배경 편집",n.appendChild(r),Object(c.setToolsIcon)(n,c.ToolsIcon.PENCIL)}},{key:"hide",value:function(){this.element&&this.element.classList.remove(s.a.ACTIVE)}},{key:"show",value:function(){this.element||this.makeElement(),this.element.classList.add(s.a.ACTIVE)}}],[{key:"getElement",value:function(){var t=e.instance;return t.element||t.makeElement(),t.element}}]),e}();h.instance=new h,h.ID="showBackgroundTools"},function(e,t,n){"use strict";var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(6),u=n.n(s),c=n(3),l=n.n(c),h=n(7),p=n.n(h),d=n(29),f=n(233),g=n(236),v=function(e){function t(){var e,n;i()(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=u()(this,(e=l()(t)).call.apply(e,[this].concat(a))))._isMultiSelectMode=!1,n._itemCount=0,n}return p()(t,e),o()(t,[{key:"setMultiSelectMode",value:function(e){return this._isMultiSelectMode===e?this:(this._isMultiSelectMode=e,this.onChangeValue(),this)}},{key:"setItemCount",value:function(e){return this._itemCount===e?this:(this._itemCount=e,this.onChangeValue(),this)}},{key:"updateStateByActiveItems",value:function(){if(this.isMultiSelectMode()){var e=f.b.convertSinglesToItems(g.a.getSelectedItemsWithoutBackgroundItem()).length;e<1&&(this._isMultiSelectMode=!1),this.setItemCount(e)}}},{key:"isMultiSelectMode",value:function(){return this._isMultiSelectMode}},{key:"setListener",value:function(e){this.listener=e,this.onChangeValue()}},{key:"onChangeValue",value:function(){this.listener&&this.listener.onChangeState(this._isMultiSelectMode,this._itemCount)}}]),t}(d.a);t.a=new v},function(e,t,n){"use strict";n.d(t,"a",function(){return m}),n.d(t,"b",function(){return E});var r=n(2),i=n.n(r),a=n(4),o=n.n(a),s=n(0),u=n.n(s),c=n(1),l=n.n(c),h=n(11),p=n(230),d=n(166),f=n(328),g=n(298),v=n(280),y=function(){function e(){u()(this,e)}return l()(e,[{key:"makeThumbnail",value:function(e,t){var n=g.a.getImageElementWithReplaceableThumbnail();return this.setThumbnail(e,t,n),n}},{key:"setThumbnail",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=v.a.createPhotoKey(e);if(d.b.hasData(i)){var a=d.b.getData(i).src;r?n.src=a:n.dataset.src=a}else r?n.src=t:n.dataset.src=t}}]),e}(),m=function(){function e(){u()(this,e)}var t,n;return l()(e,[{key:"makeThumbnail",value:function(e,t){var n=g.a.getImageElementWithReplaceableThumbnail();return this.setThumbnail(e,t,n),n}},{key:"setThumbnail",value:function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e.svgThumbMap.has(t)){var a=e.svgThumbMap.get(t);i?r.src=a:r.dataset.src=a}else e.getSvgThumbUrl(n).then(function(n){i?r.src=n:r.dataset.src=n,e.svgThumbMap.set(t,n)})}}],[{key:"setSvgThumbnailData",value:(n=o()(i.a.mark(function e(t,n){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.svgThumbMap.has(t)){e.next=2;break}return e.abrupt("return");case 2:return e.t0=this.svgThumbMap,e.t1=t,e.next=6,this.getSvgThumbUrl(n);case 6:e.t2=e.sent,e.t0.set.call(e.t0,e.t1,e.t2);case 8:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})},{key:"getSvgThumbUrl",value:(t=o()(i.a.mark(function e(t){var n,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.get(t);case 2:return n=e.sent,r=(new XMLSerializer).serializeToString(n.documentElement),e.abrupt("return","data:image/svg+xml;base64,"+h.b.b64EncodeUnicode(r));case 5:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})},{key:"addToThumbnailMap",value:function(e,t){this.svgThumbMap.has(e)||this.svgThumbMap.set(e,t)}}]),e}();m.svgThumbMap=new Map;var E=function(){function e(){u()(this,e)}return l()(e,[{key:"thumbnailMaker",value:function(e){return e===f.a.USER_SVG||e===f.a.SVG||e===p.a.SVG?new m:e===f.a.USER_IMAGE||p.a.PHOTO?new y:void 0}}]),e}();E.instance=new E},function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"a",function(){return l});var r=n(1),i=n.n(r),a=n(0),o=n.n(a),s=n(86),u=n(230),c=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];o()(this,e),this.type=t,this.idxList=n},l=function(){function e(){o()(this,e)}return i()(e,null,[{key:"getDesignBasis",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];switch(t){case s.a.UNICORN:return{repositoryType:t,idx:parseInt(e),resourceType:n?u.a.TEMPLATE:u.a.DESIGN};case s.a.BIZHOWS:case s.a.SMILECAT:var r={repositoryType:t,pkName:"",copyIdx:0,code1:0,code2:0,code3:0},i=parseInt(e);return isNaN(i)||i<=0?r.pkName=e:r.copyIdx=i,r;default:return null}}}]),e}()},,,,,,,,,,,,function(e,t,n){"use strict";var r=n(2),i=n.n(r),a=n(4),o=n.n(a),s=n(0),u=n.n(s),c=n(1),l=n.n(c),h=n(6),p=n.n(h),d=n(3),f=n.n(d),g=n(9),v=n.n(g),y=n(7),m=n.n(y),E=n(228),k=function(e){function t(){return u()(this,t),p()(this,f()(t).apply(this,arguments))}return m()(t,e),l()(t,[{key:"makeClone",value:function(){return new t}}]),t}(n(263).a),S=n(235),I=n(230),T=n(411),b=n(449),w=n(240),A=n(110),C=n(304),x=function(e){function t(){return u()(this,t),p()(this,f()(t).apply(this,arguments))}var n,r;return m()(t,e),l()(t,[{key:"rasterizeSingleItem",value:(r=o()(i.a.mark(function e(t,n){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isResourceLoadFail){e.next=4;break}return e.next=3,this.rasterizeResourceLoadFail(t,n);case 3:return e.abrupt("return");case 4:return t.save(),t.globalAlpha=this.props.getOpacity()/255,e.t0=t,e.next=9,b.a.fetchThumbnailResource(this.props.youtubeId);case 9:e.t1=e.sent,e.t2=t.canvas.width,e.t3=t.canvas.height,e.t0.drawImage.call(e.t0,e.t1,0,0,e.t2,e.t3),t.restore();case 14:case"end":return e.stop()}},e,this)})),function(e,t){return r.apply(this,arguments)})},{key:"rasterizeToPage",value:(n=o()(i.a.mark(function e(t,n){var r,a,o,s,u,c,l,h,p,d,f;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.getCanvasPosData(n),a=r.width,o=r.height,s=r.contentLeft,u=r.contentTop,c=r.offsetX,l=r.offsetY,h=1,(p=Math.max(a,o))>C.a.MAX_CANVAS_SIZE&&(h=C.a.MAX_CANVAS_SIZE/p),d=w.a.createCanvas(new A.a(a,o,h)),f=d.getContext("2d"),e.next=8,this.drawItemCtx(f,Math.round((-s+c)*h),Math.round((-u+l)*h),n*h);case 8:t.save(),this.transformImage(t,Math.round(this.props.getLeft()*n+s-c),Math.round(this.props.getTop()*n+u-l),1,!1),t.drawImage(d,0,0,a,o),t.restore();case 12:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})}]),t}(T.a),R=n(283);n.d(t,"a",function(){return L});var L=function(e){function t(e,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],c=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],l=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],h=!(arguments.length>8&&void 0!==arguments[8])||arguments[8];return u()(this,t),(r=p()(this,f()(t).call(this,e,n,i,a,o,s,c,l,h,E.e))).keepRatio=!0,r}var n;return m()(t,e),l()(t,[{key:"render",value:function(e,t){return new x(this.props,this.isResourceLoadFail()).rasterizeSingleItem(e,t)}},{key:"renderThumbnail",value:function(e,t){return new x(this.props,this.isResourceLoadFail()).rasterizeToPage(e,t)}},{key:"getThumbUrl",value:(n=o()(i.a.mark(function e(t,n){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new x(this.props,this.isResourceLoadFail()).getSingleItemCanvasDataURL(t,n));case 1:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})},{key:"clone",value:function(){var e=t.create(this.props.getBoundingBox(),this.props.youtubeId,this.props.videoUrl);return e.setProps(this.props.clone()),this.setCloneItemDefaultAttr(e),e}},{key:"getUsedColor",value:function(){return new Set}},{key:"getItemType",value:function(){return S.b.YOUTUBE}},{key:"makeProps",value:function(){return new k}},{key:"getResourceType",value:function(){return I.a.YOUTUBE}},{key:"getHeaderTitle",value:function(){return"YouTube"}},{key:"isValid",value:function(){return v()(f()(t.prototype),"isValid",this).call(this)&&!!this.props.youtubeId}},{key:"canFlip",value:function(){return!1}},{key:"canDisplayHyperlink",value:function(){return!1}},{key:"isChangeableWidth",value:function(){return!1}},{key:"isChangeableHeight",value:function(){return!1}},{key:"isBrowserDefaultAction",value:function(){return!0}}],[{key:"create",value:function(e,n,r){var i=new t(Object(R.a)(),e);return i.props.youtubeId=n,i.props.videoUrl=r,i}}]),t}(E.d)},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=function(){function e(){i()(this,e)}return o()(e,null,[{key:"build",value:function(t,n){try{var r="";if(t.hasAttributes&&t.hasAttributes()){r={};for(var i=0,a=t.attributes.length;i<a;i++){var o=t.attributes.item(i);r["@"+o.name]=e.parseValue(o.value)}}if(t.hasChildNodes()){for(var s="",u=0,c=t.childNodes.length;u<c;u++){var l=t.childNodes.item(u);switch(l.nodeType){case 4:case 3:l.nodeValue.trim().length>0&&(s+=l.nodeValue);break;case 1:var h=l.nodeName,p=e.build(l,h);r||(r={}),r[h]?(r[h].constructor!==Array&&(r[h]=[r[h]]),r[h].push(p)):r[h]=p}}s&&(r?r.keyValue=e.parseValue(s,"Text"!==n):r=e.parseValue(s,"Text"!==n))}return r}catch(e){throw Error(e)}}},{key:"parseValue",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return/^\s*$/.test(e)?null:/^(?:true|false)$/i.test(e)?"true"===e.toLowerCase():t&&isFinite(e)?e.length<=1?parseFloat(e):"0"===e[0]?"."===e[1]?parseFloat(e):e:parseFloat(e):e}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return I});var r=n(2),i=n.n(r),a=n(4),o=n.n(a),s=n(0),u=n.n(s),c=n(1),l=n.n(c),h=n(6),p=n.n(h),d=n(3),f=n.n(d),g=n(7),v=n.n(g),y=n(453),m=n(325),E=n(19),k=n(44),S=n(20),I=function(e){function t(){return u()(this,t),p()(this,f()(t).apply(this,arguments))}var n,r;return v()(t,e),l()(t,[{key:"getCommodityInstancePath",value:function(e){var t="/tbpe30/commodity_instance.jsp?comm_idx=${commodityIdx}".replace("${commodityIdx}",e);return E.b.getURL(t)}},{key:"getSkinPath",value:function(e,t,n){var r="/web1/__ADMIN.SKIN/${skinId}/${ratioId}/thumb400.png".replace("${skinId}",e).replace("${ratioId}",t);return E.b.getImageServerURL(r)}},{key:"getSkinListPath",value:function(e){var t="/tbpe30/list/skins2.jsp?ratio_id=${ratioId}".replace("${ratioId}",e);return E.b.getURL(t)}},{key:"getTemplateMetaPath",value:function(e){var t="/tbpe30/template_meta.jsp?name=${designName}".replace("${designName}",e);return E.b.getURL(t)}},{key:"getThemeMetaPath",value:function(e){var t="/tbpe30/theme_meta.jsp?name=${designName}".replace("${designName}",e);return E.b.getURL(t)}},{key:"getLayoutListPath",value:function(e,t){var n="/tbpe30/theme_meta.jsp?name=${designName}".replace("${ratioId}",e).replace("${layoutType}",t);return this.getURL(n)}},{key:"getLayoutPath",value:function(e){var t="/tbpe30/template_layout.jsp?id=${layoutId}".replace("${layoutId}",e);return this.getURL(t)}},{key:"getLayoutThumbnailPath",value:function(e){var t="/tbpe30/template_layout.jsp?id=${layoutId}".replace("${layoutId}",e);return this.getURL(t)}}],[{key:"getExternalStickerList",value:(r=o()(i.a.mark(function e(t){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="/servlet/api/smilecat/sticker/external/download".concat("?",$.param(t,!0)),e.next=3,k.a.get(m.f,E.b.getURL(n));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)})},{key:"requestExternalStickerDownload",value:(n=o()(i.a.mark(function e(t){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=E.b.getURL("/servlet/api/smilecat/sticker/external"),e.next=3,k.a.post(S.a,n,{data:t,traditional:!0});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})}]),t}(y.a)},function(e,t,n){"use strict";var r,i,a;n.d(t,"b",function(){return r}),n.d(t,"a",function(){return i}),n.d(t,"c",function(){return a}),function(e){e.EASY_FLOATING="easy_floating",e.EASY_FIXED_LB="easy_fixed_lb",e.HARD_FIXED="hard_fixed"}(r||(r={})),function(e){e.DEFAULT_MODE="default_mode",e.CROP_MODE="crop_mode",e.SPOID_MODE="spoid_mode"}(i||(i={})),function(e){e.SCROLL="scroll",e.CHANGE="change"}(a||(a={}))},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(2),i=n.n(r),a=n(4),o=n.n(a),s=n(0),u=n.n(s),c=n(1),l=n.n(c),h=n(231),p=n(239),d=n(255),f=function(){function e(){u()(this,e)}var t;return l()(e,null,[{key:"getImageOriginSizeFinderAddedItems",value:(t=o()(i.a.mark(function t(n){var r,a,o,s,u,c,l,f,g,v;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.b.fetch(n,"original");case 2:r=!0,a=!1,o=void 0,t.prev=5,s=n[Symbol.iterator]();case 7:if(r=(u=s.next()).done){t.next=40;break}if(!((c=u.value)instanceof h.d)){t.next=24;break}if(l=c.tbpeId,e.imgOriginSizeFinder.has(l)){t.next=22;break}return t.prev=12,t.next=15,c.getImgOriginalSize();case 15:f=t.sent,e.imgOriginSizeFinder.set(l,f.clone()),t.next=22;break;case 19:throw t.prev=19,t.t0=t.catch(12),t.t0;case 22:t.next=37;break;case 24:if(!(c instanceof p.b)||c.isDefaultImage()){t.next=37;break}if(g=c.innerPhotoItem.tbpeId,e.imgOriginSizeFinder.has(g)){t.next=37;break}return t.prev=27,t.next=30,c.innerPhotoItem.getImgOriginalSize();case 30:v=t.sent,e.imgOriginSizeFinder.set(g,v.clone()),t.next=37;break;case 34:throw t.prev=34,t.t1=t.catch(27),t.t1;case 37:r=!0,t.next=7;break;case 40:t.next=46;break;case 42:t.prev=42,t.t2=t.catch(5),a=!0,o=t.t2;case 46:t.prev=46,t.prev=47,r||null==s.return||s.return();case 49:if(t.prev=49,!a){t.next=52;break}throw o;case 52:return t.finish(49);case 53:return t.finish(46);case 54:return t.abrupt("return",e.imgOriginSizeFinder);case 55:case"end":return t.stop()}},t,null,[[5,42,46,54],[12,19],[27,34],[47,,49,53]])})),function(e){return t.apply(this,arguments)})}]),e}();f.WARNING_ICON_SIZE=24,f.imgOriginSizeFinder=new Map},function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return g}),n.d(t,"c",function(){return v}),n.d(t,"d",function(){return y});var r,i=n(1),a=n.n(i),o=n(0),s=n.n(o),u=n(359),c=n(240),l=n(90),h=255,p=Math.round(h/2),d=function e(){s()(this,e),this.r=0,this.g=0,this.b=0},f=function e(){s()(this,e),this.h=0,this.s=0,this.l=0};!function(e){e[e.HUE=0]="HUE",e[e.SATURATION=1]="SATURATION",e[e.LIGHTNESS=2]="LIGHTNESS"}(r||(r={}));var g=function(){function e(){s()(this,e)}return a()(e,null,[{key:"rgb2hsl",value:function(e,t,n){var r=e/255,i=t/255,a=n/255,o=Math.min(r,i,a),s=Math.max(r,i,a),u=0,c=0,l=(o+s)/2,h=new f;if(s===o)h.l=l;else{var p=s-o;switch(c=l<.5?p/(s+o):p/(2-p),s){case r:u=(i-a)/p;break;case i:u=2+(a-r)/p;break;case a:u=4+(r-i)/p}h.h=Math.round(60*u),h.s=c,h.l=l}return h}},{key:"hue2rgb",value:function(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),6*n<1?e+6*(t-e)*n:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}},{key:"hsl2rgb",value:function(e,t,n){var r=new d;if(0===t)r.r=255*n,r.g=255*n,r.b=255*n;else{var i=n<.5?n*(1+t):n+t-n*t,a=2*n-i,o=e/360;r.r=Math.round(255*this.hue2rgb(a,i,o+1/3)),r.g=Math.round(255*this.hue2rgb(a,i,o)),r.b=Math.round(255*this.hue2rgb(a,i,o-1/3))}return r}},{key:"hex2rgb",value:function(e){if(!e||e.length<7)return null;var t=e.substring(0,7),n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:null}}]),e}(),v=function(){function e(){s()(this,e)}return a()(e,null,[{key:"getBitmapMask",value:function(t,n,r){e.IN_MEM_CANVAS.width=n,e.IN_MEM_CANVAS.height=r;var i=e.IN_MEM_CANVAS.getContext("2d");i.save(),i.drawImage(t,0,0,n,r),i.restore();for(var a=i.getImageData(0,0,n,r),o=a.data,s=0;s<o.length;s+=4){var u=s,c=s+1,l=s+2,h=s+3,p=o[l];o[u]=0,o[c]=0,o[l]=0,o[h]=p}return a}},{key:"adjustImageBrightness",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=300,r=t/n*h,i=.5*Math.abs(t),a=259*(i+h)/(h*(259-i)),o=e.data,s=0;s<o.length;s+=4){var u=s,c=s+1,l=s+2,d=Math.trunc(a*(o[u]-p)+p)+r,f=Math.trunc(a*(o[c]-p)+p)+r,g=Math.trunc(a*(o[l]-p)+p)+r;o[u]=Math.max(0,Math.min(d,h)),o[c]=Math.max(0,Math.min(f,h)),o[l]=Math.max(0,Math.min(g,h))}return e}},{key:"adjustContrast",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.data,r=259*(t+h)/(h*(259-t)),i=0;i<n.length;i+=4){var a=i,o=i+1,s=i+2,u=Math.trunc(r*(n[a]-p)+p),c=Math.trunc(r*(n[o]-p)+p),l=Math.trunc(r*(n[s]-p)+p);n[a]=Math.max(0,Math.min(u,h)),n[o]=Math.max(0,Math.min(c,h)),n[s]=Math.max(0,Math.min(l,h))}return e}},{key:"adjustHue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.width,r=e.height,i=c.a.createCanvas().getContext("2d");i.canvas.width=n,i.canvas.height=r,i.globalCompositeOperation="source-atop",i.putImageData(e,0,0);var a=g.hsl2rgb(t,1,.5);return i.fillStyle="rgba(".concat(a.r,",").concat(a.g,",").concat(a.b,",",.05,")"),i.fillRect(0,0,n,r),i.getImageData(0,0,n,r)}},{key:"adjustSaturation",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t/100,r=e.data,i=0;i<r.length;i+=4){var a=i,o=i+1,s=i+2,u=r[a],c=r[o],l=r[s],p=.2989*u+.587*c+.114*l;r[a]=-p*n+u*(1+n),r[o]=-p*n+c*(1+n),r[s]=-p*n+l*(1+n),r[a]=Math.max(0,Math.min(r[a],h)),r[o]=Math.max(0,Math.min(r[o],h)),r[s]=Math.max(0,Math.min(r[s],h))}return e}},{key:"adjustTemperature",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=.255*t,r=e.data,i=0;i<r.length;i+=4)r[i]+=n,r[i+1]+=n>0?n:-n,r[i+2]-=n;return e}},{key:"getRadialGradientMask",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;e.IN_MEM_CANVAS.width=t,e.IN_MEM_CANVAS.height=n;for(var i=e.IN_MEM_CANVAS.getContext("2d"),a=i.getImageData(0,0,t,n),o=a.data,s=new l.a(.5*t,.5*n),u=r/4,c=.5*Math.min(t,n)*(100-u)/100,h=s.getDistance(new l.a(0,0)),p=180,d=(h-c)/p,f=0;f<n;f++)for(var g=0;g<t;g++){var v=new l.a(g,f),y=v.getDistance(s);if(y>c){var m=4*(f*t+g);o[m+3]=Math.floor((y-c)/d)}}return a}},{key:"adjustLightness",value:function(e,t){var n=e.width,r=e.height,i=c.a.createCanvas().getContext("2d");i.canvas.width=n,i.canvas.height=r,i.globalCompositeOperation="source-atop",i.putImageData(e,0,0);var a=t/100;return t>0?i.fillStyle="rgba(255,255,255,".concat(a,")"):t<0&&(i.fillStyle="rgba(0,0,0,".concat(Math.abs(a),")")),i.fillRect(0,0,n,r),i.getImageData(0,0,n,r)}},{key:"adjustHSLValue",value:function(e,t,n){for(var r=e.data,i=0;i<r.length;i+=4){var a=i,o=i+1,s=i+2,u=r[a],c=r[o],l=r[s],p=n/100*3.14159265,d=Math.sin(p),f=Math.cos(p),g=(2*f+1)/3,v=(-Math.sqrt(3)*d-f+1)/3,y=(Math.sqrt(3)*d-f+1)/3;r[a]=u*g+c*v+l*y,r[o]=u*y+c*g+l*v,r[s]=u*v+c*y+l*g,r[a]=Math.max(0,Math.min(r[a],h)),r[o]=Math.max(0,Math.min(r[o],h)),r[s]=Math.max(0,Math.min(r[s],h))}return e}},{key:"adjustColorToneValue",value:function(t,n,r){for(var i=t.data,a=0;a<i.length;a+=4){var o=a,s=a+1,u=a+2,c=e.HSVtoRGB((r+100)/200,1,1);i[o]=(i[o]+.1*c.r)/1.1,i[s]=(i[s]+.1*c.g)/1.1,i[u]=(i[u]+.1*c.b)/1.1,i[o]=Math.max(0,Math.min(i[o],h)),i[s]=Math.max(0,Math.min(i[s],h)),i[u]=Math.max(0,Math.min(i[u],h))}return t}},{key:"HSVtoRGB",value:function(e,t,n){var r,i,a,o,s,u,c,l;switch(u=n*(1-t),c=n*(1-(s=6*e-(o=Math.floor(6*e)))*t),l=n*(1-(1-s)*t),o%6){case 0:r=n,i=l,a=u;break;case 1:r=c,i=n,a=u;break;case 2:r=u,i=n,a=l;break;case 3:r=u,i=c,a=n;break;case 4:r=l,i=u,a=n;break;case 5:r=n,i=u,a=c}return{r:Math.round(255*r),g:Math.round(255*i),b:Math.round(255*a)}}},{key:"getLinearGradientMask",value:function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=e.data,c=e.width,l=e.height,h=r||c,p=i||l;if(t/=100,n===u.a.R)for(var d=0,f=Math.floor(h*t-a),g=Math.floor(h*t),v=d;v<f;v++)for(var y=Math.floor((v+a-d)/(g-d)*255),m=0;m<l;m++){var E=4*(m*c+v);s[E+3]=Math.floor(s[E+3]*y/255)}else if(n===u.a.L)for(var k=Math.max(h-a-Math.floor(h*t),0),S=c,I=h-Math.floor(h*t),T=h,b=S;b>k;b--)for(var w=Math.floor((b+a-T)/(I-T)*255),A=0;A<l;A++){var C=4*(A*c+b);s[C+3]=Math.floor(s[C+3]*w/255)}else if(n===u.a.B)for(var x=0,R=Math.floor(p*t-o),L=Math.floor(p*t),_=x;_<R;_++)for(var P=Math.floor((_+o-x)/(L-x)*255),O=0;O<c;O++){var D=4*(_*c+O);s[D+3]=Math.floor(s[D+3]*P/255)}else if(n===u.a.T)for(var M=Math.max(p-o-Math.floor(p*t),0),N=l,B=p-Math.floor(p*t),U=p,G=N;G>M;G--)for(var F=Math.floor((G+o-U)/(B-U)*255),H=0;H<c;H++){var V=4*(G*c+H);s[V+3]=Math.floor(s[V+3]*F/255)}return e}},{key:"adjustSharpen",value:function(e,t){for(var n=c.a.createCanvas().getContext("2d"),r=e.width,i=e.height,a=n.createImageData(r,i),o=a.data,s=e.data,u=0;u<s.length;u+=4){var l=Math.floor(u/4/r),h=u/4-l*r,p=0!==h?-4:0,d=0!==l?-4:0,f=h!==r-1?4:0,g=l!==i-1?4:0,v=u,y=u+1,m=u+2,E=u+3,k=5*s[v],S=5*s[y],I=5*s[m],T=5*s[E];k+=-1*s[v+d*r],k+=-1*s[v+p],k+=-1*s[v+f],k+=-1*s[v+g*r],S+=-1*s[y+d*r],S+=-1*s[y+p],S+=-1*s[y+f],S+=-1*s[y+g*r],I+=-1*s[m+d*r],I+=-1*s[m+p],I+=-1*s[m+f],I+=-1*s[m+g*r],T+=-1*s[E+d*r],T+=-1*s[E+p],T+=-1*s[E+f],T+=-1*s[E+g*r],o[v]=s[v]*(1-t)+k*t,o[y]=s[y]*(1-t)+S*t,o[m]=s[m]*(1-t)+I*t,o[E]=s[E]*(1-t)+T*t}return a}},{key:"random",value:function(e,t,n,r){var i=12.9898*(e+r)+78.233*(t+r)+151.7182*(n+r),a=43758.5453*Math.sin(i)+r;return a-Math.floor(a)}},{key:"adjustBlur",value:function(e,t,n,r){var i=c.a.createCanvas().getContext("2d"),a=e.width,o=e.height,s=i.createImageData(a,o),u=s.data;return function(e,t,n,r,i){var a=function(e,t){var n=Math.sqrt(12*e*e/t+1),r=Math.floor(n);r%2==0&&r--;for(var i=r+2,a=(12*e*e-t*r*r-4*t*r-3*t)/(-4*r-4),o=Math.round(a),s=[],u=0;u<t;u++)s.push(u<o?r:i);return s}(i,3);m(e,t,n,r,(a[0]-1)/2),m(t,e,n,r,(a[1]-1)/2),m(e,t,n,r,(a[2]-1)/2)}(e.data,u,a,o,t*(n+r)/3400),s}},{key:"adjustVignette",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.width,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.height,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=e.data,s=0,u=0,c=0;c<o.length;c+=4){var l=c,p=c+1,d=c+2,f=(s+i)/n-.5,g=(u+a)/r-.5,v=Math.sqrt(Math.pow(f,2)+Math.pow(g,2)),y=.5,m=t/100,E=.8,k=.799*y,S=v*(m+y),I=Math.max(0,Math.min(1,(S-E)/(k-E))),T=Math.pow(I,2)*(3-2*I);o[l]*=T,o[p]*=T,o[d]*=T,o[l]=Math.max(0,Math.min(o[l],h)),o[p]=Math.max(0,Math.min(o[p],h)),o[d]=Math.max(0,Math.min(o[d],h)),++s>=e.width&&(s=0,u++)}return e}}]),e}();function y(e){for(var t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(t.length),i=new Uint8Array(r),a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return new Blob([r],{type:n})}function m(e,t,n,r,i){for(var a=0;a<e.length;a++)t[a]=e[a];!function(e,t,n,r,i){for(var a=1/(i+i+1),o=0;o<r;o++){for(var s=o*n,u=s,c=s+i,l=e[4*s+3],p=l/h,d=l,f=e[4*s+0]*p,g=e[4*s+1]*p,v=e[4*s+2]*p,y=e[4*(s+n-1)+3],m=y/h,E=y,k=e[4*(s+n-1)+0]*m,S=e[4*(s+n-1)+1]*m,I=e[4*(s+n-1)+2]*m,T=(i+1)*d,b=(i+1)*f,w=(i+1)*g,A=(i+1)*v,C=0;C<i;C++){var x=4*(s+C),R=e[x+3],L=R/h;T+=R,b+=e[x+0]*L,w+=e[x+1]*L,A+=e[x+2]*L}for(var _=0;_<=i;_++){var P=4*c,O=e[P+3],D=O/h;T+=O-d,b+=e[P+0]*D-f,w+=e[P+1]*D-g,A+=e[P+2]*D-v,c++;var M=Math.round(T*a),N=a/M*h;t[4*s+3]=M,t[4*s+0]=Math.round(b*N),t[4*s+1]=Math.round(w*N),t[4*s+2]=Math.round(A*N),s++}for(var B=i+1;B<n-i;B++){var U=e[4*c+3],G=e[4*u+3];T+=U-G,b+=(e[4*c+0]*U-e[4*u+0]*G)/h,w+=(e[4*c+1]*U-e[4*u+1]*G)/h,A+=(e[4*c+2]*U-e[4*u+2]*G)/h,c++,u++;var F=Math.round(T*a),H=a/F*h;t[4*s+3]=F,t[4*s+0]=Math.round(b*H),t[4*s+1]=Math.round(w*H),t[4*s+2]=Math.round(A*H),s++}for(var V=n-i;V<n;V++){var z=e[4*u+3],W=z/h;T+=E-z,b+=k-e[4*u+0]*W,w+=S-e[4*u+1]*W,A+=I-e[4*u+2]*W,u++;var K=Math.round(T*a),X=a/K*h;t[4*s+3]=K,t[4*s+0]=Math.round(b*X),t[4*s+1]=Math.round(w*X),t[4*s+2]=Math.round(A*X),s++}}}(t,e,n,r,i),function(e,t,n,r,i){for(var a=1/(i+i+1),o=0;o<n;o++){for(var s=o,u=s,c=s+i*n,l=e[4*s+3],p=l/h,d=l,f=e[4*s+0]*p,g=e[4*s+1]*p,v=e[4*s+2]*p,y=e[4*(s+n*(r-1))+3],m=y/h,E=y,k=e[4*(s+n*(r-1))+0]*m,S=e[4*(s+n*(r-1))+1]*m,I=e[4*(s+n*(r-1))+2]*m,T=(i+1)*d,b=(i+1)*f,w=(i+1)*g,A=(i+1)*v,C=0;C<i;C++){var x=4*(s+C*n),R=e[x+3],L=R/h;T+=R,b+=e[x+0]*L,w+=e[x+1]*L,A+=e[x+2]*L}for(var _=0;_<=i;_++){var P=e[4*c+3],O=P/h;T+=P-d,b+=e[4*c+0]*O-f,w+=e[4*c+1]*O-g,A+=e[4*c+2]*O-v;var D=Math.round(T*a),M=a/D*h;t[4*s+3]=D,t[4*s+0]=Math.round(b*M),t[4*s+1]=Math.round(w*M),t[4*s+2]=Math.round(A*M),c+=n,s+=n}for(var N=i+1;N<r-i;N++){var B=e[4*c+3],U=e[4*u+3];T+=B-U,b+=(e[4*c+0]*B-e[4*u+0]*U)/h,w+=(e[4*c+1]*B-e[4*u+1]*U)/h,A+=(e[4*c+2]*B-e[4*u+2]*U)/h;var G=Math.round(T*a),F=a/G*h;t[4*s+3]=G,t[4*s+0]=Math.round(b*F),t[4*s+1]=Math.round(w*F),t[4*s+2]=Math.round(A*F),u+=n,c+=n,s+=n}for(var H=r-i;H<r;H++){var V=e[4*u+3];T+=E-V,b+=k-e[4*u+0]*V/h,w+=S-e[4*u+1]*V/h,A+=I-e[4*u+2]*V/h;var z=Math.round(T*a),W=a/z*h;t[4*s+3]=z,t[4*s+0]=Math.round(b*W),t[4*s+1]=Math.round(w*W),t[4*s+2]=Math.round(A*W),u+=n,s+=n}}}(e,t,n,r,i)}v.IN_MEM_CANVAS=c.a.createCanvas(),v.MUL_TABLE=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],v.SHG_TABLE=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24]},function(e,t,n){"use strict";n.d(t,"a",function(){return p}),n.d(t,"b",function(){return d});var r=n(80),i=n.n(r),a=n(0),o=n.n(a),s=n(1),u=n.n(s),c=n(327),l=n(264),h=n(257),p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.c.COLOR,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h.e.RGB.valueOf(),i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:h.e.FONT_SIZE.valueOf(),a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:h.e.RGBA_TRANSPARENT;o()(this,e),this.filltype=n,this.color=r,this.size=i,this.backgroundColor=a,this.char=t,this.styles=new l.b(l.a.DEFAULT_FALLBACK_FONT,!1,!1,!1,!1),this.fontdetail={active:!0,textSpace:h.e.NUMBER.valueOf(),scaleX:h.e.SCALE_X.valueOf()},this.outline=new c.b,this.shadow=new c.c}return u()(e,[{key:"clone",value:function(){var t=new e;for(var n in this){var r=this[n];Array.isArray(r)?t[n]=r.concat([]):"object"===i()(r)?(t[n]=Object.assign({},r),Object.setPrototypeOf(t[n],Object.getPrototypeOf(r))):t[n]=r}return t}},{key:"equalsAlmostWith",value:function(e){return this.styles.bold===e.styles.bold&&this.styles.italic===e.styles.italic&&this.styles.strikeout===e.styles.strikeout&&this.styles.underline===e.styles.underline&&this.filltype===e.filltype&&this.color===e.color&&this.styles.family===e.styles.family&&this.size===e.size&&this.backgroundColor===e.backgroundColor&&this.fontdetail.active===e.fontdetail.active&&this.fontdetail.scaleX===e.fontdetail.scaleX&&this.fontdetail.textSpace===e.fontdetail.textSpace&&this.outline.active===e.outline.active&&this.outline.alpha===e.outline.alpha&&this.outline.color===e.outline.color&&this.outline.size===e.outline.size&&this.shadow.active===e.shadow.active&&this.shadow.alpha===e.shadow.alpha&&this.shadow.angle===e.shadow.angle&&this.shadow.color===e.shadow.color&&this.shadow.distance===e.shadow.distance&&this.shadow.size===e.shadow.size&&this.shadow.spread===e.shadow.spread}}]),e}(),d=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];o()(this,e),this.align=t,this.lineSpace=n,this.chars=r}return u()(e,[{key:"isEmpty",value:function(){return 0===this.chars.length||1===this.chars.length&&""===this.chars[0].char}},{key:"cloneWithoutChars",value:function(){return new e(this.align,this.lineSpace)}},{key:"getLineSpaceGivenCharSize",value:function(e){return e*(this.lineSpace-1)}}]),e}()},function(e,t,n){"use strict";var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=function(){function e(){i()(this,e),this.itemWarningAlertsOfPage=new Map}return o()(e,[{key:"setListener",value:function(e){this.listener=e}},{key:"clear",value:function(){this.itemWarningAlertsOfPage.clear()}},{key:"addAlertOfPageId",value:function(e,t){if(0!==t.length){var n=t[0].itemTbpeId;this.removeAlertOfItemId(n);var r=this.itemWarningAlertsOfPage.has(e),i=r?this.itemWarningAlertsOfPage.get(e):[];t.forEach(function(e){e.containsAlert()&&i.push(e)}),r||this.itemWarningAlertsOfPage.set(e,i)}}},{key:"removeAlertOfItemId",value:function(e){this.itemWarningAlertsOfPage.forEach(function(t){for(var n=t.findIndex(function(t){return t.itemTbpeId===e});n>=0;)t.splice(n,1),n=t.findIndex(function(t){return t.itemTbpeId===e})})}},{key:"removeResultOfPageId",value:function(e){this.itemWarningAlertsOfPage.delete(e)}},{key:"removeNotExistResultOfItem",value:function(e,t){var n=this;if(this.itemWarningAlertsOfPage.has(e)){var r=this.itemWarningAlertsOfPage.get(e);r.forEach(function(e){if(!t.find(function(t){return t===e.itemTbpeId})){var i=r.findIndex(function(t){return t.itemTbpeId===e.itemTbpeId});i>=0&&(r.splice(i,1),n.listener&&n.listener.removeWarningAlertByItemId(e.itemTbpeId))}})}}},{key:"removeNotExistResultOfPage",value:function(e){var t=this;this.itemWarningAlertsOfPage.forEach(function(n,r){e.indexOf(r)<0&&t.itemWarningAlertsOfPage.delete(r)})}},{key:"getAllAlerts",value:function(){this.listener&&this.listener.syncAlertList();var e=new Array;return this.itemWarningAlertsOfPage.forEach(function(t){return t.forEach(function(t){return e.push(t)})}),e}},{key:"getItemWarningAlertOfItem",value:function(e){var t=null;return this.itemWarningAlertsOfPage.forEach(function(n){return n.forEach(function(n){n.itemTbpeId!==e||(t=n)})}),t}}]),e}();t.a=new s},function(e,t,n){"use strict";n.d(t,"c",function(){return T}),n.d(t,"d",function(){return b}),n.d(t,"f",function(){return w}),n.d(t,"e",function(){return A}),n.d(t,"b",function(){return C}),n.d(t,"a",function(){return x});var r=n(2),i=n.n(r),a=n(4),o=n.n(a),s=n(1),u=n.n(s),c=n(6),l=n.n(c),h=n(3),p=n.n(h),d=n(7),f=n.n(d),g=n(0),v=n.n(g),y=n(224),m=n(226),E=n(46),k=n(227),S=n(250),I=n(387),T=function e(t,n){var r=this;v()(this,e),this.actionType=y.a.GUIDELINE_ADD,this.changeDesign=function(){return!1},this.concat=function(){return!1},this.isActionGroupEquals=function(){return!1},this.doSaveQueue=!0,this.isLastSavedAction=!1,this.commit=function(e,t){var n=e.pages[t.renderPageIdx],i=t.pageController.getPageRenderer(n).guidelineRenderer.appendGuidelineAuto(r.direction,r.point);i?r.point&&I.a.onCreateGuideline(i,r.point):alert("".concat(r.direction===S.d.HORIZONTAL?"가로":"세로"," 가이드선을 더이상 추가할 수 없습니다."))},this.rollback=function(e,t){var n=e.pages[t.renderPageIdx];t.pageController.getPageRenderer(n).guidelineRenderer.removeLastGuidelineAuto(r.direction)},this.recycle=function(){},this.direction=t,this.point=n},b=function e(){var t=this;v()(this,e),this.actionType=y.a.GUIDELINE_ALL_DEL,this.changeDesign=function(){return!1},this.concat=function(){return!1},this.isActionGroupEquals=function(){return!1},this.doSaveQueue=!0,this.isLastSavedAction=!1,this.commit=function(e,n){t.page||(t.page=e.pages[n.renderPageIdx],t.oldGuidelineInfos=t.page.guidelineManager.getGuidelineFactoryInfos()),n.pageController.getPageRenderer(t.page).guidelineRenderer.clear()},this.rollback=function(e,n){n.pageController.getPageRenderer(t.page).guidelineRenderer.registGuidelineInfos(t.oldGuidelineInfos)},this.recycle=function(){}},w=function e(t,n,r){var i=this;v()(this,e),this.actionType=y.a.GUIDELINE_MOVE,this.changeDesign=function(){return!1},this.concat=function(){return!1},this.isActionGroupEquals=function(){return!1},this.doSaveQueue=!0,this.isLastSavedAction=!1,this.commit=function(e,t,n){i.guideline.setLastPosition(i.newPosition),i.factory.setNowPosition(i.guideline.initPosition),i.guidelineRenderer.render()},this.rollback=function(e,t,n){i.guideline.setLastPosition(i.lastPosition),i.factory.setNowPosition(i.lastNowPosition),i.guidelineRenderer.render()},this.recycle=function(){},this.factory=t,this.guideline=n,this.newPosition=r,this.guidelineRenderer=m.a.instance.pageController.getGuidelineRenderer(n),this.lastPosition=n.lastPosition,this.lastNowPosition=t.getNowPosition()},A=function e(t,n){var r=this;v()(this,e),this.actionType=y.a.GUIDELINE_DEL,this.changeDesign=function(){return!1},this.concat=function(){return!1},this.isActionGroupEquals=function(){return!1},this.doSaveQueue=!0,this.isLastSavedAction=!1,this.commit=function(e,t){r.guidelineFactory.removeGuideline(r.guideline);var n=r.guidelineRenderer.elem;n.parentElement.removeChild(n)},this.rollback=function(e,t){r.guidelineFactory.registGuideline(r.guideline,r.lastIdx),r.guidelineRenderer.render(),r.parentElem.appendChild(r.guidelineRenderer.elem)},this.recycle=function(){},this.guideline=t,this.guidelineFactory=n,this.guidelineRenderer=m.a.instance.pageController.getGuidelineRenderer(t),this.lastIdx=this.guidelineFactory.getGuidelines().indexOf(this.guideline),this.parentElem=this.guidelineRenderer.elem.parentElement},C=function(e){function t(e){var n;return v()(this,t),(n=l()(this,p()(t).call(this))).actionType=y.a.ONE_TIME,n.doSaveQueue=!1,n.renderAuto=!1,n.changeDesign=function(){return!1},n.commitAction=function(){var e=o()(i.a.mark(function e(t,r,a){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(null==n.isVisible?!k.a.getUserSetting().isGuidelineVisible:n.isVisible)?n.enableGuideLine(t,r):n.disableGuideLine(t,r);case 2:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),n.rollbackAction=function(){},n.recycle=function(){},n.isVisible=e,n}return f()(t,e),u()(t,[{key:"enableGuideLine",value:function(e,t){t.pageController.getPageRenderer(e.pages[t.renderPageIdx]).guidelineRenderer.show(),E.a.sendEvent("가이드선","가이드선 사용","가이드선 보기 on",!0)}},{key:"disableGuideLine",value:function(e,t){t.pageController.getPageRenderer(e.pages[t.renderPageIdx]).guidelineRenderer.hide(),E.a.sendEvent("가이드선","가이드선 사용 안함","가이드선 보기 off",!0)}}]),t}(y.b),x=function(e){function t(e){var n;return v()(this,t),(n=l()(this,p()(t).call(this))).actionType=y.a.ONE_TIME,n.doSaveQueue=!1,n.renderAuto=!1,n.changeDesign=function(){return!1},n.commitAction=function(){var e=o()(i.a.mark(function e(t,r,a){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(null==n.isLock?!k.a.getUserSetting().isGuidelineLock:n.isLock)?n.lockGuideLine(t,r):n.unlockGuideLine(t,r);case 2:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),n.rollbackAction=function(){},n.recycle=function(){},n.isLock=e,n}return f()(t,e),u()(t,[{key:"lockGuideLine",value:function(e,t){e.pages.forEach(function(e){return t.pageController.getPageRenderer(e).guidelineRenderer.lock()})}},{key:"unlockGuideLine",value:function(e,t){e.pages.forEach(function(e){return t.pageController.getPageRenderer(e).guidelineRenderer.unlock()})}}]),t}(y.b)},function(e,t,n){"use strict";var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(226),u=n(227),c=function(){function e(){i()(this,e)}return o()(e,[{key:"setCanvasAreaVC",value:function(e){this.canvasAreaVC=e}},{key:"setHoverGuidelineVC",value:function(e){this.hoverGuidelineVC=e}},{key:"getPageAreaSize",value:function(){return this.canvasAreaVC.getPageAreaSize()}},{key:"onChangeRenderedPageIdx",value:function(){this.changeGuidelineVisibleOfAllPages(),this.canvasAreaVC.updateRulerSize()}},{key:"onChangeCanvasDOMSize",value:function(){this.changeGuidelineVisibleOfAllPages(),this.canvasAreaVC.updateRulerSize()}},{key:"onCreateGuideline",value:function(e,t){u.a.setIsGuidelineVisible(!0),this.hoverGuidelineVC.onCreateGuideline(e,t)}},{key:"onSelectCanvasAreaGuideline",value:function(e,t){this.onChangeGuidelineVisible(e,!1),this.hoverGuidelineVC.onSelectGuideline(e,t)}},{key:"onChangeCanvasAreaGuidelinePosition",value:function(e,t){this.canvasAreaVC.getRenderedPage()&&this.canvasAreaVC.getRenderedPage().guidelineRenderer.changeGuidelinePosition(e,t)}},{key:"onChangeGuidelineVisible",value:function(e,t){this.canvasAreaVC.getRenderedPage()&&this.canvasAreaVC.getRenderedPage().guidelineRenderer.changeGuidelineVisible(e,t)}},{key:"existGuideline",value:function(e){return!!this.canvasAreaVC.getRenderedPage()&&this.canvasAreaVC.getRenderedPage().guidelineRenderer.guidelineManager.hasGuideline(e)}},{key:"isHandlingGuideline",value:function(){return this.hoverGuidelineVC.isHandlingGuideline()}},{key:"changeGuidelineVisibleOfAllPages",value:function(){u.a.getUserSetting().isGuidelineVisible&&this.canvasAreaVC.pageVCS.forEach(function(e){return e.setGuidelineVisible(e.page.pageIdx===s.a.instance.renderPageIdx)})}}]),e}();t.a=new c},function(e,t,n){"use strict";var r;n.d(t,"a",function(){return r}),function(e){e.NONE="none",e.PAGE="page",e.ITEM="item",e.GUIDELINE="guideline"}(r||(r={}))},function(e,t,n){"use strict";var r;n.d(t,"a",function(){return r}),(r||(r={})).parseOldIntegerLTRBSvgItem=function(e){if(Number.isInteger(e.props.getLeft())&&Number.isInteger(e.props.getTop())&&Number.isInteger(e.props.getRight())&&Number.isInteger(e.props.getBottom())){var t=e.getSvgString(1),n=document.createElement("div");n.innerHTML=t,document.body.appendChild(n);try{var r=n.getElementsByTagName("svg");if(r.length>1){for(var i=Number.MAX_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER,u=1;u<r.length;u++){var c=r[u].getBoundingClientRect();i=Math.min(i,c.left),a=Math.min(a,c.top),o=Math.max(o,c.right),s=Math.max(s,c.bottom)}var l=o-i,h=s-a;0!==l&&Math.abs(l-e.getWidth())<=2&&e.props.setRight(e.props.getLeft()+l),0!==h&&Math.abs(h-e.getHeight())<=2&&e.props.setBottom(e.props.getTop()+h)}}catch(e){}finally{document.body.removeChild(n)}}}},function(e,t,n){"use strict";n.d(t,"a",function(){return E});var r,i,a=n(2),o=n.n(a),s=n(4),u=n.n(s),c=n(0),l=n.n(c),h=n(1),p=n.n(h),d=n(51),f=n(19),g=n(44),v=n(20),y=n(21),m=n(63);!function(e){e.CREATE="/api/v2/design",e.UPDATE="/api/v2/design/${idx}",e.UPDATE_ENABLE="/api/design/${idx}/enable",e.DELETE="/api/design/${idx}/delete",e.DELETE_PERMANENTLY="/api/design/${idx}/delete-permanently",e.FIND_ONE="/api/design/${idx}",e.MY_LIST="/api/design/my-list"}(r||(r={})),function(e){e.SAVE_CART="/api/v2/bizhows/cart/design"}(i||(i={}));var E=function(){function e(){l()(this,e)}var t,n,a,s,c,h,E,k,S,I,T,b;return p()(e,null,[{key:"makeUrl",value:function(e){return e}},{key:"throwUnicornApiErrorIfInvalid",value:function(e){if(!e.data){0;var t=-1,n=-1,r=" - ";if(e.ajaxResponse){n=e.ajaxResponse.xhrReadyState,t=e.ajaxResponse.xhrStatus;try{r=e.ajaxResponse.responseData?JSON.stringify(e.ajaxResponse.responseData):"no response"}catch(e){r="json error : "+e.message+"\n"}}throw new y.a("응답 데이터가 비어있음","",{xhrReadyState:n,responseDataString:r},t,e.ajaxOption,e.ajaxResponse)}}},{key:"create",value:(b=u()(o.a.mark(function t(n,i){var a,s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.updateSaveParam(n.saveParam,i);case 2:return a=e.makeUrl(r.CREATE),t.next=5,v.b.post(a,{traditional:!0,data:JSON.stringify(n),contentType:"application/json"});case 5:return s=t.sent,this.throwUnicornApiErrorIfInvalid(s),t.abrupt("return",s.data);case 8:case"end":return t.stop()}},t,this)})),function(e,t){return b.apply(this,arguments)})},{key:"createToBizhowsCart",value:(T=u()(o.a.mark(function t(n,r,a){var s,u;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.updateSaveParam(r.saveParam,a);case 2:return s=e.makeUrl(i.SAVE_CART),n>0&&(s="".concat(s,"/").concat(n.toString())),t.next=6,v.b.post(s,{traditional:!0,data:JSON.stringify(r),contentType:"application/json"});case 6:if("CAN_NOT_MAKE_DESIGN_OBJECT"!==(u=t.sent).resultCode){t.next=9;break}throw new Error(u.resultCode);case 9:return this.throwUnicornApiErrorIfInvalid(u),t.abrupt("return",u.data);case 11:case"end":return t.stop()}},t,this)})),function(e,t,n){return T.apply(this,arguments)})},{key:"update",value:(I=u()(o.a.mark(function t(n,i){var a,s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.makeUrl(r.UPDATE).replace("${idx}",String(n)),t.next=3,v.b.put(a,{traditional:!0,data:JSON.stringify(i),contentType:"application/json"});case 3:return s=t.sent,this.throwUnicornApiErrorIfInvalid(s),t.abrupt("return",s.data);case 6:case"end":return t.stop()}},t,this)})),function(e,t){return I.apply(this,arguments)})},{key:"updateToBizhowsCart",value:(S=u()(o.a.mark(function t(n,r,a){var s,u;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.updateSaveParam(r.saveParam,a);case 2:return s=e.makeUrl(i.SAVE_CART),s="".concat(s,"/").concat(n.toString()),t.next=6,v.b.put(s,{traditional:!0,data:JSON.stringify(r),contentType:"application/json"});case 6:return u=t.sent,this.throwUnicornApiErrorIfInvalid(u),t.abrupt("return",u.data);case 9:case"end":return t.stop()}},t,this)})),function(e,t,n){return S.apply(this,arguments)})},{key:"updateSaveParam",value:(k=u()(o.a.mark(function t(n,r){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n.teamIdx){t.next=5;break}return t.next=4,d.a.getSelectedTeamIndex(r);case 4:n.teamIdx=t.sent;case 5:if(n.teamScope){t.next=9;break}return t.next=8,d.a.getSelectedTeamScope();case 8:n.teamScope=t.sent;case 9:e.stringifyExtraData(n),t.next=15;break;case 12:throw t.prev=12,t.t0=t.catch(0),new y.c(m.a.FAIL_TO_UPDATE_PARAM,"저장 파라미터 업데이트 중 오류 발생 : ".concat(t.t0.message),t.t0);case 15:case"end":return t.stop()}},t,null,[[0,12]])})),function(e,t){return k.apply(this,arguments)})},{key:"updateEnabled",value:(E=u()(o.a.mark(function t(n,i){var a,s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.makeUrl(r.UPDATE_ENABLE).replace("${idx}",String(n)),t.next=3,v.b.put(a,{traditional:!0,data:JSON.stringify({enabled:i}),contentType:"application/json"});case 3:return s=t.sent,this.throwUnicornApiErrorIfInvalid(s),t.abrupt("return",s.data.designIdx);case 6:case"end":return t.stop()}},t,this)})),function(e,t){return E.apply(this,arguments)})},{key:"stringifyExtraData",value:function(e){return e.extraData&&(e.extraData=JSON.stringify(e.extraData)),e}},{key:"delete",value:function(t){return new Promise(function(){var n=u()(o.a.mark(function n(i,a){var s;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,s=e.makeUrl(r.DELETE).replace("${idx}",String(t)),n.t0=i,n.next=5,v.b.post(s);case 5:n.t1=n.sent,(0,n.t0)(n.t1),n.next=12;break;case 9:n.prev=9,n.t2=n.catch(0),a(n.t2);case 12:case"end":return n.stop()}},n,null,[[0,9]])}));return function(e,t){return n.apply(this,arguments)}}())}},{key:"deleteList",value:(h=u()(o.a.mark(function e(t){var n,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.join(","),i=r.DELETE.replace("${idx}",n),e.next=4,v.b.post(i);case 4:case"end":return e.stop()}},e)})),function(e){return h.apply(this,arguments)})},{key:"deleteListPermanently",value:(c=u()(o.a.mark(function e(t){var n,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.join(","),i=r.DELETE_PERMANENTLY.replace("${idx}",n),e.next=4,v.b.post(i);case 4:case"end":return e.stop()}},e)})),function(e){return c.apply(this,arguments)})},{key:"findOne",value:(s=u()(o.a.mark(function t(n){var i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.makeUrl(r.FIND_ONE).replace("${idx}",String(n)),t.next=3,v.b.get(i);case 3:return t.abrupt("return",t.sent.data);case 4:case"end":return t.stop()}},t)})),function(e){return s.apply(this,arguments)})},{key:"findOneWithHistoryIndex",value:(a=u()(o.a.mark(function e(t,n){var r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r="/api/design/{designIdx}?historyIdx={historyIdx}".replace("{designIdx}",t.toString()).replace("{historyIdx}",n.toString()),e.next=3,v.b.get(r);case 3:return e.abrupt("return",e.sent.data);case 4:case"end":return e.stop()}},e)})),function(e,t){return a.apply(this,arguments)})},{key:"getSheetData",value:(n=u()(o.a.mark(function e(t){var n,r,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="/file/${uuid}".replace("${uuid}",t),r=f.c.getURL(n),e.next=4,g.a.getXml(r);case 4:return i=e.sent,e.abrupt("return",i.data);case 6:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})},{key:"fetchMyDesignList",value:(t=u()(o.a.mark(function t(n,i){var a,s,u,c;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.getDefaultSelectedTeamData(i);case 2:return a=t.sent,s={},Object.assign(s,n,a),u=e.makeUrl(r.MY_LIST),t.next=8,v.b.get("".concat(u,"?").concat($.param(s)));case 8:return c=t.sent,t.abrupt("return",{listItemParams:c.data.list,totalRow:c.data.pagination.totalRow});case 10:case"end":return t.stop()}},t)})),function(e,n){return t.apply(this,arguments)})}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(225),u=n(224),c=n(307),l=function(){function e(){i()(this,e)}return o()(e,null,[{key:"containsUnsupportedLicense",value:function(){var e=!1;return s.a.instance.dispatch(new u.c(function(t){e=t.pages.some(function(e){return e.getAllSingleItems().some(function(e){return e.isUnsupported()})})})),e}},{key:"containsUnsupportedLicenseType",value:function(e){var t=!1;return s.a.instance.dispatch(new u.c(function(n){t=n.pages.some(function(t){return t.getAllSingleItems().some(function(t){return t.getUnsupportedItemType()===e})})})),t}},{key:"check",value:function(t,n,r){var i=new c.a;e.containsUnsupportedLicense()?(t!==c.b.NONE&&i.showFailedActionPopup(t),r&&r()):(i.hidePopup(),n())}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(0),i=n.n(r),a=n(6),o=n.n(a),s=n(3),u=n.n(s),c=n(7),l=n.n(c),h=n(224),p=n(90),d=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new p.a(0,0);return i()(this,t),(n=o()(this,u()(t).call(this))).commitAction=function(e,t,r){var i=t.zoomScale,a=n.newZoomScale/t.pageEditScale,o=Math.abs(i-a)<1e-5;if(t.zoomScale=a,!o)if(n.notUpdateScroll){if(n.centerPosition.equalsTo(new p.a(0,0))){var s=r.canvasAreaVC.scrollElement.getScrollX(),u=r.canvasAreaVC.scrollElement.getScrollY(),c=a/i,l=c*s+n.centerPosition.x*(c-1),h=c*u+n.centerPosition.y*(c-1);t.editorMainVC.setScroll(l,h)}}else r.canvasAreaVC.updateScrollCenterOfCurrentPage();t.pageController.getPageRenderer(e.pages[t.renderPageIdx]).updateHoverLayer()},n.newZoomScale=e,n.notUpdateScroll=r,n.centerPosition=a,n}return l()(t,e),t}(h.d)},function(e,t,n){"use strict";var r,i;n.d(t,"a",function(){return r}),function(e){e.SAVE_REQUIRE="SAVE_REQUIRE",e.SAVE_REQUEST="SAVE_REQUEST",e.SAVE_COMPLETE="SAVE_COMPLETE",e.SAVE_FAILED="SAVE_FAILED",e.DEFAULT="DEFAULT",e.SAVE_WAIT="SAVE_WAIT"}(r||(r={})),(i=r||(r={})).getMessageFrom=function(e){switch(e){case r.DEFAULT:return"기본 상태";case r.SAVE_REQUIRE:return"변경사항 있음";case r.SAVE_WAIT:return"저장 대기중";case r.SAVE_REQUEST:return"저장중";case r.SAVE_COMPLETE:return"저장 완료";case r.SAVE_FAILED:return"저장 실패";default:return"상태 없음"}},i.getDisplayTitle=function(e){switch(e){case r.SAVE_COMPLETE:return"저장완료";case r.SAVE_FAILED:return"저장 실패";case r.SAVE_WAIT:return"저장대기중...";case r.SAVE_REQUEST:return"저장 중...";case r.SAVE_REQUIRE:return"변경사항 있음";default:return""}},i.isRequiringToSave=function(e){return e===r.SAVE_REQUIRE||e===r.SAVE_WAIT},i.isCompletedToSave=function(e){return e===r.SAVE_COMPLETE||e===r.DEFAULT}},function(e,t,n){"use strict";n.d(t,"a",function(){return b});var r=n(2),i=n.n(r),a=n(4),o=n.n(a),s=n(0),u=n.n(s),c=n(1),l=n.n(c),h=n(298),p=n(425),d=n(415),f=n(441),g=n(21),v=n(63),y=n(229),m=n(404),E=n(166),k=n(30),S=n(240),I=n(110),T=n(304),b=function(){function e(){u()(this,e)}var t,n,r,a;return l()(e,null,[{key:"makePageParam",value:(a=o()(i.a.mark(function e(t,n){var r,a,o,s,u,c=arguments;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>2&&void 0!==c[2]&&c[2],a=this.makeXml(t,n),o=!0,r&&(o=p.a.isDifferentPageXml(t.pageIdx,a)),u=!1,!o){e.next=11;break}return e.next=8,this.makePageThumbnail(t);case 8:s=e.sent,e.next=16;break;case 11:if(void 0!==(s=p.a.getPageThumbnail(t.pageIdx))){e.next=16;break}return e.next=15,this.makePageThumbnail(t);case 15:s=e.sent;case 16:return u=p.a.isDifferentPageThumbnail(t.pageIdx,s),e.abrupt("return",{xml:a,isModifiedXml:o,xmlKey:p.a.getLatestSavedXmlKey(t.pageIdx),thumb:s,isModifiedThumbnail:u,thumbnailKey:p.a.getLatestSavedThumbnailKey(t.pageIdx),width:parseInt(String(t.sheetSize.width)),height:parseInt(String(t.sheetSize.height)),reference:t.reference,memo:t.memo});case 18:case"end":return e.stop()}},e,this)})),function(e,t){return a.apply(this,arguments)})},{key:"makeXml",value:function(e,t){try{var n=new d.a("SHEET"),r=n.root();return r.attr("Version",t),(new f.a).makeXml(e,r),(new XMLSerializer).serializeToString(n.xmldoc)}catch(t){throw new g.c(v.a.FAIL_TO_CREATE_XML,"".concat(e.pageIdx+1," 페이지 xml 생성 중 에러 발생"),t)}}},{key:"makePageThumbnail",value:(r=o()(i.a.mark(function e(t){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=0===t.pageIdx,e.next=3,this.makeThumb(t,h.a.getLimitedSize(n));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"makeThumb",value:(n=o()(i.a.mark(function e(t,n){var r=this;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=o()(i.a.mark(function e(a,o){var s,u,c,l,h,p,d,f,b,w;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=Math.max(t.sheetSize.width,t.sheetSize.height),u=y.a.getThumbnailOption().resizeAlwaysMaxSize?n/s:s>n?n/s:1,c=t.sheetSize.width*u,l=t.sheetSize.height*u,e.prev=4,e.next=7,t.renderThumbnailToServer(c,l,u);case 7:if(h=e.sent,p=m.a.getCopiedMaskFromPageIndex(t.pageIdx),!m.a.hasMasks()||!p){e.next=13;break}return e.next=12,r.combineThumbWithPageMask(h,p,c,l);case 12:h=e.sent;case 13:a(h),e.next=34;break;case 16:return e.prev=16,e.t0=e.catch(4),e.prev=18,e.next=21,E.b.loadImageAsync("".concat(k.a.RESOURCE_DOMAIN,"image/new_anonymous_thumb.png"));case 21:d=e.sent,f=S.a.createCanvas(new I.a(c,l)),(b=f.getContext("2d")).fillStyle="rgba(0, 0, 0, 0.5)",b.fillRect(0,0,c,l),w=Math.min(c,l),b.drawImage(d,(c-w)/2,(l-w)/2,w,w),a(f.toDataURL("image/jpeg",T.a.TO_DATA_URL_QUALITY)),e.next=34;break;case 31:e.prev=31,e.t1=e.catch(18),o(new g.c(v.a.FAIL_TO_MAKE_THUMBNAIL,"".concat(t.pageIdx+1," 페이지 썸네일 생성 중 에러 발생"),e.t1));case 34:case"end":return e.stop()}},e,null,[[4,16],[18,31]])}));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)})),function(e,t){return n.apply(this,arguments)})},{key:"combineThumbWithPageMask",value:(t=o()(i.a.mark(function e(t,n,r,a){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){var s=S.a.createCanvas(new I.a(r,a)),u=s.getContext("2d"),c=new Image(r,a);c.onload=o()(i.a.mark(function o(){return i.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,u.drawImage(c,0,0),u.save(),u.globalCompositeOperation="destination-out",i.next=6,T.a.drawSVG(u,n.outerHTML,0,0,r,a);case 6:u.restore(),e(s.toDataURL()),i.next=14;break;case 10:i.prev=10,i.t0=i.catch(0),console.log(i.t0),e(t);case 14:case"end":return i.stop()}},o,null,[[0,10]])})),c.onerror=function(n){console.log(n),e(t)},c.src=t}));case 1:case"end":return e.stop()}},e)})),function(e,n,r,i){return t.apply(this,arguments)})}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(11),u=function(){function e(t){i()(this,e),this.target=t}return o()(e,[{key:"show",value:function(e){this.element||this.render(),this.element.style.zIndex=e?String(e):"",$(this.target).prepend(this.element)}},{key:"render",value:function(){this.element=document.createElement("div"),this.element.id=s.b.random(),this.element.className="loading",this.element.innerHTML="<div><span></span><span></span><span></span><span></span><span></span></div>"}},{key:"hide",value:function(){$(this.element).remove()}}]),e}()},function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return d});var r,i=n(0),a=n.n(i),o=n(1),s=n.n(o),u=n(226),c=n(225),l=n(279),h=n(229),p=n(110);!function(e){e[e.NONE=0]="NONE",e[e.IN=1]="IN",e[e.OUT=2]="OUT"}(r||(r={}));var d=function(){function e(){a()(this,e)}return s()(e,null,[{key:"getBoundedScaleList",value:function(){var e=this.ZOOM_SCALE_PRESET_LIST.slice();return e.splice(this.ZOOM_SCALE_PRESET_LIST.length,0,Number.MAX_SAFE_INTEGER),e.splice(0,0,0),e}},{key:"getScaleIndex",value:function(t){return t=Math.round(t*u.a.instance.pageEditScale*100),e.ZOOM_SCALE_PRESET_LIST.indexOf(t)}},{key:"isLowestScale",value:function(t){return t=Math.round(t*u.a.instance.pageEditScale*100),e.ZOOM_SCALE_PRESET_LIST[0]===t}},{key:"getLowestScale",value:function(){return e.ZOOM_SCALE_PRESET_LIST[0]/u.a.instance.pageEditScale/100}},{key:"isOverDefaultHighestScale",value:function(t){t=Math.round(t*u.a.instance.pageEditScale*100);var n=e.ZOOM_SCALE_DEFAULT_PRESET;return t>=n[n.length-1]}},{key:"isHighestLowestScale",value:function(t){return t=Math.round(t*u.a.instance.pageEditScale*100),e.ZOOM_SCALE_PRESET_LIST[e.ZOOM_SCALE_PRESET_LIST.length-1]===t}},{key:"getHighestScale",value:function(){return 500/u.a.instance.pageEditScale/100}},{key:"getNextScaleValue",value:function(t){var n=this.getScaleIndex(t);if(n>=0)return e.ZOOM_SCALE_PRESET_LIST[n+1]/100;var r=this.getBoundedScaleList();t=Math.round(t*u.a.instance.pageEditScale*100);for(var i=0;i<r.length-2;i++){var a=r[i],o=r[i+1];if(a<=t&&t<=o)return o/100}return e.ZOOM_SCALE_PRESET_LIST[e.ZOOM_SCALE_PRESET_LIST.length-1]/100}},{key:"getPrevScaleValue",value:function(t){var n=this.getScaleIndex(t);if(n>=0)return e.ZOOM_SCALE_PRESET_LIST[n-1]/100;var r=this.getBoundedScaleList();t=Math.round(t*u.a.instance.pageEditScale*100);for(var i=1;i<r.length-1;i++){var a=r[i],o=r[i+1];if(a<=t&&t<=o)return a/100}return e.ZOOM_SCALE_PRESET_LIST[0]/100}},{key:"calcFitScale",value:function(t,n,r){var i=n>440?160:58,a=(n-=i)/(r-=i),o=t.width/t.height,s=0;s=a===o?n:a>o?r*o:n;var c=Math.floor(s/t.width/u.a.instance.pageEditScale*100)/100,l=h.a.getPageZoomNavigatorOption().zoomLimit?h.a.getPageZoomNavigatorOption().minScale:e.getLowestScale();return l>c&&(c=l),e.getHighestScale()<c&&(c=e.getHighestScale()),c}},{key:"calcFullScale",value:function(t,n,r){var i=this.calcFitScale(t,n,r);if(i>=e.getHighestScale())return i;var a=n/r,o=t.width/t.height,s=0;s=a===o?n:a>o?n:r*o;var c=Math.ceil(s/t.width/u.a.instance.pageEditScale*100)/100;return e.getLowestScale()>c&&(c=e.getLowestScale()),e.getHighestScale()<c&&(c=e.getHighestScale()),c}},{key:"initValues",value:function(e,t){var n=t.clientWidth,r=t.clientHeight;this.sheetSize.width===e.width&&this.sheetSize.height===e.height&&this.canvasSize.width===n&&this.canvasSize.height===r||(this.fitScale=this.calcFitScale(e,n,r),this.fullScale=this.calcFullScale(e,n,r)),this.sheetSize=e.clone(),this.canvasSize.setSize(n,r)}},{key:"getFitScale",value:function(){return this.fitScale}},{key:"getFullScale",value:function(){return this.fullScale}},{key:"changeZoomScalePresetList",value:function(e){this.ZOOM_SCALE_PRESET_LIST=e?this.ZOOM_SCALE_EXTEND_PRESET:this.ZOOM_SCALE_DEFAULT_PRESET}},{key:"changeZoomScalePresetLowest",value:function(e){this.ZOOM_SCALE_PRESET_LIST[0]=e}},{key:"changeZoomScalePresetHighest",value:function(e){this.ZOOM_SCALE_PRESET_LIST[this.ZOOM_SCALE_PRESET_LIST.length-1]=e}},{key:"zoomInOutByExtend",value:function(e){var t;switch(e){case r.IN:t=new l.i(!0);break;case r.OUT:t=new l.j(!0);break;case r.NONE:default:return void console.log("비정상 zoom type =>",e)}c.a.instance.dispatch(t)}}]),e}();d.sheetSize=new p.a(0,0),d.canvasSize=new p.a(0,0),d.ZOOM_SCALE_PRESET_LIST=[7,10,25,50,75,100,150,200,300],d.ZOOM_SCALE_DEFAULT_PRESET=[7,10,25,50,75,100,150,200,300],d.ZOOM_SCALE_EXTEND_PRESET=[7,10,25,50,75,80,90,100,110,125,150,200,300,400,500]},,,,,,,function(e,t,n){"use strict";var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(379),u=function(){function e(){i()(this,e),this.ver=0,this.c1=0,this.c2=0,this.c3=0,this.cs=0,this.cc=0,this.name="",this.qnty=0,this.oid=0,this.oname=0,this.optSizeW=0,this.optSizeH=0,this.bypassData=""}return o()(e,[{key:"toString",value:function(){var e="";return e+="ver=".concat(this.ver,";"),e+="c1=".concat(this.c1,";"),e+="c2=".concat(this.c2,";"),e+="c3=".concat(this.c3,";"),e+="cs=".concat(this.cs,";"),e+="cc=".concat(this.cc,";"),e+="name=".concat(this.name,";"),e+="qnty=".concat(this.qnty,";"),e+="oid=".concat(this.oid,";"),e+="oname=".concat(this.oname,";"),e+="opt_size_w=".concat(this.optSizeW,";"),e+="opt_size_h=".concat(this.optSizeH,";"),e+="bypass_data=".concat(this.bypassData)}},{key:"fromString",value:function(e){var t=new Map;e.split(";").forEach(function(e){var n=e.split("=");t.set(n[0],n[1])}),this.ver=t.get("ver"),this.c1=t.get("c1"),this.c2=t.get("c2"),this.c3=t.get("c3"),this.cs=t.get("cs"),this.cc=t.get("cc"),this.name=t.get("name"),this.qnty=t.get("qnty"),this.oid=t.get("oid"),this.oname=t.get("oname"),this.optSizeW=t.get("opt_size_w"),this.optSizeH=t.get("opt_size_h"),this.bypassData=t.get("bypass_data")}}]),e}(),c=function(){function e(){i()(this,e),this.isAvailable=!1,this.sewingLength=0,this.metalringLength=0,this.stickLength=0,this.stickSurround=!1}return o()(e,[{key:"loadFromXml",value:function(e){this.isAvailable=e["@is_available"],this.sewingLength=e["@sewing_length"],this.metalringLength=e["@metalring_length"],this.stickLength=e["@stick_length"],this.stickSurround=e["@stick_surround"]}}]),e}(),l=function(){function e(){i()(this,e),this.finishType=new c,this.finishTypeNodeName="FINISH-TYPE",this.name="",this.width=0,this.height=0,this.mindpi=0,this.outputType=0,this.printSize=0,this.borderType=0,this.paperType=0,this.leftMargin=0,this.topMargin=0,this.rightMargin=0,this.bottomMargin=0,this.postProcType=0,this.centerMargin=0,this.marginType=0,this.isDynamicWidth=!1,this.isCustomSize=!1,this.customWidth=0,this.customHeight=0,this.extraData="",this.filterData="",this.minimumFontHeight=0}return o()(e,[{key:"toString",value:function(){var e="";return e+="name=".concat(this.name,";"),e+="width=".concat(this.width,";"),e+="height=".concat(this.height,";"),e+="minDpi=".concat(this.mindpi,";"),e+="output_type=".concat(this.outputType,";"),e+="print_size=".concat(this.printSize,";"),e+="border_type=".concat(this.borderType,";"),e+="paper_type=".concat(this.paperType,";"),e+="left_margin=".concat(this.leftMargin,";"),e+="top_margin=".concat(this.topMargin,";"),e+="right_margin=".concat(this.rightMargin,";"),e+="bottom_margin=".concat(this.bottomMargin,";"),e+="postm_proc_type=".concat(this.postProcType,";"),e+="center_margin=".concat(this.centerMargin,";"),e+="margin_type=".concat(this.marginType,";"),e+="is_dynamic_width=".concat(this.isDynamicWidth,";"),e+="is_custom_size=".concat(this.isCustomSize,";"),e+="custom_width=".concat(this.customWidth,";"),e+="custom_height=".concat(this.customHeight,";"),e+="extra_data=".concat(this.extraData,";"),e+="filter_data=".concat(this.filterData,";"),e+="minimum_font_height=".concat(this.minimumFontHeight)}},{key:"fromString",value:function(e){var t=new Map;e.split(";").forEach(function(e){var n=e.split("=");t.set(n[0],n[1])}),this.name=t.get("name"),this.width=t.get("width"),this.height=t.get("height"),this.mindpi=t.get("minDpi"),this.outputType=t.get("output_type"),this.printSize=t.get("print_size"),this.borderType=t.get("border_type"),this.paperType=t.get("paper_type"),this.leftMargin=t.get("left_margin"),this.topMargin=t.get("top_margin"),this.rightMargin=t.get("right_margin"),this.bottomMargin=t.get("bottom_margin"),this.postProcType=t.get("post_proc_type"),this.centerMargin=t.get("center_margin"),this.marginType=t.get("margin_type"),this.isDynamicWidth=t.get("is_dynamic_width"),this.isCustomSize=t.get("is_custom_size"),this.customWidth=t.get("custom_width"),this.customHeight=t.get("custom_height"),this.extraData=t.get("extra_data"),this.filterData=t.get("filter_data")}},{key:"loadFromXml",value:function(e){this.name=e["@name"],this.width=e["@width"],this.height=e["@height"],this.mindpi=e["@minDpi"],this.outputType=e["@output_type"],this.printSize=e["@print_size"],this.borderType=e["@border_type"],this.paperType=e["@paper_type"],this.leftMargin=e["@left_margin"],this.topMargin=e["@top_margin"],this.rightMargin=e["@right_margin"],this.bottomMargin=e["@bottom_margin"],this.postProcType=e["@post_proc_type"],this.centerMargin=e["@center_margin"],this.marginType=e["@margin_type"],this.isDynamicWidth=e["@is_dynamic_width"],this.isCustomSize=e["@is_custom_size"],this.customWidth=e["@custom_width"],this.customHeight=e["@custom_height"],this.extraData=e["@extra_data"],this.filterData=e["@filter_data"],e[this.finishTypeNodeName]&&e[this.finishTypeNodeName][this.finishTypeNodeName]&&this.finishType.loadFromXml(e[this.finishTypeNodeName][this.finishTypeNodeName])}}]),e}(),h=function(){function e(){i()(this,e),this.tn="",this.startY=0,this.startM=0,this.startD=0,this.dayCount=0,this.incValue=0}return o()(e,[{key:"toString",value:function(){var e="";return e+="tn=".concat(this.tn,";"),e+="start_y=".concat(this.startY,";"),e+="start_m=".concat(this.startM,";"),e+="start_d=".concat(this.startD,";"),e+="daycount=".concat(this.dayCount,";"),e+="incvalue=".concat(this.incValue)}},{key:"fromString",value:function(e){var t=new Map;e.split(";").forEach(function(e){var n=e.split("=");t.set(n[0],n[1])}),this.tn=t.get("tn"),this.startY=t.get("start_y"),this.startM=t.get("start_m"),this.startD=t.get("start_d"),this.dayCount=t.get("daycount"),this.incValue=t.get("incvalue")}}]),e}(),p=n(293);n.d(t,"a",function(){return d});var d=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unknown",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Map;i()(this,e),this.xml=t;var s=t[0]||{};this.version=n,this.programVersion=r,this.copyCommIdx=a,this.commodityAttrs=o,this.commodity=new u,s.COMMODITY&&this.commodity.fromString(s.COMMODITY),this.output=new l,void 0!==s.OUTPUT2?this.output.loadFromXml(s.OUTPUT2):s.OUTPUT&&this.output.fromString(s.OUTPUT),this.param=new h,s.PARAM&&this.param.fromString(s.PARAM)}return o()(e,null,[{key:"parseCopyXML",value:function(t){var n=s.a.build(t)["SMILECAT-TBPE-SHEETS"],r=new Map;return n.COMMODITY.split(";").forEach(function(e){var t=e.split("=");r.set(t[0],t[1])}),new e([n],n["@Version"],n["@ProgramVersion"],n["@CopyCommIdx"],r)}},{key:"parseNewXML",value:function(t){var n=t.map(function(e){return s.a.build(e).SMILECAT});return new e(n,n[0]["@Version"])}},{key:"parseUnicornXML",value:function(t){var n=t.map(function(e){return s.a.build(e)});return new e(n,n[0]["@Version"])}},{key:"blank",value:function(){return new e([],p.a.getLatestVersion(),p.a.getLatestVersion())}}]),e}()},function(e,t,n){"use strict";var r=n(2),i=n.n(r),a=n(4),o=n.n(a),s=n(0),u=n.n(s),c=n(1),l=n.n(c),h=n(247),p=n(407),d=n(352),f=function(){function e(){u()(this,e)}return l()(e,null,[{key:"createVector",value:function(e,t){var n=t.split(" "),r=Number(n[2]),i=Number(n[3]),a=d.a.convertPolygonPointsNodeToPathNode(e).getAttribute("d"),o=this.createSvgElementWithViewBox(r,i);return o.appendChild(this.createPathElementCombinedRectanglePath(r,i,a)),o}},{key:"createCircle",value:function(e,t,n){var r=p.a.createCircle(0,0,n),i=this.createSvgElementWithViewBox(e,t);return i.appendChild(this.createPathElementCombinedRectanglePath(e,t,r)),i}},{key:"createRoundRectangle",value:function(e,t,n,r){var i=p.a.createRoundRectangle(0,0,e,t,n,r),a=this.createSvgElementWithViewBox(e,t);return a.appendChild(this.createPathElementCombinedRectanglePath(e,t,i)),a}},{key:"createSvgElementWithViewBox",value:function(e,t){var n=document.createElementNS(h.a.SVG,"svg");return n.setAttribute("viewBox","0 0 ".concat(e," ").concat(t)),n}},{key:"createPathElementCombinedRectanglePath",value:function(e,t,n){var r=this.getRectPath(e,t);return this.createPathElement("".concat(r," ").concat(n))}},{key:"createPathElement",value:function(e){var t=document.createElementNS(h.a.SVG,"path");return t.setAttribute("d","".concat(e)),t}},{key:"getRectPath",value:function(e,t){return"M 0 0 V ".concat(t+.004*t," H ").concat(e+.004*e," V 0 Z")}}]),e}(),g=n(521),v=n(229),y=n(250),m=n(274),E=function(){function e(){u()(this,e),this.masks=new Map}var t;return l()(e,[{key:"setListener",value:function(e){this.listener=e}},{key:"initMasks",value:function(){var e=this,t=v.a.getEditorOpenOption().getOutput();!this.loading&&t.canMask()&&(this.synchronizedMasks()?this.listener&&this.listener.initializeMasks():(this.loading=!0,t.getShapes().forEach(function(n){return e.registerMask(n.getMatch(),n.getShape(),t.getSize()).then(function(){return e.doneRegisterMask()})})))}},{key:"registerMask",value:(t=o()(i.a.mark(function e(t,n,r){var a=this;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,i){try{var o=n.getType();if([m.d.SQUARE,m.d.LINE].includes(o))return e();switch(o){case m.d.ROUND_SQUARE:a.addMask(t,f.createRoundRectangle(r.getWidth(),r.getHeight(),n.getRoundDepth(),n.getRoundCorners())),e();break;case m.d.CIRCLE:a.addMask(t,f.createCircle(r.getWidth(),r.getHeight(),n.getRadius())),e();break;case m.d.VECTOR:g.a.getSvgElementByFormat(n.getVectorFormat(),n.getVector()).then(function(n){a.addMask(t,f.createVector(d.a.changePathToPolygonInSvg(n).querySelector("polygon"),n.getAttribute("viewBox"))),e()});break;case m.d.LINE:case m.d.SQUARE:default:e()}}catch(e){i(e)}}));case 1:case"end":return e.stop()}},e)})),function(e,n,r){return t.apply(this,arguments)})},{key:"doneRegisterMask",value:function(){this.synchronizedMasks()&&(this.loading=!1,this.listener&&this.listener.initializeMasks())}},{key:"addMask",value:function(t,n){e.initMaskSvg(n),e.initMaskPath(n.querySelector("path")),this.masks.set(t,n)}},{key:"getCopiedMaskFromPageIndex",value:function(e){var t=e+1;if(this.masks.has(t.toString()))return this.masks.get(t.toString()).cloneNode(!0);var n=t%2==0;return n&&this.masks.has(y.e.EVEN)?this.masks.get(y.e.EVEN).cloneNode(!0):!n&&this.masks.has(y.e.ODD)?this.masks.get(y.e.ODD).cloneNode(!0):this.masks.has(y.e.ALL)?this.masks.get(y.e.ALL).cloneNode(!0):null}},{key:"hasMasks",value:function(){return this.masks.size>0}},{key:"synchronizedMasks",value:function(){return this.hasMasks()&&v.a.getEditorOpenOption().getOutput().getShapeCount()===this.masks.size}},{key:"requestMasksInitialize",value:function(){!this.loading&&v.a.getEditorOpenOption().getOutput().canMask()&&this.synchronizedMasks()&&this.listener&&this.listener.initializeMasks()}}],[{key:"initMaskSvg",value:function(e){e.classList.add("masking","layer"),e.style.zIndex="9999",e.setAttribute("preserveAspectRatio","none"),e.style.width="100%",e.style.height="100%"}},{key:"initMaskPath",value:function(e){e.setAttribute("fill-rule","evenodd"),e.classList.add("mask_path")}}]),e}();t.a=new E},,function(e,t,n){"use strict";var r,i=n(6),a=n.n(i),o=n(3),s=n.n(o),u=n(7),c=n.n(u),l=n(62),h=n.n(l),p=n(0),d=n.n(p),f=n(1),g=n.n(f),v=n(11),y=n(352),m=n(90);!function(e){e.M="M",e.L="L",e.H="H",e.V="V",e.C="C",e.Q="Q",e.A="A",e.Z="Z"}(r||(r={}));var E=function(){function e(t){d()(this,e),this.datas=[],this.code=t}return g()(e,[{key:"pushData",value:function(e,t,n,r,i){this.datas.push({value:e,scaleX:t,scaleY:n,offsetX:r,offsetY:i})}},{key:"calcDatas",value:function(e,t,n,r){var i=[],a=!0,o=!1,s=void 0;try{for(var u,c=this.datas[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value;i.push((l.value+(l.offsetX?n:0)+(l.offsetY?r:0))*(l.scaleX?e:1)*(l.scaleY?t:1))}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}return i}},{key:"getPathString",value:function(e,t,n,r){var i="".concat(this.code),a=!0,o=!1,s=void 0;try{for(var u,c=this.datas[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value;i+="".concat((l.value+(l.offsetX?n:0)+(l.offsetY?r:0))*(l.scaleX?e:1)*(l.scaleY?t:1),",")}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}return"".concat(i.substr(0,i.length-1)," ")}},{key:"isClockwise",value:function(){return!1}}],[{key:"getPathString",value:function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(e.length<=0)return"";var o="";if(a){var s=e.slice().reverse(),u=!0,c=!1,l=void 0;try{for(var h,p=s[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var d=h.value;o+=d.getPathStringReverse(t,n,r,i)}}catch(e){c=!0,l=e}finally{try{u||null==p.return||p.return()}finally{if(c)throw l}}}else{var f=!0,g=!1,v=void 0;try{for(var y,m=e[Symbol.iterator]();!(f=(y=m.next()).done);f=!0){var E=y.value;o+=E.getPathString(t,n,r,i)}}catch(e){g=!0,v=e}finally{try{f||null==m.return||m.return()}finally{if(g)throw v}}}return(o=o.trim()).length>0&&"z"!==o[o.length-1].toLowerCase()&&(o+="z"),o.trim()}}]),e}(),k=function(e){function t(e,n){var r;return d()(this,t),(r=a()(this,s()(t).call(this,"M"))).pushData(e,!0,!1,!0,!1),r.pushData(n,!1,!0,!1,!0),r.baseX=e,r.baseY=n,r.targetX=e,r.targetY=n,r}return c()(t,e),g()(t,[{key:"getPathStringReverse",value:function(e,t,n,r){return""}},{key:"getUnitType",value:function(){return r.M}},{key:"getCheckPoints",value:function(){return[new m.a(this.baseX,this.baseY)]}}]),t}(E),S=function(e){function t(e,n,r,i){var o;return d()(this,t),(o=a()(this,s()(t).call(this,"L"))).pushData(r,!0,!1,!0,!1),o.pushData(i,!1,!0,!1,!0),o.baseX=e,o.baseY=n,o.targetX=r,o.targetY=i,o}return c()(t,e),g()(t,[{key:"getPathStringReverse",value:function(e,t,n,r){var i=(this.baseX+n)*e,a=(this.baseY+r)*t;return"L".concat(i," ").concat(a)}},{key:"getUnitType",value:function(){return r.L}},{key:"getCheckPoints",value:function(){return[new m.a(this.targetX,this.targetY)]}}]),t}(E),I=function(e){function t(e,n,r){var i;return d()(this,t),(i=a()(this,s()(t).call(this,"H"))).pushData(r,!0,!1,!0,!1),i.baseX=e,i.baseY=n,i.targetX=r,i.targetY=n,i}return c()(t,e),g()(t,[{key:"getPathStringReverse",value:function(e,t,n,r){var i=(this.baseX+n)*e;return"H".concat(i)}},{key:"getUnitType",value:function(){return r.H}},{key:"getCheckPoints",value:function(){return[new m.a(this.targetX,this.targetY)]}}]),t}(E),T=function(e){function t(e,n,r){var i;return d()(this,t),(i=a()(this,s()(t).call(this,"V"))).pushData(r,!1,!0,!1,!0),i.baseX=e,i.baseY=n,i.targetX=e,i.targetY=r,i}return c()(t,e),g()(t,[{key:"getPathStringReverse",value:function(e,t,n,r){var i=(this.baseY+r)*t;return"V".concat(i)}},{key:"getUnitType",value:function(){return r.V}},{key:"getCheckPoints",value:function(){return[new m.a(this.targetX,this.targetY)]}}]),t}(E),b=function(e){function t(e,n,r,i,o,u,c,l,h){var p;return d()(this,t),(p=a()(this,s()(t).call(this,"A"))).pushData(r,!0,!1,!1,!1),p.pushData(i,!1,!0,!1,!1),p.pushData(o,!1,!1,!1,!1),p.pushData(u?1:0,!1,!1,!1,!1),p.pushData(c?1:0,!1,!1,!1,!1),p.pushData(l,!0,!1,!0,!1),p.pushData(h,!1,!0,!1,!0),p.baseX=e,p.baseY=n,p.targetX=l,p.targetY=h,p}return c()(t,e),g()(t,[{key:"getPathStringReverse",value:function(e,t,n,r){var i=(this.baseX+n)*e,a=(this.baseY+r)*t,o=this.calcDatas(e,t,n,r);return"A".concat(o[0]," ").concat(o[1]," ").concat(o[2]," ").concat(o[3]," ").concat(1===o[4]?1:0," ").concat(i," ").concat(a)}},{key:"getUnitType",value:function(){return r.A}},{key:"isClockwise",value:function(){return 1===this.datas[5].value}},{key:"getCheckPoints",value:function(){return[new m.a(this.targetX,this.targetY)]}}]),t}(E),w=function(e){function t(e,n,r,i,o,u,c,l){var h;return d()(this,t),(h=a()(this,s()(t).call(this,"C"))).pushData(r,!0,!1,!0,!1),h.pushData(i,!1,!0,!1,!0),h.pushData(o,!0,!1,!0,!1),h.pushData(u,!1,!0,!1,!0),h.pushData(c,!0,!1,!0,!1),h.pushData(l,!1,!0,!1,!0),h.baseX=e,h.baseY=n,h.targetX=c,h.targetY=l,h}return c()(t,e),g()(t,[{key:"getPathStringReverse",value:function(e,t,n,r){var i=(this.baseX+n)*e,a=(this.baseY+r)*t,o=this.calcDatas(e,t,n,r);return"C".concat(o[2]," ").concat(o[3]," ").concat(o[0]," ").concat(o[1]," ").concat(i," ").concat(a)}},{key:"getUnitType",value:function(){return r.C}},{key:"isClockwise",value:function(){var e=this.datas[0].value,t=this.datas[1].value;return(e-this.baseX)*(this.targetY-t)-(t-this.baseY)*(this.targetX-e)>=0}},{key:"getCheckPoints",value:function(){return[new m.a(this.datas[0].value,this.datas[1].value),new m.a(this.datas[2].value,this.datas[3].value),new m.a(this.targetX,this.targetY)]}}]),t}(E),A=function(e){function t(e,n,r,i,o,u){var c;return d()(this,t),(c=a()(this,s()(t).call(this,"Q"))).pushData(r,!0,!1,!0,!1),c.pushData(i,!1,!0,!1,!0),c.pushData(o,!0,!1,!0,!1),c.pushData(u,!1,!0,!1,!0),c.baseX=e,c.baseY=n,c.targetX=o,c.targetY=u,c}return c()(t,e),g()(t,[{key:"getPathStringReverse",value:function(e,t,n,r){var i=(this.baseX+n)*e,a=(this.baseY+r)*t,o=this.calcDatas(e,t,n,r);return"Q".concat(o[0]," ").concat(o[1]," ").concat(i," ").concat(a)}},{key:"getUnitType",value:function(){return r.Q}},{key:"isClockwise",value:function(){var e=this.datas[0].value,t=this.datas[1].value;return(e-this.baseX)*(this.targetY-t)-(t-this.baseY)*(this.targetX-e)>=0}},{key:"getCheckPoints",value:function(){return[new m.a(this.datas[0].value,this.datas[1].value),new m.a(this.targetX,this.targetY)]}}]),t}(E),C=function(e){function t(e,n){var r;return d()(this,t),(r=a()(this,s()(t).call(this,"Z"))).baseX=e,r.baseY=n,r.targetX=e,r.targetY=n,r}return c()(t,e),g()(t,[{key:"getPathString",value:function(e,t,n,r){return this.code}},{key:"getPathStringReverse",value:function(e,t,n,r){var i=(this.baseX+n)*e,a=(this.baseY+r)*t;return"M".concat(i," ").concat(a)}},{key:"getUnitType",value:function(){return r.Z}},{key:"getCheckPoints",value:function(){return[]}}]),t}(E),x=function(){function e(){d()(this,e)}return g()(e,null,[{key:"getDAttr",value:function(e){var t=e.getAttribute("d");return t.length>0&&"z"!==t[t.length-1].toLowerCase()&&(t+="z"),t}},{key:"parseSvgPath",value:function(e){var t=[],n=this.getDAttr(e),r=this.parsePath(n),i=0,a=0,o=0,s=0,u=0,c=0,l=0,h=0,p=!0,d=!1,f=void 0;try{for(var g,v=r[Symbol.iterator]();!(p=(g=v.next()).done);p=!0){var y=g.value;switch(o=i,s=a,y[0]){case"m":i+=y[1],a+=y[2],t.push(new k(i,a));break;case"M":i=y[1],a=y[2],t.push(new k(i,a));break;case"l":i+=y[1],a+=y[2],t.push(new S(o,s,i,a));break;case"L":i=y[1],a=y[2],t.push(new S(o,s,i,a));break;case"H":i=y[1],t.push(new I(o,s,i));break;case"h":i+=y[1],t.push(new I(o,s,i));break;case"V":a=y[1],t.push(new T(o,s,a));break;case"v":a+=y[1],t.push(new T(o,s,a));break;case"a":case"A":"a"===y[0]?(i+=y[6],a+=y[7]):(i=y[6],a=y[7]);var m=1===y[4],E=1===y[5];t.push(new b(o,s,y[1],y[2],y[3],m,E,i,a));break;case"C":u=y[3],c=y[4],i=y[5],a=y[6],t.push(new w(o,s,y[1],y[2],u,c,i,a));break;case"c":t.push(new w(o,s,y[1]+i,y[2]+a,y[3]+i,y[4]+a,y[5]+i,y[6]+a)),u=y[3]+i,c=y[4]+a,i+=y[5],a+=y[6];break;case"S":null!==u&&null!==c||(u=i,c=a),t.push(new w(o,s,2*i-u,2*a-c,y[1],y[2],y[3],y[4])),u=y[1],c=y[2],i=y[3],a=y[4];break;case"s":null!==u&&null!==c||(u=i,c=a),t.push(new w(o,s,2*i-u,2*a-c,y[1]+i,y[2]+a,y[3]+i,y[4]+a)),u=y[1]+i,c=y[2]+a,i+=y[3],a+=y[4];break;case"Q":l=y[1],h=y[2],i=y[3],a=y[4],t.push(new A(o,s,l,h,i,a));break;case"q":l=y[1]+i,h=y[2]+a,i+=y[3],a+=y[4],t.push(new A(o,s,l,h,i,a));break;case"T":case"t":null!==l&&null!==h||(l=i,h=a),l=2*i-l,h=2*a-h,"T"===y[0]?(i=y[1],a=y[2]):(i+=y[1],a+=y[2]),t.push(new A(o,s,l,h,i,a));break;case"z":case"Z":t.push(new C(o,s))}}}catch(e){d=!0,f=e}finally{try{p||null==v.return||v.return()}finally{if(d)throw f}}return t}},{key:"parseValues",value:function(e){var t=e.match(this.numberPattern);return t?t.map(Number):[]}},{key:"parsePath",value:function(e){var t=this,n=new Map;n.set("a",7).set("c",6).set("h",1).set("l",2).set("m",2).set("q",4).set("s",4).set("t",2).set("v",1).set("z",0);var r=[],i="".concat(e).trim();return"M"!==i[0]&&"m"!==i[0]?r:(i.replace(this.segmentPattern,function(e,i,a){var o=i.toLowerCase();if(a=t.parseValues(a),"m"===o&&a.length>2&&(r.push([i].concat(a.splice(0,2))),o="l",i="m"===i?"l":"L"),a.length<n.get(o))return"";for(r.push([i].concat(a.splice(0,n.get(o))));a.length>=n.get(o)&&a.length&&n.get(o);)r.push([i].concat(a.splice(0,n.get(o))));return""}),r)}}]),e}();x.numberPattern=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi,x.segmentPattern=/([astvzqmhlc])([^astvzqmhlc]*)/gi;var R=n(247);n.d(t,"a",function(){return L});var L,_=function(){function e(t,n){d()(this,e),this.originElement=t,this.data=n,this.element=this.createCopiedElement(t),this.arrayOfSVGPathUnit=x.parseSvgPath(this.element),this.isClockwise=this.calcClockwise()}return g()(e,[{key:"originColor",value:function(e){throw new Error("Method not implemented.")}}]),g()(e,[{key:"calcClockwise",value:function(){var e=this.arrayOfSVGPathUnit.length;if(e<2)return!1;if(e<5){var t=this.arrayOfSVGPathUnit.filter(function(e){return e.getUnitType()===r.A||e.getUnitType()===r.Q||e.getUnitType()===r.C});if(t.length>0)return t[0].isClockwise();if(4===e){var n=this.arrayOfSVGPathUnit[0],i=this.arrayOfSVGPathUnit[1],a=this.arrayOfSVGPathUnit[2],o=this.arrayOfSVGPathUnit[3];return(a.baseX-n.baseX)*(o.baseY-i.baseY)-(a.baseY-n.baseY)*(o.baseX-i.baseX)>=0}return!1}var s=[],u=!0,c=!1,l=void 0;try{for(var p,d=this.arrayOfSVGPathUnit[Symbol.iterator]();!(u=(p=d.next()).done);u=!0){var f=p.value;if(s.length>0&&f.getUnitType()===r.Z)break;s.push.apply(s,h()(f.getCheckPoints()))}}catch(e){c=!0,l=e}finally{try{u||null==d.return||d.return()}finally{if(c)throw l}}return this.calcProd(s)}},{key:"calcProd",value:function(e){for(var t=e.length,n=0,r=0;r<t;r++){var i=e[r],a=e[(r+1)%t],o=e[(r+2)%t],s=Math.sqrt((a.x-i.x)*(a.x-i.x)+(a.y-i.y)*(a.y-i.y)),u=Math.sqrt((o.x-a.x)*(o.x-a.x)+(o.y-a.y)*(o.y-a.y));s*u!=0&&(n+=((o.y-a.y)*(a.x-i.x)-(o.x-a.x)*(a.y-i.y))/(s*u))}return n>=0}},{key:"getElement",value:function(){return this.element}},{key:"scale",value:function(e,t){this.element.setAttribute("d","".concat(this.getPathString(e,t,0,0)))}},{key:"getPathString",value:function(e,t,n,r){return E.getPathString(this.arrayOfSVGPathUnit,e,t,n,r,this.isClockwise)}}]),e}(),P=function(e){function t(){return d()(this,t),a()(this,s()(t).apply(this,arguments))}return c()(t,e),g()(t,[{key:"createCopiedElement",value:function(e){var t=document.createElementNS(R.a.SVG,"path"),n=null!==e.getAttribute("x")?Number(e.getAttribute("x")):0,r=null!==e.getAttribute("y")?Number(e.getAttribute("y")):0,i=null!==e.getAttribute("width")?Number(e.getAttribute("width")):0,a=null!==e.getAttribute("height")?Number(e.getAttribute("height")):0;t.setAttribute("d","M".concat(n," ").concat(r,"v").concat(a,"h").concat(i,"v").concat(-a,"z"));var o=!0,s=!1,u=void 0;try{for(var c,l=e.attributes[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var h=c.value;"x"!==h.name&&"y"!==h.name&&"width"!==h.name&&"height"!==h.name&&t.setAttribute(h.name,h.value)}}catch(e){s=!0,u=e}finally{try{o||null==l.return||l.return()}finally{if(s)throw u}}return t}}]),t}(_),O=function(e){function t(){return d()(this,t),a()(this,s()(t).apply(this,arguments))}return c()(t,e),g()(t,[{key:"createCopiedElement",value:function(e){var t=document.createElementNS(R.a.SVG,"path"),n=null!==e.getAttribute("cx")?Number(e.getAttribute("cx")):0,r=null!==e.getAttribute("cy")?Number(e.getAttribute("cy")):0,i=null!==e.getAttribute("r")?Number(e.getAttribute("r")):0,a="M".concat(n-i," ").concat(r,"a").concat(i," ").concat(i," 0 1 0 ").concat(2*i," 0a").concat(i," ").concat(i," 0 1 0 ").concat(-2*i," 0z");t.setAttribute("d",a);var o=!0,s=!1,u=void 0;try{for(var c,l=e.attributes[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var h=c.value;"cx"!==h.name&&"cy"!==h.name&&"r"!==h.name&&t.setAttribute(h.name,h.value)}}catch(e){s=!0,u=e}finally{try{o||null==l.return||l.return()}finally{if(s)throw u}}return t}}]),t}(_),D=function(e){function t(){return d()(this,t),a()(this,s()(t).apply(this,arguments))}return c()(t,e),g()(t,[{key:"createCopiedElement",value:function(e){var t=document.createElementNS(R.a.SVG,"path"),n=null!==e.getAttribute("cx")?Number(e.getAttribute("cx")):0,r=null!==e.getAttribute("cy")?Number(e.getAttribute("cy")):0,i=null!==e.getAttribute("rx")?Number(e.getAttribute("rx")):0,a=null!==e.getAttribute("ry")?Number(e.getAttribute("ry")):0,o="M".concat(n-i," ").concat(r,"a").concat(i," ").concat(a," 0 1 0 ").concat(2*i," 0a").concat(i," ").concat(a," 0 1 0 ").concat(-2*i," 0z");t.setAttribute("d",o);var s=!0,u=!1,c=void 0;try{for(var l,h=e.attributes[Symbol.iterator]();!(s=(l=h.next()).done);s=!0){var p=l.value;"cx"!==p.name&&"cy"!==p.name&&"rx"!==p.name&&"ry"!==p.name&&t.setAttribute(p.name,p.value)}}catch(e){u=!0,c=e}finally{try{s||null==h.return||h.return()}finally{if(u)throw c}}return t}}]),t}(_),M=function(e){function t(){return d()(this,t),a()(this,s()(t).apply(this,arguments))}return c()(t,e),g()(t,[{key:"createCopiedElement",value:function(e){for(var t=document.createElementNS(R.a.SVG,"path"),n=e.getAttribute("points").trim(),r=y.a.getCoordinatePoints(n),i="M",a=r.length,o=0;o<a-1;o++){var s=r[o];i+="".concat(s.x," ").concat(s.y,"L")}var u=r[a-1];i+="".concat(u.x," ").concat(u.y,"Z"),t.setAttribute("d","".concat(i));var c=!0,l=!1,h=void 0;try{for(var p,d=e.attributes[Symbol.iterator]();!(c=(p=d.next()).done);c=!0){var f=p.value;"points"!==f.name&&t.setAttribute(f.name,f.value)}}catch(e){l=!0,h=e}finally{try{c||null==d.return||d.return()}finally{if(l)throw h}}return t}}]),t}(_),N=function(e){function t(){return d()(this,t),a()(this,s()(t).apply(this,arguments))}return c()(t,e),g()(t,[{key:"createCopiedElement",value:function(e){return e.cloneNode(!0)}}]),t}(_),B=function(){function e(){d()(this,e)}return g()(e,null,[{key:"getSvgElementTransformer",value:function(e,t){var n=e.nodeName.toLowerCase();return"rect"===n?new P(e,t.getCloneCurrentData()):"circle"===n?new O(e,t.getCloneCurrentData()):"ellipse"===n?new D(e,t.getCloneCurrentData()):"polygon"===n?new M(e,t.getCloneCurrentData()):"path"===n?new N(e,t.getCloneCurrentData()):null}}]),e}();(L||(L={})).makeSvgRenderedDataUnit=function(e){var t=[];return function e(t,n,r){if(!t.nodeName||"defs"!==t.nodeName.toLowerCase()){r.save();var i=t.getAttribute("opacity");i&&(r.opacity=Number(i));var a=t.getAttribute("fill");a&&(r.fill=a);var o=t.getAttribute("transform");if(o){var s=o.split(")"),u=!0,c=!1,l=void 0;try{for(var h,p=s[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var d=h.value;d.includes("translate")?r.translate="".concat(d,")"):d.includes("matrix")?r.matrix="".concat(d,")"):d.includes("scale")?r.scale="".concat(d,")"):d.includes("rotate")&&(r.rotate="".concat(d,")"))}}catch(e){c=!0,l=e}finally{try{u||null==p.return||p.return()}finally{if(c)throw l}}}var f=B.getSvgElementTransformer(t,r);if(f){if(n.push(f),t.parentElement){var g=f.getElement();t.parentElement.insertBefore(g,t),t.parentElement.removeChild(t)}}else{var v=!0,y=!1,m=void 0;try{for(var E,k=t.childNodes[Symbol.iterator]();!(v=(E=k.next()).done);v=!0){var S=E.value;S instanceof SVGElement&&e(S,n,r)}}catch(e){y=!0,m=e}finally{try{v||null==k.return||k.return()}finally{if(y)throw m}}}r.restore()}}(e,t,new U),t};var U=function(){function e(){d()(this,e),this.stackOpacity=[],this.stackFill=[],this.stackTranslate=[],this.stackMatrix=[],this.stackScale=[],this.stackRotate=[]}return g()(e,[{key:"save",value:function(){this.stackOpacity.push(this.opacity),this.stackFill.push(this.fill),this.stackTranslate.push(this.translate),this.stackMatrix.push(this.matrix),this.stackScale.push(this.scale),this.stackRotate.push(this.rotate)}},{key:"restore",value:function(){this.opacity=this.stackOpacity.pop(),this.fill=this.stackFill.pop(),this.translate=this.stackTranslate.pop(),this.matrix=this.stackMatrix.pop(),this.scale=this.stackScale.pop(),this.rotate=this.stackRotate.pop()}},{key:"getCloneCurrentData",value:function(){var t=new e;return t.opacity=this.opacity,t.fill=this.fill,t.translate=this.translate,t.matrix=this.matrix,t.scale=this.scale,t.rotate=this.rotate,t}},{key:"makeKeyString",value:function(){return"".concat(this.opacity,"/").concat(this.fill,"/").concat(this.translate,"/").concat(this.matrix,"/").concat(this.scale,"/").concat(this.rotate)}},{key:"getHashString",value:function(){var t=this.makeKeyString();if(e.keyMap.has(t))return e.keyMap.get(t);for(var n=v.b.random(10);e.values.includes(n);)n=v.b.random(10);return e.keyMap.set(t,n),e.values.push(n),n}}]),e}();U.values=[],U.keyMap=new Map},function(e,t,n){"use strict";var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(250),u=function(){function e(){i()(this,e)}return o()(e,null,[{key:"createCircle",value:function(e,t,n){var r=e,i=t+n,a="M ".concat(r," ").concat(i," A ").concat(1," ").concat(1," 0 0 1 ").concat(2*n+r," ").concat(i),o="A ".concat(1," ").concat(1," 0 0 1 ").concat(r," ").concat(i);return"".concat(a," ").concat(o," Z")}},{key:"createRectangle",value:function(e,t,n,r){return"M ".concat(e," ").concat(t," H ").concat(n," V ").concat(r," H ").concat(e," V ").concat(t," Z")}},{key:"createRoundRectangle",value:function(e,t,n,r,i,a){var o=a.includes(s.c.LEFT_TOP),u=a.includes(s.c.LEFT_BOTTOM),c=a.includes(s.c.RIGHT_TOP),l=a.includes(s.c.RIGHT_BOTTOM),h=e+i,p=t+i,d="".concat(i," ").concat(i),f=o?h:e,g=e+n,v=t+r,y="A ".concat(d," ").concat("0 0 1"," ").concat(f," ").concat(t),m="A ".concat(d," ").concat("0 0 1"," ").concat(g," ").concat(p),E="A ".concat(d," ").concat("0 0 1"," ").concat(g-i," ").concat(v),k="A ".concat(d," ").concat("0 0 1"," ").concat(e," ").concat(v-i),S=o?"".concat(p," ").concat(y):"".concat(t),I="".concat(e," ").concat(S),T="H ".concat(f+(g-f-(c?i:0))),b="".concat(c?" ".concat(m):""),w=c?p:t,A="V ".concat(w+(v-w-(l?i:0))),C="".concat(l?" ".concat(E):""),x="H ".concat(u?h:e),R="".concat(u?" ".concat(k):"");return"M ".concat(I," ").concat(T).concat(b," ").concat(A).concat(C," ").concat(x).concat(R," Z")}}]),e}();t.a=u},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(6),u=n.n(s),c=n(3),l=n.n(c),h=n(7),p=n.n(h),d=function(e){function t(){return i()(this,t),u()(this,l()(t).apply(this,arguments))}return p()(t,e),o()(t,[{key:"setProps",value:function(e){this.props=e}},{key:"canDisplayHyperlink",value:function(){return!0}}]),t}(n(31).a)},function(e,t,n){"use strict";n.d(t,"a",function(){return p}),n.d(t,"b",function(){return r});var r,i=n(0),a=n.n(i),o=n(1),s=n.n(o),u=n(258),c=n(90),l=n(246),h=n(234),p=function(){function e(t,n){a()(this,e),this.isCropped=!1,this.minPaddingSize=26,this.areaDivRect={},this.cloneDivRect={},this.boxDivRect={},this.imgPositionV=new c.a(0,0),this.setAreaDivRect(0,0,t,n),this.setBoxDivRect(0,0,t,n),this.initBox(),this.resizeDirection=r.NONE}return s()(e,[{key:"isResizeSelected",value:function(){return this.resizeDirection!==r.NONE}},{key:"setAreaDivRect",value:function(e,t,n,r){this.areaDivRect.left=e,this.areaDivRect.top=t,this.areaDivRect.right=e+n,this.areaDivRect.bottom=t+r,this.areaDivRect.width=n,this.areaDivRect.height=r}},{key:"initPhotoCloneBox",value:function(e,t,n,r){this.cloneDivRect.left=e,this.cloneDivRect.top=t,this.cloneDivRect.width=n,this.cloneDivRect.height=r}},{key:"increasePhotoCloneBoxPosition",value:function(e,t){this.cloneDivRect.left+=e,this.cloneDivRect.top+=t}},{key:"updatePhotoCloneBoxSize",value:function(e,t){this.cloneDivRect.width=e,this.cloneDivRect.height=t}},{key:"getPhotoCloneBoxRect",value:function(e){return new h.a(this.cloneDivRect.left,this.cloneDivRect.top,this.cloneDivRect.left+this.cloneDivRect.width,this.cloneDivRect.top+this.cloneDivRect.height,e)}},{key:"getBoxRect",value:function(e){return new h.a(this.boxDivRect.left,this.boxDivRect.top,this.boxDivRect.left+this.boxDivRect.width,this.boxDivRect.top+this.boxDivRect.height,e)}},{key:"setBoxDivRect",value:function(e,t,n,r){this.boxDivRect.left=e,this.boxDivRect.top=t,this.boxDivRect.right=e+n,this.boxDivRect.bottom=t+r,this.boxDivRect.width=n,this.boxDivRect.height=r}},{key:"getBoxDivRect",value:function(){return{left:this.boxDivRect.left,top:this.boxDivRect.top,right:this.boxDivRect.left+this.boxDivRect.width,bottom:this.boxDivRect.top+this.boxDivRect.height,width:this.boxDivRect.width,height:this.boxDivRect.height}}},{key:"initBox",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.areaDivRect.width,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.areaDivRect.height;this.boxDivRect.left=e,this.boxDivRect.top=t,this.boxDivRect.right=e+n,this.boxDivRect.bottom=t+r,this.boxDivRect.width=n,this.boxDivRect.height=r}},{key:"initBoxSize",value:function(e,t){var n=e/4,r=t/4,i=e/2,a=t/2;this.initBox(n,r,i,a)}},{key:"initBoxFullSize",value:function(e,t){this.initBox(0,0,e,t)}},{key:"updateBoxVisible",value:function(e,t){e<2*this.minPaddingSize||t<2*this.minPaddingSize?this.initBoxFullSize(e,t):this.initBoxSize(e,t)}},{key:"applyBoxPosition",value:function(){this.boxDivRect.left=-this.imgPositionV.x,this.boxDivRect.top=-this.imgPositionV.y,this.boxDivRect.right=-this.imgPositionV.x,this.boxDivRect.bottom=-this.imgPositionV.y,this.isCropped=!0}},{key:"resize",value:function(e,t,n){var i=l.a.getRotatedVectorByPoint(new c.a(0,0),new c.a(e.x,e.y),u.a.getRadianByDegree(-t)),a=i.x,o=i.y,s=n.left,h=n.top,p=n.right,d=n.bottom,f=this.getBoxRect(t),g=f.left+this.minPaddingSize,v=f.top+this.minPaddingSize,y=f.right-this.minPaddingSize,m=f.bottom-this.minPaddingSize,E=f.left+a,k=f.top+o,S=f.right+a,I=f.bottom+o;switch(this.resizeDirection){case r.LT:k<h&&(o+=h-k),k>m&&(o+=m-k),E<s&&(a+=s-E),E>y&&(a+=y-E),this.boxDivRect.left+=a,this.boxDivRect.top+=o,this.boxDivRect.right+=a,this.boxDivRect.bottom+=o,this.boxDivRect.width-=a,this.boxDivRect.height-=o;break;case r.RT:k<h&&(o+=h-k),k>m&&(o+=m-k),S<g&&(a+=g-S),S>p&&(a+=p-S),this.boxDivRect.top+=o,this.boxDivRect.bottom+=o,this.boxDivRect.width+=a,this.boxDivRect.height-=o;break;case r.RB:I<v&&(o+=v-I),I>d&&(o+=d-I),S<g&&(a+=g-S),S>p&&(a+=p-S),this.boxDivRect.width+=a,this.boxDivRect.height+=o;break;case r.LB:I<v&&(o+=v-I),I>d&&(o+=d-I),E<s&&(a+=s-E),E>y&&(a+=y-E),this.boxDivRect.left+=a,this.boxDivRect.right+=a,this.boxDivRect.width-=a,this.boxDivRect.height+=o;break;default:return}}},{key:"initResizeDirection",value:function(){this.resizeDirection=r.NONE}},{key:"setResizeDirection",value:function(e){this.resizeDirection=e}}]),e}();!function(e){e.NONE="none",e.LT="lt",e.RT="rt",e.RB="rb",e.LB="lb"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(11),u=function(){function e(){i()(this,e)}return o()(e,null,[{key:"isSVGElement",value:function(e){return e&&e instanceof Element}},{key:"validateChildElement",value:function(e){if(!e||!e.childNodes)return!1;var t=!0,n=!1,r=void 0;try{for(var i,a=e.childNodes[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(this.isSVGElement(o)){if(this.SVG_NOT_RENDERING_DATA_NODE_NAME.indexOf(o.nodeName)<0)return!0;if(this.validateChildElement(o))return!0}}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return!1}},{key:"validateElement",value:function(e){return!!this.isSVGElement(e)&&(this.SVG_NOT_RENDERING_DATA_NODE_NAME.indexOf(e.nodeName)<0||this.validateChildElement(e))}},{key:"getElementAttribute",value:function(e,t){var n=e.attributes.getNamedItem(t);return n?n.value:null}},{key:"initElementFillColor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.SKIP_INIT_NODENAME_LIST.indexOf(e.nodeName)>=0,r=this.NOT_INIT_NODENAME_LIST.indexOf(e.nodeName)<0,i=this.getElementAttribute(e,"fill"),a=this.getElementAttribute(e,"style"),o=a&&a.indexOf("fill")>=0;if(!n){if(i){if(0===i.indexOf("#")){var s=i;4===i.length&&(s=i[0]+i[1]+i[1]+i[2]+i[2]+i[3]+i[3]),e.setAttribute(this.SVG_ATTRIBUTE_FILL,s.toLowerCase()),e.setAttribute(this.SVG_ATTRIBUTE_ORIGIN_FILL,s.toLowerCase())}}else t||!r||o||(e.setAttribute(this.SVG_ATTRIBUTE_FILL,this.SVG_DEFAULT_FILL),e.setAttribute(this.SVG_ATTRIBUTE_ORIGIN_FILL,this.SVG_DEFAULT_FILL));t=!!i;var u=!0,c=!1,l=void 0;try{for(var h,p=e.childNodes[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var d=h.value;d instanceof Element&&this.initElementFillColor(d,t)}}catch(e){c=!0,l=e}finally{try{u||null==p.return||p.return()}finally{if(c)throw l}}}}},{key:"initSvgImageElement",value:function(e){"image"===e.nodeName&&e.setAttribute(this.SVG_XLINK_HREF,"");var t=!0,n=!1,r=void 0;try{for(var i,a=e.childNodes[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;o instanceof Element&&this.initSvgImageElement(o)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"initSize",value:function(e){if(!e.getAttribute("width")&&e.getAttribute("viewBox")){var t=e.getAttribute("viewBox").split(" ");e.setAttribute("width","".concat(Number(t[2])-Number(t[0]),"px"))}if(!e.getAttribute("height")&&e.getAttribute("viewBox")){var n=e.getAttribute("viewBox").split(" ");e.setAttribute("height","".concat(Number(n[3])-Number(n[1]),"px"))}}},{key:"getOriginColorSet",value:function(e){var t=new Set,n=e.attributes.getNamedItem(this.SVG_ATTRIBUTE_ORIGIN_FILL);n&&n.value!==this.SVG_NOT_FILL&&t.add(n.value);var r=!0,i=!1,a=void 0;try{for(var o,s=e.childNodes[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;if(u instanceof Element){var c=this.getOriginColorSet(u),l=!0,h=!1,p=void 0;try{for(var d,f=c[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var g=d.value;t.add(g)}}catch(e){h=!0,p=e}finally{try{l||null==f.return||f.return()}finally{if(h)throw p}}}}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return t}},{key:"getUniquekey",value:function(){for(var e=s.b.random(10).toLowerCase();this.SVG_UNIQUE_GRADIENT_ID_LIST.indexOf(e)>=0;)e=s.b.random(10).toLowerCase();return this.SVG_UNIQUE_GRADIENT_ID_LIST.push(e),e}},{key:"appendKeyToId",value:function(e,t){t||(t=this.getUniquekey());var n=this.getElementAttribute(e,"id");if(n){var r=(t+n).toLowerCase();e.setAttribute("id",r)}var i=this.getElementAttribute(e,"fill");if(i&&i.indexOf("url(")>=0){var a=i.split("#");a[1]="#".concat(t).concat(a[1].toLowerCase());var o="",s=!0,u=!1,c=void 0;try{for(var l,h=a[Symbol.iterator]();!(s=(l=h.next()).done);s=!0){o+=l.value}}catch(e){u=!0,c=e}finally{try{s||null==h.return||h.return()}finally{if(u)throw c}}e.setAttribute("fill",o)}var p=this.getElementAttribute(e,"style");if(p&&p.indexOf("url(")>=0){var d=p.split("#");d[1]="#".concat(t).concat(d[1].toLowerCase());var f="",g=!0,v=!1,y=void 0;try{for(var m,E=d[Symbol.iterator]();!(g=(m=E.next()).done);g=!0){f+=m.value}}catch(e){v=!0,y=e}finally{try{g||null==E.return||E.return()}finally{if(v)throw y}}e.setAttribute("style",f)}var k=this.getElementAttribute(e,this.SVG_XLINK_HREF);if(k&&k.indexOf("http")<0&&k.indexOf("#")>=0){var S=k.split("#");S[1]="#".concat(t).concat(S[1].toLowerCase());var I="",T=!0,b=!1,w=void 0;try{for(var A,C=S[Symbol.iterator]();!(T=(A=C.next()).done);T=!0){I+=A.value}}catch(e){b=!0,w=e}finally{try{T||null==C.return||C.return()}finally{if(b)throw w}}e.setAttribute(this.SVG_XLINK_HREF,I)}var x=this.getElementAttribute(e,"clip-path");if(x&&x.indexOf("url(")>=0){var R=x.split("#");R[1]="#".concat(t).concat(R[1].toLowerCase());var L="",_=!0,P=!1,O=void 0;try{for(var D,M=R[Symbol.iterator]();!(_=(D=M.next()).done);_=!0){L+=D.value}}catch(e){P=!0,O=e}finally{try{_||null==M.return||M.return()}finally{if(P)throw O}}e.setAttribute("clip-path",L)}var N=!0,B=!1,U=void 0;try{for(var G,F=e.childNodes[Symbol.iterator]();!(N=(G=F.next()).done);N=!0){var H=G.value;this.isSVGElement(H)&&this.appendKeyToId(H,t)}}catch(e){B=!0,U=e}finally{try{N||null==F.return||F.return()}finally{if(B)throw U}}}},{key:"optimizeSvgElement",value:function(e){this.removeSwitchNode(e),this.removeForignObjectNode(e)}},{key:"removeSwitchNode",value:function(e){if(e.nodeName&&e.parentElement&&"switch"===e.nodeName.toLocaleLowerCase())for(;e.firstChild;)e.parentElement.appendChild(e.firstChild);var t=!0,n=!1,r=void 0;try{for(var i,a=e.childNodes[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;o instanceof Element&&this.removeSwitchNode(o)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"removeForignObjectNode",value:function(e){e.nodeName&&e.parentElement&&"foreignobject"===e.nodeName.toLocaleLowerCase()&&e.parentElement.removeChild(e);var t=!0,n=!1,r=void 0;try{for(var i,a=e.childNodes[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;o instanceof Element&&this.removeForignObjectNode(o)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"removeStyleNodeWithCssType",value:function(e){e.parentElement&&e.nodeName&&"style"===e.nodeName.toLowerCase()&&e.getAttribute("type")&&"text/css"===e.getAttribute("type").toLowerCase()&&(e.innerHTML="");var t=!0,n=!1,r=void 0;try{for(var i,a=e.childNodes[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;o instanceof Element&&this.removeStyleNodeWithCssType(o)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}}]),e}();u.SVG_XLINK_HREF="xlink:href",u.SVG_UNIQUE_GRADIENT_ID_LIST=[],u.SVG_NOT_RENDERING_DATA_NODE_NAME=["g","svg"],u.SKIP_INIT_NODENAME_LIST=["defs","linearGradient","radialGradient","title","image","clipPath","pattern","style"],u.NOT_INIT_NODENAME_LIST=["g","svg"],u.SVG_DEFAULT_FILL="#000000",u.SVG_NOT_FILL="none",u.SVG_ATTRIBUTE_FILL="fill",u.SVG_ATTRIBUTE_ORIGIN_FILL="origin_fill"},function(e,t,n){"use strict";n.d(t,"a",function(){return y});var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(6),u=n.n(s),c=n(3),l=n.n(c),h=n(7),p=n.n(h),d=n(292),f=n(383),g=n(246),v=n(234),y=function(e){function t(){return i()(this,t),u()(this,l()(t).apply(this,arguments))}return p()(t,e),o()(t,[{key:"getDefaultCropPosData",value:function(e,t){var n,r=new v.a(this.props.getLeft(),this.props.getTop(),this.props.getRight(),this.props.getBottom());if(0!==this.props.getRotate()){var i=this.props.getRotate(),a=r.left+r.getWidth()/2,o=r.top+r.getHeight()/2,s=g.a.calcLocationByRotate2(0,0,a,o,-i),u=g.a.calcLocationByRotate2(e,0,a,o,-i),c=g.a.calcLocationByRotate2(e,t,a,o,-i),l=g.a.calcLocationByRotate2(0,t,a,o,-i),h=[s.x,u.x,c.x,l.x],p=[s.y,u.y,c.y,l.y];n=new v.a(Math.min.apply(Math,h),Math.min.apply(Math,p),Math.max.apply(Math,h),Math.max.apply(Math,p))}else n=new v.a(0,0,e,t);var d=this.props.getLeft()>n.left?0:n.left-this.props.getLeft(),f=this.props.getTop()>n.top?0:n.top-this.props.getTop(),y=this.props.getRight(),m=this.props.getBottom(),E=this.props.getWidth()-d;E=y<n.right?E:E-(y-n.right);var k=this.props.getHeight()-f;return{width:E,height:k=m<n.bottom?k:k-(m-n.bottom),left:d,top:f}}},{key:"getCropPosData",value:function(e,t,n,r){if(!n)return this.getDefaultCropPosData(e,t);var i=this.getDefaultCropPosData(e/n,t/n);if(!r)return i;var a=this.getCanvasPosData(1),o=a.width<a.height?a.width:a.height,s=this.props.getShadowDistance()*o/130,u=g.a.getPointByDistanceAngle(s,this.props.getShadowAngle()+90-this.props.getRotate()),c=this.props.getShadowBlur()*o*this.shadowBlurConstant/600+1;u.x=u.x<=0?u.x-c:u.x+c,u.y=u.y<=0?u.y-c:u.y+c;var l=this.props.getWidth(),h=this.props.getHeight();if(u.x<0){var p=i.left-c;i.left=p<0?0:p;var d=i.width-u.x+c;i.width=d>l?l:d}else{var f=i.left,v=i.left-u.x;i.left=v<0?0:v-c,i.width+=f-i.left}if(u.y<0){var y=i.top-c;i.top=y<0?0:y;var m=i.height-u.y+c;i.height=m>h?h:m}else{var E=i.top,k=i.top-u.y;i.top=k<0?0:k-c,i.height+=E-i.top}return i}},{key:"renderShadowCtx",value:function(e,t,n,r,i,a){e.save();try{e.translate(-n,-r);var o=f.a.hex2rgb(this.props.getShadowColor()),s=this.props.getShadowAlpha()/100,u=n<r?n:r;e.shadowColor="rgba(".concat(o.r,", ").concat(o.g,", ").concat(o.b,", ").concat(s,")"),e.shadowOffsetX=n*(d.a.VALUE_TO_MULTIPLY+1)/2,e.shadowOffsetY=r*(d.a.VALUE_TO_MULTIPLY+1)/2,e.shadowBlur=this.props.getShadowBlur()*u*this.shadowBlurConstant/600,i&&a?e.drawImage(t,0,0,i,a):e.drawImage(t,0,0)}finally{e.restore()}}}]),t}(d.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=function(){function e(){i()(this,e)}return o()(e,null,[{key:"getThumbnailUrl",value:function(e){return"https://img.youtube.com/vi/".concat(e,"/maxresdefault.jpg")}},{key:"getYoutubeId",value:function(e){try{if(e.startsWith("https://youtu.be/")){var t=/https\:\/\/youtu.be\/(.+)/.exec(e);return t&&t[1]?t[1]:""}if(e.startsWith("https://www.youtube.com/watch")){var n=/https\:\/\/www.youtube.com\/watch\?(.+)/.exec(e);if(!n||!n[1])return;var r=n[1].split("&").find(function(e){return"v"===e.split("=")[0]});return r?r.split("=")[1]:""}return}catch(e){return void console.error(e)}}},{key:"checkVideoUrlValidation",value:function(e){return Boolean(this.getYoutubeId(e))}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(110),u=n(234),c=function(){function e(){i()(this,e)}return o()(e,null,[{key:"getOffsetRectSize",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,c=n*e/(o<=i?2*o:2*(n-o)),l=r*t/(u<=a?2*u:2*(r-u));return new s.a(c,l)}},{key:"getOffsetRect",value:function(t,n,r,i,a,o,s,c){var l,h,p,d,f=e.getOffsetRectSize(t,n,r,i,a,o,s,c),g=s/t,v=c/n,y=(r-s)/t,m=(i-c)/n,E=Math.min(g,v,y,m);return E===v&&(d=f.height,p=0,f.width=f.height*(r/i),h=(l=t/2-s/r*f.width)+f.width),E===m&&(p=(d=n)-f.height,f.width=f.height*(r/i),h=(l=t/2-s/r*f.width)+f.width),E===g&&(h=f.width,l=0,f.height=f.width*(i/r),d=(p=n/2-c/i*f.height)+f.height),E===y&&(l=(h=t)-f.width,f.height=f.width*(i/r),d=(p=n/2-c/i*f.height)+f.height),l>0&&(l=0),p>0&&(p=0),h<t&&(h=t),d<n&&(d=n),new u.a(l,p,h,d)}},{key:"getDimensionByWidth",value:function(e,t,n){var r=n*(e/t);return new s.a(e,r)}},{key:"getDimensionByHeight",value:function(e,t,n){var r=t*(e/n);return new s.a(r,e)}},{key:"getCenterFixRect",value:function(t,n,r,i){var a;if(t<n)a=n/t<=i/r?e.getDimensionByWidth(t,r,i):e.getDimensionByHeight(n,r,i);else if(t>n){a=t/n<=r/i?e.getDimensionByHeight(n,r,i):e.getDimensionByWidth(t,r,i)}else a=r<=i?e.getDimensionByWidth(t,r,i):e.getDimensionByHeight(n,r,i);var o=t/2,s=n/2,c=a.width/2-o,l=a.height/2-s,h=Math.round(-c),p=Math.round(-l),d=Math.round(a.width-c),f=Math.round(a.height-l);return new u.a(h,p,d,f)}},{key:"getResizeBackgroundRectByNewPageSize",value:function(t,n,r){var i=r.getCenterPos(),a=t.width/2,o=t.height/2,s=i.x-a,u=i.y-o;r.move(Math.abs(r.left),Math.abs(r.top));var c=r.getCenterPos(),l=c.x-s,h=c.y-u;return e.getOffsetRect(n.width,n.height,r.getWidth(),r.getHeight(),c.x,c.y,l,h)}}]),e}()},function(e,t,n){"use strict";var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=function(){function e(){i()(this,e)}return o()(e,[{key:"isReady",value:function(){return void 0!==this.adminController}},{key:"setAdminController",value:function(e){this.adminController=e,this.startAdminMode()}},{key:"startAdminMode",value:function(){this.adminController.startAdminMode()}},{key:"makeTemplateProjectVC",value:function(){return void 0===this.templateProjectVC&&(this.templateProjectVC=this.adminController.makeTemplateProjectVC()),this.templateProjectVC}},{key:"getTemplateProjectVC",value:function(){return this.templateProjectVC}}]),e}();t.a=new s},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=function(){function e(t){i()(this,e);var n='<?xml version="1.0" encoding="utf-8"?><'.concat(t,"></").concat(t,">"),r=new DOMParser;this.xmldoc=r.parseFromString(n,"text/xml");var a=this.xmldoc.getElementsByTagName(t)[0];this.rootNode=new u(a)}return o()(e,[{key:"root",value:function(){return this.rootNode}}]),e}(),u=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;i()(this,e),this.childXmlNodes=[],this.node=t,this.parentXmlNode=n}return o()(e,[{key:"attr",value:function(e,t){this.node.hasAttribute(e)&&this.node.removeAttribute(e);var n=this.node.ownerDocument.createAttribute(e);return n.nodeValue=t,this.node.setAttributeNode(n),this}},{key:"attrNS",value:function(e,t,n){var r=this.node.ownerDocument.createAttributeNS(e,t);return r.nodeValue=n,this.node.setAttributeNodeNS(r),this}},{key:"elem",value:function(t){var n=this.node.ownerDocument.createElement(t);this.node.appendChild(n);var r=new e(n,this);return this.childXmlNodes.push(r),r}},{key:"text",value:function(e){return this.node.textContent=e,this}},{key:"comment",value:function(e){return this.node.ownerDocument.createComment(e),this}},{key:"close",value:function(){return this.parentXmlNode}},{key:"get",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=this.childXmlNodes[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(o.node.nodeName===e)return o}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return this.elem(e)}},{key:"setInnerHTML",value:function(e){throw new Error("svg innerHTML ie에서 동작 안함;")}},{key:"setChildNode",value:function(e){return this.node.appendChild(e),this}},{key:"getElement",value:function(){return this.node}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return b}),n.d(t,"c",function(){return w}),n.d(t,"b",function(){return A}),n.d(t,"d",function(){return C});var r=n(9),i=n.n(r),a=n(0),o=n.n(a),s=n(1),u=n.n(s),c=n(6),l=n.n(c),h=n(3),p=n.n(h),d=n(7),f=n.n(d),g=n(294),v=n(228),y=n(257),m=n(283),E=n(238),k=n(235),S=n(11),I=n(237),T=function(e){function t(){return o()(this,t),l()(this,p()(t).apply(this,arguments))}return f()(t,e),u()(t,[{key:"createNewItem",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],s=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],u=!(arguments.length>8&&void 0!==arguments[8])||arguments[8];return b.createGenericItem(E.a,e,t,n,r,i,a,o,s,u)}},{key:"parsePreload",value:function(e,t){}},{key:"getTargetNodeNames",value:function(){return["TEXT"]}},{key:"parseItem",value:function(e,t,n){var r;if(e){(r=this.createNewItem(Object(m.a)(),I.a.createWithRightBottom(e.Position["@Left"],e.Position["@Top"],e.Position["@Right"],e.Position["@Bottom"]),-e["@Rotate"],-1===e["@FlipH"],-1===e["@FlipV"],-1===t["@CanUserSelect"],-1===t["@CanUserMove"],-1===t["@CanUserResize"],-1===t["@CanUserDel"])).priority=e["@Priority"]?e["@Priority"]:0;var i=r.props,a=i.adjustLTRB;if(i.adjustLTRB=null,r.copyKey=e["@copyKey"]?e["@copyKey"]:"",r.groupId=e["@GroupId"]?e["@GroupId"]:"",r.layerName=e["@LayerName"]?e["@LayerName"]:"",i.setOpacity(null!=e["@Opacity"]?e["@Opacity"]:255),i.setUpperCase(e["@UpperCase"]||!1),i.setVerticalAlignXml(e["@VAlignment"]),e.Curve)i.setActiveCurve(e.Curve["@IsCurved"],!0),i.setCurveCw(e.Curve["@Clockwise"]);else{var o=Number(e.Effect["@BezierPercent"]);if(!isNaN(o)&&0!==o){var s=o*i.getWidth();i.setActiveCurve(!0,!0),i.setCurveCw(s>0);var u=2*s;if(i.setTextAlignXml(y.d.CENTER),s>0){var c=i.getBottom()+u;i.setTop(i.getBottom()),i.setBottom(c)}else{i.setTop(i.getBottom()+u);var l=i.getRotate()+180;l>=360&&(l-=360),i.setRotate(l)}}}b.setGradientColor(i,e.Effect.Fill.Gradient);var h=e.TextData;if(h){if(i.setTextData(h),!e["@NewVersion"]){var p=i.getShadowAngles(),d=i.getRotate();p.forEach(function(e,t){e.forEach(function(e,n){p[t][n]+=d})}),i.setShadowAngle(p);var f=i.getShadowSpreads();f.forEach(function(e,t){e.forEach(function(e,n){f[t][n]=e>100/4.5?100:4.5*e})}),i.setShadowSpread(f)}}else{i.setText(e.Text||""),i.setFontColor(e.Font["@Color"]),i.setFamily(e.Font["@Family"]),i.setAbsSize(e.Font["@Size"]),i.setBold(e.Font.Style["@Bold"]),i.setItalic(e.Font.Style["@Italic"]),i.setStrikeout(e.Font.Style["@Strikeout"]),i.setUnderline(e.Font.Style["@Underline"]),i.setTextAlignXml(e["@Alignment"]),i.setFontDetailLineSpaceXml(e.Font["@LineSpace"]),i.setFontDetailTextSpaceXml(e.Effect["@TextSpace"]),i.setFontDetailScaleX(e.Effect["@ScaleX"],!0),i.setActiveOutline(e.Effect.Outline["@DoOutline"]),i.setOutlineColor(e.Effect.Outline["@Color"],null,null,!0),i.setOutlineSize(e.Effect.Outline["@Size"]),i.setActiveShadow(e.Effect.Shadow["@DoShadow"]),i.setShadowColor(e.Effect.Shadow["@Color"],null,null,!0),i.setShadowDistance(e.Effect.Shadow["@Distance"]);var g=e.Effect.Shadow["@Angle"];g&&!e["@NewVersion"]&&(g+=i.getRotate()),i.setShadowAngle(g),i.setShadowSize(e.Effect.Shadow["@Size"]);var E=e.Effect.Shadow["@Spread"];if(E&&!e["@NewVersion"]){E=E>100/4.5?100:E*(100/4.5)}i.setShadowSpread(E,null,null,!0),i.setFillType(e.Effect.Fill["@Type"])}e.Hyperlink&&(i.setActiveHyperlink(e.Hyperlink["@Active"]||!1),i.setHyperlinkType(e.Hyperlink["@Type"]||k.c.URL),i.setHyperlinkValue(e.Hyperlink["@Value"]||"")),i.adjustLTRB=a}else{var T=(r=this.createNewItem("text".concat((new Date).getTime()).concat(S.b.random()),I.a.createWithRightBottom(t.Position["@Left"],t.Position["@Top"],t.Position["@Right"],t.Position["@Bottom"]),-t["@Rotate"],-1===t["@FlipH"],-1===t["@FlipV"],-1===t["@CanUserSelect"],-1===t["@CanUserMove"],-1===t["@CanUserResize"],-1===t["@CanUserDel"])).props,w=T.adjustLTRB;if(T.adjustLTRB=null,T.setText(t.Text||""),T.setOpacity(null!=t["@Opacity"]?t["@Opacity"]:255),T.setVerticalAlignXml(t["@VAlignment"]),b.setGradientColor(T,t.Effect.Fill.Gradient),t.Textdata){if(T.setTextData(t.Textdata),!t["@NewVersion"]){var A=T.getShadowAngles(),C=T.getRotate();A.forEach(function(e,t){e.forEach(function(e,n){A[t][n]=A[t][n]+C})}),T.setShadowAngle(A);var x=T.getShadowSpreads();x.forEach(function(e,t){e.forEach(function(e,n){x[t][n]=e>100/4.5?100:4.5*e})}),T.setShadowSpread(x)}}else{if(T.setFontColor(t.Font["@Color"]),T.setFamily(t.Font["@Family"]),T.setAbsSize(t.Font["@Size"]),T.setBold(t.Font.Style["@Bold"]),T.setItalic(t.Font.Style["@Italic"]),T.setStrikeout(t.Font.Style["@Strikeout"]),T.setUnderline(t.Font.Style["@Underline"]),T.setTextAlignXml(t["@Alignment"]),T.setFontDetailLineSpaceXml(t.Font["@LineSpace"]),T.setFontDetailTextSpace(t.Effect["@TextSpace"]),T.setFontDetailScaleX(t.Effect["@ScaleX"],!0),t.Effect.Outline&&(T.setActiveOutline(t.Effect.Outline["@DoOutline"]),T.setOutlineColor(t.Effect.Outline["@Color"],null,null,!0),T.setOutlineSize(t.Effect.Outline["@Size"])),t.Effect.Shadow){T.setActiveShadow(t.Effect.Shadow["@DoShadow"]),T.setShadowColor(t.Effect.Shadow["@Color"],null,null,!0),T.setShadowDistance(t.Effect.Shadow["@Distance"]);var R=t.Effect.Shadow["@Angle"];R&&!t["@NewVersion"]&&(R+=T.getRotate()),T.setShadowAngle(R),T.setShadowSize(t.Effect.Shadow["@Size"]);var L=t.Effect.Shadow["@Spread"];if(L&&!t["@NewVersion"]){L=L>100/4.5?100:L*(100/4.5)}T.setShadowSpread(L,null,null,!0)}T.setFillType(t.Effect.Fill["@Type"])}t.Hyperlink&&(T.setActiveHyperlink(t.Hyperlink["@Active"]||!1),T.setHyperlinkType(t.Hyperlink["@Type"]||k.c.URL),T.setHyperlinkValue(t.Hyperlink["@Value"]||"")),r.addedBy=v.f.LAYOUT,T.adjustLTRB=w}return r}}],[{key:"createGenericItem",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],s=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],u=!(arguments.length>8&&void 0!==arguments[8])||arguments[8],c=!(arguments.length>9&&void 0!==arguments[9])||arguments[9];return new e(t,n,r,i,a,o,s,u,c)}},{key:"setGradientColor",value:function(e,t){var n,r=e.getGradient();if(t){e.setActiveGradient(!0),e.setFillType(y.c.GRADIENT);var i=t.Color1,a=t.Color2,o=t.Color3,s=t.Color4,u=i===a&&o===s;r.setIsNewFormat(u),u||(r.setColor(2,a),r.setColor(4,s)),r.setColor(1,i),r.setColor(3,o),r.setAngle(t["@Angle"])}else{e.setActiveGradient(!1),r.setAngle(45),r.setIsNewFormat(!0);var c=(n=parseInt(Math.random()*x.length),x[n]);r.setColor(1,c.x),r.setColor(3,c.y)}}}]),t}(g.a),b=function(e){function t(){return o()(this,t),l()(this,p()(t).apply(this,arguments))}return f()(t,e),u()(t,[{key:"parse",value:function(e,n){return i()(p()(t.prototype),"parse",this).call(this,e,n)}}]),t}(T),w=function(e){function t(){return o()(this,t),l()(this,p()(t).apply(this,arguments))}return f()(t,e),u()(t,[{key:"parse",value:function(e,n){var r=i()(p()(t.prototype),"parse",this).call(this,e,n);return r.forEach(function(e){e.props.setLegacy(!0),null==e.props.getFillType()&&e.props.setFillType(y.c.COLOR)}),r}}]),t}(b),A=function(e){function t(){return o()(this,t),l()(this,p()(t).apply(this,arguments))}return f()(t,e),u()(t,[{key:"parse",value:function(e,n){var r=i()(p()(t.prototype),"parse",this).call(this,e,n);return r.forEach(function(e){e.props.setLegacy(!0),e.props.forEachChar(function(e){return e.fontdetail.textSpace*=10}),e.props.setRotate(-e.props.getRotate()),null==e.props.getFillType()&&e.props.setFillType(y.c.COLOR)}),r}}]),t}(b),C=function(e){function t(){return o()(this,t),l()(this,p()(t).apply(this,arguments))}return f()(t,e),u()(t,[{key:"parse",value:function(e,n){return i()(p()(t.prototype),"parse",this).call(this,e,n)}}]),t}(T),x=[{x:"#ff9a9e",y:"#fad0c4"},{x:"#ffecd2",y:"#fcb69f"},{x:"#ff9a9e",y:"#fecfef"},{x:"#a1c4fd",y:"#c2e9fb"},{x:"#cfd9df",y:"#e2ebf0"},{x:"#fdfbfb",y:"#ebedee"},{x:"#f5f7fa",y:"#c3cfe2"},{x:"#fdfcfb",y:"#e2d1c3"},{x:"#89f7fe",y:"#66a6ff"},{x:"#48c6ef",y:"#f5efef"},{x:"#a3bded",y:"#6991c7"},{x:"#13547a",y:"#80d0c7"},{x:"#93a5cf",y:"#ff7eb3"},{x:"#B7F8DB",y:"#50A7C2"}]},function(e,t,n){"use strict";n.d(t,"a",function(){return k});var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(6),u=n.n(s),c=n(3),l=n.n(c),h=n(7),p=n.n(h),d=n(294),f=n(228),g=n(231),v=n(283),y=n(235),m=n(11),E=n(237),k=function(e){function t(){return i()(this,t),u()(this,l()(t).apply(this,arguments))}return p()(t,e),o()(t,[{key:"createNewItem",value:function(e,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],u=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],c=!(arguments.length>8&&void 0!==arguments[8])||arguments[8],l=!(arguments.length>9&&void 0!==arguments[9])||arguments[9];return t.createGenericItem(g.d,e,n,r,r,i,a,o,s,u,c,l)}},{key:"parsePreload",value:function(e,t){}},{key:"getTargetNodeNames",value:function(){return["STICKER"]}},{key:"parseItem",value:function(e,t,n){var r;return e?((r=this.createNewItem(Object(v.a)(),E.a.createWithRightBottom(e.Position["@Left"],e.Position["@Top"],e.Position["@Right"],e.Position["@Bottom"]),-e["@Rotate"],e["@BelongsTo"]||g.c.INDEPENDENT,-1===e["@FlipH"],-1===e["@FlipV"],-1===t["@CanUserSelect"],-1===t["@CanUserMove"],-1===t["@CanUserResize"],-1===t["@CanUserDel"])).priority=e["@Priority"]?e["@Priority"]:0,r.props.setPhotoKey(e["@StickerId"]),r.copyKey=e["@copyKey"]?e["@copyKey"]:"",r.groupId=e["@GroupId"]?e["@GroupId"]:"",r.layerName=e["@LayerName"]?e["@LayerName"]:"",r.props.setOpacity(null!=e["@Opacity"]?e["@Opacity"]:255),r.props.setBrightness(e["@Brightness"]||0),r.props.setSaturation(e["@Saturation"]||0),r.props.setLightness(e["@Lightness"]||0),r.props.setFlipH(-1===e["@FlipH"]),r.props.setFlipV(-1===e["@FlipV"]),r.props.setContrast(e["@Contrast"]||0),r.props.setTint(e["@Tint"]||0),r.props.setColorTone(e["@ColorTone"]||0),r.props.setTemperature(e["@Temperature"]||0),r.props.setBlur(e["@Blur"]||0),r.props.setVignette(e["@Vignette"]||0),e.Hyperlink&&(r.props.setActiveHyperlink(e.Hyperlink["@Active"]||!1),r.props.setHyperlinkType(e.Hyperlink["@Type"]||y.c.URL),r.props.setHyperlinkValue(e.Hyperlink["@Value"]||"")),r.addedBy=e["@AddedBy"],r.props.setPhotoKey(e["@StickerId"]),r.orgType=t["@OriginType"]||g.b.Sticker):((r=this.createNewItem("sticker".concat((new Date).getTime()).concat(m.b.random()),E.a.createWithRightBottom(t.Position["@Left"],t.Position["@Top"],t.Position["@Right"],t.Position["@Bottom"]),-t["@Rotate"],t["@BelongsTo"]||g.c.INDEPENDENT,-1===t["@FlipH"],-1===t["@FlipV"],-1===t["@CanUserSelect"],-1===t["@CanUserMove"],-1===t["@CanUserResize"],-1===t["@CanUserDel"])).props.setPhotoKey(t["@StickerId"]),r.props.setOpacity(null!=t["@Opacity"]?t["@Opacity"]:255),r.props.setBrightness(t["@Brightness"]||0),r.props.setLightness(t["@Lightness"]||0),r.props.setSaturation(t["@Saturation"]||0),r.props.setContrast(t["@Contrast"]||0),r.props.setTint(t["@Tint"]||0),r.props.setColorTone(t["@ColorTone"]||0),r.props.setTemperature(t["@Temperature"]||0),r.props.setBlur(t["@Blur"]||0),r.props.setVignette(t["@Vignette"]||0),r.props.setFlipH(-1===t["@FlipH"]),r.props.setFlipV(-1===t["@FlipV"]),t.Hyperlink&&(r.props.setActiveHyperlink(t.Hyperlink["@Active"]||!1),r.props.setHyperlinkType(t.Hyperlink["@Type"]||y.c.URL),r.props.setHyperlinkValue(t.Hyperlink["@Value"]||"")),r.addedBy=f.f.LAYOUT,r.props.setPhotoKey(t["@StickerId"]),r.orgType=t["@OriginType"]||g.b.Sticker),r}}],[{key:"createGenericItem",value:function(e,t,n,r,i,a,o,s,u,c,l,h){return new e(t,n,r,i,a,o,s,u,c,l,h)}}]),t}(d.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return b});var r=n(62),i=n.n(r),a=n(0),o=n.n(a),s=n(1),u=n.n(s),c=n(6),l=n.n(c),h=n(3),p=n.n(h),d=n(7),f=n.n(d),g=n(235),v=n(301),y=n(249),m=n(389),E=n(244),k=n(419),S=n(294),I=n(283),T=n(237),b=function(e){function t(){return o()(this,t),l()(this,p()(t).apply(this,arguments))}return f()(t,e),u()(t,[{key:"createNewItem",value:function(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],u=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],c=!(arguments.length>8&&void 0!==arguments[8])||arguments[8],l=!(arguments.length>9&&void 0!==arguments[9])||arguments[9];return t.createGenericItem(v.a,e,n,r,i,a,o,s,u,c,l)}},{key:"parsePreload",value:function(e,t){if(null!=e){var n=this.getTargetNodeNames().reduce(function(t,n){return e[n]&&(Array.isArray(e[n])?t.push.apply(t,i()(e[n])):t.push(e[n])),t},[]);return n.length>0?new k.b(n.map(function(e){return e["@SvgKey"]})):null}}},{key:"getTargetNodeNames",value:function(){return["SVG","SVG_PRIVATE"]}},{key:"parseItem",value:function(e,t,n){var r;if(e){var i=e["@SvgKey"],a=E.c.getSvgDataByKeySync(i);if(!0===E.c.isDefaultShapeSvg(a))return;if((r=this.createNewItem(Object(I.a)(),a,T.a.createWithRightBottom(e.Position["@Left"],e.Position["@Top"],e.Position["@Right"],e.Position["@Bottom"]),-e["@Rotate"],-1===e["@FlipH"],-1===e["@FlipV"],-1===t["@CanUserSelect"],-1===t["@CanUserMove"],-1===t["@CanUserResize"],-1===t["@CanUserDel"])).copyKey=e["@copyKey"]?e["@copyKey"]:"",r.groupId=e["@GroupId"]?e["@GroupId"]:"",r.layerName=e["@LayerName"]?e["@LayerName"]:"",r.priority=e["@Priority"]?e["@Priority"]:0,null!=e["@Opacity"]?r.props.setOpacity(e["@Opacity"]):r.props.setOpacity(null!=e["@SvgOpacity"]?e["@SvgOpacity"]:255),r.isBackground=e["@IsBackground"]||!1,r.props.patternCountRatio=e["@PatternCountRatio"]||1,this.parseAllSvgLayer(e,r),e.fillColorMap){var o=e.fillColorMap.fillColor,s=[];Array.isArray(o)?s=o:void 0!==o&&(s=[o]);var u=!0,c=!1,l=void 0;try{for(var h,p=s[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var d=h.value,f=d["@originColor"],v=d["@color"];r.props.setCurrentOriginColor(f),r.props.setColor(v)}}catch(e){c=!0,l=e}finally{try{u||null==p.return||p.return()}finally{if(c)throw l}}}e.Shadow&&(r.props.setActiveShadow(e.Shadow["@IsShadow"]||!1),r.props.setShadowColor(e.Shadow["@Color"]||"#000000"),r.props.setShadowAngle(e.Shadow["@Angle"]||0),r.props.setShadowAlpha(null!=e.Shadow["@Alpha"]?e.Shadow["@Alpha"]:255),r.props.setShadowDistance(e.Shadow["@Distance"]||0),r.props.setShadowBlur(e.Shadow["@Blur"]||0)),e.Hyperlink&&(r.props.setActiveHyperlink(e.Hyperlink["@Active"]||!1),r.props.setHyperlinkType(e.Hyperlink["@Type"]||g.c.URL),r.props.setHyperlinkValue(e.Hyperlink["@Value"]||""))}return r.updateColor(),m.a.parseOldIntegerLTRBSvgItem(r),r}},{key:"parseAllSvgLayer",value:function(e,t){var n=this;t.layers.forEach(function(t,r){var i;i=Array.isArray(e.SvgLayer)?e.SvgLayer[r]:e.SvgLayer,n.parseSvgLayer(i,t),n.parseColor(e,i,t)})}},{key:"getValidNumberValue",value:function(e,t){return!e||isNaN(e)?t:e}},{key:"parseSvgLayer",value:function(e,t){t.layerId=e["@layerId"],t.left=this.getValidNumberValue(e["@left"],t.left),t.top=this.getValidNumberValue(e["@top"],t.top),t.scaleX=Math.abs(this.getValidNumberValue(e["@scaleX"],t.scaleX)),t.scaleY=Math.abs(this.getValidNumberValue(e["@scaleY"],t.scaleY)),t.scaleCommon=this.getValidNumberValue(e["@scaleCommon"],t.scaleCommon),t.savedData.left=e["@layerLeft"],t.savedData.top=e["@layerTop"],t.savedData.width=e["@layerWidth"],t.savedData.height=e["@layerHeight"],t.savedData.moveOffsetX=e["@moveOffsetX"],t.savedData.moveOffsetY=e["@moveOffsetY"],t.savedData.extendOffsetX=e["@extendOffsetX"],t.savedData.extendOffsetY=e["@extendOffsetY"],t.savedData.type=e["@type"],this.calibrateSvgLayerPositionByType(t)}},{key:"parseColor",value:function(e,t,n){if(void 0!==t["@fillColor"]){var r=y.a.getOriginFillColors(n.element);n.setColorByOriginColor(r[0],t["@fillColor"])}else{var i=e.fillColorMap.fillColor,a=[];Array.isArray(i)?a=i:void 0!==i&&(a=[i]);var o=!0,s=!1,u=void 0;try{for(var c,l=a[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var h=c.value,p=h["@originColor"],d=h["@color"];n.setColorByOriginColor(p,d)}}catch(e){s=!0,u=e}finally{try{o||null==l.return||l.return()}finally{if(s)throw u}}}}},{key:"calibrateSvgLayerPositionByType",value:function(e){if(e.svgLayer.type.value!==e.savedData.type){var t=(e.scaleX-1)*e.svgLayer.left*e.svgLayer.extendOffsetX,n=(e.scaleY-1)*e.svgLayer.top*e.svgLayer.extendOffsetY,r=Math.pow(10,-3);if(e.svgLayer.type.value===E.e.NO_PATTERN.value){var i=e.svgLayer.width*(e.scaleX-1),a=e.svgLayer.height*(e.scaleY-1),o=e.savedData.type===E.e.LAYER_PATTERN.value,s=0===e.left||e.left-i<r,u=0===e.top||e.top-a<r,c=e.svgLayer.extendOffsetX>0,l=e.svgLayer.extendOffsetY>0;c&&(o||s)&&(e.left-=t/e.svgLayer.extendOffsetX),l&&(o||u)&&(e.top-=n/e.svgLayer.extendOffsetY)}else e.svgLayer.type.value===E.e.LAYER_PATTERN.value&&(t+e.left<r&&(e.left=0),n+e.top<r&&(e.top=0))}}}],[{key:"createGenericItem",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],u=!(arguments.length>8&&void 0!==arguments[8])||arguments[8],c=!(arguments.length>9&&void 0!==arguments[9])||arguments[9],l=!(arguments.length>10&&void 0!==arguments[10])||arguments[10];return new e(t,n,r,i,a,o,s,u,c,l)}}]),t}(S.a)},function(e,t,n){"use strict";n.d(t,"b",function(){return k}),n.d(t,"a",function(){return S});var r=n(2),i=n.n(r),a=n(4),o=n.n(a),s=n(6),u=n.n(s),c=n(3),l=n.n(c),h=n(7),p=n.n(h),d=n(0),f=n.n(d),g=n(1),v=n.n(g),y=n(338),m=n(244),E=function(){function e(t){var n=this;f()(this,e),this.svgKeySet=new Set,t.forEach(function(e){return n.svgKeySet.add(e)})}return v()(e,[{key:"merge",value:function(e){var t=this;return this.getProcessKey()===e.getProcessKey()&&(e.svgKeySet.forEach(function(e){return t.svgKeySet.add(e)}),!0)}},{key:"getKeyList",value:function(){return Array.from(this.svgKeySet)}}]),e}(),k=function(e){function t(){var e,n;f()(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(n=u()(this,(e=l()(t)).call.apply(e,[this].concat(a)))).getProcessKey=function(){return"기본Svg"},n.execute=o()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",m.c.getSvgDataResponse(n.getKeyList()));case 1:case"end":return e.stop()}},e)})),n}return p()(t,e),t}(E),S=function(e){function t(){var e,n;f()(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(n=u()(this,(e=l()(t)).call.apply(e,[this].concat(a)))).getProcessKey=function(){return"유저Svg"},n.execute=o()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",y.a.fetchUserSvgList(n.getKeyList()));case 1:case"end":return e.stop()}},e)})),n}return p()(t,e),t}(E)},function(e,t,n){"use strict";n.d(t,"a",function(){return y});var r=n(2),i=n.n(r),a=n(4),o=n.n(a),s=n(0),u=n.n(s),c=n(1),l=n.n(c),h=n(240),p=n(304),d=n(301),f=n(244),g=n(247),v=n(237),y=function(){function e(){u()(this,e)}var t,n,r;return l()(e,null,[{key:"makeThumbnail",value:(r=o()(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.c.isDefaultShapeSvg(t)?this.getSvgThumbnail(t):this.getSvgGraphicItemThumbnail(t));case 1:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"getSvgThumbnail",value:(n=o()(i.a.mark(function t(n){var r,a,o,s;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.THUMBNAIL_IMAGE_SIZE/Math.max(n.width,n.height),a=this.getScaledSvgElement(n.svg,r,r,r*n.width,r*n.height),(o=h.a.createCanvas()).width=r*n.width,o.height=r*n.height,s=o.getContext("2d"),t.next=8,p.a.drawSVG(s,a.outerHTML,0,0);case 8:return t.abrupt("return",o.toDataURL());case 9:case"end":return t.stop()}},t,this)})),function(e){return n.apply(this,arguments)})},{key:"getScaledSvgElement",value:function(e,t,n,r,i){var a=r/t,o=i/t;e.setAttribute("width","".concat(a,"px")),e.setAttribute("height","".concat(o,"px"));var s=document.createElementNS(g.a.SVG,"svg");s.setAttribute("width","".concat(r,"px")),s.setAttribute("height","".concat(i,"px"));var u=document.createElementNS(g.a.SVG,"g");return s.appendChild(u),u.setAttribute("transform","scale(".concat(t,", ").concat(n,")")),u.appendChild(e.cloneNode(!0)),s}},{key:"getSvgGraphicItemThumbnail",value:(t=o()(i.a.mark(function e(t){var n,r,a,o,s,u,c,l,p;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=h.a.createCanvas(),r=t.width,a=t.height,o=r>a?r:a,s=this.THUMBNAIL_IMAGE_SIZE/o,u=Math.ceil(r*s),c=Math.ceil(a*s),n.width=u,n.height=c,(l=n.getContext("2d")).clearRect(0,0,u,c),p=new d.a("",t,new v.a(0,0,u,c)),e.next=14,p.renderThumbnail(l,1);case 14:return e.abrupt("return",n.toDataURL());case 15:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})}]),e}();y.THUMBNAIL_IMAGE_SIZE=400},function(e,t,n){"use strict";n.d(t,"a",function(){return b});var r=n(2),i=n.n(r),a=n(4),o=n.n(a),s=n(0),u=n.n(s),c=n(1),l=n.n(c),h=n(6),p=n.n(h),d=n(3),f=n.n(d),g=n(7),v=n.n(g),y=n(235),m=n(239),E=n(389),k=n(259),S=n(294),I=n(283),T=n(237),b=function(e){function t(e){var n;return u()(this,t),(n=p()(this,f()(t).call(this))).photoParser=e,n}return v()(t,e),l()(t,[{key:"parsePreload",value:function(e,t){if(null!=e&&null!=e.SVGIMAGEFRAME){var n=Array.isArray(e.SVGIMAGEFRAME)?e.SVGIMAGEFRAME:[e.SVGIMAGEFRAME];return n.length>0?new w(n.map(function(e){return e["@SvgKey"]}),n.map(function(e){return e.PHOTO["@PhotoKey"]})):null}}},{key:"parseItem",value:function(e,t,n){var r;if(e){var i=e["@SvgKey"],a=k.c.getImageframeDataByKeySync(i);(r=this.createNewItem(Object(I.a)(),a,T.a.createWithRightBottom(e.Position["@Left"],e.Position["@Top"],e.Position["@Right"],e.Position["@Bottom"]),-e["@Rotate"],-1===e["@FlipH"],-1===e["@FlipV"],-1===t["@CanUserSelect"],-1===t["@CanUserMove"],-1===t["@CanUserResize"],-1===t["@CanUserDel"])).initFramePosition(),r.initPhotoSync(),r.copyKey=e["@copyKey"]?e["@copyKey"]:"",r.groupId=e["@GroupId"]?e["@GroupId"]:"",r.layerName=e["@LayerName"]?e["@LayerName"]:"",r.priority=e["@Priority"]?e["@Priority"]:0,r.props.setOpacity(e["@Opacity"]),r.originPhotoFlipHor=e["@OriginFlipHor"]||!1,r.originPhotoFlipVer=e["@OriginFlipHor"]||!1;var o=t["@CanInsertPhotoItem"];r.props.canInsertPhotoItem=void 0===o||-1===o;var s=e.fillColorMap.fillColor,u=[];Array.isArray(s)?u=s:void 0!==s&&(u=[s]);var c=!0,l=!1,h=void 0;try{for(var p,d=u[Symbol.iterator]();!(c=(p=d.next()).done);c=!0){var f=p.value,g=f["@originColor"],v=f["@color"];r.props.setCurrentOriginColor(g),r.props.setColor(v)}}catch(e){l=!0,h=e}finally{try{c||null==d.return||d.return()}finally{if(l)throw h}}e.Shadow&&(r.props.setActiveShadow(e.Shadow["@IsShadow"]||!1),r.props.setShadowColor(e.Shadow["@Color"]||"#000000"),r.props.setShadowAngle(e.Shadow["@Angle"]||0),r.props.setShadowAlpha(null!=e.Shadow["@Alpha"]?e.Shadow["@Alpha"]:255),r.props.setShadowDistance(e.Shadow["@Distance"]||0),r.props.setShadowBlur(e.Shadow["@Blur"]||0)),e.Hyperlink&&(r.props.setActiveHyperlink(e.Hyperlink["@Active"]||!1),r.props.setHyperlinkType(e.Hyperlink["@Type"]||y.c.URL),r.props.setHyperlinkValue(e.Hyperlink["@Value"]||""));var m=e.PHOTO;if(m){var S=!0,b=!1,w=void 0;try{for(var A,C=(Array.isArray(m)?m:[m])[Symbol.iterator]();!(S=(A=C.next()).done);S=!0){var x=A.value,R=this.photoParser.parseItem(x,x.TEMPLATE,"PHOTO");r.innerPhotoItem.props=R.props.clone(),r.innerPhotoItem.orgType=R.orgType,r.innerPhotoItem.skinRatioId=R.skinRatioId,r.innerPhotoItem.setLTRBCoordinate(R.getLTRBCoordinate()),r.innerPhotoItem.itemPosition=R.itemPosition.clone()}}catch(e){b=!0,w=e}finally{try{S||null==C.return||C.return()}finally{if(b)throw w}}}}return r.updateColor(),E.a.parseOldIntegerLTRBSvgItem(r),r}},{key:"createNewItem",value:function(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],u=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],c=!(arguments.length>8&&void 0!==arguments[8])||arguments[8],l=!(arguments.length>9&&void 0!==arguments[9])||arguments[9];return t.createGenericItem(m.b,e,n,r,i,a,o,s,u,c,l)}},{key:"getTargetNodeNames",value:function(){return["SVGIMAGEFRAME"]}}],[{key:"createGenericItem",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],u=!(arguments.length>8&&void 0!==arguments[8])||arguments[8],c=!(arguments.length>9&&void 0!==arguments[9])||arguments[9],l=!(arguments.length>10&&void 0!==arguments[10])||arguments[10];return new e(t,n,r,i,a,o,s,u,c,l)}}]),t}(S.a),w=function(){function e(t,n){var r=this;u()(this,e),this.svgKeySet=new Set,this.innerPhotoKeySet=new Set,this.execute=o()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",k.c.getImageframeDataByKeyList(Array.from(r.svgKeySet)));case 1:case"end":return e.stop()}},e)})),t.forEach(function(e){return r.svgKeySet.add(e)}),n.forEach(function(e){return r.innerPhotoKeySet.add(e)})}return l()(e,[{key:"getProcessKey",value:function(){return"이미지프레임"}},{key:"merge",value:function(e){var t=this;return this.getProcessKey()===e.getProcessKey()&&(e.svgKeySet.forEach(function(e){return t.svgKeySet.add(e)}),!0)}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return S});var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(6),u=n.n(s),c=n(3),l=n.n(c),h=n(7),p=n.n(h),d=n(235),f=n(353),g=n(338),v=n(389),y=n(419),m=n(294),E=n(283),k=n(237),S=function(e){function t(){return i()(this,t),u()(this,l()(t).apply(this,arguments))}return p()(t,e),o()(t,[{key:"createNewItem",value:function(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],u=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],c=!(arguments.length>8&&void 0!==arguments[8])||arguments[8],l=!(arguments.length>9&&void 0!==arguments[9])||arguments[9];return t.createGenericItem(f.a,e,n,r,i,a,o,s,u,c,l)}},{key:"parsePreload",value:function(e,t){if(null!=e&&null!=e.BASICSVG){var n=Array.isArray(e.BASICSVG)?e.BASICSVG:[e.BASICSVG];return n.length>0?new y.a(n.map(function(e){return e["@SvgKey"]})):null}}},{key:"getTargetNodeNames",value:function(){return["BASICSVG"]}},{key:"parseItem",value:function(e,t,n){var r;if(e){var i=e["@SvgKey"],a=g.a.makeSvgDataFromFileKeySync(i);(r=this.createNewItem(Object(E.a)(),a,k.a.createWithRightBottom(e.Position["@Left"],e.Position["@Top"],e.Position["@Right"],e.Position["@Bottom"]),-e["@Rotate"],-1===e["@FlipH"],-1===e["@FlipV"],-1===t["@CanUserSelect"],-1===t["@CanUserMove"],-1===t["@CanUserResize"],-1===t["@CanUserDel"])).copyKey=e["@copyKey"]?e["@copyKey"]:"",r.groupId=e["@GroupId"]?e["@GroupId"]:"",r.priority=e["@Priority"]?e["@Priority"]:0,r.props.setOpacity(e["@Opacity"]);var o=e.fillColorMap.fillColor,s=[];Array.isArray(o)?s=o:void 0!==o&&(s=[o]);var u=!0,c=!1,l=void 0;try{for(var h,p=s[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var f=h.value,y=f["@originColor"],m=f["@color"];r.props.setCurrentOriginColor(y),r.props.setColor(m)}}catch(e){c=!0,l=e}finally{try{u||null==p.return||p.return()}finally{if(c)throw l}}e.Shadow&&(r.props.setActiveShadow(e.Shadow["@IsShadow"]||!1),r.props.setShadowColor(e.Shadow["@Color"]||"#000000"),r.props.setShadowAngle(e.Shadow["@Angle"]||0),r.props.setShadowAlpha(null!=e.Shadow["@Alpha"]?e.Shadow["@Alpha"]:255),r.props.setShadowDistance(e.Shadow["@Distance"]||0),r.props.setShadowBlur(e.Shadow["@Blur"]||0)),e.Hyperlink&&(r.props.setActiveHyperlink(e.Hyperlink["@Active"]||!1),r.props.setHyperlinkType(e.Hyperlink["@Type"]||d.c.URL),r.props.setHyperlinkValue(e.Hyperlink["@Value"]||"")),r.layerName=e["@LayerName"]?e["@LayerName"]:""}return r.updateColor(),v.a.parseOldIntegerLTRBSvgItem(r),r}}],[{key:"createGenericItem",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],u=!(arguments.length>8&&void 0!==arguments[8])||arguments[8],c=!(arguments.length>9&&void 0!==arguments[9])||arguments[9],l=!(arguments.length>10&&void 0!==arguments[10])||arguments[10];return new e(t,n,r,i,a,o,s,u,c,l)}}]),t}(m.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return b});var r=n(62),i=n.n(r),a=n(0),o=n.n(a),s=n(1),u=n.n(s),c=n(6),l=n.n(c),h=n(3),p=n.n(h),d=n(7),f=n.n(d),g=n(235),v=n(228),y=n(335),m=n(389),E=n(244),k=n(419),S=n(294),I=n(283),T=n(237),b=function(e){function t(){return o()(this,t),l()(this,p()(t).apply(this,arguments))}return f()(t,e),u()(t,[{key:"createNewItem",value:function(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],u=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],c=!(arguments.length>8&&void 0!==arguments[8])||arguments[8],l=!(arguments.length>9&&void 0!==arguments[9])||arguments[9];return t.createGenericItem(y.a,e,n,r,i,a,o,s,u,c,l)}},{key:"parsePreload",value:function(e,t){if(null!=e){var n=this.getTargetNodeNames().reduce(function(t,n){return e[n]&&(Array.isArray(e[n])?t.push.apply(t,i()(e[n])):t.push(e[n])),t},[]);return n.length>0?new k.b(n.map(function(e){return e["@SvgKey"]})):null}}},{key:"getTargetNodeNames",value:function(){return["SVG","SVG_PRIVATE","SHAPESVG"]}},{key:"parseItem",value:function(e,t,n){var r;if(e){var i=e["@SvgKey"],a=E.c.getSvgDataByKeySync(i);if("SHAPESVG"!==n&&!1===E.c.isDefaultShapeSvg(a))return;if((r=this.createNewItem(Object(I.a)(),a,T.a.createWithRightBottom(e.Position["@Left"],e.Position["@Top"],e.Position["@Right"],e.Position["@Bottom"]),-e["@Rotate"],-1===e["@FlipH"],-1===e["@FlipV"],-1===t["@CanUserSelect"],-1===t["@CanUserMove"],-1===t["@CanUserResize"],-1===t["@CanUserDel"])).copyKey=e["@copyKey"]?e["@copyKey"]:"",r.groupId=e["@GroupId"]?e["@GroupId"]:"",r.layerName=e["@LayerName"]?e["@LayerName"]:"",r.priority=e["@Priority"]?e["@Priority"]:0,null!=e["@Opacity"]?r.props.setOpacity(e["@Opacity"]):r.props.setOpacity(null!=e["@SvgOpacity"]?e["@SvgOpacity"]:255),e.Outline&&(r.props.setActiveOutline(e.Outline["@DoOutline"]),r.props.setOutlineColor(e.Outline["@Color"]),r.props.setOutlineSize(e.Outline["@Size"]),r.props.setOutlineType(e.Outline["@Type"])),e.fillColorMap){var o=e.fillColorMap.fillColor,s=[];Array.isArray(o)?s=o:void 0!==o&&(s=[o]);var u=!0,c=!1,l=void 0;try{for(var h,p=s[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var d=h.value,f=d["@originColor"],y=d["@color"];r.props.setCurrentOriginColor(f),r.props.setColor(y)}}catch(e){c=!0,l=e}finally{try{u||null==p.return||p.return()}finally{if(c)throw l}}var k=!0,S=!1,b=void 0;try{for(var w,A=s[Symbol.iterator]();!(k=(w=A.next()).done);k=!0){var C=w.value,x=C["@originColor"],R=C["@color"];r.props.setCurrentOriginColor(x),r.props.setColor(R)}}catch(e){S=!0,b=e}finally{try{k||null==A.return||A.return()}finally{if(S)throw b}}}e.Shadow&&(r.props.setActiveShadow(e.Shadow["@IsShadow"]||!1),r.props.setShadowColor(e.Shadow["@Color"]||"#000000"),r.props.setShadowAngle(e.Shadow["@Angle"]||0),r.props.setShadowAlpha(null!=e.Shadow["@Alpha"]?e.Shadow["@Alpha"]:255),r.props.setShadowDistance(e.Shadow["@Distance"]||0),r.props.setShadowBlur(e.Shadow["@Blur"]||0)),e.Hyperlink&&(r.props.setActiveHyperlink(e.Hyperlink["@Active"]||!1),r.props.setHyperlinkType(e.Hyperlink["@Type"]||g.c.URL),r.props.setHyperlinkValue(e.Hyperlink["@Value"]||"")),r.scaleX=e["@ScaleX"]||r.scaleX,r.scaleY=e["@ScaleY"]||r.scaleY,r.scaleCommon=e["@ScaleCommon"]||r.scaleCommon}else{var L=t["@SvgKey"],_=E.c.getSvgDataByKeySync(L);if("SHAPESVG"!==n&&!1===E.c.isDefaultShapeSvg(_))return;if(r=this.createNewItem(Object(I.a)(),_,T.a.createWithRightBottom(t.Position["@Left"],t.Position["@Top"],t.Position["@Right"],t.Position["@Bottom"]),-t["@Rotate"],-1===t["@FlipH"],-1===t["@FlipV"],-1===t["@CanUserSelect"],-1===t["@CanUserMove"],-1===t["@CanUserResize"],-1===t["@CanUserDel"]),null!=t["@Opacity"]?r.props.setOpacity(t["@Opacity"]):r.props.setOpacity(null!=t["@SvgOpacity"]?t["@SvgOpacity"]:255),t.Outline&&(r.props.setActiveOutline(t.Outline["@DoOutline"]),r.props.setOutlineColor(t.Outline["@Color"]),r.props.setOutlineSize(t.Outline["@Size"]),r.props.setOutlineType(t.Outline["@Type"])),r.addedBy=v.f.LAYOUT,t.fillColorMap){var P=t.fillColorMap.fillColor,O=[];Array.isArray(P)?O=P:void 0!==P&&(O=[P]);var D=!0,M=!1,N=void 0;try{for(var B,U=O[Symbol.iterator]();!(D=(B=U.next()).done);D=!0){var G=B.value,F=G["@originColor"],H=G["@color"];r.props.setCurrentOriginColor(F),r.props.setColor(H)}}catch(e){M=!0,N=e}finally{try{D||null==U.return||U.return()}finally{if(M)throw N}}}t.Shadow&&(r.props.setActiveShadow(t.Shadow["@IsShadow"]||!1),r.props.setShadowColor(t.Shadow["@Color"]||"#000000"),r.props.setShadowAngle(t.Shadow["@Angle"]||0),r.props.setShadowAlpha(null!=t.Shadow["@Alpha"]?t.Shadow["@Alpha"]:255),r.props.setShadowDistance(t.Shadow["@Distance"]||0),r.props.setShadowBlur(t.Shadow["@Blur"]||0)),t.Hyperlink&&(r.props.setActiveHyperlink(t.Hyperlink["@Active"]||!1),r.props.setHyperlinkType(t.Hyperlink["@Type"]||g.c.URL),r.props.setHyperlinkValue(t.Hyperlink["@Value"]||"")),r.scaleX=t["@ScaleX"]||r.scaleX,r.scaleY=t["@ScaleY"]||r.scaleY,r.scaleCommon=t["@ScaleCommon"]||r.scaleCommon}return r.updateColor(),m.a.parseOldIntegerLTRBSvgItem(r),r}}],[{key:"createGenericItem",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],u=!(arguments.length>8&&void 0!==arguments[8])||arguments[8],c=!(arguments.length>9&&void 0!==arguments[9])||arguments[9],l=!(arguments.length>10&&void 0!==arguments[10])||arguments[10];return new e(t,n,r,i,a,o,s,u,c,l)}}]),t}(S.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return k});var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(6),u=n.n(s),c=n(3),l=n.n(c),h=n(7),p=n.n(h),d=n(243),f=n(294),g=n(228),v=n(267),y=n(263),m=n(283),E=n(237),k=function(e){function t(e){var n;return i()(this,t),(n=u()(this,l()(t).call(this))).textParser=e,n}return p()(t,e),o()(t,[{key:"createNewItem",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],u=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],c=!(arguments.length>8&&void 0!==arguments[8])||arguments[8];return t.createGenericItem(d.a,e,n,r,i,a,o,s,u,c)}},{key:"parsePreload",value:function(e,t){}},{key:"getTargetNodeNames",value:function(){return["GRID"]}},{key:"parseItem",value:function(e,t,n){var r;if(e){(r=this.createNewItem(Object(m.a)(),E.a.createWithRightBottom(e.Position["@Left"],e.Position["@Top"],e.Position["@Right"],e.Position["@Bottom"]),-e["@Rotate"],-1===e["@FlipH"],-1===e["@FlipV"],-1===t["@CanUserSelect"],-1===t["@CanUserMove"],-1===t["@CanUserResize"],-1===t["@CanUserDel"])).copyKey=e["@copyKey"]?e["@copyKey"]:"",r.groupId=e["@GroupId"]?e["@GroupId"]:"",r.layerName=e["@LayerName"]?e["@LayerName"]:"",r.priority=e["@Priority"]?e["@Priority"]:0,r.props.setOpacity(null!=e["@Opacity"]?e["@Opacity"]:255);var i=e["@borderScaleStandard"];r.borderScaleStandard=null!=i?i:800;var a=void 0!==e["@ParentTbpeId"],o=void 0===e["@NewGrid"],s=this.makeCellNodes(e.CELL);this.parseGridLines(r,e),a?this.parseCellFromDelphi(r,s):o?this.parseCellFromOldUnicorn(r,s):this.parseCellFromNewUnicorn(r,s)}else{(r=this.createNewItem(Object(m.a)(),E.a.createWithRightBottom(t.Position["@Left"],t.Position["@Top"],t.Position["@Right"],t.Position["@Bottom"]),-t["@Rotate"],-1===t["@FlipH"],-1===t["@FlipV"],-1===t["@CanUserSelect"],-1===t["@CanUserMove"],-1===t["@CanUserResize"],-1===t["@CanUserDel"])).props.setOpacity(null!=e["@Opacity"]?e["@Opacity"]:255);var u=void 0===e["@Priority"],c=void 0===e["@NewGrid"],l=this.makeCellNodes(t.CELL);this.parseGridLines(r,e),u?this.parseCellFromDelphi(r,l):c?this.parseCellFromOldUnicorn(r,l):this.parseCellFromNewUnicorn(r,l),r.addedBy=g.f.LAYOUT}return r.adjustSize(),r}},{key:"parseGridLines",value:function(e,t){var n=[];if(Array.isArray(t.COL)){var r=!0,i=!1,a=void 0;try{for(var o,s=t.COL[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;n.push(u)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}else n.push(t.COL);var c=[];if(Array.isArray(t.ROW)){var l=!0,h=!1,p=void 0;try{for(var d,f=t.ROW[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var g=d.value;c.push(g)}}catch(e){h=!0,p=e}finally{try{l||null==f.return||f.return()}finally{if(h)throw p}}}else c.push(t.ROW);e.init(c.length,n.length,t["@AspectRatio"]),e.rows.forEach(function(e,t){e.thicknessRatio=c[t]["@Ratio"],e.thickness=c[t]["@Width"]||c[t]["@Height"]}),e.cols.forEach(function(e,t){e.thicknessRatio=n[t]["@Ratio"],e.thickness=n[t]["@Width"]||n[t]["@Height"]})}},{key:"parseCellFromDelphi",value:function(e,n){var r=this;e.cells.forEach(function(i,a){i.forEach(function(i,o){var s=n[a*e.cols.length+o],u=y.a.parseColorString(s["@BGColor"]);if(0===u.alpha?i.cellProps.setCellBackgroundColor("#00000000"):i.cellProps.setCellBackgroundColor(u.rgb),i.textProps.setColor(y.a.parseColorString(s["@TextColor"]).rgb),i.textProps.setFamily(s["@FontName"]),i.innerText=null!=s["@Text"]?s["@Text"]:"",i.textProps.setAbsSize(7*s["@FontSize"]),i.textProps.setTextAlignXml(s["@TextAlignH"]||"LEFT"),i.textProps.setVerticalAlignXml(s["@TextAlignV"]||"TOP"),s.FontStyle&&(i.textProps.setBold(s.FontStyle["@Bold"]||!1),i.textProps.setItalic(s.FontStyle["@Italic"]||!1),i.textProps.setUnderline(s.FontStyle["@Underline"]||!1),i.textProps.setStrikeout(s.FontStyle["@Strikeout"]||!1)),i.textProps.setUpperCase(s["@TextUpperCase"]||!1),i.textProps.setListStyleBullet(s["@TextListStyleBullet"]||!1),i.textProps.setListStyleNumber(s["@TextListStyleNumber"]||!1),i.textProps.setActiveFontDetail(!0),i.textProps.setFontDetailTextSpaceXml(1+(s["@TextSpace"]||0)/10),i.textProps.setFontDetailLineSpaceXml(s["@TextLineSpace"]||0),i.textProps.setFontDetailScaleX(1+(s["@TextScaleX"]||0)/100,!0),i.cellType=s["@CellType"],i.cellType===v.b.SLAVE){s[t.MASTER_CELL_ROW_NO_NODE_NAME]=s[t.MASTER_CELL_ROW_NO_NODE_NAME]-1,s[t.MASTER_CELL_COL_NO_NODE_NAME]=s[t.MASTER_CELL_COL_NO_NODE_NAME]-1;var c=s[t.MASTER_CELL_ROW_NO_NODE_NAME],l=s[t.MASTER_CELL_COL_NO_NODE_NAME],h=n[c*e.cols.length+l];h[t.CHILD_CELL_ROW_NO_NODE_NAME]=a,h[t.CHILD_CELL_COL_NO_NODE_NAME]=o}r.parseBorders(i,s,.25)})}),this.parseMasterSlaveCell(e,n);var i=!0,a=!1,o=void 0;try{for(var s,u=e.cells[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value,l=!0,h=!1,p=void 0;try{for(var d,f=c[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var g=d.value;g.synchronizeBorder(g.borders.left),g.synchronizeBorder(g.borders.top),g.synchronizeBorder(g.borders.right),g.synchronizeBorder(g.borders.bottom)}}catch(e){h=!0,p=e}finally{try{l||null==f.return||f.return()}finally{if(h)throw p}}}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}}},{key:"parseCellFromOldUnicorn",value:function(e,t){var n=this;e.cells.forEach(function(r,i){r.forEach(function(r,a){var o=t[i*e.cols.length+a];r.cellProps.setCellBackgroundColor(o["@BGColor"]),r.textProps.setColor(y.a.parseColorString(o["@TextColor"]).rgb),r.textProps.setFamily(o["@FontName"]),r.innerText=null!=o["@Text"]?o["@Text"]:"",r.textProps.setAbsSize(o["@FontSize"]),r.textProps.setHorizontalAlign(o["@TextAlignH"]||"LEFT"),r.textProps.setVerticalAlign(o["@TextAlignV"]||"TOP"),o.FontStyle&&(r.textProps.setBold(o.FontStyle["@Bold"]||!1),r.textProps.setItalic(o.FontStyle["@Italic"]||!1),r.textProps.setUnderline(o.FontStyle["@Underline"]||!1),r.textProps.setStrikeout(o.FontStyle["@Strikeout"]||!1)),r.textProps.setUpperCase(o["@TextUpperCase"]||!1),r.textProps.setListStyleBullet(o["@TextListStyleBullet"]||!1),r.textProps.setListStyleNumber(o["@TextListStyleNumber"]||!1),r.textProps.setActiveFontDetail(!0),r.textProps.setFontDetailTextSpaceXml(o["@TextTextSpace"]||0),r.textProps.setFontDetailLineSpaceXml(o["@TextLineSpace"]||0),r.textProps.setFontDetailScaleX(null!=o["@TextScaleX"]?o["@TextScaleX"]:1,!0),r.cellType=o["@CellType"],n.parseBorders(r,o,1)})}),this.parseMasterSlaveCell(e,t);var r=!0,i=!1,a=void 0;try{for(var o,s=e.cells[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value,c=!0,l=!1,h=void 0;try{for(var p,d=u[Symbol.iterator]();!(c=(p=d.next()).done);c=!0){var f=p.value;f.synchronizeBorder(f.borders.left),f.synchronizeBorder(f.borders.top),f.synchronizeBorder(f.borders.right),f.synchronizeBorder(f.borders.bottom)}}catch(e){l=!0,h=e}finally{try{c||null==d.return||d.return()}finally{if(l)throw h}}}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}},{key:"parseCellFromNewUnicorn",value:function(e,t){t.some(function(e){return e["@CellType"]===v.b.MASTER})||t.forEach(function(e){return e["@CellType"]=v.b.NONE});for(var n=0;n<e.row;n++)for(var r=0;r<e.col;r++){var i=e.cells[n][r],a=t[n*e.cols.length+r];i.cellProps.setCellBackgroundColor(a["@BGColor"]);var o=this.textParser.parseItem(a.CHILDTEXT,a.CHILDTEXT.TEMPLATE,"TEXT");i.childTextItem.setProps(o.props.clone()),i.cellType=a["@CellType"],this.parseBorders(i,a,1)}this.parseMasterSlaveCell(e,t)}},{key:"parseBorders",value:function(e,t,n){this.parseBorder(e.borders.left,t.CellOutLineLeft,n),this.parseBorder(e.borders.top,t.CellOutLineTop,n),this.parseBorder(e.borders.right,t.CellOutLineRight,n),this.parseBorder(e.borders.bottom,t.CellOutLineBottom,n),t.CellOutLineDLTRB&&this.parseBorder(e.borders.downDiagonal,t.CellOutLineDLTRB,n),t.CellOutLineDLBRT&&this.parseBorder(e.borders.upDiagonal,t.CellOutLineDLBRT,n)}},{key:"parseBorder",value:function(e,t,n){e.visible=t["@Visible"],e.thickness=Math.max(t["@Width"]*n,1),e.color=y.a.parseColorString(t["@Color"]).rgb}},{key:"parseMasterSlaveCell",value:function(e,n){e.cells.forEach(function(r,i){r.forEach(function(r,a){if(r.cellType===v.b.MASTER){var o=n[i*e.cols.length+a];e.mergeTool.mergeCells({startPos:{row:i,col:a},endPos:{row:o[t.CHILD_CELL_ROW_NO_NODE_NAME],col:o[t.CHILD_CELL_COL_NO_NODE_NAME]}})}})}),e.sizeTool.synchronizeCells()}},{key:"makeCellNodes",value:function(e){return e?Array.isArray(e)?e:[e]:null}}],[{key:"createGenericItem",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],s=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],u=!(arguments.length>8&&void 0!==arguments[8])||arguments[8],c=!(arguments.length>9&&void 0!==arguments[9])||arguments[9];return new e(t,n,r,i,a,o,s,u,c)}}]),t}(f.a);k.MASTER_CELL_ROW_NO_NODE_NAME="@MasterCellRowNo",k.MASTER_CELL_COL_NO_NODE_NAME="@MasterCellColNo",k.CHILD_CELL_ROW_NO_NODE_NAME="@ChildCellRowNo",k.CHILD_CELL_COL_NO_NODE_NAME="@ChildCellColNo"},function(e,t,n){"use strict";var r=n(22),i=n.n(r),a=n(0),o=n.n(a),s=n(1),u=n.n(s);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(n,!0).forEach(function(t){i()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var h=function(){function e(){o()(this,e),this.lastSavedDesignDatas=[],this.lastSavedDesignFileDatas=[]}return u()(e,[{key:"setPageData",value:function(e,t){this.setPageList(e),this.setPageParams(t)}},{key:"setPageList",value:function(e){this.lastSavedDesignFileDatas=[];for(var t=e.length,n=0;n<t;n++){var r=e[n].sheetKey,i=e[n].thumbKey;this.lastSavedDesignFileDatas.push({xmlKey:r,thumbKey:i})}return this}},{key:"setPageParams",value:function(t){for(var n=0;n<t.length;n++){var r=t[n],i=r.xml,a=r.thumb;if(!e.FILE_KEY_FORMAT.test(i)||!e.FILE_KEY_FORMAT.test(a)){var o=l({},this.lastSavedDesignDatas[n]);e.FILE_KEY_FORMAT.test(i)||(o.xml=i),e.FILE_KEY_FORMAT.test(a)||(o.thumb=a),this.lastSavedDesignDatas[n]=l({},o)}}}},{key:"getNumberOfLastSavedPages",value:function(){return this.lastSavedDesignDatas.length}},{key:"isDifferentPageXml",value:function(e,t){var n=this.lastSavedDesignDatas[e],r=this.lastSavedDesignFileDatas[e];return!n||!r||n.xml!==t}},{key:"getPageThumbnail",value:function(e){var t=this.lastSavedDesignDatas[e];return t?t.thumb:void 0}},{key:"isDifferentPageThumbnail",value:function(e,t){var n=this.lastSavedDesignDatas[e],r=this.lastSavedDesignFileDatas[e];return!n||!r||n.thumb!==t}},{key:"optimizePageParams",value:function(e){for(var t=0;t<e.length;t++){var n=this.lastSavedDesignDatas[t],r=this.lastSavedDesignFileDatas[t];if(n&&r){var i=e[t];i.isModifiedXml||(i.xml=r.xmlKey,i.xmlKey=r.xmlKey),i.isModifiedThumbnail||(i.thumb=r.thumbKey,i.thumbnailKey=r.thumbKey)}}}},{key:"getLatestSavedXmlKey",value:function(e){return this.lastSavedDesignFileDatas[e]?this.lastSavedDesignFileDatas[e].xmlKey:void 0}},{key:"getLatestSavedThumbnailKey",value:function(e){return this.lastSavedDesignFileDatas[e]?this.lastSavedDesignFileDatas[e].thumbKey:void 0}}]),e}();h.FILE_KEY_FORMAT=/^\S{8}-\S{4}-\S{4}-\S{4}-\S{12}$/,t.a=new h},function(e,t,n){"use strict";n.d(t,"a",function(){return v});var r=n(0),i=n.n(r),a=n(6),o=n.n(a),s=n(3),u=n.n(s),c=n(1),l=n.n(c),h=n(7),p=n.n(h),d=n(8),f=n(33),g=n(395),v=function(e){function t(){var e;return i()(this,t),(e=o()(this,u()(t).call(this))).id="loadingPopup",e}return p()(t,e),l()(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),l()(t,[{key:"getContents",value:function(){var e=this,n=document.createElement("div");n.className=d.a.POPUP_LOADING;var r=document.createElement("div");return r.className=d.a.LOADING_WRAP,new g.a(r).show(),n.appendChild(r),this.msgElement=document.createElement("p"),n.appendChild(this.msgElement),this.btnElement=document.createElement("button"),this.btnElement.addEventListener("click",function(){e.btnCallback&&e.btnCallback(),t.close()}),n.appendChild(this.btnElement),n}},{key:"updateUI",value:function(){this.msgElement.innerHTML=this.msg||"",this.btnElement.innerText=this.btnText||""}}],[{key:"open",value:function(e,t,n){this.instance.msg=e,this.instance.btnText=t,this.instance.btnCallback=n,this.instance.open()}},{key:"close",value:function(){this.instance.close(),this._instance=null}}]),t}(f.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(2),i=n.n(r),a=n(4),o=n.n(a),s=n(0),u=n.n(s),c=n(1),l=n.n(c),h=n(309),p=n(12),d=n(227),f=function(){function e(){u()(this,e),this.mockupList=[]}var t;return l()(e,null,[{key:"add",value:function(e){this.isUpdatable(e)&&(this.remove(e.idx),this.instance.mockupList.unshift(e))}},{key:"addIdx",value:(t=o()(i.a.mark(function e(t){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.findOne(t);case 2:n=e.sent,this.add(n);case 4:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"remove",value:function(e){var t=0,n=!0,r=!1,i=void 0;try{for(var a,o=this.instance.mockupList[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){if(a.value.idx===e){this.instance.mockupList.splice(t,1);break}t++}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}},{key:"getList",value:function(){return this.instance.mockupList}},{key:"clear",value:function(){this.instance.mockupList=[]}},{key:"isUpdatable",value:function(e){return d.a.getUserSetting().adminMode||e.accountId===p.a.getUser().accountId}}]),e}();f.instance=new f},,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(6),u=n.n(s),c=n(3),l=n.n(c),h=n(9),p=n.n(h),d=n(7),f=n.n(d),g=function(){function e(){i()(this,e)}return o()(e,[{key:"makeXml",value:function(e,t){t.attr("Rotate",-e.props.getRotate()).attr("Opacity",e.props.getOpacity()).attr("FlipH",e.props.isFlipH()?-1:0).attr("FlipV",e.props.isFlipV()?-1:0).attr("AddedBy",e.addedBy).attr("TbpeId",e.tbpeId).attr("GroupId",e.groupId).attr("copyKey",e.copyKey).attr("LayerName",e.layerName).attr("Priority",e.priority).elem("Position").attr("Left",e.props.getLeft()).attr("Top",e.props.getTop()).attr("Right",e.props.getRight()).attr("Bottom",e.props.getBottom()).close(),this.makeTemplateNode(e,t).close(),t.elem("Hyperlink").attr("Active",e.props.isActiveHyperlink()).attr("Type",e.props.getHyperlinkType(!0)).attr("Value",e.props.getHyperlinkValue(!0)).close()}},{key:"makeTemplateNode",value:function(e,t){return t.elem("TEMPLATE").attr("CanUserSelect",e.props.isCanUserSelect()?-1:0).attr("CanUserMove",e.props.isCanUserMove()?-1:0).attr("CanUserResize",e.props.isCanUserResize()?-1:0).attr("CanUserDel",e.props.isCanUserDel()?-1:0)}}]),e}(),v=function(e){function t(){return i()(this,t),u()(this,l()(t).apply(this,arguments))}return f()(t,e),o()(t,[{key:"makeXml",value:function(e,n){p()(l()(t.prototype),"makeXml",this).call(this,e,n),n.attr("StickerId",e.props.getPhotoKey()).attr("Filename","").attr("Filename4Edit","").attr("IsBackground","").attr("FileSize4Edit","").attr("IsSingleColor","").attr("StickerColor","").attr("Hue",e.props.getTint()).attr("ColorTone",e.props.getColorTone()).attr("Temperature",e.props.getTemperature()).attr("HueType",1).attr("BelongsTo",e.belongsTo).attr("Brightness",e.props.getBrightness()).attr("Lightness",e.props.getLightness()).attr("Saturation",e.props.getSaturation()).attr("KeepRatio",e.keepRatio?-1:0).attr("Contrast",e.props.getContrast()).attr("Tint",e.props.getTint()).attr("Blur",e.props.getBlur()).attr("Vignette",e.props.getVignette()).attr("OriginType",e.orgType)}}]),t}(g),y=n(263),m=n(455),E=function(e){function t(){return i()(this,t),u()(this,l()(t).apply(this,arguments))}return f()(t,e),o()(t,[{key:"makeXml",value:function(e,n){p()(l()(t.prototype),"makeXml",this).call(this,e,n);var r=e.props;n.attr("NewVersion",!0).elem("Text").text(r.getText()).close().elem("TextData").text(r.getTextData()).close().attr("Alignment",r.getTextAlignXml()).attr("VAlignment",r.getVerticalAlignXml()).attr("UpperCase",r.isUpperCase()).elem("Font").attr("Color",y.a.parseRGBAColorSet(r.getColor(),r.getOpacity())).attr("Family",r.getFamily()).attr("Size",r.getAbsSize()).attr("LineSpace",r.getFontDetailLineSpace()).elem("Style").attr("Bold",r.isBold()).attr("Italic",r.isItalic()).attr("Strikeout",r.isStrikeout()).attr("Underline",r.isUnderline()).close().close().elem("Curve").attr("IsCurved",r.isActiveCurve()).attr("Clockwise",r.isCurveCw()).close();var i=n.elem("Effect");i.attr("TextSpace",r.getFontDetailTextSpace()/10).attr("ScaleX",r.getFontDetailScaleXAcc()/100).elem("Outline").attr("DoOutline",r.isActiveOutline()).attr("Color",y.a.parseRGBAColorSet(r.getOutlineColor(),r.getOutlineAlpha())).attr("Size",r.getOutlineSize()).close().elem("Shadow").attr("DoShadow",r.isActiveOutline()).attr("Color",y.a.parseRGBAColorSet(r.getShadowColor(),r.getShadowAlpha())).attr("Distance",r.getShadowDistance()).attr("Angle",r.getShadowAngle()).attr("Spread",r.getShadowSpread()/10).close();var a=i.elem("Fill");a.attr("Type",r.getFillType());var o=r.getGradient();r.isActiveGradient()&&(a=a.elem("Gradient").attr("Angle",o.getAngle()),m.a.COLOR_NUMBERS.forEach(function(e){return a=a.elem("Color"+e).text(y.a.parseRGBAColorSet(o.getColor(e),m.a.ALPHA_MAX)).close()}),a.close())}}]),t}(g),k=function(){function e(){i()(this,e)}return o()(e,[{key:"makeXml",value:function(e,t){t.attr("ColorEffect",e.getColorEffect()).attr("Bright",e.getBrightness()).attr("Contrast",e.getContrast()).attr("Blur",e.getBlur()).attr("Vignette",e.getVignette()).attr("Hue",e.getTint()).attr("ColorTone",e.getColorTone()).attr("Temperature",e.getTemperature()).attr("Saturation",e.getSaturation()).attr("Lightness",e.getLightness()).attr("FpType",e.getFramePhotoType()).attr("FpColor",y.a.parseRGBAColorSet(e.getSolidLineColor(),e.getSolidLineAlpha())).attr("FpThickness",e.getSolidLineThickness()).attr("FpBMid",e.getBitmapMaskBitmapId()).attr("ColorEffect",e.getColorEffect()).elem("StickerFrame").attr("StickerId",e.getStickerFrameStickerId()).close().attr("FpGRdirection",e.getGradationMaskDirection()).attr("FpGRdepth",e.getGradationMaskDepth()).attr("FpShadowColor",e.getShadowColor(!0)).attr("FpShadowAngle",e.getShadowAngle(!0)).attr("FpShadowAlpha",e.getShadowAlpha(!0)).attr("FpShadowDistance",e.getShadowDistance(!0)).attr("FpShadowBlur",e.getShadowBlur(!0))}}]),e}(),S=function(e){function t(){return i()(this,t),u()(this,l()(t).apply(this,arguments))}return f()(t,e),o()(t,[{key:"makeXml",value:function(e,n){p()(l()(t.prototype),"makeXml",this).call(this,e,n),n.get("Position").attr("Left",e.itemPosition.left).attr("Top",e.itemPosition.top).attr("Right",e.itemPosition.right).attr("Bottom",e.itemPosition.bottom).close().elem("FramePosition").attr("Left",e.props.getLeft()).attr("Top",e.props.getTop()).attr("Right",e.props.getRight()).attr("Bottom",e.props.getBottom()).close().attr("FrameRotate",-e.props.getRotate()).attr("BelongsTo",e.belongsTo).attr("Rotate",-e.props.getItemRotate()).attr("PhotoKey",e.props.getPhotoKey()).attr("IsGradationMask",e.isGradationMasked?-1:0).attr("IsShadow",e.props.isActiveShadow()).attr("OriginType",e.orgType).attr("BackgroundState",e.backgroundState).attr("SkinRatioId",e.skinRatioId).attr("IsCropped",e.photoCrop.isCropped),(new k).makeXml(e.props,n)}}]),t}(g),I=function(){function e(){i()(this,e)}return o()(e,[{key:"makeXml",value:function(e,t){t.elem("BACKGROUND").elem("PureSkinSize").attr("cx",e.pureSkinSize.width).attr("cy",e.pureSkinSize.height).close().elem("CropRect").attr("Left",e.cropRect.left).attr("Top",e.cropRect.top).attr("Right",e.cropRect.right).attr("Bottom",e.cropRect.bottom).close().attr("Color",e.color).attr("LayerName",e.layerName).close()}}]),e}(),T=n(267),b=function(e){function t(){return i()(this,t),u()(this,l()(t).apply(this,arguments))}return f()(t,e),o()(t,[{key:"makeXml",value:function(e,n){p()(l()(t.prototype),"makeXml",this).call(this,e,n),n.attr("NewGrid",!0).attr("AspectRatio",e.aspectRatio).attr("borderScaleStandard",e.borderScaleStandard),e.cols.forEach(function(e,t){n.elem("COL").attr("No",t+1).attr("Ratio",e.thicknessRatio).attr("Width",e.thickness).close()}),e.rows.forEach(function(e,t){n.elem("ROW").attr("No",t+1).attr("Ratio",e.thicknessRatio).attr("Width",e.thickness).close()});var r=new E,i=new w;e.cells.forEach(function(e,t){e.forEach(function(e,a){var o=n.elem("CELL");o.attr("Row",t+1).attr("Col",a+1).attr("BGColor",e.cellProps.getCellBackgroundColor()).attr("CellType",e.cellType).close(),i.makeXml(e.borders.left,o.elem("CellOutLineLeft")),i.makeXml(e.borders.top,o.elem("CellOutLineTop")),i.makeXml(e.borders.right,o.elem("CellOutLineRight")),i.makeXml(e.borders.bottom,o.elem("CellOutLineBottom")),i.makeXml(e.borders.downDiagonal,o.elem("CellOutLineDLTRB")),i.makeXml(e.borders.upDiagonal,o.elem("CellOutLineDLBRT")),e.cellType===T.b.SLAVE?o.attr("MasterCellRowNo",e.masterCell.row).attr("MasterCellColNo",e.masterCell.col):e.cellType===T.b.MASTER&&o.attr("ChildCellRowNo",e.childCellsPos.endPos.row).attr("ChildCellColNo",e.childCellsPos.endPos.col),r.makeXml(e.childTextItem,o.elem("CHILDTEXT"))})})}}]),t}(g),w=function(){function e(){i()(this,e)}return o()(e,[{key:"makeXml",value:function(e,t){t.attr("Visible",e.visible).attr("Width",e.thickness).attr("Color",e.color)}}]),e}(),A=n(233),C=function(e){function t(){return i()(this,t),u()(this,l()(t).apply(this,arguments))}return f()(t,e),o()(t,[{key:"makeXml",value:function(e,n){p()(l()(t.prototype),"makeXml",this).call(this,e,n),n.attr("SvgKey",e.svgData.key);var r=n.elem("fillColorMap"),i=e.getOriginColors(),a=!0,o=!1,s=void 0;try{for(var u,c=i[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var h=u.value;e.props.setCurrentOriginColor(h),r.elem("fillColor").attr("originColor",h).attr("color",e.props.getColor())}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}n.elem("Shadow").attr("IsShadow",e.props.isActiveShadow()).attr("Color",e.props.getShadowColor(!0)).attr("Angle",e.props.getShadowAngle(!0)).attr("Alpha",e.props.getShadowAlpha(!0)).attr("Distance",e.props.getShadowDistance(!0)).attr("Blur",e.props.getShadowBlur(!0))}}]),t}(g),x=function(e){function t(){return i()(this,t),u()(this,l()(t).apply(this,arguments))}return f()(t,e),o()(t,[{key:"makeXml",value:function(e,n){(p()(l()(t.prototype),"makeXml",this).call(this,e,n),n.attr("OriginFlipHor",e.originPhotoFlipHor).attr("OriginFlipVer",e.originPhotoFlipVer),e.innerPhotoItem)&&(new S).makeXml(e.innerPhotoItem,n.elem("PHOTO"))}},{key:"makeTemplateNode",value:function(e,n){return p()(l()(t.prototype),"makeTemplateNode",this).call(this,e,n).attr("CanInsertPhotoItem",e.props.canInsertPhotoItem?-1:0)}}]),t}(C),R=function(e){function t(){return i()(this,t),u()(this,l()(t).apply(this,arguments))}return f()(t,e),o()(t,[{key:"makeXml",value:function(e,n){p()(l()(t.prototype),"makeXml",this).call(this,e,n)}}]),t}(C),L=function(e){function t(){return i()(this,t),u()(this,l()(t).apply(this,arguments))}return f()(t,e),o()(t,[{key:"makeXml",value:function(e,n){p()(l()(t.prototype),"makeXml",this).call(this,e,n),n.attr("IsBackground",e.isBackground).attr("PatternCountRatio",e.props.patternCountRatio).close();var r=!0,i=!1,a=void 0;try{for(var o,s=e.layers[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;n.elem("SvgLayer").attr("layerId",u.layerId).attr("left",u.left).attr("top",u.top).attr("scaleX",u.scaleX).attr("scaleY",u.scaleY).attr("scaleCommon",u.scaleCommon).attr("layerLeft",u.svgLayer.left).attr("layerTop",u.svgLayer.top).attr("layerWidth",u.svgLayer.width).attr("layerHeight",u.svgLayer.height).attr("moveOffsetX",u.svgLayer.moveOffsetX).attr("moveOffsetY",u.svgLayer.moveOffsetY).attr("extendOffsetX",u.svgLayer.extendOffsetX).attr("extendOffsetY",u.svgLayer.extendOffsetY).attr("type",u.svgLayer.type.value).close()}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}}]),t}(C),_=function(e){function t(){return i()(this,t),u()(this,l()(t).apply(this,arguments))}return f()(t,e),o()(t,[{key:"makeXml",value:function(e,n){p()(l()(t.prototype),"makeXml",this).call(this,e,n);var r=e.props;n.elem("Outline").attr("DoOutline",r.isActiveOutline()).attr("Color",y.a.parseRGBAColorSet(r.getOutlineColor(),r.getOutlineAlpha())).attr("Size",r.getOutlineSize()).attr("Type",r.getOutlineType()).close().attr("ScaleX",e.scaleX).attr("ScaleY",e.scaleY).attr("ScaleCommon",e.scaleCommon)}}]),t}(C),P=n(250),O=function(){function e(){i()(this,e)}return o()(e,[{key:"makeXml",value:function(e,t){var n=t.elem("GUIDELINES");this.makeGuidelineGroupXml("HORIZONTAL",e.getGuidelineFactoryInfo(P.d.HORIZONTAL),n),this.makeGuidelineGroupXml("VERTICAL",e.getGuidelineFactoryInfo(P.d.VERTICAL),n),n.close()}},{key:"makeGuidelineGroupXml",value:function(t,n,r){var i=r.elem(t);i.attr("NowPosition",n.nowPosition),i.attr("Plus",n.plus),n.guidelines.forEach(function(t){e.makeGuidelineXml(t,i)}),i.close()}}],[{key:"makeGuidelineXml",value:function(e,t){var n=t.elem("GUIDELINE");n.attr("InitPosition",e.initPosition),n.attr("LastPosition",e.lastPosition),n.close()}}]),e}(),D=n(235),M=function(e){function t(){return i()(this,t),u()(this,l()(t).apply(this,arguments))}return f()(t,e),o()(t,[{key:"makeXml",value:function(e,n){p()(l()(t.prototype),"makeXml",this).call(this,e,n),n.attr("YoutubeId",e.props.youtubeId).attr("VideoUrl",e.props.videoUrl)}}]),t}(g);n.d(t,"a",function(){return N});var N=function(){function e(){i()(this,e)}return o()(e,[{key:"makeXml",value:function(t,n){(n.attr("RatioId",t.ratioId).attr("TemplateName",t.templateName).attr("LayoutId",t.layoutId).attr("PageTitle",t.title).attr("PageMemo",t.memo).attr("IsFreeStyle",!0).attr("Page",t.pageIdx+1).elem("SHEETSIZE").attr("cx",t.sheetSize.width).attr("cy",t.sheetSize.height).close().elem("TEMPLATE").attr("Width",t.sheetSize.width).attr("Height",t.sheetSize.height).close(),(new I).makeXml(t.background,n),t.guidelineManager)&&(new O).makeXml(t.guidelineManager,n);var r=t.getAllSingleItems().slice(),i=t.items.slice();e.makeItemsXml(r,n),e.makeGroupsXml(i,n)}}],[{key:"makeItemsXml",value:function(e,t){var n=new v,r=new E,i=new S,a=new b,o=new L,s=new _,u=new R,c=new x,l=new M;e.forEach(function(e,h){switch(e.priority=h,e.getItemType()){case D.b.TEXT:r.makeXml(e,t.elem("TEXT"));break;case D.b.PHOTO:var p=e;p.isStickerable()?n.makeXml(p,t.elem("STICKER")):i.makeXml(p,t.elem("PHOTO"));break;case D.b.GRID:a.makeXml(e,t.elem("GRID"));break;case D.b.SVG_GRAPHIC:o.makeXml(e,t.elem("SVG"));break;case D.b.SVG_BASIC:u.makeXml(e,t.elem("BASICSVG"));break;case D.b.SVG_SHAPE:s.makeXml(e,t.elem("SHAPESVG"));break;case D.b.SVG_IMAGE_FRAME:c.makeXml(e,t.elem("SVGIMAGEFRAME"));break;case D.b.YOUTUBE:l.makeXml(e,t.elem("YOUTUBE"))}})}},{key:"makeGroupsXml",value:function(e,t){var n=this,r=new Map;e.forEach(function(e){e instanceof A.a&&r.set(e.getGroupId(),e)}),r.forEach(function(e){n.makeGroupXml(e,t.elem("GROUP"))})}},{key:"makeGroupXml",value:function(e,t){var n=this;t.attr("Id",e.getGroupId()),t.attr("LayerName",e.layerName),t.elem("Hyperlink").attr("Active",e.props.isActiveHyperlink()).attr("Type",e.props.getHyperlinkType(!0)).attr("Value",e.props.getHyperlinkValue(!0)).close(),e.getMembers().forEach(function(e){e instanceof A.a&&n.makeGroupXml(e,t.elem("GROUP"))})}}]),e}()},function(e,t,n){"use strict";var r,i=n(0),a=n.n(i),o=n(1),s=n.n(o),u=n(410);!function(e){e[e.ID=0]="ID",e[e.CLASS=1]="CLASS",e[e.TAG=2]="TAG"}(r||(r={}));var c=function(){function e(){a()(this,e)}return s()(e,null,[{key:"getCDATAString",value:function(e){return(new DOMParser).parseFromString("<xml></xml>","application/xml").createCDATASection(e).data}},{key:"getInnerTextInCDATABlock",value:function(e){return e.replace("<![CDATA[","").replace("]]>","")}}]),e}(),l=function(){function e(){a()(this,e)}return s()(e,null,[{key:"getCSSPropertyList",value:function(e){var t=[];return e.split(";").forEach(function(e){var n=e.split(":"),r=n[0],i=n[1];r&&i&&t.push({name:r,value:i})}),t}}]),e}(),h=function(){function e(){a()(this,e)}return s()(e,null,[{key:"getSelectorFullName",value:function(e){return e.substring(0,e.indexOf("{"))}},{key:"getPropertyStringList",value:function(e){var t=c.getInnerTextInCDATABlock(e);return t=this.getStyleWithoutSpaceTypes(t),this.getStyleStringList(t)}},{key:"getStyleWithoutSpaceTypes",value:function(e){return e.replace(/\s|\r|\n|\r\n|\t/g,"")}},{key:"getStyleStringList",value:function(e){return e.split("}").filter(function(e){return e}).map(function(e){return"".concat(e).concat("}")})}},{key:"getAttributeListOfSelectorStyle",value:function(e){var t=this.getInnerTextInStyleBlock(e);return l.getCSSPropertyList(t)}},{key:"getInnerTextInStyleBlock",value:function(e){return e.replace("{","").replace("}","")}}]),e}(),p=function(){function e(){a()(this,e)}return s()(e,null,[{key:"parseElementSelectorInfoList",value:function(e){var t=this,n=e.getElementsByTagName("style");if(!n.length)return[];var r=n[0].innerHTML,i=h.getPropertyStringList(r),a=[];return i.forEach(function(e){var n=t.getElementSelectorInfo(e);a.push(n)}),a}},{key:"getElementSelectorInfo",value:function(e){var t=h.getSelectorFullName(e),n=e.replace(t,""),i=h.getAttributeListOfSelectorStyle(n),a="."===t[0],o="#"===t[0],s=a||o?t.substring(1):t;return{fullName:t,name:s,type:a?r.CLASS:o?r.ID:r.TAG,attributeProperties:i}}}]),e}(),d=function(){function e(){a()(this,e)}return s()(e,null,[{key:"changeStyleElementCDATASelectorName",value:function(e,t){var n=e.getElementsByTagName(this.ATTR_STYLE);if(n.length){var r=n[0],i=c.getInnerTextInCDATABlock(r.innerHTML),a="deprecatedByMiridih"+t;i.includes(a)||(r.innerHTML=c.getCDATAString(i.replace(t,a)))}}}]),e}();d.ATTR_STYLE="style";var f=function(){function e(){a()(this,e)}return s()(e,null,[{key:"changeElementAttributeByAttributePropertyList",value:function(e,t){var n=this,r="";if(t.forEach(function(t){t.name.toLowerCase()===n.ATTR_FILL?(e.setAttribute(n.ATTR_FILL,t.value),t.value.includes("url")?e.removeAttribute(n.ATTR_ORIGIN_FILL):e.setAttribute(n.ATTR_ORIGIN_FILL,t.value)):t.name.toLowerCase()===n.ATTR_OPACITY?e.setAttribute(n.ATTR_OPACITY,t.value):r+="".concat(t.name,":").concat(t.value,";")}),r){var i=e.getAttribute(this.ATTR_STYLE);r+=i||"",e.setAttribute(this.ATTR_STYLE,r)}}},{key:"changeElementFillAttributeInStyle",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=e.children[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;this.changeElementFillAttributeInStyle(o)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}var s=e.getAttribute(this.ATTR_STYLE),u=s?l.getCSSPropertyList(s):[];e.removeAttribute(this.ATTR_STYLE),this.changeElementAttributeByAttributePropertyList(e,u)}}]),e}();f.ATTR_STYLE="style",f.ATTR_FILL="fill",f.ATTR_OPACITY="opacity",f.ATTR_ORIGIN_FILL="origin_fill";var g=function(){function e(){a()(this,e)}return s()(e,null,[{key:"convertElementBySelectorInfoList",value:function(t,n){e.updateElementSelectorInfosToIdSelectorValue(t,n);var i=!0,a=!1,o=void 0;try{for(var s,u=n[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value,l=this.getTargetElementsInElement(t,c.fullName,c.type),h=!0,p=!1,g=void 0;try{for(var v,y=l[Symbol.iterator]();!(h=(v=y.next()).done);h=!0){var m=v.value;f.changeElementAttributeByAttributePropertyList(m,c.attributeProperties),[r.ID,r.CLASS].includes(c.type)&&d.changeStyleElementCDATASelectorName(t,c.fullName),this.removeElementSelectorAttribute(m,c.type)}}catch(e){p=!0,g=e}finally{try{h||null==y.return||y.return()}finally{if(p)throw g}}}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}}},{key:"getTargetElementsInElement",value:function(e,t,n){var i=[],a=[r.ID,r.CLASS].includes(n)?t.substring(1):t;return n===r.ID?this.setTargetElementsWithIdAttribute(e,a,i):i=n===r.CLASS?Array.from(e.getElementsByClassName(a)):Array.from(e.getElementsByTagName(a)),i}},{key:"setTargetElementsWithIdAttribute",value:function(e,t,n){var r=!0,i=!1,a=void 0;try{for(var o,s=e.children[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;this.setTargetElementsWithIdAttribute(u,t,n)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}var c=e.attributes.getNamedItem("id");c&&c.value.includes(t)&&n.push(e)}},{key:"removeElementSelectorAttribute",value:function(e,t){switch(t){case r.ID:e.removeAttribute("id");break;case r.CLASS:e.removeAttribute("class");break;case r.TAG:}}},{key:"updateElementSelectorInfosToIdSelectorValue",value:function(e,t){var n=this;t.forEach(function(t){t.attributeProperties.forEach(function(t){var r=t.value,i="";if(r.includes("#")){var a=r.indexOf("#")+1;i=r.includes(")")?r.substring(a,r.indexOf(")")):r.substring(a,r.length)}if(i){var o=n.getSameId(e,i);o&&(t.value=r.replace(i,o))}})})}},{key:"getSameId",value:function(e,t){var n="",r=!0,i=!1,a=void 0;try{for(var o,s=e.children[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;if(n=this.getSameId(u,t))return n}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}var c=e.getAttribute("id");return c&&c.includes(t.toLowerCase())?c:n}}]),e}();n.d(t,"a",function(){return v});var v=function(){function e(){a()(this,e)}return s()(e,null,[{key:"changeElement",value:function(e){var t=p.parseElementSelectorInfoList(e);g.convertElementBySelectorInfoList(e,t),f.changeElementFillAttributeInStyle(e),u.a.removeStyleNodeWithCssType(e)}}]),e}()},function(e,t,n){"use strict";var r=n(62),i=n.n(r),a=n(2),o=n.n(a),s=n(4),u=n.n(s),c=n(0),l=n.n(c),h=n(1),p=n.n(h),d=n(37),f=n(44),g=n(233),v=n(239),y=n(321),m=n(258),E=n(243),k=n(238),S=n(264),I=n(265),T=n(384),b=n(257),w=n(11),A=n(290),C=n(84),x=n(237),R=function(){function e(){l()(this,e)}var t,n,r,a;return p()(e,null,[{key:"beforeTextUpdate",value:(a=u()(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)})},{key:"updateItems",value:(r=u()(o.a.mark(function e(t,n){var r,i,a,s,u,c,l,h,p,d,f,g,v,y,m,S,I,T;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n?"string"!=typeof n&&(n=n.toString()):n="1.0.0.0",r=!0,i=!1,a=void 0,e.prev=4,s=t[Symbol.iterator]();case 6:if(r=(u=s.next()).done){e.next=69;break}return c=u.value,e.next=10,this.updateFonts(c);case 10:if(!(c instanceof k.a)){e.next=15;break}return e.next=13,this.updateTextVersion(c,n);case 13:e.next=66;break;case 15:if(!(c instanceof E.a)){e.next=66;break}l=!0,h=!1,p=void 0,e.prev=19,d=c.cells[Symbol.iterator]();case 21:if(l=(f=d.next()).done){e.next=52;break}g=f.value,v=!0,y=!1,m=void 0,e.prev=26,S=g[Symbol.iterator]();case 28:if(v=(I=S.next()).done){e.next=35;break}return T=I.value,e.next=32,this.updateTextVersion(T.childTextItem,n);case 32:v=!0,e.next=28;break;case 35:e.next=41;break;case 37:e.prev=37,e.t0=e.catch(26),y=!0,m=e.t0;case 41:e.prev=41,e.prev=42,v||null==S.return||S.return();case 44:if(e.prev=44,!y){e.next=47;break}throw m;case 47:return e.finish(44);case 48:return e.finish(41);case 49:l=!0,e.next=21;break;case 52:e.next=58;break;case 54:e.prev=54,e.t1=e.catch(19),h=!0,p=e.t1;case 58:e.prev=58,e.prev=59,l||null==d.return||d.return();case 61:if(e.prev=61,!h){e.next=64;break}throw p;case 64:return e.finish(61);case 65:return e.finish(58);case 66:r=!0,e.next=6;break;case 69:e.next=75;break;case 71:e.prev=71,e.t2=e.catch(4),i=!0,a=e.t2;case 75:e.prev=75,e.prev=76,r||null==s.return||s.return();case 78:if(e.prev=78,!i){e.next=81;break}throw a;case 81:return e.finish(78);case 82:return e.finish(75);case 83:case"end":return e.stop()}},e,this,[[4,71,75,83],[19,54,58,66],[26,37,41,49],[42,,44,48],[59,,61,65],[76,,78,82]])})),function(e,t){return r.apply(this,arguments)})},{key:"isHigherVersion",value:function(e,t){var n=e.split("."),r=t.split(".");if(4!==n.length||4!==r.length)return!0;for(var i=0;i<n.length;i++){var a=Number(n[i]),o=Number(r[i]);if(isNaN(a)||isNaN(o))return!1;if(a<o)return!0;if(a>o)return!1}return!1}},{key:"updateTextVersion",value:(n=u()(o.a.mark(function e(t,n){var r,i,a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isHigherVersion(n,"1.5.0.0")){e.next=22;break}if(!this.beforeTextUpdate){e.next=4;break}return e.next=4,this.beforeTextUpdate(t);case 4:return e.next=6,y.a.loadDefaultFont();case 6:return r=t.props.adjustLTRB,t.props.adjustLTRB=null,i=t.props.getUsedFonts(),e.next=11,y.a.addFamilies(i);case 11:a=this.getCalculated(t.props,1),this.compensateLineGap(t.props),this.convertLineSpace(t.props),this.convertLineBreak(t.props,a),this.convertLetterSpace(t.props),this.convertShadow(t.props),this.convertTextSize(t.props),this.convertNbsp2Sp(t.props),this.convertOutlineSize(t.props,a),this.setMinSize(t.props),t.props.adjustLTRB=r;case 22:if(!this.isHigherVersion(n,"1.5.0.2")){e.next=31;break}if(!this.beforeTextUpdate){e.next=26;break}return e.next=26,this.beforeTextUpdate(t);case 26:return e.next=28,y.a.loadDefaultFont();case 28:return e.next=30,y.a.addFamilies(t.props.getUsedFonts());case 30:this.updateLineHeight(t);case 31:if(!this.isHigherVersion(n,"1.5.0.1")){e.next=40;break}if(!this.beforeTextUpdate){e.next=35;break}return e.next=35,this.beforeTextUpdate(t);case 35:return e.next=37,y.a.loadDefaultFont();case 37:return e.next=39,y.a.addFamilies(t.props.getUsedFonts());case 39:this.updateBound(t);case 40:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})},{key:"updateLineHeight",value:function(e){if(!e.props.isActiveCurve()){for(var t,n=e.props,r=n.getLineLength(),i=0,a=[],o=0,s=function(e){var r=n.getLine(e),o=0,s=0,u=0;r.chars.forEach(function(e){o=e.size>o?e.size:o;var t=y.a.get(e.styles,e.char),n=e.size/t.unitsPerEm,r=t.drawAscender*n,i=t.drawDescender*n;s=r>s?r:s,u=i>u?i:u}),a[e]={drawDiff:(s+u)/o,maxCharSize:o},0===e&&(t=(s+u-1.4*o)/2),i=i>o?i:o},u=0;u<r;u++)s(u);for(u=0;u<r;u++){var c=n.getLine(u);c.lineSpace=a[u].drawDiff+i*c.lineSpace/100/a[u].maxCharSize,o+=0===u?1.2*a[u].maxCharSize+a[u].maxCharSize*(c.lineSpace-1)/2:a[u].maxCharSize*c.lineSpace}var l=e.getLTRBCoordinate();l.top+=t,l.bottom=l.top+o,l.rotate=n.getRotate(),this.moveLTRB(e,l)}}},{key:"moveLTRB",value:function(e,t){var n=e.props,r=e.getLTRBCoordinate();r.rotate=n.getRotate();var i=n.onBoundaryChanged;n.onBoundaryChanged=null;var a=r.getCenterDistance(t),o=a.tx,s=a.ty;t.move(o,s),n.setLeft(t.left),n.setTop(t.top),n.setRight(t.right),n.setBottom(t.bottom),n.onBoundaryChanged=i}},{key:"updateBound",value:function(e){var t=e.props;if(!t.isActiveCurve()){var n=e.getLTRBCoordinate(),r=n.clone(),i=t.getCalculated(!1),a=t.onBoundaryChanged;t.onBoundaryChanged=null,r.top=t.getTop()+i.bound.top,r.bottom=r.top+i.bound.height;var o=n.getCenterDistance(r),s=o.tx,u=o.ty;r.move(s,u),t.setLeft(r.left),t.setTop(r.top),t.setRight(r.right),t.setBottom(r.bottom),t.onBoundaryChanged=a}}},{key:"updateFonts",value:(t=u()(o.a.mark(function e(t){var n,r,i,a,s,c,l,h,p,d,f,g,v,m,S,I,T,b,C,x,R,L,_,P,O,D;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=function(){return(r=u()(o.a.mark(function e(t){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.getReplaceableFontName(t.styles.family);case 2:n=e.sent,w.b.isEmpty(n)?(t.styles.family="THE명품고딕R",t.styles.bold=!1,t.styles.italic=!1,t.styles.strikeout=!1,t.styles.underline=!1):t.styles.family=n;case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)},n=function(e){return r.apply(this,arguments)},!(t instanceof k.a)){e.next=32;break}i=!0,a=!1,s=void 0,e.prev=6,c=t.props.getCharList()[Symbol.iterator]();case 8:if(i=(l=c.next()).done){e.next=16;break}if(h=l.value,y.a.isAvailableFamily(h.styles.family)){e.next=13;break}return e.next=13,n(h).catch(function(e){return console.error("font replace fail",e)});case 13:i=!0,e.next=8;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(6),a=!0,s=e.t0;case 22:e.prev=22,e.prev=23,i||null==c.return||c.return();case 25:if(e.prev=25,!a){e.next=28;break}throw s;case 28:return e.finish(25);case 29:return e.finish(22);case 30:e.next=108;break;case 32:if(!(t instanceof E.a)){e.next=108;break}p=!0,d=!1,f=void 0,e.prev=36,g=t.cells[Symbol.iterator]();case 38:if(p=(v=g.next()).done){e.next=94;break}m=v.value,S=!0,I=!1,T=void 0,e.prev=43,b=m[Symbol.iterator]();case 45:if(S=(C=b.next()).done){e.next=77;break}x=C.value,R=!0,L=!1,_=void 0,e.prev=50,P=x.childTextItem.props.getCharList()[Symbol.iterator]();case 52:if(R=(O=P.next()).done){e.next=60;break}if(D=O.value,y.a.isAvailableFamily(D.styles.family)){e.next=57;break}return e.next=57,n(D).catch(function(e){return console.error("font replace fail",e)});case 57:R=!0,e.next=52;break;case 60:e.next=66;break;case 62:e.prev=62,e.t1=e.catch(50),L=!0,_=e.t1;case 66:e.prev=66,e.prev=67,R||null==P.return||P.return();case 69:if(e.prev=69,!L){e.next=72;break}throw _;case 72:return e.finish(69);case 73:return e.finish(66);case 74:S=!0,e.next=45;break;case 77:e.next=83;break;case 79:e.prev=79,e.t2=e.catch(43),I=!0,T=e.t2;case 83:e.prev=83,e.prev=84,S||null==b.return||b.return();case 86:if(e.prev=86,!I){e.next=89;break}throw T;case 89:return e.finish(86);case 90:return e.finish(83);case 91:p=!0,e.next=38;break;case 94:e.next=100;break;case 96:e.prev=96,e.t3=e.catch(36),d=!0,f=e.t3;case 100:e.prev=100,e.prev=101,p||null==g.return||g.return();case 103:if(e.prev=103,!d){e.next=106;break}throw f;case 106:return e.finish(103);case 107:return e.finish(100);case 108:case"end":return e.stop()}},e,null,[[6,18,22,30],[23,,25,29],[36,96,100,108],[43,79,83,91],[50,62,66,74],[67,,69,73],[84,,86,90],[101,,103,107]])})),function(e){return t.apply(this,arguments)})},{key:"convertTextSize",value:function(e){for(var t=e.getLineLength(),n=0;n<t;n++){var r=e.getLine(n),i=!0,a=!1,o=void 0;try{for(var s,u=r.chars[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;c.size=c.size*S.a.FONT_SIZE_RATIO," "===c.char&&(c.char=" "),c.shadow.angle+=90,c.shadow.angle>360&&(c.shadow.angle-=360)}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}}}},{key:"convertNbsp2Sp",value:function(e){var t=e.getText().replace(/\u00a0+(?=[^\u00a0\n])/gm,function(e){return e.replace(/\u00a0$/," ")}).split("\n");t=t.map(function(e){return 0===e.search(/^\u00a0+\u0020/)?e.replace("  ","  "):e});var n=e.getLineLength();if(n===t.length)for(var r=0;r<n;r++){var i=e.getLine(r).chars,a=t[r];if(i.length===a.length)for(var o=a.indexOf(" ");-1!==o;)" "===i[o].char&&(i[o].char=a.charAt(o)),o=a.indexOf(" ",o+1)}}},{key:"compensateLineGap",value:function(e){if(!e.isActiveCurve()){for(var t=e.getLineLength(),n=[],r=[],i=0,a=0,o=0;o<t;o++){var s=e.getLine(o);n[o]={lineheight:0,maxwidth:0};var u=0,c=0,l=!0,h=!1,p=void 0;try{for(var d,f=s.chars[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var g=d.value,v=y.a.get(g.styles,g.char);if(!v)throw new Error("폰트가 정상적으로 로드되지 않았습니다:"+g.styles.family);var E=v.ascender-v.descender,k=g.size/v.unitsPerEm,I=E*k;I>a&&(a=I),n[o].lineheight<I&&(n[o].lineheight=I,n[o].heightFont=v,n[o].fsc=k);var T=v.ascender*k;u<T&&(u=T);var w=-v.descender*k;c<w&&(c=w);var A=v.xMax-v.xMin;n[o].maxwidth<A&&(n[o].maxwidth=A,n[o].widthFont=v),i<A*k&&(i=A*k),r[o]={asc:u,desc:c}}}catch(e){h=!0,p=e}finally{try{l||null==f.return||f.return()}finally{if(h)throw p}}}for(var x=0;x<t;x++){var R=e.getLine(x).getLineSpaceGivenCharSize(a);r[x].gap=R}for(var L,_,P,O=n[0].heightFont,D=n[0].fsc,M=e.getLine(0),N=0;N<M.chars.length;N++){var B=M.chars[N],U=y.a.get(B.styles,B.char);if(!U)throw new Error("폰트가 정상적으로 로드되지 않았습니다:"+B.styles.family);var G=B.size/U.unitsPerEm,F=(U.drawAscender+U.drawDescender)*G;(!L||L<F)&&(L=F,_=U,P=G)}var H,V=(O.lineGap+O.ascender)*S.a.FONT_SIZE_RATIO*D-_.drawAscender*P*S.a.FONT_SIZE_RATIO;switch(e.getVerticalAlign()){case b.g.TOP:H=V;break;case b.g.CENTER:H=V/2;break;case b.g.BOTTOM:H=0}var z=e.getRotate()>=0?e.getRotate()+90:e.getRotate(),W=C.a.round(H*Math.cos(m.a.getRadianByDegree(z)),3),K=C.a.round(H*Math.sin(m.a.getRadianByDegree(z)),3);e.setLeft(e.getLeft()+W),e.setRight(e.getRight()+W),e.setTop(e.getTop()+K),e.setBottom(e.getBottom()+K)}}},{key:"convertLineSpace",value:function(e){var t=e.getLineLength();if(1!==t){for(var n=0,r=0,i=[],a=function(t){var a=e.getLine(t),o=0,s=0,u=0,c=0;a.chars.forEach(function(e){var t=""!==e.char?e.char:null,i=y.a.get(e.styles,t);if(!i)throw new Error("폰트 로딩이 덜됨");var a=e.size*S.a.FONT_SIZE_RATIO/i.unitsPerEm,l=(i.ascender-i.descender)*a,h=i.ascender*a,p=-i.descender*a,d=i.drawAscender*a,f=i.drawDescender*a;r=e.size>r?e.size:r,n=l>n?l:n,o=h>o?h:o,s=p>s?p:s,u=d>u?d:u,c=f>c?f:c}),i[t]={asc:o,desc:s,drawasc:u,drawdesc:c}},o=0;o<t;o++)a(o);r*=S.a.FONT_SIZE_RATIO;var s=[],u=[];for(o=0;o<t;o++){var c=e.getLine(o);if(s[o]=c.lineSpace*n/100,0===o){var l=i[0].desc+s[o]+i[1].asc-(i[0].drawdesc+i[1].drawasc);u[o]=l/2,c.lineSpace=l/r*100}else{var h=i[o-1].desc+s[o-1]+i[o].asc-(i[o-1].drawdesc+i[o].drawasc);u[o]=h-u[o-1],c.lineSpace=2*u[o]/r*100}}}}},{key:"convertLetterSpace",value:function(e){for(var t,n=e.getLineLength(),r=[],i=[],a=0,o=0,s=0;s<n;s++){var u=e.getLine(s);r[s]={lineheight:0,maxwidth:0};var c=0,l=0,h=!0,p=!1,d=void 0;try{for(var f,g=u.chars[Symbol.iterator]();!(h=(f=g.next()).done);h=!0){var v=f.value,m=y.a.get(v.styles,v.char);if(!m)throw new Error("폰트가 정상적으로 로드되지 않았습니다:"+v.styles.family);var E=m.ascender-m.descender,k=v.size/m.unitsPerEm,S=E*k;S>o&&(o=S),r[s].lineheight<S&&(r[s].lineheight=S,i[s]=S,r[s].heightFont=m,r[s].fsc=k);var I=m.ascender*k;c<I&&(c=I);var T=-m.descender*k;l<T&&(l=T);var b=m.xMax-m.xMin;r[s].maxwidth<b&&(r[s].maxwidth=b,r[s].widthFont=m),a<b*k&&(a=b*k)}}catch(e){p=!0,d=e}finally{try{h||null==g.return||g.return()}finally{if(p)throw d}}}i[0];for(var w=0;w<n;w++){var A=o*(t=w,e.getLine(t).lineSpace)/100;i[w]+=A,0!==w&&i[w]}for(var C=0;C<n;C++)for(var x=e.getLine(C),R=0;R<x.chars.length;R++){var L=x.chars[R];if(""!==L.char){var _=y.a.get(L.styles,L.char);if(!_)throw new Error("폰트가 정상적으로 로드되지 않았습니다:"+L.styles.family);var P=L.size/_.unitsPerEm,O=Math.round(r[C].maxwidth*P)/2*L.fontdetail.textSpace/100;L.fontdetail.textSpace=O/L.size*100}}}},{key:"convertLineBreak",value:function(e,t){if(!e.isActiveCurve()){for(var n=e.isUpperCase()?function(e){return e.toUpperCase()}:function(e){return e},r=e.getFontDetailScaleXAcc()/100,i=e.getLineLength(),a=[],o=[],s=[],u=[],c=0,l=0,h=e.getWidth(),p=[],d=[],f=[],g=0;g<i;g++){var v=e.getLine(g);a[g]={lineheight:0,maxwidth:0};var m=0,E=0,k=!0,b=!1,w=void 0;try{for(var A,C=v.chars[Symbol.iterator]();!(k=(A=C.next()).done);k=!0){var x=A.value,R=y.a.get(x.styles,x.char);if(!R)throw new Error("폰트가 정상적으로 로드되지 않았습니다:"+x.styles.family);var L=R.ascender-R.descender,_=x.size/R.unitsPerEm,P=L*_;P>l&&(l=P),a[g].lineheight<P&&(a[g].lineheight=P,o[g]=P,s[g]=P,a[g].heightFont=R,a[g].fsc=_);var O=R.ascender*_;m<O&&(m=O);var D=-R.descender*_;E<D&&(E=D);var M=R.xMax-R.xMin;a[g].maxwidth<M&&(a[g].maxwidth=M,a[g].widthFont=R),c<M*_&&(c=M*_),u[g]={asc:m,desc:E}}}catch(e){b=!0,w=e}finally{try{k||null==C.return||C.return()}finally{if(b)throw w}}}o[0];for(var N=0;N<i;N++){var B=e.getLine(N).getLineSpaceGivenCharSize(l);o[N]+=B,u[N].gap=B,0!==N&&o[N]}if(e.isLegacy()){for(var U=0;U<i;U++)p.push(e.getLine(U));e.setLegacy(!1)}else for(var G=o.splice(0),F=u.splice(0),H=s.splice(0),V=0;V<i;V++){var z=e.getLine(V),W=new T.b(z.align,z.lineSpace);d[V]=[];var K=p.push(W)-1;o[K]=G[V],u[K]=F[V],f[K]=[],s[K]=H[V];for(var X=0,Y=0;Y<z.chars.length;Y++){var Z=z.chars[Y];if(""!==Z.char){var j=y.a.get(Z.styles,Z.char);if(!j)throw new Error("폰트가 정상적으로 로드되지 않았습니다:"+Z.styles.family);var q=Z.size*S.a.FONT_SIZE_RATIO/j.unitsPerEm,Q=Math.round(a[V].maxwidth*q)/20*Z.fontdetail.textSpace/10,$=this.getGlyph(j,n(z.chars[Y].char));if((X+=$.advanceWidth*q*r)-h>.1&&W.chars.length>0){var J=W.chars.length;f[K][J]=new I.a(V,Y),W=new T.b(z.align,z.lineSpace),o[K=p.push(W)-1]=G[V],u[K]=F[V],f[K]=[],G[V],X=$.advanceWidth*q*r,s[K]=H[V]}Y!==z.chars.length-1&&(X+=Q*r)}var ee=W.chars.push(Z)-1;d[V][Y]=new I.a(K,ee),f[K][ee]=new I.a(V,Y)}d[V][z.chars.length]=new I.a(K,W.chars.length),f[K][W.chars.length]=new I.a(V,z.chars.length)}e.setLines(p,!0)}}},{key:"getGlyph",value:function(e,t){var n=y.a.getDefaultMatrics(t);return e.has(t)?e.getGlyph(t):n.has(t)?n.getGlyph(t):n.getDefault()}},{key:"convertShadow",value:function(e){for(var t=e.getLineLength(),n=[],r=0,i=0,a=0;a<t;a++){var o=e.getLine(a);n[a]={lineheight:0,maxwidth:0};var s=0,u=0,c=!0,l=!1,h=void 0;try{for(var p,d=o.chars[Symbol.iterator]();!(c=(p=d.next()).done);c=!0){var f=p.value,g=y.a.get(f.styles,f.char);if(!g)throw new Error("폰트가 정상적으로 로드되지 않았습니다:"+f.styles.family);var v=g.ascender-g.descender,m=f.size/g.unitsPerEm,E=v*m;E>i&&(i=E),n[a].lineheight<E&&(n[a].lineheight=E,n[a].heightFont=g,n[a].fsc=m);var k=g.ascender*m;s<k&&(s=k);var S=-g.descender*m;u<S&&(u=S);var I=g.xMax-g.xMin;n[a].maxwidth<I&&(n[a].maxwidth=I,n[a].widthFont=g),r<I*m&&(r=I*m)}}catch(e){l=!0,h=e}finally{try{c||null==d.return||d.return()}finally{if(l)throw h}}}for(var T=0;T<t;T++){var b=e.getLine(T),w=!0,A=!1,C=void 0;try{for(var x,R=b.chars[Symbol.iterator]();!(w=(x=R.next()).done);w=!0){var L=x.value;L.shadow.distance=_(r/L.size*L.shadow.distance,0,100),L.shadow.angle=L.shadow.angle-90,L.shadow.spread=_(r/L.size*L.shadow.spread,0,100)}}catch(e){A=!0,C=e}finally{try{w||null==R.return||R.return()}finally{if(A)throw C}}}function _(e,t,n){return e<t?t:e>n?n:e}}},{key:"setMinSize",value:function(e){if(!e.isActiveCurve()){var t,n=[],r=e.getLineLength(),a=0,o=0,s=e.isUpperCase()?function(e){return e.toUpperCase()}:function(e){return e},u=function(){return 1},c=e.getWidth(),l=0,h=0,p=[];if(e.isActiveCurve()){for(var d=e.getLine(0),f=new T.b(d.align,d.lineSpace,d.chars.slice()),g=1;g<r;g++){var v;(v=f.chars).push.apply(v,i()(e.getLine(g).chars.slice()))}p.push(f)}else for(var m=0;m<r;m++)p.push(e.getLine(m));for(var E=function(r){var i=p[r],a={chars:[],x1:null,x2:null,y1:null,y2:null},d=0,f=[],g=0,v=0,m=0,E=0;if(1===i.chars.length&&""===i.chars[0].char){var k=i.chars[0],S=i.getLineSpaceGivenCharSize(k.size)*(0===r?.5:1)+g;o+=S,a.y2=a.y1+S}else!function(){for(var n=[],r=0;r<i.chars.length;r++){var p=i.chars[r],k=s(" "===p.char?" ":p.char),S=y.a.get(p.styles,k),I=p.size/S.unitsPerEm,T=S.getGlyph(k);T||(T=S.getGlyph(" "));var w=T.advanceWidth*I*u(p)+p.fontdetail.textSpace/100*p.size*u(p),A=T.advanceWidth*I*u(p),C={x1:T.x1*I,x2:T.x2*I,y1:T.y1*I,y2:T.y2*I},x=i.getLineSpaceGivenCharSize(p.size)/2;n[r]={charData:p,advanceWidth:T.advanceWidth*I,ascend:S.drawAscender*I,lineGap:x,descend:S.drawDescender*I,char:p.char,charSize:p.size,posWidth:w,charWidth:A,drawasc:S.ascender*I,drawdesc:S.descender*I,bound:C,ignored:!1}}for(var R=[],L=function(r){var s=n[r].charSize;s>g&&(g=s);var u=n[r].ascend,p=n[r].descend,k=n[r].ascend+n[r].descend;k>m&&(m=k),u>v&&(v=u),p>E&&(E=p),R.push(n[r]),R.forEach(function(e){f.push(e),d+=e.posWidth}),R.splice(0),r+1>=i.chars.length&&function(){if(!(e.isActiveCurve()&&h>0)){for(var n=[],r=[];f[0]&&" "===f[0].char;){var u=f.shift();u.ignored=!0,d-=u.posWidth,n.push(u)}for(;f[f.length-1]&&" "===f[f.length-1].char;){var p=f.pop();p.ignored=!0,d-=p.posWidth,r.push(p)}var m,k,S=0,I=d-f[f.length-1].posWidth+f[f.length-1].charWidth;switch(d>l&&(l=d),i.align){case b.f.LEFT:break;case b.f.CENTER:S=(c-I)/2;break;case b.f.RIGHT:S=c-I}S<0&&(S=0),n.length>0&&(m=f).splice.apply(m,[0,0].concat(n)),r&&(k=f).push.apply(k,r);for(var T,w=i.getLineSpaceGivenCharSize(g)*(0===h?.5:1)+(v+E),A=i.getLineSpaceGivenCharSize(g)*(0===h?0:.5)+(v+E),C=0,x=i.getLineSpaceGivenCharSize(g)/2,R=o+(0===h?0:x)+v,L=0,_=f;L<_.length;L++){var P=_[L],O=y.a.getFakeData(P.charData.styles),D={advanceWidth:P.advanceWidth,ascend:P.ascend,descend:P.descend,fakeBold:O.fakeBold,fakeItalic:O.fakeItalic,x:S+C,y:R,ylength:w+v,ignored:P.ignored,drawAscend:P.drawasc,drawDescend:P.drawdesc};a.chars.push(D),P.ignored||(C+=P.posWidth),T?(T.x1>P.bound.x1+D.x&&(T.x1=P.bound.x1+D.x),T.x2<P.bound.x2+D.x&&(T.x2=P.bound.x2+D.x),T.y1>P.bound.y1&&(T.y1=P.bound.y1),T.y2<P.bound.y2&&(T.y2=P.bound.y2)):T={x1:P.bound.x1+D.x,x2:P.bound.x2+D.x,y1:P.bound.y1,y2:P.bound.y2}}null===a.x1&&null===a.x2&&null===a.y1&&null===a.y2?(a.x1=S,a.x2=S+I,a.y1=o,a.y2=o+A):(a.x1>S&&(a.x1=S),a.x2<S+I&&(a.x2=S+I),a.y1>o&&(a.y1=o),a.y2<o+A&&(a.y2=o+A)),o+=w,t?(t.x1>T.x1&&(t.x1=T.x1),t.x2<T.x2&&(t.x2=T.x2),t.y1>R+T.y1&&(t.y1=R+T.y1),t.y2<R+T.y2&&(t.y2=R+T.y2)):t={x1:T.x1,x2:T.x2,y1:R+T.y1,y2:R+T.y2},g=s,d=0,f=[],h++}}()},_=0;_<i.chars.length;_++)L(_)}();n.push(a)},k=0;k<p.length;k++)E(k);var S=e.getHeight();switch(e.getVerticalAlign()){case b.g.TOP:break;case b.g.CENTER:a=(S-o)/2;break;case b.g.BOTTOM:a=S-o}for(var I=0,w=n;I<w.length;I++){var A=w[I],C=!0,x=!1,R=void 0;try{for(var L,_=A.chars[Symbol.iterator]();!(C=(L=_.next()).done);C=!0){L.value.y+=a}}catch(e){x=!0,R=e}finally{try{C||null==_.return||_.return()}finally{if(x)throw R}}A.y1+=a,A.y2+=a}var P=n[n.length-1].y2-n[0].y1;if(e.getWidth()*e.getFontDetailScaleXAcc()/100<l){var O=l-e.getWidth()+2;switch(e.getHorizontalAlign()){case b.f.LEFT:e.setRight(e.getRight()+O);break;case b.f.CENTER:var D=O/2;e.setLeft(e.getLeft()-D),e.setRight(e.getRight()+D);break;case b.f.RIGHT:e.setLeft(e.getLeft()-O)}}e.getHeight()<P&&e.getVerticalAlign()===b.g.TOP&&e.setBottom(e.getTop()+P+2)}}},{key:"convertOutlineSize",value:function(e,t){e.forEachChar(function(e){var n=e.outline.size*S.a.FONT_SIZE_RATIO/200*t.maxCharWidth*200/e.size;e.outline.size=n})}},{key:"calculate",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.isUpperCase()?function(e){return e.toUpperCase()}:function(e){return e},i=0,a=0,o=0,s=e.getWidth(),u=e.getFontDetailScaleXAcc()/100,c=e.getLineLength(),l=[],h=[],p=[],d=[],f=0,g=0,v=0,m=[],E=[],k=[],S=0;S<c;S++){var w=e.getLine(S);l[S]={lineheight:0,maxwidth:0};var A=0,C=0,R=!0,L=!1,_=void 0;try{for(var P,O=w.chars[Symbol.iterator]();!(R=(P=O.next()).done);R=!0){var D=P.value,M=y.a.get(t(D.styles),D.char);if(!M)throw new Error("폰트가 정상적으로 로드되지 않았습니다:"+D.styles.family);var N=M.ascender-M.descender,B=D.size/M.unitsPerEm,U=N*B;U>v&&(v=U),l[S].lineheight<U&&(l[S].lineheight=U,h[S]=U,p[S]=U,l[S].heightFont=M,l[S].fsc=B);var G=M.ascender*B;A<G&&(A=G);var F=-M.descender*B;C<F&&(C=F);var H=M.xMax-M.xMin;l[S].maxwidth<H&&(l[S].maxwidth=H,l[S].widthFont=M),g<H*B&&(g=H*B),d[S]={asc:A,desc:C}}}catch(e){L=!0,_=e}finally{try{R||null==O.return||O.return()}finally{if(L)throw _}}}function V(t){return e.getLine(t).lineSpace}f=h[0];for(var z=0;z<c;z++){var W=v*V(z)/100;h[z]+=W,d[z].gap=W,0!==z&&(f+=h[z])}if(n)for(var K=0;K<c;K++)m.push(e.getLine(K));else{for(var X=h.splice(0),Y=d.splice(0),Z=[],j=p.splice(0),q=0;q<c;q++){var Q=e.getLine(q),$=new T.b(Q.align,Q.lineSpace);E[q]=[];var J=m.push($)-1;h[J]=X[q],d[J]=Y[q],Z[J]=l[q],k[J]=[],p[J]=j[q];for(var ee=0,te=0;te<Q.chars.length;te++){var ne=Q.chars[te];if(""!==ne.char){var re=y.a.get(ne.styles,ne.char);if(!re)throw new Error("폰트가 정상적으로 로드되지 않았습니다:"+ne.styles.family);var ie=ne.size/re.unitsPerEm,ae=Math.round(l[q].maxwidth*ie)/20*ne.fontdetail.textSpace/10,oe=this.getGlyph(re,r(Q.chars[te].char));if((ee+=oe.advanceWidth*ie*u)-s>.1&&$.chars.length>0){var se=$.chars.length;k[J][se]=new I.a(q,te),$=new T.b(Q.align,Q.lineSpace),h[J=m.push($)-1]=X[q],d[J]=Y[q],Z[J]=l[q],k[J]=[],f+=X[q],ee=oe.advanceWidth*ie*u,p[J]=j[q]}te!==Q.chars.length-1&&(ee+=ae*u)}var ue=$.chars.push(ne)-1;E[q][te]=new I.a(J,ue),k[J][ue]=new I.a(q,te)}E[q][Q.chars.length]=new I.a(J,$.chars.length),k[J][$.chars.length]=new I.a(q,Q.chars.length)}l=Z}if(a=(l[0].heightFont.ascender+l[0].heightFont.lineGap)*l[0].fsc,i=(l[0].heightFont.ascender+l[0].heightFont.lineGap)*l[0].fsc,o=l[0].heightFont.lineGap*l[0].fsc,!e.isActiveCurve())switch(e.getVerticalAlign()){case b.g.CENTER:i=(e.getHeight()-f)/2+(l[0].heightFont.ascender+l[0].heightFont.lineGap)*l[0].fsc,o=(e.getHeight()-f)/2+l[0].heightFont.lineGap*l[0].fsc;break;case b.g.BOTTOM:i=e.getHeight()-f+(l[0].heightFont.ascender+l[0].heightFont.lineGap)*l[0].fsc,o=e.getHeight()-f}for(var ce=[],le=[],he=x.a.createWithRightBottom(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER),pe=x.a.createWithRightBottom(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER),de=0,fe=0;fe<m.length;fe++){le[fe]={chars:[],bound:new x.a(0,0,0,0),visx2:0};var ge=m[fe];if(ge.isEmpty()){var ve=ge.chars[0],ye=y.a.get(ve.styles,ve.char);if(!ye)throw new Error("폰트가 정상적으로 로드되지 않았습니다:"+ve.styles.family);var me=ve.size/ye.unitsPerEm,Ee=this.getGlyph(ye," ");le[fe].chars.push({bound:new x.a(0,0,0,h[fe]),spacing:0});var ke=Ee.advanceWidth*me;fe>0&&(de+=d[fe-1].desc+d[fe].asc+d[fe-1].gap),le[fe].bound=new x.a(0,0,0,h[fe]),le[fe].visx2=ke/2,le[fe].bound.translate(0,de),he.left=he.left>le[fe].bound.left?le[fe].bound.left:he.left,he.right=he.right<ke?ke:he.right,he.top=he.top>le[fe].bound.top?le[fe].bound.top:he.top,he.bottom=he.bottom<le[fe].bound.bottom?le[fe].bound.bottom:he.bottom,pe.left=he.left>le[fe].bound.left?le[fe].bound.left:he.left,pe.right=he.right<ke?ke:he.right,pe.top=he.top>le[fe].bound.top?le[fe].bound.top:he.top,pe.bottom=he.bottom<le[fe].bound.bottom?le[fe].bound.bottom:he.bottom}else{le[fe].bound=null;for(var Se=0;Se<ge.chars.length;Se++){var Ie=ge.chars[Se],Te=y.a.get(Ie.styles,Ie.char);if(!Te)throw new Error("폰트가 정상적으로 로드되지 않았습니다:"+Ie.styles.family);var be=Ie.size/Te.unitsPerEm,we=Math.round(l[fe].maxwidth*be)/20*Ie.fontdetail.textSpace/10,Ae=this.getGlyph(Te,r(ge.chars[Se].char)),Ce=(Ae.advanceWidth*be+we)*u;null===le[fe].bound?le[fe].bound=x.a.createWithRightBottom(Ae.x1*be,Ae.y1*be,Ce,Ae.y2*be):(le[fe].bound.right+=Ce,le[fe].bound.bottom=le[fe].bound.bottom<Ae.y2*be?Ae.y2*be:le[fe].bound.bottom,le[fe].bound.top=le[fe].bound.top>Ae.y1*be?Ae.y1*be:le[fe].bound.top),le[fe].chars[Se]={bound:x.a.createWithRightBottom(le[fe].bound.right-Ce,Ae.y1*be,le[fe].bound.right,Ae.y2*be),spacing:we}}var xe=ge.chars[ge.chars.length-1],Re=y.a.get(xe.styles,xe.char);if(!Re)throw new Error("폰트가 정상적으로 로드되지 않았습니다:"+xe.styles.family);var Le=xe.size/Re.unitsPerEm,_e=Math.round(l[fe].maxwidth*Le)/20*xe.fontdetail.textSpace/10;le[fe].bound.right=le[fe].bound.right-_e;var Pe=this.getGlyph(Re," ");le[fe].visx2=le[fe].bound.right+Le*Pe.advanceWidth/2,fe>0&&(de+=d[fe-1].desc+d[fe].asc+d[fe-1].gap);var Oe=le[fe].bound.top+a+de,De=le[fe].bound.bottom+a+de;pe.left=pe.left>le[fe].bound.left?le[fe].bound.left:pe.left,pe.right=pe.right<le[fe].bound.right?le[fe].bound.right:pe.right,pe.top=pe.top>Oe?Oe:pe.top,pe.bottom=pe.bottom<De?De:pe.bottom,le[fe].bound.top+=i+de,le[fe].bound.bottom+=i+de,he.left=he.left>le[fe].bound.left?le[fe].bound.left:he.left,he.right=he.right<le[fe].bound.right?le[fe].bound.right:he.right,he.top=he.top>le[fe].bound.top?le[fe].bound.top:he.top,he.bottom=he.bottom<le[fe].bound.bottom?le[fe].bound.bottom:he.bottom}switch(e.getHorizontalAlign()){case b.f.LEFT:ce[fe]=0;break;case b.f.CENTER:ce[fe]=(s-le[fe].bound.right)/2/u;break;case b.f.RIGHT:ce[fe]=(s-le[fe].bound.right)/u}}return{startX:ce,startY:i,maxCharWidth:g,padSize:g,reverselinemap:k,linemap:E,linedata:m,lineHeights:h,top:o,lineStarts:d,pureTextBound:pe,textSize:{lineSize:le,bound:he},textHeights:p}}},{key:"getCalculated",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.calculate(e,function(e){return e},n)}}]),e}(),L=n(334),_=n(324),P=n(250),O=n(229),D=n(293),M=n(461),N=n(231),B=function(){function e(){l()(this,e)}return p()(e,null,[{key:"correctFromPage",value:function(e){e.getAllSingleItems().forEach(function(t){t instanceof N.d&&(t.orgType!==N.b.Skin||t.backgroundState===N.a.PHOTO_TO_BACKGROUND?t.orgType===N.b.BackgroundImage&&t.backgroundState===N.a.NONE&&(t.backgroundState=N.a.ORIGIN):t.isSkinable(e.sheetSize)||(t.backgroundState=N.a.BACKGROUND_TO_PHOTO))})}}]),e}(),U=n(462),G=n(463),F=n(342),H=n(415),V=n(441),z=function(){function e(){l()(this,e)}return p()(e,[{key:"makeXml",value:function(e,t){t.attr("is_available",e.isAvailable).attr("sewing_length",e.sewingLength).attr("metalring_length",e.metalringLength).attr("stick_length",e.stickLength).attr("stick_surround",e.stickSurround)}}]),e}(),W=function(){function e(){l()(this,e)}return p()(e,[{key:"makeXml",value:function(e,t){t.attr("name",e.name).attr("width",e.width).attr("height",e.height).attr("minDpi",e.mindpi).attr("output_type",e.outputType).attr("print_size",e.printSize).attr("border_type",e.borderType).attr("paper_type",e.paperType).attr("left_margin",e.leftMargin).attr("top_margin",e.topMargin).attr("right_margin",e.rightMargin).attr("bottom_margin",e.bottomMargin).attr("post_proc_type",e.postProcType).attr("center_margin",e.centerMargin).attr("margin_type",e.marginType).attr("is_dynamic_width",e.isDynamicWidth).attr("is_custom_size",e.isCustomSize).attr("custom_width",e.customWidth).attr("custom_height",e.customHeight).attr("extra_data",e.extraData).attr("filter_data",e.filterData).attr("minimum_font_height",e.minimumFontHeight),(new z).makeXml(e.finishType,t.elem("FINISH-TYPE").elem("FINISH-TYPE"))}}]),e}(),K=function(){function e(){l()(this,e)}return p()(e,[{key:"makeXml",value:function(e,t){t.attr("Version",e.version).attr("ProgramVersion",e.programVersion).attr("CopyCommIdx",e.copyCommIdx).elem("COMMODITY").text(e.commodity.toString()).close().elem("OUTPUT").text(e.output.toString()).close().elem("PARAM").text(e.param.toString()).close(),(new W).makeXml(e.output,t.elem("OUTPUT2"))}}]),e}(),X=n(403),Y=n(351),Z=n(226),j=n(6),q=n.n(j),Q=n(3),$=n.n(Q),J=n(7),ee=n.n(J),te=n(294),ne=n(283),re=n(378),ie=function(e){function t(){return l()(this,t),q()(this,$()(t).apply(this,arguments))}return ee()(t,e),p()(t,[{key:"parseItem",value:function(e,t,n){var r=new re.a(Object(ne.a)(),x.a.createWithRightBottom(e.Position["@Left"],e.Position["@Top"],e.Position["@Right"],e.Position["@Bottom"]),-e["@Rotate"],-1===e["@FlipH"],-1===e["@FlipV"],-1===t["@CanUserSelect"],-1===t["@CanUserMove"],-1===t["@CanUserResize"],-1===t["@CanUserDel"]);return r.copyKey=e["@copyKey"]?e["@copyKey"]:"",r.groupId=e["@GroupId"]?e["@GroupId"]:"",r.layerName=e["@LayerName"]?e["@LayerName"]:"",r.priority=e["@Priority"]?e["@Priority"]:0,r.props.setOpacity(null!=e["@Opacity"]?e["@Opacity"]:255),r.props.youtubeId=e["@YoutubeId"],r.props.videoUrl=e["@VideoUrl"],r}},{key:"getTargetNodeNames",value:function(){return["YOUTUBE"]}},{key:"parsePreload",value:function(e,t){}}]),t}(te.a);n.d(t,"a",function(){return ae});var ae=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;l()(this,e),this.pages=[],this.code1=t,this.code2=n,this.code3=r}var t,n,r,a,s,c,h,y,m,E,k,S;return p()(e,[{key:"sheets",get:function(){return this._sheets},set:function(e){this._sheets=e}}]),p()(e,[{key:"parseCopyXML",value:(S=u()(o.a.mark(function t(n){var r,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=X.a.parseCopyXML(n),this.sheets=r,t.next=4,this.parseCopyPages(r);case 4:return i=t.sent,t.next=7,e.parsePageWithItemVC(i);case 7:return this.pages=t.sent,t.abrupt("return",this);case 9:case"end":return t.stop()}},t,this)})),function(e){return S.apply(this,arguments)})},{key:"parseCopyPages",value:(k=u()(o.a.mark(function e(t){var n,r,i,a=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.xml[0].PAGE,r=Array.isArray(n)?n:[n],i=r.map(function(e,t){return a.parsePageWithSingleItemVC(t,e)}),e.abrupt("return",i);case 3:case"end":return e.stop()}},e)})),function(e){return k.apply(this,arguments)})},{key:"parseNewXML",value:(E=u()(o.a.mark(function t(n){var r,i=this;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.sheets=X.a.parseNewXML(n.map(function(e){return e.layout})),this.sheets.version=D.a.getLatestVersion(),r=n.map(function(e,t){return i.parseNewPage(t,e)}),t.next=5,e.parsePageWithItemVC(r);case 5:return this.pages=t.sent,t.abrupt("return",this);case 7:case"end":return t.stop()}},t,this)})),function(e){return E.apply(this,arguments)})},{key:"parseNewPage",value:function(e,t){var n=X.a.parseNewXML([t.layout]),r=this.parsePageWithSingleItemVC(e,n.xml[0]);if(r.page.ratioId=t.ratioId,t.skinId){var i=r.page.background.createNewPhotoBackgroundItem(t.skinId);i.skinRatioId=t.ratioId,r.page.setSkin(i)}return r}},{key:"parseNewThemeXML",value:(m=u()(o.a.mark(function t(n,r){var a,s,c=this;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.sheets=X.a.blank(),t.next=3,Promise.all(n.map(function(e,t){return new Promise(function(){var n=u()(o.a.mark(function n(i,a){var s,u,l,h;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!(e.commIdx>0)){n.next=10;break}return n.t0=X.a,n.next=5,M.a.fetchCopySheetXml(r,e.commIdx);case 5:n.t1=n.sent,s=n.t0.parseCopyXML.call(n.t0,n.t1),i({page:c.parsePageWithSingleItemVC(t,s.xml[0].PAGE),xml:s.xml[0]}),n.next=22;break;case 10:return u=r.getURL(e.layoutUrl.replace("http:","https:")),n.next=13,f.a.getXml(u);case 13:return l=n.sent,h=X.a.parseNewXML([l.data]),n.t2=i,n.next=18,c.parseNewPage(t,{layout:l.data,skinId:e.skinId,ratioId:e.ratioId});case 18:n.t3=n.sent,n.t4=h.xml[0],n.t5={page:n.t3,xml:n.t4},(0,n.t2)(n.t5);case 22:n.next=27;break;case 24:n.prev=24,n.t6=n.catch(0),a(n.t6);case 27:case"end":return n.stop()}},n,null,[[0,24]])}));return function(e,t){return n.apply(this,arguments)}}())}));case 3:return(s=t.sent).forEach(function(e){return c.sheets.xml.push(e.xml)}),t.t0=(a=this.pages).push,t.t1=a,t.t2=i.a,t.next=10,e.parsePageWithItemVC(s.map(function(e){return e.page}));case 10:return t.t3=t.sent,t.t4=(0,t.t2)(t.t3),t.t0.apply.call(t.t0,t.t1,t.t4),t.abrupt("return",this);case 14:case"end":return t.stop()}},t,this)})),function(e,t){return m.apply(this,arguments)})},{key:"parseUnicornDesign",value:(y=u()(o.a.mark(function t(n){var r,i=this;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.sheets=X.a.parseUnicornXML(n),t.next=3,this.preload();case 3:return r=this.sheets.xml.map(function(e,t){return i.parsePageWithSingleItemVC(t,e)}),t.next=6,e.parsePageWithItemVC(r);case 6:return this.pages=t.sent,this.sheets.version=D.a.getLatestVersion(),t.abrupt("return",this);case 9:case"end":return t.stop()}},t,this)})),function(e){return y.apply(this,arguments)})},{key:"parsePageWithSingleItemVC",value:function(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=n.SHEET,o=n.TEMPLATE,s=a?a["@Version"]:"",u=s||this.sheets.version,c=e.parsePageXml(t,n,i),l=c.page,h=c.groups,p=this.parseItemsXml(a,o,r,this.sheets.version,s);return{page:l,groups:h,singles:p,updateSheetVersion:u}}},{key:"parsePage",value:(h=u()(o.a.mark(function t(n,r){var i,a,s,u,c,l,h,p,d=arguments;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=!(d.length>2&&void 0!==d[2])||d[2],a=d.length>3&&void 0!==d[3]?d[3]:"",t.next=4,this.preload([r]);case 4:return s=this.parsePageWithSingleItemVC(n,r,i,a),u=s.page,c=s.groups,l=s.singles,h=s.updateSheetVersion,t.next=7,e.parsePageWithItemVC([{page:u,groups:c,singles:l,updateSheetVersion:h}],a);case 7:return p=t.sent,t.abrupt("return",p[0]);case 9:case"end":return t.stop()}},t,this)})),function(e,t){return h.apply(this,arguments)})},{key:"parseItems",value:(c=u()(o.a.mark(function e(t,n){var r,a,s,u,c,l=arguments;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=!(l.length>2&&void 0!==l[2])||l[2],a=l.length>3&&void 0!==l[3]?l[3]:this.sheets.version,s=t?t["@Version"]:"",u=[],this.beforeParseItems(t,n,a,s).forEach(function(e){u.push.apply(u,i()(e))}),e.next=8,Promise.all(u.map(function(e){return e.execute()}));case 8:return c=this.parseItemsXml(t,n,r,a,s),e.next=11,R.updateItems(c,s||a);case 11:return e.abrupt("return",c);case 12:case"end":return e.stop()}},e,this)})),function(e,t){return c.apply(this,arguments)})},{key:"preload",value:(s=u()(o.a.mark(function e(){var t,n,r,a=this,s=arguments;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:this.sheets.xml,n=new Map,t.forEach(function(e){var t=e.SHEET,r=t?t["@Version"]:"",o=e.TEMPLATE;a.beforeParseItems(t,o,a.sheets.version,r).forEach(function(e,t){var r;n.has(t)?n.get(t)[0].merge(e[0])||(r=n.get(t)).push.apply(r,i()(e)):n.set(t,e)})}),r=[],n.forEach(function(e){r.push.apply(r,i()(e))}),e.next=7,Promise.all(r.map(function(e){return e.execute()}));case 7:case"end":return e.stop()}},e,this)})),function(){return s.apply(this,arguments)})},{key:"beforeParseItems",value:function(e,t,n,r){return[this.getTextParser(r||n),this.getSvgParser(n),this.getBasicSvgParser(n),this.getShapeSvgParser(n),this.getGridParser(n),this.getSvgImageframeParser(n)].reduce(function(n,r){var i=r.parsePreload(e,t);return i&&(n.has(i.getProcessKey())?n.get(i.getProcessKey())[0].merge(i):n.set(i.getProcessKey(),[i])),n},new Map)}},{key:"parseItemsXml",value:function(e,t,n,r,a){var o=[this.getStickerParser(r),this.getPhotoParser(r),this.getTextParser(a||r),this.getSvgParser(r),this.getBasicSvgParser(r),this.getShapeSvgParser(r),this.getGridParser(r),this.getSvgImageframeParser(r),new ie].reduce(function(n,r){var a=r.parse(e,t);return a&&n.push.apply(n,i()(a)),n},[]);return o=o.filter(function(e){return!n||e.isValid()}),d.a.stableSort(o,function(e,t){return e.priority-t.priority}),o}},{key:"makeXml",value:function(){var e=new H.a("SMILECAT-TBPE-SHEETS"),t=e.root(),n=new K,r=new V.a;return n.makeXml(this.sheets,t),this.pages.forEach(function(e){r.makeXml(e,t.elem("PAGE").elem("SHEET"))}),this.saveData=e.xmldoc,(new XMLSerializer).serializeToString(e.xmldoc)}},{key:"download",value:function(e,t,n){var r=new Blob([e],{type:n});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(r,t);else{var i=document.createElement("a"),a=URL.createObjectURL(r);i.href=a,i.download=t,document.body.appendChild(i),i.click(),setTimeout(function(){document.body.removeChild(i),window.URL.revokeObjectURL(a)},0)}}},{key:"addPages",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.pages.length,n=this.pages.splice(t);this.pages=this.pages.concat(e).concat(n),this.pages.forEach(function(e,t){e.pageIdx=t})}},{key:"replacePage",value:function(e,t){this.pages[t]=e,e.pageIdx=t}},{key:"changePages",value:function(e){e&&(this.pages=e)}},{key:"changeSheetSize",value:function(e,t){this.pages.forEach(function(n){return n.changeSheetSize(e,t)})}},{key:"loadPageFromXml",value:(a=u()(o.a.mark(function e(t){var n,r,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:if(!(n<t.length)){e.next=12;break}return r=X.a.parseUnicornXML([t[n]]).xml[0],e.next=5,this.parsePage(n,r);case 5:return i=e.sent,e.next=8,Y.a.loadPageResource(i);case 8:this.replacePage(i,n);case 9:n++,e.next=1;break;case 12:Z.a.setMetaData(this);case 13:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"overWriteDesignIfValid",value:(r=u()(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.isValid()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.loadPageFromXml(t.getXmlDocuments());case 4:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"hasItems",value:function(){return this.pages.some(function(e){return e.hasItemsExceptBackground()})}},{key:"getPageCount",value:function(){return this.pages.length}},{key:"getPageByIndex",value:function(e){return this.pages[e]}},{key:"hasPhotoItem",value:function(){return Boolean(this.pages.find(function(e){return e.hasPhotoItem()}))}},{key:"hasSkinCompatibilityFailurePage",value:function(){return Boolean(this.pages.find(function(e){return e.isSkinCompatibilityFailure()}))}}],[{key:"loadImageFrameDefaultImage",value:(n=u()(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return e.next=3,v.b.loadDefaultImage();case 3:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})},{key:"parsePageWithItemVC",value:(t=u()(o.a.mark(function e(t){var n,r,a,s,u,c,l,h=arguments;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=h.length>1&&void 0!==h[1]?h[1]:"",r=!0,a=!1,s=void 0,e.prev=4,u=o.a.mark(function e(){var t,r,a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.value,e.next=3,R.updateItems(r.singles,r.updateSheetVersion);case 3:r.singles.forEach(function(e){e.groupId&&""!==e.groupId&&(e.groupId="".concat(n).concat(e.groupId)),!O.a.getItemOption().lockExceptTextItem||e instanceof L.a||F.a.isItemSkinable(e,r.page.sheetSize)||e.lock()}),a=g.b.parseSingleItemsByGroups(r.singles,r.groups),(t=r.page.items).push.apply(t,i()(a)),B.correctFromPage(r.page),g.b.checkValidation(r.page);case 8:case"end":return e.stop()}},e)}),c=t[Symbol.iterator]();case 7:if(r=(l=c.next()).done){e.next=12;break}return e.delegateYield(u(),"t0",9);case 9:r=!0,e.next=7;break;case 12:e.next=18;break;case 14:e.prev=14,e.t1=e.catch(4),a=!0,s=e.t1;case 18:e.prev=18,e.prev=19,r||null==c.return||c.return();case 21:if(e.prev=21,!a){e.next=24;break}throw s;case 24:return e.finish(21);case 25:return e.finish(18);case 26:return e.abrupt("return",t.map(function(e){return e.page}));case 27:case"end":return e.stop()}},e,null,[[4,14,18,26],[19,,21,25]])})),function(e){return t.apply(this,arguments)})},{key:"parsePageXml",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=new _.a(t),a=n.SHEET,o=n.TEMPLATE;a&&a.SHEETSIZE?i.sheetSize.setSize(a.SHEETSIZE["@cx"],a.SHEETSIZE["@cy"]):i.sheetSize.setSize(o["@Width"],o["@Height"]);var s=[];if(a){i.ratioId=a["@RatioId"];var u=a["@SkinId"];if(u){var c=i.background.createNewPhotoBackgroundItem(u);c.skinRatioId=i.ratioId,i.setSkin(c)}i.templateName=a["@TemplateName"],i.layoutId=a["@LayoutId"],i.title=a["@PageTitle"],i.memo=a["@PageMemo"];var l=a.BACKGROUND;if(l){if(l.PureSkinSize&&i.background.pureSkinSize.setSize(a.BACKGROUND.PureSkinSize["@cx"],a.BACKGROUND.PureSkinSize["@cy"]),l.CropRect){var h=a.BACKGROUND.CropRect["@Left"],p=a.BACKGROUND.CropRect["@Top"],d=a.BACKGROUND.CropRect["@Right"],f=a.BACKGROUND.CropRect["@Bottom"];i.background.setCropLTRB(h||p||d||f?x.a.createWithRightBottom(h,p,d,f):void 0)}i.background.layerName=l["@LayerName"]||"",i.background.color=l["@Color"]||"#ffffff"}e.parseGuidelines(i,a.GUIDELINES),s=new G.a(r).parse(a.GROUP)}return{page:i,groups:s}}},{key:"parseGuidelines",value:function(t,n){if(n){var r=e.parseGuidelineGroup(n.HORIZONTAL,P.d.HORIZONTAL),i=e.parseGuidelineGroup(n.VERTICAL,P.d.VERTICAL);t.guidelineFactoryInfos={Hor:r,Ver:i}}}},{key:"parseGuidelineGroup",value:function(e,t){var n=[],r=e["@NowPosition"],i=e["@Plus"],a=e.GUIDELINE;if(Array.isArray(a)){var o=!0,s=!1,u=void 0;try{for(var c,l=a[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var h=c.value;n.push(this.getGuideline(t,h))}}catch(e){s=!0,u=e}finally{try{o||null==l.return||l.return()}finally{if(s)throw u}}}else a&&n.push(this.getGuideline(t,a));return{guidelines:n,nowPosition:r,plus:i}}},{key:"getGuideline",value:function(e,t){var n=new U.a(e,t["@InitPosition"]);return n.setLastPosition(t["@LastPosition"]),n}}]),e}()},,,function(e,t,n){"use strict";var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(6),u=n.n(s),c=n(3),l=n.n(c),h=n(7),p=n.n(h),d=n(294),f=n(231),g=n(9),v=n.n(g),y=function(e){function t(){var e,n;i()(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=u()(this,(e=l()(t)).call.apply(e,[this].concat(a)))).msg="generic photo 테스트용",n}return p()(t,e),o()(t,[{key:"clone",value:function(){var e=new t(this.tbpeId,this.props.getBoundingBox(),this.props.getRotate(),this.props.getItemRotate(),f.c.INDEPENDENT,this.props.isFlipH(),this.props.isFlipV(),this.props.isCanUserSelect(),this.props.isCanUserMove(),this.props.isCanUserResize(),this.props.isCanUserDel());return v()(l()(t.prototype),"clone",this).call(this).copy(e),e.msg=this.msg,this.setCloneItemDefaultAttr(e),e}}]),t}(f.d),m=n(228),E=n(283),k=function(){function e(){i()(this,e)}return o()(e,null,[{key:"getConvertedOrgTypeFromDeprecated",value:function(e){return e===f.b.BackgroundPhoto?f.b.Photo:e===f.b.BackgroundPixabay?f.b.Pixabay:e}}]),e}(),S=n(235),I=n(237);n.d(t,"a",function(){return T}),n.d(t,"b",function(){return b});var T=function(e){function t(){return i()(this,t),u()(this,l()(t).apply(this,arguments))}return p()(t,e),o()(t,[{key:"createNewItem",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],c=!(arguments.length>8&&void 0!==arguments[8])||arguments[8],l=!(arguments.length>9&&void 0!==arguments[9])||arguments[9],h=!(arguments.length>10&&void 0!==arguments[10])||arguments[10];return t.createGenericItem(f.d,e,n,r,i,a,o,s,u,c,l,h)}},{key:"parsePreload",value:function(e,t){}},{key:"getTargetNodeNames",value:function(){return["PHOTO"]}},{key:"parseItem",value:function(e,n,r){var i;if(e){var a=e.FramePosition;i=this.createNewItem(Object(E.a)(),I.a.createWithRightBottom(a["@Left"],a["@Top"],a["@Right"],a["@Bottom"]),-e["@FrameRotate"],-e["@Rotate"],e["@BelongsTo"]||f.c.INDEPENDENT,-1===e["@FlipH"],-1===e["@FlipV"],-1===n["@CanUserSelect"],-1===n["@CanUserMove"],-1===n["@CanUserResize"],-1===n["@CanUserDel"]);var o=e.Position;i.itemPosition.left=o["@Left"],i.itemPosition.top=o["@Top"],i.itemPosition.right=o["@Right"],i.itemPosition.bottom=o["@Bottom"],i.priority=e["@Priority"]?e["@Priority"]:0,i.copyKey=e["@copyKey"]?e["@copyKey"]:"",i.groupId=e["@GroupId"]?e["@GroupId"]:"",i.layerName=e["@LayerName"]?e["@LayerName"]:"",i.props.setPhotoKey(e["@PhotoKey"]||e["@PhotoFileName"]&&"smileCanvasPhoto"||""),i.props.setOpacity(t.getOpacity(e)),i.props.setColorEffect(e["@ColorEffect"]),i.props.setBrightness(e["@Bright"]||0),i.props.setContrast(e["@Contrast"]||0),i.props.setBlur(e["@Blur"]||0),i.props.setVignette(e["@Vignette"]||0),i.props.setTint(e["@Hue"]||0),i.props.setColorTone(e["@ColorTone"]||0),i.props.setTemperature(e["@Temperature"]||0),i.props.setSaturation(e["@Saturation"]||0),i.props.setLightness(e["@Lightness"]||0),i.props.setFramePhotoType(e["@FpType"]),i.props.setSolidLineColor(e["@FpColor"],!0),i.props.setSolidLineThickness(e["@FpThickness"],!0),i.props.setBitmapMaskBitmapId(e["@FpBMid"],!0),e.StickerFrame&&i.props.setStickerFrameStickerId(e.StickerFrame["@StickerId"]),i.props.setGradationMaskDirection(e["@FpGRdirection"]),i.props.setGradationMaskDepth(e["@FpGRdepth"]),i.isGradationMasked=-1===e["@isGradationMask"],i.props.setActiveShadow(e["@IsShadow"]||!1),i.props.setShadowColor(e["@FpShadowColor"]||"#000000"),i.props.setShadowAngle(e["@FpShadowAngle"]||0),i.props.setShadowAlpha(null!=e["@FpShadowAlpha"]?e["@FpShadowAlpha"]:255),i.props.setShadowDistance(e["@FpShadowDistance"]||0),i.props.setShadowBlur(e["@FpShadowBlur"]||0),e.Hyperlink&&(i.props.setActiveHyperlink(e.Hyperlink["@Active"]||!1),i.props.setHyperlinkType(e.Hyperlink["@Type"]||S.c.URL),i.props.setHyperlinkValue(e.Hyperlink["@Value"]||"")),i.addedBy=e["@AddedBy"],e["@PhotoFileName"]?i.orgType=f.b.SmileCanvasPhoto:i.orgType=k.getConvertedOrgTypeFromDeprecated(e["@OriginType"])||f.b.Photo,i.skinRatioId=e["@SkinRatioId"]||"",i.photoCrop.isCropped=e["@IsCropped"]||!1,i.backgroundState=e["@BackgroundState"]||f.a.NONE}else{var s=n.Position;(i=this.createNewItem(Object(E.a)(),I.a.createWithRightBottom(s["@Left"],s["@Top"],s["@Right"],s["@Bottom"]),-n["@FrameRotate"],-n["@Rotate"],n["@BelongsTo"]||f.c.INDEPENDENT,!1,!1,-1===n["@CanUserSelect"],-1===n["@CanUserMove"],-1===n["@CanUserResize"],-1===n["@CanUserDel"])).itemPosition.left=s["@Left"],i.itemPosition.top=s["@Top"],i.itemPosition.right=s["@Right"],i.itemPosition.bottom=s["@Bottom"],i.props.setPhotoKey(n["@PhotoKey"]||n["@PhotoFileName"]&&"smileCanvasPhoto"||""),i.props.setOpacity(t.getOpacity(n)),i.props.setColorEffect(n["@ColorEffect"]),i.props.setBrightness(n["@Bright"]||0),i.props.setContrast(n["@Contrast"]||0),i.props.setTint(n["@Hue"]||0),i.props.setColorTone(n["@ColorTone"]||0),i.props.setTemperature(n["@Temperature"]||0),i.props.setBlur(n["@Blur"]||0),i.props.setVignette(n["@Vignette"]||0),i.props.setSaturation(n["@Saturation"]||0),i.props.setLightness(n["@Lightness"]||0),i.props.setFramePhotoType(n["@FpType"]),i.props.setSolidLineColor(n["@FpColor"],!0),i.props.setSolidLineThickness(n["@FpThickness"],!0),i.props.setBitmapMaskBitmapId(n["@FpBMid"],!0),n.StickerFrame&&i.props.setStickerFrameStickerId(n.StickerFrame["@StickerId"]),i.props.setGradationMaskDepth(n["@FpGRdepth"]),i.props.setGradationMaskDirection(n["@FpGRdirection"]),i.isGradationMasked=-1===n["@IsGradationMask"],i.props.setActiveShadow(n["@IsShadow"]||!1),i.props.setShadowColor(n["@FpShadowColor"]||"#000000"),i.props.setShadowAngle(n["@FpShadowAngle"]||0),i.props.setShadowAlpha(null!=n["@FpShadowAlpha"]?n["@FpShadowAlpha"]:255),i.props.setShadowDistance(n["@FpShadowDistance"]||0),i.props.setShadowBlur(n["@FpShadowBlur"]||0),n.Hyperlink&&(i.props.setActiveHyperlink(n.Hyperlink["@Active"]||!1),i.props.setHyperlinkType(n.Hyperlink["@Type"]||S.c.URL),i.props.setHyperlinkValue(n.Hyperlink["@Value"]||"")),i.addedBy=m.f.LAYOUT,e["@PhotoFileName"]?i.orgType=f.b.SmileCanvasPhoto:i.orgType=k.getConvertedOrgTypeFromDeprecated(n["@OriginType"])||f.b.Photo,i.skinRatioId=n["@SkinRatioId"]||"",i.photoCrop.isCropped=n["@IsCropped"]||!1,i.backgroundState=n["@BackgroundState"]||f.a.NONE}return i}}],[{key:"createGenericItem",value:function(e,t,n,r,i,a,o,s,u,c,l,h){return new e(t,n,r,i,a,o,s,u,c,l,h)}},{key:"getOpacity",value:function(e){if(0===e["@Opacity"]||0===e["@Alpha"])return 0;var t=e["@Opacity"]||e["@Alpha"];return null==t?255:t}}]),t}(d.a),b=function(e){function t(){return i()(this,t),u()(this,l()(t).apply(this,arguments))}return p()(t,e),o()(t,[{key:"createNewItem",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],u=!(arguments.length>8&&void 0!==arguments[8])||arguments[8],c=!(arguments.length>9&&void 0!==arguments[9])||arguments[9],l=!(arguments.length>10&&void 0!==arguments[10])||arguments[10];return T.createGenericItem(y,e,t,n,r,i,a,o,s,u,c,l)}}]),t}(T)},,function(e,t,n){"use strict";var r=n(2),i=n.n(r),a=n(4),o=n.n(a),s=n(0),u=n.n(s),c=n(1),l=n.n(c),h=n(6),p=n.n(h),d=n(3),f=n.n(d),g=n(9),v=n.n(g),y=n(7),m=n.n(y),E=n(51),k=function(){function e(){u()(this,e)}return l()(e,[{key:"isValid",value:function(){return this.idx>0}},{key:"hasDesign",value:function(){return this.designList&&this.designList.length>0}},{key:"getDesign",value:function(e){return this.designList&&this.designList[e]}},{key:"insertDesign",value:function(e,t){this.designList=this.designList||[],t<0||t>=this.designList.length?this.designList.push(e):this.designList.splice(t,0,e)}},{key:"deleteDesign",value:function(e){this.designList.splice(e,1)}}]),e}(),S=n(13);n.d(t,"a",function(){return I});var I=function(e){function t(){return u()(this,t),p()(this,f()(t).apply(this,arguments))}var n,r,a,s,c,h,d;return m()(t,e),l()(t,null,[{key:"createDesignProject",value:(d=o()(i.a.mark(function e(n,r){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.teamIdx||(n.teamIdx=E.a.getSelectedTeamIndex(r)),n.teamScope||(n.teamScope=E.a.getSelectedTeamScope()),e.next=4,v()(f()(t),"requestV3",this).call(this,k.prototype,S.b.POST,"/api/project",JSON.stringify(n));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)})),function(e,t){return d.apply(this,arguments)})},{key:"getDesignProject",value:(h=o()(i.a.mark(function e(n){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v()(f()(t),"requestV3",this).call(this,k.prototype,S.b.GET,"/api/project/".concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(e){return h.apply(this,arguments)})},{key:"updateDesignProject",value:(c=o()(i.a.mark(function e(n,r){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v()(f()(t),"requestV3",this).call(this,k.prototype,S.b.PUT,"/api/project/".concat(n),JSON.stringify(r));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(e,t){return c.apply(this,arguments)})},{key:"createDesign",value:(s=o()(i.a.mark(function e(n,r,a,o){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r.teamIdx||(r.teamIdx=E.a.getSelectedTeamIndex(o)),r.teamScope){e.next=5;break}return e.next=4,E.a.getSelectedTeamScope();case 4:r.teamScope=e.sent;case 5:return r.extraData&&(r.extraData=JSON.stringify(r.extraData)),e.next=8,v()(f()(t),"requestV3",this).call(this,void 0,S.b.POST,"/api/project/".concat(n,"/design"),JSON.stringify({designSaveParam:r,pageNo:a}));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}},e,this)})),function(e,t,n,r){return s.apply(this,arguments)})},{key:"getDesign",value:(a=o()(i.a.mark(function e(n,r){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v()(f()(t),"requestV3",this).call(this,void 0,S.b.GET,"/api/project/".concat(n,"/design/").concat(r));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(e,t){return a.apply(this,arguments)})},{key:"deleteDesign",value:(r=o()(i.a.mark(function e(n,r){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v()(f()(t),"requestV3",this).call(this,void 0,S.b.DELETE,"/api/project/".concat(n,"/design/").concat(r));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(e,t){return r.apply(this,arguments)})},{key:"copyDesign",value:(n=o()(i.a.mark(function e(n,r,a){var o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.getDefaultSelectedTeamData(a);case 2:return o=e.sent,e.next=5,v()(f()(t),"requestV3",this).call(this,void 0,S.b.POST,"/api/project/".concat(n,"/design/").concat(r,"/copy"),o);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)})),function(e,t,r){return n.apply(this,arguments)})}]),t}(S.a)},function(e,t,n){"use strict";var r=n(2),i=n.n(r),a=n(4),o=n.n(a),s=n(0),u=n.n(s),c=n(1),l=n.n(c),h=n(6),p=n.n(h),d=n(3),f=n.n(d),g=n(7),v=n.n(g),y=n(29),m=n(166),E=function(){function e(){u()(this,e)}var t;return l()(e,null,[{key:"fetchEmbedAPI",value:(t=o()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,t){try{window.onYouTubeIframeAPIReady=function(){void 0!==window.YT?e():t(new Error("youtube api script load fail."))};var n=document.createElement("script");n.src="https://www.youtube.com/iframe_api",document.head.appendChild(n)}catch(e){t(e)}}));case 1:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)})}]),e}(),k=n(412),S=function(e){function t(){var e,n;u()(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=p()(this,(e=f()(t)).call.apply(e,[this].concat(i)))).isReadyEmbedApi=!1,n}var n;return v()(t,e),l()(t,[{key:"fetchThumbnailResource",value:(n=o()(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",m.b.setUrlImage(t,"/external-resource?url=".concat(encodeURIComponent(k.a.getThumbnailUrl(t))),m.a.YOUTUBE_THUMBNAIL,void 0));case 1:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})},{key:"fetchEmbedAPI",value:function(e){var t=this;this.isReadyEmbedApi?e.onFetchAPI():this.listeners?this.listeners.add(e):(this.listeners=(new Set).add(e),o()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.fetchEmbedAPI();case 3:t.isReadyEmbedApi=!0,t.listeners.forEach(function(e){return e.onFetchAPI()}),t.listeners=null,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}},e,null,[[0,8]])}))())}}]),t}(y.a);t.a=new S},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r,i=n(0),a=n.n(i);!function(e){e.ICON="ICON",e.TEXT="TEXT"}(r||(r={})),t.b=function e(t){a()(this,e);var n=t.isMiricanvasChannel(),i=t.isBizhowsChannel();this.customInput=n,this.zoomLimit=i,this.zoomScaleByStep=n?0:.1,this.minPx=n?0:100,this.maxPx=n?0:1e4,this.minScale=n?.07:.01,this.maxScale=5,this.alwaysShowFitScreen=i,this.fitScreenViewType=n?r.ICON:r.TEXT}},function(e,t,n){"use strict";var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(324),u=function(){function e(){i()(this,e)}return o()(e,null,[{key:"appendClonedPagesUntilCountFromFirstPage",value:function(e,t,n){for(var r=0,i=t.length,a=0;a<n;a++)r!==n&&e[r]||(r=0),t.push(e[r++].clone(i++));return t}},{key:"appendNewEmptyPagesUntilCountBaseOnOldPage",value:function(e,t,n){for(var r=t.length,i=0;i<n;i++){var a=new s.a(r++);a.ratioId=e.ratioId,a.sheetSize=e.sheetSize.clone(),t.push(a)}return t}}]),e}();t.a=u},function(e,t,n){"use strict";n.d(t,"a",function(){return y});var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(231),u=n(342),c=n(301),l=n(166),h=n(413),p=n(337),d=n(11),f=n(110),g=n(234),v=n(237),y=function(){function e(t){i()(this,e),this.pureSkinSize=new f.a,this._cropRect=new g.a(0,0,0,0),this.defaultBackgroundItem=null,this.bgColor=e.DEFAULT_COLOR,this.page=t,this.defaultBackgroundItem=this.createNewPhotoBackgroundItem("ts_1010")}return o()(e,[{key:"createNewPhotoBackgroundItem",value:function(e,t){var n,r=new v.a(0,0,Math.ceil(this.page.sheetSize.width),Math.ceil(this.page.sheetSize.height));if(t){(n=t.clone()).initRotateLTRBCoordinate(),n.initCropAndOriginSizeRollback();var i=l.b.getData(n.props.getPhotoKey()),a=h.a.getCenterFixRect(r.right,r.bottom,i.width,i.height);n.setLTRBCoordinate(a),n.backgroundState=s.a.PHOTO_TO_BACKGROUND}else{var o="".concat((new Date).getTime(),"-").concat(d.b.random());(n=new s.d(o,r)).props.setPhotoKey(e),n.orgType=s.b.Skin,n.backgroundState=s.a.ORIGIN}return n.skinRatioId=this.page.ratioId,n}},{key:"createNewSvgBackgroundItem",value:function(e,t){var n=this.page.sheetSize,r=n.width,i=n.height,a=r>i?i:r,o=new c.a("".concat((new Date).getTime(),"-").concat(Math.random()),e,v.a.createWithRightBottom(-1,-1,Math.ceil(a)+1,Math.ceil(a)+1));o.isBackground=!0;var s=new g.a(-1,-1,n.width+1,n.height+1);if(o.setLTRBCoordinate(s,!1,null),t&&1===o.layers.length){var u=o.getOriginColors()[0];o.props.setCurrentOriginColor(u),o.props.setColor(t)}return o}},{key:"existBackgroundItem",value:function(){return this.page.items.length>0&&null!==this.getBackgroundItem()}},{key:"getBackgroundItem",value:function(){var e=null,t=!0,n=!1,r=void 0;try{for(var i,a=this.page.items[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(u.a.isItemSkinable(o,this.page.sheetSize)){e=o;break}}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return e}},{key:"removeBackground",value:function(){this.page.removeItem(this.backgroundItem)}},{key:"changeToPhotoSkin",value:function(e){this.existBackgroundItem()&&this.removeBackground(),this.page.addItem(e,0)}},{key:"changeToSvgSkin",value:function(e){this.existBackgroundItem()&&this.removeBackground(),this.page.addItem(e,0)}},{key:"getSkinId",value:function(){return this.existBackgroundItem()?this.backgroundItem.props.getPhotoKey():this.defaultBackgroundItem.props.getPhotoKey()}},{key:"setSkin",value:function(e){e?e instanceof s.d?this.changeToPhotoSkin(e):this.changeToSvgSkin(e):this.removeBackground()}},{key:"isSkinItem",value:function(e){return e===this.getBackgroundItem()}},{key:"isWhiteColor",value:function(){return this.color.toLowerCase()===e.DEFAULT_COLOR||"#fff"===this.color.toLowerCase()}},{key:"changeSize",value:function(t){var n=this.backgroundItem;n&&(n instanceof s.d?e.changeSizePhoto(n,t,this.page.sheetSize):n instanceof p.a&&e.changeSizeSvg(n,t))}},{key:"setCropLTRB",value:function(e){void 0===e?(this.changeSize(this.page.sheetSize),this.backgroundItem instanceof s.d&&this._cropRect.setLTRB(this.backgroundItem.getLTRBCoordinate())):this._cropRect.setLTRB(g.a.createFromRect(e))}},{key:"getItemKey",value:function(){return"skin-".concat(this.defaultBackgroundItem.tbpeId)}},{key:"cropRect",get:function(){return this._cropRect}},{key:"backgroundItem",get:function(){return this.getBackgroundItem()}},{key:"color",set:function(e){e&&(this.bgColor=e)},get:function(){return this.bgColor}}],[{key:"changeSizePhoto",value:function(e,t,n){var r=e,i=new g.a(0,0,t.width,t.height),a=h.a.getResizeBackgroundRectByNewPageSize(n,t,r.itemPosition.clone());e.setLTRBCoordinate(i),e.itemPosition=a,e.photoCrop.isCropped=!0}},{key:"changeSizeSvg",value:function(e,t){var n=new g.a(0,0,t.width,t.height);e.setLTRBCoordinate(n),e.initScaleAndLayers(),e.updatePatternByRatio(e.props.patternCountRatio)}}]),e}();y.DEFAULT_COLOR="#ffffff"},function(e,t,n){"use strict";n.d(t,"a",function(){return y});var r=n(2),i=n.n(r),a=n(4),o=n.n(a),s=n(0),u=n.n(s),c=n(1),l=n.n(c),h=n(325),p=n(37),d=n(11),f=n(19),g=n(44),v=n(20),y=function(){function e(t){u()(this,e),this.useProxy=t}var t,n,r;return l()(e,[{key:"getFontPath",value:function(e){var t=d.a.encodeBase16(e);return"https://img1.smilecat.com/web1/__TBPE.STIKERS2/"+t.substring(0,2)+"/"+t+".sce"}},{key:"getURL",value:function(e){return e}},{key:"getStickerData",value:(r=o()(i.a.mark(function e(t){var n,r,a=arguments;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(a.length>1&&void 0!==a[1])||a[1],e.next=3,this.getStickerDataList([t],n);case 3:return r=e.sent,e.abrupt("return",p.a.isEmpty(r)?null:r[0]);case 5:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"increaseStickerSearchKeywordCount",value:function(e,t){var n="/servlet/api/smilecat/search/sticker/increase-word-weight?stickerId=${stickerId}&words=${words}".replace("${stickerId}",e.toString()).replace("${words}",t.join(","));g.a.post(v.a,f.b.getURL(n),{traditional:!0,contentType:"application/json"}).catch(function(e){console.warn("increase sticker use count error",e)})}},{key:"getStickerDataList",value:(n=o()(i.a.mark(function t(){var n,r,a,o,s=arguments;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=s.length>0&&void 0!==s[0]?s[0]:[],r=!(s.length>1&&void 0!==s[1])||s[1],0!==n.length){t.next=4;break}return t.abrupt("return",[]);case 4:if(a="/tbpe30/sticker-info.jsp",n.forEach(function(e,t){return[a+="".concat(0===t?"?":"&","sticker_id=").concat(encodeURI(e))]}),!r||!n.every(function(t){return null!=e.STICKER_CACHE.get(t)})){t.next=8;break}return t.abrupt("return",n.map(function(t){return e.STICKER_CACHE.get(t)}));case 8:return t.next=10,g.a.get(h.g,f.b.getURL(a));case 10:return(o=t.sent.data).forEach(function(t){return e.STICKER_CACHE.set(t.id,t)}),t.abrupt("return",o);case 13:case"end":return t.stop()}},t)})),function(){return n.apply(this,arguments)})},{key:"getSkinOriginSize",value:(t=o()(i.a.mark(function e(t,n){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get(h.c,f.a.getURL("/servlet/api/miridih/design/skin/info?skinId=".concat(t,"&ratioId=").concat(n)));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}},e)})),function(e,n){return t.apply(this,arguments)})}]),e}();y.STICKER_CACHE=new Map},function(e,t,n){"use strict";n.d(t,"a",function(){return b});var r=n(2),i=n.n(r),a=n(4),o=n.n(a),s=n(0),u=n.n(s),c=n(1),l=n.n(c),h=n(6),p=n.n(h),d=n(3),f=n.n(d),g=n(7),v=n.n(g),y=n(292),m=n(304),E=n(240),k=n(411),S=n(110),I=n(246),T=n(84),b=function(e){function t(e,n,r,i,a){var o;return u()(this,t),(o=p()(this,f()(t).call(this,e,r,i,a))).svgElements=n,o}var n,r,a;return v()(t,e),l()(t,[{key:"beforeRender",value:(a=o()(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.updateColor();case 1:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"updateColor",value:function(){this.svgElements.updateColor()}},{key:"rasterizeSingleItem",value:(r=o()(i.a.mark(function e(t,n,r){var a,o,s,u;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isResourceLoadFail){e.next=3;break}return this.rasterizeResourceLoadFail(t,n),e.abrupt("return");case 3:return a=t.canvas.width,o=t.canvas.height,r||(r=this.getSvgString(n)),t.save(),(this.props.isFlipH()||this.props.isFlipV())&&(s=this.props.isFlipH()?-1:1,u=this.props.isFlipV()?-1:1,t.translate(a/2,o/2),t.scale(s,u),t.translate(-a/2,-o/2)),e.next=10,m.a.drawSVG(t,r,0,0);case 10:t.restore();case 11:case"end":return e.stop()}},e,this)})),function(e,t,n){return r.apply(this,arguments)})},{key:"rasterizeToPage",value:(n=o()(i.a.mark(function e(t,n){var r,a,o,s,u,c,l,h,p,d,f,g,v,m,k,b,w,A,C,x,R,L,_,P,O,D;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((r=this.getCropPosData(t.canvas.width,t.canvas.height,n,this.props.isActiveShadow())).width>0&&r.height>0)){e.next=35;break}return a=this.props.getLeft()*n,o=this.props.getTop()*n,s=this.props.getWidth()*n,u=this.props.getHeight()*n,c=this.props.isActiveShadow()?y.a.MAX_IMAGE_SIZE/y.a.VALUE_TO_MULTIPLY:y.a.MAX_IMAGE_SIZE,l=Math.min(Math.min(s,c)/s,Math.min(u,c)/u),s<u&&l*s<1&&(l=1/s),u<s&&l*u<1&&(l=1/u),h=Math.max(Math.ceil(l*s),1),p=Math.max(Math.ceil(l*u),1),d=h/this.props.getWidth(),f=this.getSvgString(d),g=E.a.createCanvas(new S.a(h,p)),v=g.getContext("2d"),this.isNeedFlipWhenRenderThumbnail()&&this.flipCanvas(v),e.next=19,this.beforeRender(n);case 19:return e.next=21,this.rasterizeSingleItem(v,d,f);case 21:t.save(),m=Math.ceil(t.canvas.width*l),k=Math.ceil(t.canvas.height*l),b=E.a.createCanvas(new S.a(m,k)),(w=b.getContext("2d")).save(),w.translate(Math.round(a*l),Math.round(o*l)),this.props.getRotate()&&(A=h/2,C=p/2,w.translate(A,C),w.rotate(T.a.round(this.props.getRotate()*Math.PI/180,4)),w.translate(-A,-C)),this.props.isActiveShadow()&&(x=this.getShadowCanvasPosData(n*l,this.props.isActiveShadow()),R=E.a.createCanvas(new S.a(x.width,x.height)),L=R.getContext("2d"),this.renderShadow(L,n*l,g,h,p),_=this.getCanvasPosData(n*l),P=_.width<_.height?_.width:_.height,O=this.props.getShadowDistance()*P/130,D=I.a.getPointByDistanceAngle(O,this.props.getShadowAngle()+90-this.props.getRotate()),w.drawImage(R,-_.width*(y.a.VALUE_TO_MULTIPLY-1)/2+D.x,-_.height*(y.a.VALUE_TO_MULTIPLY-1)/2+D.y,_.width*y.a.VALUE_TO_MULTIPLY,_.height*y.a.VALUE_TO_MULTIPLY)),w.drawImage(g,0,0),w.restore(),this.isNeedOpacityWhenRenderThumbnail()&&(t.globalAlpha=this.props.getOpacity()/255),t.drawImage(b,0,0,t.canvas.width,t.canvas.height),t.restore();case 35:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})},{key:"renderShadow",value:function(e,t,n,r,i){if(this.props.isActiveShadow()){var a=n.width,o=n.height;this.renderShadowCtx(e,n,a,o,r,i)}}},{key:"getSvgString",value:function(e){return this.svgElements.getSvgString(e)}},{key:"isNeedFlipWhenRenderThumbnail",value:function(){return!1}},{key:"flipCanvas",value:function(e){var t=this.props.isFlipH()?-1:1,n=this.props.isFlipV()?-1:1,r=e.canvas.width/2,i=e.canvas.height/2;e.translate(r,i),e.scale(t,n),e.translate(-r,-i)}},{key:"isNeedOpacityWhenRenderThumbnail",value:function(){return!1}}]),t}(k.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(1),i=n.n(r),a=n(0),o=n.n(a),s=n(257),u=n(263),c=function e(t,n,r){o()(this,e),this.color=t,this.offset=n,this.idx=r},l=function(){function e(){o()(this,e),this.active=!1,this.presetKey="",this.angle=s.e.NUMBER.valueOf(),this.color1=s.e.RGB.valueOf(),this.color2=s.e.RGB.valueOf(),this.color3=s.e.RGB.valueOf(),this.color4=s.e.RGB.valueOf(),this.isNewFormat=!0}return i()(e,[{key:"getIsNewFormat",value:function(){return this.isNewFormat}},{key:"setIsNewFormat",value:function(e){this.isNewFormat=e}},{key:"getAngle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e||this.active?this.angle:s.e.NUMBER}},{key:"setAngle",value:function(e){var t=this.angle!==Number(e);return this.angle=Number(e),t}},{key:"getColor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.isNewFormat&&e%2==0&&e--,t||this.active?this["color"+e]:s.e.RGB}},{key:"getColors",value:function(){var e=this,t=[];return this.getIndexes().forEach(function(n){return t.push(e["color"+n])}),t}},{key:"getColorItems",value:function(){var e=this,t=this.getIndexes(),n=[];return t.forEach(function(r,i){n.push(new c(e["color"+r],i/(t.length-1),r))}),n}},{key:"getIndexes",value:function(){return this.isNewFormat?[1,3]:[1,2,3,4]}},{key:"setColor",value:function(e,t){var n=u.a.parseColorString(t);this.isNewFormat&&e%2==0&&e--;var r=this["color"+e]!==n.rgb||this["alpha"+e]!==n.alpha;return this["color"+e]=n.rgb,this["alpha"+e]=n.alpha,r}},{key:"getGradColorsStyle",value:function(){return this.isNewFormat?"".concat(this.getColor(1),",").concat(this.getColor(4)):"".concat(this.getColor(1),", ").concat(this.getColor(2),", ").concat(this.getColor(3),", ").concat(this.getColor(4))}},{key:"getOffset",value:function(e){return[0,33,66,100][e-1]}},{key:"isSameGradientColor",value:function(e,t,n){return!!n||this.getColor(e)===t}},{key:"clone",value:function(){var t=new e;return t.active=this.active,t.angle=this.angle,t.color1=this.color1,t.color2=this.color2,t.color3=this.color3,t.color4=this.color4,t}}]),e}();l.ALPHA_MAX=255,l.COLOR_NUMBERS=[1,2,3,4]},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=function(){function e(){i()(this,e)}return o()(e,null,[{key:"getNodeAndPos",value:function(e,t,n){for(var r=t,i=null,a=0;a<e.childNodes.length;a++){var o=e.childNodes[a];if(o instanceof Text)if(r>o.textContent.length)r-=o.textContent.length;else{if(r!==o.textContent.length||!n){i=o;break}r-=o.textContent.length}else{var s=this.getNodeAndPos(o,r,n);if(i=s.node,r=s.pos,i)break}}return{node:i,pos:r}}},{key:"isNoBreak",value:function(e,t){return-1!==[" "," ","(","{","[","+","'",'"'].indexOf(e)||(t?-1!==["!","%",")","}","]","|","-",";",":",'"',"'",",",".","?","/"," "].indexOf(t):void 0)}}]),e}()},function(e,t,n){"use strict";var r;n.d(t,"a",function(){return r}),function(e){e.SELECT="SELECT",e.HOVER="HOVER",e.REMOVE="REMOVE",e.CHANGE_POSITION="CHANGE_POSITION",e.MOVE_OTHER_PAGE="MOVE_OTHER_PAGE"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(267),u=function(){function e(t,n,r){i()(this,e),this.borderVisible=!0,this.borderThickness=100,this.borderColor="#000000",this.borderAlpha=255,this.ownerCell=t,this.type=n,this.initThickness=r,this.borderThickness=r}return o()(e,[{key:"render",value:function(e,t,n,r,i){if(this.borderThickness<=0)this.gridSvgString="";else{var a=100/(this.ownerCell.gridItem.getWidth()*i),o=100/(this.ownerCell.gridItem.getHeight()*i),u=e+n,c=t+r,l=Math.sqrt(n*n+r*r),h=Math.max(1,this.getLineThickness(i));switch(this.type){case s.a.LEFT:this.gridSvgString='<rect \n                    x="'.concat((e-h/2)*a,'%" \n                    y="').concat((t-h/2)*o,'%" \n                    width="').concat(h,'px" height="').concat((r+h)*o,'%" \n                    fill="').concat(this.color,'" />');break;case s.a.TOP:this.gridSvgString='<rect \n                    x="'.concat((e-h/2)*a,'%" \n                    y="').concat((t-h/2)*o,'%" \n                    width="').concat((n+h)*a,'%" height="').concat(h,'px" \n                    fill="').concat(this.color,'" />');break;case s.a.RIGHT:this.gridSvgString='<rect \n                    x="'.concat((u-h/2)*a,'%" \n                    y="').concat((t-h/2)*o,'%" \n                    width="').concat(h,'px" height="').concat((r+h)*o,'%" \n                    fill="').concat(this.color,'" />');break;case s.a.BOTTOM:this.gridSvgString='<rect \n                    x="'.concat((e-h/2)*a,'%" \n                    y="').concat((c-h/2)*o,'%" \n                    width="').concat((n+h)*a,'%" height="').concat(h,'px" \n                    fill="').concat(this.color,'" />');break;case s.a.DOWNDIAGONAL:this.gridSvgString='<rect \n                    x="'.concat(e*a,'%" y="').concat((t-h/2)*o,'%" \n                    width="').concat(l*a,'%" height="').concat(h,'px" \n                    transform="rotate(').concat(180*Math.atan(r/n)/Math.PI,", ").concat(e,", ").concat(t,')" fill="').concat(this.color,'" />');break;case s.a.UPDIAGONAL:this.gridSvgString='<rect \n                    x="'.concat(e*a,'%" y="').concat((t-h/2+r)*o,'%" \n                    width="').concat(l*a,'%" height="').concat(h,'px" \n                    transform="rotate(').concat(180*-Math.atan(r/n)/Math.PI,", ").concat(e,", ").concat(t+r,')" fill="').concat(this.color,'" />');break;default:this.gridSvgString=""}}}},{key:"getLineThickness",value:function(t){return this.thickness*t/2*this.ownerCell.gridItem.borderScaleStandard/e.BORDER_SCALE_STANDARD}},{key:"assign",value:function(e){this.borderColor=e.color,this.borderAlpha=e.alpha,this.borderThickness=e.thickness,this.borderVisible=e.visible}},{key:"clone",value:function(){var t=new e(this.ownerCell,this.type,this.initThickness);return t.thickness=this.thickness,t.visible=this.visible,t.color=this.color,t.alpha=this.alpha,t}},{key:"visible",get:function(){return this.borderVisible},set:function(e){this.borderVisible!==e&&(this.borderVisible=e)}},{key:"thickness",get:function(){return this.borderThickness},set:function(e){this.borderThickness!==e&&(this.borderThickness=e)}},{key:"color",get:function(){return this.borderColor},set:function(e){this.borderColor!==e&&(this.borderColor=e)}},{key:"alpha",get:function(){return this.borderAlpha},set:function(e){this.borderAlpha!==e&&(this.borderAlpha=e)}}]),e}();u.BORDER_SCALE_STANDARD=800},function(e,t,n){"use strict";n.d(t,"a",function(){return m}),n.d(t,"b",function(){return S});var r=n(6),i=n.n(r),a=n(3),o=n.n(a),s=n(7),u=n.n(s),c=n(0),l=n.n(c),h=n(1),p=n.n(h),d=n(249),f=n(244),g=n(234),v=function(){function e(t,n,r){l()(this,e),this.SVG_NOT_FILL="none",this.SVG_ATTRIBUTE_FILL="fill",this.SVG_ATTRIBUTE_ORIGIN_FILL="origin_fill",this.SVG_SCALE_CEIL_VALUE=1e3,this.left=0,this.top=0,this.scaleCommon=1,this.scaleX=1,this.scaleY=1,this.svgData=t,this.layerId=n,this.svgWidth=t.width,this.svgHeight=t.height,this.svgLayer=t.getLayer(n),this.element=this.svgLayer.svg,this.element.style.position="absolute",this.layerSvgElement=this.svgLayer.layerSvg.cloneNode(!0),d.a.makeUnicornSvgElement(this.element,r),d.a.makeUnicornSvgElement(this.layerSvgElement,r),this.savedData={type:void 0,left:void 0,top:void 0,width:void 0,height:void 0,extendOffsetX:void 0,extendOffsetY:void 0,moveOffsetX:void 0,moveOffsetY:void 0}}return p()(e,[{key:"getColorByOriginColor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.element,n=t.attributes.getNamedItem(this.SVG_ATTRIBUTE_FILL),r=t.attributes.getNamedItem(this.SVG_ATTRIBUTE_ORIGIN_FILL);if(r&&r.value.toLowerCase()===e.toLowerCase()&&n&&n.value.toLowerCase()!==this.SVG_NOT_FILL)return String(n.value);var i=!0,a=!1,o=void 0;try{for(var s,u=t.childNodes[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;if(c.attributes){var l=this.getColorByOriginColor(e,c);if(l&&l!==this.SVG_NOT_FILL)return l}}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}return null}},{key:"setColorByOriginColor",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.element,r=n.attributes.getNamedItem(this.SVG_ATTRIBUTE_FILL),i=n.attributes.getNamedItem(this.SVG_ATTRIBUTE_ORIGIN_FILL);i&&i.value.toLowerCase()===e.toLowerCase()&&r&&r.value.toLowerCase()!==this.SVG_NOT_FILL&&n.setAttribute(this.SVG_ATTRIBUTE_FILL,t);var a=!0,o=!1,s=void 0;try{for(var u,c=n.childNodes[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value;l.attributes&&this.setColorByOriginColor(e,t,l)}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}}},{key:"move",value:function(e,t){this.left+=this.svgLayer.moveOffsetX*e,this.top+=this.svgLayer.moveOffsetY*t}},{key:"scale",value:function(e){this.scaleCommon*=e}},{key:"assign",value:function(e){this.svgLayer=e.svgLayer,this.left=e.left,this.top=e.top,this.scaleX=e.scaleX,this.scaleY=e.scaleY,this.scaleCommon=e.scaleCommon}},{key:"isChangeableWidth",value:function(){return this.svgLayer.extendOffsetX>0}},{key:"isChangeableHeight",value:function(){return this.svgLayer.extendOffsetY>0}},{key:"isKeepRatio",value:function(){return this.svgLayer.type!==f.e.NO_PATTERN||0===this.svgLayer.extendOffsetX&&0===this.svgLayer.extendOffsetY}},{key:"isExtend",value:function(){return this.svgLayer.type===f.e.NO_PATTERN&&this.svgLayer.extendOffsetX-this.svgLayer.width/this.svgData.width>.01||this.svgLayer.extendOffsetY-this.svgLayer.height/this.svgData.height>.01}},{key:"isPattern",value:function(){return this.svgLayer.type!==f.e.NO_PATTERN}}]),e}(),y=function(e){function t(e,n,r){return l()(this,t),i()(this,o()(t).call(this,e,n,r))}return u()(t,e),p()(t,[{key:"resize",value:function(e,t){var n=this.svgLayer.extendOffsetX*e/this.svgLayer.width;this.scaleX+=n,this.left-=n*this.svgLayer.left;var r=this.svgLayer.extendOffsetY*t/this.svgLayer.height;this.scaleY+=r,this.top-=r*this.svgLayer.top,this.move(e,t)}},{key:"getRenderBoxTranslate",value:function(e){return{cx:this.left/this.scaleX,cy:this.top/this.scaleY}}},{key:"getSvgScale",value:function(e,t){var n=t?this.scaleCommon:1;return{cx:this.scaleX*n*e,cy:this.scaleY*n*e}}},{key:"getRenderingCount",value:function(e){return{cx:1,cy:1}}},{key:"getClipRect",value:function(e){return null}},{key:"getFillRectSize",value:function(e){return{cx:this.svgData.width,cy:this.svgData.height}}}]),t}(v),m=function(e){function t(){var e,n;l()(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(n=i()(this,(e=o()(t)).call.apply(e,[this].concat(a)))).epsilon=Math.pow(10,-3),n}return u()(t,e),p()(t,[{key:"getSvgScale",value:function(e,t){var n=t?this.scaleCommon:1;return{cx:n*e*this.svgWidth/this.svgWidth,cy:n*e*this.svgHeight/this.svgHeight}}},{key:"getRenderingCount",value:function(e){var t=this.getFillRectSize(e);return{cx:Math.abs(this.scaleX-1)<this.epsilon?1:Math.max(1,Math.ceil(t.cx*this.scaleX/Math.floor(t.cx))),cy:Math.abs(this.scaleY-1)<this.epsilon?1:Math.max(1,Math.ceil(t.cy*this.scaleY/Math.floor(t.cy)))}}}]),t}(v),E=function(e){function t(e,n,r){return l()(this,t),i()(this,o()(t).call(this,e,n,r))}return u()(t,e),p()(t,[{key:"getRenderBoxTranslate",value:function(e){return{cx:0,cy:0}}},{key:"getPatternTranslate",value:function(e){return{cx:0,cy:0}}}]),p()(t,[{key:"resize",value:function(e,t){this.scaleX+=e/this.svgWidth,this.scaleY+=t/this.svgHeight,this.move(e,t)}},{key:"getClipRect",value:function(e){return new g.a(0,0,this.svgWidth*this.scaleCommon*this.scaleX*e,this.svgHeight*this.scaleCommon*this.scaleY*e)}},{key:"getFillRectSize",value:function(e){return{cx:this.svgWidth,cy:this.svgHeight}}},{key:"getPatternRatio",value:function(){return t.SVG_PATTERN_RATIO}}]),t}(m);E.SVG_PATTERN_RATIO=.9995;var k=function(e){function t(e,n,r){return l()(this,t),i()(this,o()(t).call(this,e,n,r))}return u()(t,e),p()(t,[{key:"getRenderBoxTranslate",value:function(e){return{cx:this.svgLayer.left+this.left,cy:this.svgLayer.top+this.top}}},{key:"getPatternTranslate",value:function(e){return{cx:-this.svgLayer.left,cy:-this.svgLayer.top}}}]),p()(t,[{key:"resize",value:function(e,t){this.scaleX+=this.svgLayer.extendOffsetX*e/this.svgLayer.width,this.scaleY+=this.svgLayer.extendOffsetY*t/this.svgLayer.height,this.move(e,t)}},{key:"getClipRect",value:function(e){var t=this.scaleCommon*e,n=(this.left+this.svgLayer.left)*t,r=(this.top+this.svgLayer.top)*t,i=this.svgLayer.width*t,a=this.svgLayer.height*t,o=i*this.scaleX,s=a*this.scaleY;return new g.a(n,r,n+o,r+s)}},{key:"getFillRectSize",value:function(e){return{cx:this.svgLayer.width,cy:this.svgLayer.height}}},{key:"getPatternRatio",value:function(){return t.LAYER_PATTERN_RATIO}}]),t}(m);k.LAYER_PATTERN_RATIO=.9999;var S=function(){function e(){l()(this,e)}return p()(e,null,[{key:"createSVGLayer",value:function(e,t,n,r){switch(e){case f.e.NO_PATTERN:return new y(t,n,r);case f.e.SVG_PATTERN:return new E(t,n,r);case f.e.LAYER_PATTERN:return new k(t,n,r);default:throw new Error("undefined svgType. type: ".concat(e))}}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=function(){function e(){i()(this,e),this.max=e.DEFAULT_MAX_COUNT,this.min=1,this.span=1}return o()(e,[{key:"canChangePageCount",value:function(){return this.span>0}},{key:"canAddPage",value:function(e){return this.canChangePageCount()&&(0===this.max||e<this.max)}},{key:"canRemovePage",value:function(e){return this.canChangePageCount()&&e>this.min}},{key:"isOverDefaultMaxCount",value:function(t){return t>e.DEFAULT_MAX_COUNT}},{key:"isOverDefaultWarningCount",value:function(t){return t>e.DEFAULT_WARNING_COUNT}},{key:"getRequiredPageCountList",value:function(){if(0===this.min||0===this.max||this.span<=1)return new Array;for(var e=new Array,t=this.min;t<=this.max;t+=this.span)e.push(t);return e}}]),e}();s.DEFAULT_MAX_COUNT=100,s.DEFAULT_WARNING_COUNT=25},function(e,t,n){"use strict";var r=n(2),i=n.n(r),a=n(4),o=n.n(a),s=n(0),u=n.n(s),c=n(1),l=n.n(c),h=n(325),p=n(44),d=function(){function e(){u()(this,e),this.resources=new Map}var t,n,r,a,s,c,d;return l()(e,[{key:"fetchTemplateMeta",value:(d=o()(i.a.mark(function e(t,n){var r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.getTemplateMetaPath(n).replace("http:","https:"),e.next=3,this.fetchFromUrl(r,o()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get(h.h,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)})),function(e,t){return d.apply(this,arguments)})},{key:"fetchLayout",value:(c=o()(i.a.mark(function e(t,n){var r,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.getURL(n).replace("http:","https:"),e.next=3,this.fetchFromUrl(r,o()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.getXml(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})));case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}},e,this)})),function(e,t){return c.apply(this,arguments)})},{key:"fetchTemplateThemeMeta",value:(s=o()(i.a.mark(function e(t,n){var r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.getThemeMetaPath(n).replace("http:","https:"),e.next=3,this.fetchFromUrl(r,o()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get(h.i,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)})),function(e,t){return s.apply(this,arguments)})},{key:"fetchCommodityInstance",value:(a=o()(i.a.mark(function e(t,n){var r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.getCommodityInstancePath(n).replace("http:","https:"),e.next=3,this.fetchFromUrl(r,o()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get(h.d,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)})),function(e,t){return a.apply(this,arguments)})},{key:"fetchPhotoList",value:(r=o()(i.a.mark(function e(t,n){var r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchCommodityInstance(t,n);case 2:return r=e.sent,e.abrupt("return",r.smileCanvasPhotoList||[]);case 4:case"end":return e.stop()}},e,this)})),function(e,t){return r.apply(this,arguments)})},{key:"fetchCopySheetXml",value:(n=o()(i.a.mark(function e(t,n){var r,a,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchCommodityInstance(t,n);case 2:return r=e.sent,a=t.getURL(r.copySheetUrl).replace("http:","https:"),e.next=6,this.fetchFromUrl(a,o()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.getXml(a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})));case 6:return s=e.sent,e.abrupt("return",s.data);case 8:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})},{key:"fetchFromUrl",value:(t=o()(i.a.mark(function e(t,n){var r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.resources.has(t)){e.next=5;break}return e.next=3,n();case 3:r=e.sent,this.resources.set(t,r);case 5:return e.abrupt("return",this.resources.get(t));case 6:case"end":return e.stop()}},e,this)})),function(e,n){return t.apply(this,arguments)})}]),e}();t.a=new d},function(e,t,n){"use strict";n.d(t,"b",function(){return f}),n.d(t,"a",function(){return v});var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(388),u=n(226),c=n(225),l=n(386),h=n(250),p=n(90),d=n(234),f=function(){function e(){i()(this,e),this.horGuidelineFactory=new g(h.d.HORIZONTAL,0),this.verGuidelineFactory=new g(h.d.VERTICAL,0)}return o()(e,[{key:"makeDefaultGuideLine",value:function(){this.horGuidelineFactory.init(),this.horGuidelineFactory.makeGuidelineAuto(),this.verGuidelineFactory.init(),this.verGuidelineFactory.makeGuidelineAuto()}},{key:"getGuidelineFactoryInfo",value:function(e){return e===h.d.HORIZONTAL?this.horGuidelineFactory.getGuidelineFactoryInfo():this.verGuidelineFactory.getGuidelineFactoryInfo()}},{key:"getGuidelineFactoryInfos",value:function(){return{Hor:this.horGuidelineFactory.getGuidelineFactoryInfo(),Ver:this.verGuidelineFactory.getGuidelineFactoryInfo()}}},{key:"registGuidelineInfo",value:function(e,t){(e===h.d.HORIZONTAL?this.horGuidelineFactory:this.verGuidelineFactory).registGuidelineInfo(t)}},{key:"registGuidelineInfos",value:function(e){this.horGuidelineFactory.init(),this.registGuidelineInfo(h.d.HORIZONTAL,e.Hor),this.verGuidelineFactory.init(),this.registGuidelineInfo(h.d.VERTICAL,e.Ver)}},{key:"getSnapTargetDataArray",value:function(){return this.horGuidelineFactory.makeSnapTargetData().concat(this.verGuidelineFactory.makeSnapTargetData())}},{key:"canAddGuideline",value:function(t){return t===h.d.HORIZONTAL?this.horGuidelineFactory.getGuidelines().length<=e.DIRECTION_MAX_COUNT:this.verGuidelineFactory.getGuidelines().length<=e.DIRECTION_MAX_COUNT}},{key:"hasGuideline",value:function(e){return this.horGuidelineFactory.getGuidelines().includes(e)||this.verGuidelineFactory.getGuidelines().includes(e)}}]),e}();f.DIRECTION_MAX_COUNT=100;var g=function(){function e(t,n){i()(this,e),this.nowPosition=0,this.plus=!0,this.guidelines=[],this.direction=t,this.maxPosition=n}return o()(e,[{key:"init",value:function(){this.guidelines=[],this.nowPosition=0,this.plus=!0}},{key:"makeGuideline",value:function(e,t){var n=new v(e,t);return this.guidelines.push(n),n}},{key:"makeGuidelineAuto",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(0===e&&this.nowPosition<=-this.maxPosition)return null;var t=0===e?this.nowPosition:e,n=this.makeGuideline(this.direction,t);return this.setNextPosition(),n}},{key:"setNextPosition",value:function(){for(var e=this;this.guidelines.some(function(t){return t.lastPosition===e.nowPosition});)this.nowPosition=this.getNextPosition()}},{key:"setNowPosition",value:function(e){this.nowPosition=e}},{key:"getNowPosition",value:function(){return this.nowPosition}},{key:"getNextPosition",value:function(){var e=this.nowPosition;return this.plus?(e+=10)>=this.maxPosition&&(this.plus=!1,e=-10):e-=10,e}},{key:"getMaxPosition",value:function(){return this.maxPosition}},{key:"removeLastGuideline",value:function(){var e=this.guidelines.splice(this.guidelines.length-1,1);return e&&e.length?(this.nowPosition=e[0].initPosition,this.plus=this.nowPosition>=0,e[0]):null}},{key:"removeGuideline",value:function(e){return this.nowPosition=e.initPosition,this.guidelines.splice(this.guidelines.indexOf(e),1)[0]}},{key:"getGuidelines",value:function(){return this.guidelines}},{key:"registGuideline",value:function(e,t){var n=this.guidelines.splice(t,this.guidelines.length-t);this.guidelines=this.guidelines.concat(e).concat(n)}},{key:"registGuidelineInfo",value:function(e){this.nowPosition=0===e.guidelines.length?0:e.nowPosition,this.plus=e.plus;var t=[];e.guidelines.forEach(function(e){var n=new v(e.direction,e.initPosition);n.setLastPosition(e.lastPosition),t.push(n)}),this.guidelines=t}},{key:"getGuidelineFactoryInfo",value:function(){return{guidelines:this.guidelines.slice(),nowPosition:this.nowPosition,plus:this.plus}}},{key:"setMaxPosition",value:function(e){this.maxPosition=e}},{key:"setGuidelinePosition",value:function(e,t){t>=0&&t>this.maxPosition||t<0&&t<-1*this.maxPosition?c.a.instance.dispatch(new l.e(e,this)):this.moveGuideline(e,t)}},{key:"moveGuideline",value:function(e,t){c.a.instance.dispatch(new l.f(this,e,t))}},{key:"makeSnapTargetData",value:function(){var e=this,t=[];return this.guidelines.forEach(function(n){var r=Math.round(e.maxPosition+n.lastPosition),i=e.direction===h.d.HORIZONTAL?new d.a(0,r,2*e.maxPosition,r,0):new d.a(r,0,r,2*e.maxPosition,0);t.push({ltrb:i,type:s.a.GUIDELINE})}),t}}]),e}(),v=function(){function e(t,n){i()(this,e),this.direction=t,this.initPosition=n,this.scale=u.a.instance.zoomScale*u.a.instance.pageEditScale,this.lastPosition=n}return o()(e,[{key:"setLastPosition",value:function(e){this.lastPosition=e}},{key:"setZoomScale",value:function(e){this.scale=e}},{key:"getViewPoint",value:function(){return new p.a(this.viewAbsolutePoint.x,this.viewAbsolutePoint.y)}},{key:"setViewPoint",value:function(e,t){this.viewAbsolutePoint=new p.a(e,t)}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(233),u=n(235),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";i()(this,e),this.tbpeGroupIdPrefix=t}return o()(e,[{key:"parse",value:function(e){return this.parseRecursive(e)}},{key:"parseRecursive",value:function(e){var t=this,n=[];if(!e)return n;if(Array.isArray(e))e.forEach(function(e){n=n.concat(t.parseRecursive(e))});else{var r=this.tbpeGroupIdPrefix+e["@Id"],i=new s.a(r);i.layerName=e["@LayerName"]||"",e.Hyperlink&&(i.props.setActiveHyperlink(e.Hyperlink["@Active"]||!1),i.props.setHyperlinkType(e.Hyperlink["@Type"]||u.c.URL),i.props.setHyperlinkValue(e.Hyperlink["@Value"]||"")),this.parseRecursive(e.GROUP).forEach(function(e){i.addMember(e)}),n.push(i)}return n}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return b});var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(6),u=n.n(s),c=n(3),l=n.n(c),h=n(7),p=n.n(h),d=n(443),f=n(446),g=n(418),v=n(417),y=n(416),m=n(86),E=n(421),k=n(422),S=n(423),I=n(293),T=n(424),b=function(e){function t(){return i()(this,t),u()(this,l()(t).apply(this,arguments))}return p()(t,e),o()(t,[{key:"getTextParser",value:function(e){return e===I.a.getTextConvertVersion()?new y.d:new y.a}},{key:"getStickerParser",value:function(e){return new v.a}},{key:"getPhotoParser",value:function(e){return new f.a}},{key:"getCalendarParser",value:function(e){return null}},{key:"getSvgParser",value:function(e){return new g.a}},{key:"getBasicSvgParser",value:function(e){return new k.a}},{key:"getShapeSvgParser",value:function(e){return new S.a}},{key:"getSvgImageframeParser",value:function(e){return new E.a(this.getPhotoParser(e))}},{key:"getGridParser",value:function(e){return new T.a(this.getTextParser(e))}},{key:"getRepositoryType",value:function(){return m.a.UNICORN}}]),t}(d.a)},,function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(0),i=n.n(r),a=n(224),o=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];i()(this,e),this.doSaveQueue=!1,this.isActionGroupEquals=function(){return!1},this.actionType=a.a.TEXT_CHANGE,this.concat=function(e){return!1},this.changeDesign=function(){return!1},this.isLastSavedAction=!1,this.commit=function(e,n,r){r.renderItemTools(e,n,void 0,t.forceUpdate)},this.rollback=function(){},this.recycle=function(){},this.forceUpdate=n}},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=function(){function e(){i()(this,e)}return o()(e,null,[{key:"makeCropParam",value:function(e,t){var n=e.pageController.getPageRenderer(t).contents,r=n.getBoundingClientRect(),i=n.parentElement.parentElement.getBoundingClientRect();return{cropContentsLeft:r.left-i.left,cropContentsTop:r.top-i.top,zoomScale:e.zoomScale}}},{key:"getBackgroundCropParam",value:function(t,n,r){var i=e.makeCropParam(t,n);return i.applyChangePosition=!0,i.cropBoxLeft=r.props.getLeft(),i.cropBoxTop=r.props.getTop(),i.cropBoxWidth=n.sheetSize.width,i.cropBoxHeight=n.sheetSize.height,i}},{key:"getImageframeCropParam",value:function(t,n){var r=e.makeCropParam(t,n);return r.canMoveIgnoreCropBox=!0,r.removePhotoCropImgTransform=!0,r}},{key:"getCropParam",value:function(t,n,r){var i=e.makeCropParam(t,n);return i.applyChangePosition=r,i}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(241),u=n(256),c=function(){function e(){i()(this,e)}return o()(e,null,[{key:"mouseActionToHandle",value:function(e){switch(e){case s.a.MODE_HANDLER_RESIZE_TL:return u.b.TOP_LEFT;case s.a.MODE_HANDLER_RESIZE_T:return u.b.TOP;case s.a.MODE_HANDLER_RESIZE_TR:return u.b.TOP_RIGHT;case s.a.MODE_HANDLER_RESIZE_L:return u.b.LEFT;case s.a.MODE_HANDLER_RESIZE_R:return u.b.RIGHT;case s.a.MODE_HANDLER_RESIZE_BL:return u.b.BOTTOM_LEFT;case s.a.MODE_HANDLER_RESIZE_B:return u.b.BOTTOM;case s.a.MODE_HANDLER_RESIZE_BR:return u.b.BOTTOM_RIGHT;default:return}}}]),e}()},function(e,t,n){"use strict";var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(226),u=n(234),c=n(260),l=n(110),h=n(225),p=n(11),d=n(233),f=n(227),g=n(16),v=n(43),y=n(246),m=function(){function e(){i()(this,e)}return o()(e,[{key:"setListener",value:function(e){this.listener=e}},{key:"getFixRatioEnabled",value:function(e){return this.itemFixRatioEnabledList||(this.itemFixRatioEnabledList=new Map),this.itemFixRatioEnabledList.get(e)}},{key:"setFixRatioEnabled",value:function(e,t){this.itemFixRatioEnabledList||(this.itemFixRatioEnabledList=new Map),this.itemFixRatioEnabledList.set(e,t)}},{key:"getGroupItemRotate",value:function(e){return this.groupRotateList||(this.groupRotateList=new Map),this.groupRotateList.has(e)?this.groupRotateList.get(e):0}},{key:"fetchFromActiveItems",value:function(){this.onChangeSize(s.a.instance.activeItems)}},{key:"onChangeSize",value:function(e){this.listener&&this.listener.onChangeSize(e)}},{key:"onRollbackChangedSize",value:function(){this.groupRotateList&&this.groupRotateList.clear()}},{key:"getSizeWithinMinMax",value:function(t,n){var r=t.clone(),i=Math.max(r.width,r.height),a=v.a.getMaxSheetSize(f.a.getUserSetting().devMode);i>a&&n&&r.scale(a/i);var o=s.a.instance.option.pageSize.unit,u=g.a.getPixel(e.getMinSizeByUnit(o),96,o),c=Math.min(Math.max(r.width,u),a),h=Math.min(Math.max(r.height,u),a);return new l.a(c,h)}},{key:"getSizeByFixRatio",value:function(e,t,n){var r=s.a.instance.option.pageSize.unit,i=new l.a(this.getFixedPointByUnit(g.a.changeUnit(t.width,r,g.a.PX,96),r),this.getFixedPointByUnit(g.a.changeUnit(t.height,r,g.a.PX,96),r));return 0===i.width&&(i.width=n?i.height/e.height*e.width:e.width),0===i.height&&(i.height=n?i.width/e.width*e.height:e.height),i}},{key:"getItemLTRBList",value:function(e){return e.map(function(e){var t=e.getLTRBCoordinate();return new u.a(t.left,t.top,t.right,t.bottom,e.props.getRotate())})}},{key:"changeSizeOfItems",value:function(t,n){var r=this;if(0!==t.length){var i=this.getItemLTRBList(t),a=new Map,o=d.b.convertSinglesToItems(t);t.forEach(function(t){var i=d.b.getRootGroup(t.groupId,o),s=i?i.getGroupId():"",u=r.getFixRatioEnabled(t.getItemKey())||!p.b.isEmpty(s),c=new l.a(t.getWidth(),t.getHeight()),h=r.getSizeByFixRatio(c,n,u),f=r.getSizeWithinMinMax(h,u).clone();if(p.b.isEmpty(s))t.resizeWidthAndHeight(f);else{a.has(s)||a.set(s,i.getLTRBCoordinate(!0));var g=0===n.height;e.changeGroupItemSize(t,f,a.get(s),g)}}),h.a.instance.dispatch(new c.o(t.slice(),i,this.onChangeSize.bind(this)))}}},{key:"changeRotateOfItems",value:function(e,t){var n=this;if(0!==e.length&&(1!==e.length||e[0].props.getRotate()!==t)){var r=this.getItemLTRBList(e),i=new Map,a=d.b.convertSinglesToItems(e),o=new Map;e.forEach(function(e){var r=d.b.getRootGroup(e.groupId,a),s=r?r.getGroupId():"";if(p.b.isEmpty(s))e.rotate(t,e.getLTRBCoordinate().getCenterPos());else{i.has(s)||i.set(s,r.getLTRBCoordinate(!0));var u=n.getGroupItemRotate(s),c=t-u;o.set(s,c),e.props.setRotate(c+e.props.getRotate());var l=e.getLTRBCoordinate().getCenterPos(),h=e.getLTRBCoordinate().clone();h.moveCenter(y.a.calcLocationByRotate(l,i.get(s).getCenterPos(),c)),e.setLTRBCoordinate(h)}}),o.forEach(function(e,t){var r=n.getGroupItemRotate(t)+e;n.groupRotateList.set(t,r)}),h.a.instance.dispatch(new c.o(e.slice(),r,this.onChangeSize.bind(this),this.onRollbackChangedSize.bind(this)))}}},{key:"getFixedPointByUnit",value:function(e,t){switch(t){case g.a.CM:return Number(e.toFixed(1));case g.a.IN:return Number(e.toFixed(2));default:return Number(e.toFixed())}}}],[{key:"changeGroupItemSize",value:function(e,t,n,r){var i=r?t.width/n.getWidth():t.height/n.getHeight(),a=new u.a(n.left,n.top,n.left+n.getWidth()*i,n.top+n.getHeight()*i),o=n.getCenterPos(),s=a.getCenterPos(),c=e.getLTRBCoordinate(),l=new u.a(s.x+(c.left-o.x)*i,s.y+(c.top-o.y)*i,s.x+(c.right-o.x)*i,s.y+(c.bottom-o.y)*i,e.props.getRotate());e.setLTRBCoordinate(l)}},{key:"getMinSizeByUnit",value:function(e){switch(e){case g.a.CM:return.1;case g.a.IN:return.01;default:return 1}}}]),e}();t.a=new m},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(2),i=n.n(r),a=n(4),o=n.n(a),s=n(0),u=n.n(s),c=n(1),l=n.n(c),h=n(19),p=n(44),d=n(20),f=function(){function e(){u()(this,e)}var t,n,r;return l()(e,null,[{key:"getData",value:(r=o()(i.a.mark(function e(t){var n,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.cache.has(t)){e.next=2;break}return e.abrupt("return",this.cache.get(t));case 2:return e.prev=2,e.next=5,d.b.get("/sticker/background-info?stickerId=".concat(t));case 5:return n=e.sent,r=n.data,this.cache.set(t,r),e.abrupt("return",r);case 11:return e.prev=11,e.t0=e.catch(2),e.abrupt("return",null);case 14:case"end":return e.stop()}},e,this,[[2,11]])})),function(e){return r.apply(this,arguments)})},{key:"update",value:(n=o()(i.a.mark(function e(t){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=JSON.stringify(t),e.next=3,d.b.put("/sticker/background",{data:n,contentType:"application/json"});case 3:this.cache.delete(t.stickerId);case 4:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"delete",value:(t=o()(i.a.mark(function e(t){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"/servlet/api/miridih/sticker/background-info/delete",n=h.a.getURL("/servlet/api/miridih/sticker/background-info/delete"),e.next=4,p.a.post(d.a,n,{data:{stickerId:t}});case 4:this.cache.set(t,null);case 5:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})}]),e}();f.cache=new Map},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(0),i=n.n(r),a=n(6),o=n.n(a),s=n(3),u=n.n(s),c=n(1),l=n.n(c),h=n(7),p=n.n(h),d=n(8),f=function(e){function t(){var e;return i()(this,t),(e=o()(this,u()(t).call(this))).id="msgPopup",e}return p()(t,e),l()(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),l()(t,[{key:"getContents",value:function(){var e=this,n=document.createElement("div");return n.className=d.a.POPUP_MSG,this.msgElement=document.createElement("p"),n.appendChild(this.msgElement),this.btnElement=document.createElement("button"),this.btnElement.addEventListener("click",function(){e.btnCallback&&e.btnCallback(),t.close()}),n.appendChild(this.btnElement),n}},{key:"updateUI",value:function(){this.msgElement.innerHTML=this.msg||"",this.btnElement.innerText=this.btnText||"",this.btnElement.className=""}}],[{key:"open",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"확인",n=arguments.length>2?arguments[2]:void 0;this.instance.msg=e,this.instance.btnText=t,this.instance.btnCallback=n,this.instance.open()}},{key:"close",value:function(){this.instance.close(),this._instance=null}}]),t}(n(33).a)},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(6),i=n.n(r),a=n(3),o=n.n(a),s=n(7),u=n.n(s),c=n(0),l=n.n(c),h=n(1),p=n.n(h),d=n(68),f=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Date;l()(this,e),this.designIdx=t,this.historyIdx=n,this.createDate=i,this.xmlSheets=r.map(function(e){return e.xml})}return p()(e,[{key:"isValid",value:function(){return!0}},{key:"getXmlDocuments",value:function(){return this.xmlSheets.map(function(e){return(new DOMParser).parseFromString(e,"text/xml")})||[]}},{key:"isNeedToRemove",value:function(e,t){return!!this.isValid()&&(this.designIdx===e?this.historyIdx!==t:d.a.getDifferenceBetween(new Date,new Date(this.createDate))>3)}},{key:"isSameDesign",value:function(e,t){return this.designIdx===e&&this.historyIdx===t}}],[{key:"parse",value:function(t){if(t)try{var n=JSON.parse(t);return Object.setPrototypeOf(n,e.prototype),n}catch(e){console.error("cannot parse xml from local storage ::: ",t,e)}return new g}},{key:"createInvalidDoc",value:function(){return new g}}]),e}(),g=function(e){function t(){return l()(this,t),i()(this,o()(t).call(this,0,0,[]))}return u()(t,e),p()(t,[{key:"isValid",value:function(){return!1}}]),t}(f)},function(e,t,n){"use strict";n.d(t,"a",function(){return v});var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(6),u=n.n(s),c=n(3),l=n.n(c),h=n(7),p=n.n(h),d=n(29),f=n(57),g=n(472),v=function(e){function t(){return i()(this,t),u()(this,l()(t).apply(this,arguments))}return p()(t,e),o()(t,[{key:"setSaveFailedDesignDocDC",value:function(e){this.setLocalStorage(f.b.RECENT_FAILED_TO_SAVE_SHEETS,JSON.stringify(e))}},{key:"getSaveFailedDesignDoc",value:function(e,t){var n=this.getLocalStorage(f.b.RECENT_FAILED_TO_SAVE_SHEETS),r=g.a.parse(n);return r.isSameDesign(e,t)?r:(r.isNeedToRemove(e,t)&&this.removeLocalStorage(f.b.RECENT_FAILED_TO_SAVE_SHEETS),g.a.createInvalidDoc())}}]),t}(d.a)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(2),i=n.n(r),a=n(4),o=n.n(a),s=n(0),u=n.n(s),c=n(1),l=n.n(c),h=n(6),p=n.n(h),d=n(3),f=n.n(d),g=n(9),v=n.n(g),y=n(7),m=n.n(y),E=n(13),k=n(302),S=function(e){function t(e){var n;return u()(this,t),(n=p()(this,f()(t).call(this,e))).thumb=n.thumb.replace("/resources","https://resource.miricanvas.com"),n}return m()(t,e),t}(k.a),I=n(14),T=n.n(I),b=function(e){function t(e){var n;return u()(this,t),n=p()(this,f()(t).call(this,e)),Object.assign(T()(n),e),n.label=String(n.idx),n.value=n.name,n}return m()(t,e),t}(k.a),w=function(e){function t(e){var n;u()(this,t),n=p()(this,f()(t).call(this,e)),Object.assign(T()(n),e);var r=n.thumb.split(",");return n.angle=Number(r[0]),n.startColor=r[1],n.endColor=r[2],n}return m()(t,e),t}(k.a);n.d(t,"a",function(){return A});var A=function(e){function t(){return u()(this,t),p()(this,f()(t).apply(this,arguments))}var n,r,a,s,c,h,d;return m()(t,e),l()(t,null,[{key:"createResourceStyleFrom",value:function(e){switch(e.type){case k.c.STYLE_IMAGE_FILTER:return new S(e);case k.c.STYLE_TEXT_FONT_FAMILY:return new b(e);case k.c.STYLE_TEXT_GRADATION:return new w(e);default:return new k.a(e)}}},{key:"createResourceStyle",value:(d=o()(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.requestV3(void 0,E.b.POST,"/api/template/style",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(e){return d.apply(this,arguments)})},{key:"updateResourceStyle",value:(h=o()(i.a.mark(function e(t,n){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.requestV3(void 0,E.b.POST,"/api/template/style/".concat(t,"/update"),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(e,t){return h.apply(this,arguments)})},{key:"fetchResourceStyle",value:(c=o()(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,this.requestV3(void 0,E.b.GET,"/api/template/style/".concat(t));case 3:return e.t1=e.sent,e.abrupt("return",e.t0.createResourceStyleFrom.call(e.t0,e.t1));case 5:case"end":return e.stop()}},e,this)})),function(e){return c.apply(this,arguments)})},{key:"deleteResourceStyle",value:(s=o()(i.a.mark(function e(n){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v()(f()(t),"requestV3",this).call(this,void 0,E.b.POST,"/api/template/style/".concat(n,"/delete"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(e){return s.apply(this,arguments)})},{key:"fetchResourceStyleList",value:(a=o()(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.requestList(void 0,E.b.GET,"/api/template/style",t,void 0,!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"fetchResourceStyleMap",value:(r=o()(i.a.mark(function e(t){var n,r,a=this;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchResourceStyleList(t);case 2:return e.t0=function(e){return a.createResourceStyleFrom(e)},n=e.sent.map(e.t0),r=new Map,t.typeList.forEach(function(e){r.set(e,n.filter(function(t){return t.type===e}))}),e.abrupt("return",r);case 7:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"fetchReplaceableFont",value:(n=o()(i.a.mark(function e(n){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v()(f()(t),"requestV3",this).call(this,k.a.prototype,E.b.GET,"/api/template/style/replaceable-font/".concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})}]),t}(E.a)},,function(e,t,n){"use strict";var r=n(2),i=n.n(r),a=n(4),o=n.n(a),s=n(0),u=n.n(s),c=n(1),l=n.n(c),h=n(6),p=n.n(h),d=n(3),f=n.n(d),g=n(9),v=n.n(g),y=n(7),m=n.n(y),E=n(37),k=n(20),S=n(51),I=n(12),T=n(532),b=n.n(T),w=n(240),A=n(231),C=n(253),x=n(166),R=n(224),L=n(225),_=n(338),P=n(254),O=n(8),D=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;u()(this,e),this.percentage=0,this.root=t,this.progressBar=document.createElement("div"),this.progressBar.className=O.a.PROGRESS_BAR_HOR,this.progress=document.createElement("div"),this.progressBar.appendChild(this.progress),null!==t&&this.root.appendChild(this.progressBar)}return l()(e,[{key:"addRoot",value:function(e){null===this.root&&(this.root=e,$(this.root).children(".user_image_handle").hide(),this.root.appendChild(this.progressBar))}},{key:"advance",value:function(){this.percentage>100||null!==this.progress&&(this.progress.style.width=this.percentage+++"%")}},{key:"remove",value:function(){this.progressBar.removeChild(this.progress),this.progress=null,null!==this.root&&($(this.root).children(".user_image_handle").show(),this.root.removeChild(this.progressBar))}}]),e}(),M=n(365),N=n(328),B=n(299),U=n(280);function G(e){return F.apply(this,arguments)}function F(){return(F=o()(i.a.mark(function e(t){var n,r=arguments;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:U.a.USER_PHOTO_SIZE,e.abrupt("return",new Promise(function(){var e=o()(i.a.mark(function e(r,a){var o,s,u;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.b.loadImageAsync(t);case 3:o=e.sent,(s=H(o,n)).width===o.width?r(t):((u=w.a.createCanvas()).width=s.width,u.height=s.height,u.getContext("2d").drawImage(o,0,0,s.width,s.height),r(u.toDataURL())),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),a(e.t0);case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t,n){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function H(e,t){if(Math.max(e.width,e.height)<=t)return{width:e.width,height:e.height};var n=e.width/e.height;return 1===n?{width:t,height:t}:n>1?{width:t,height:t/n}:{width:t*n,height:t}}var V=n(110),z=n(13),W=n(308);n.d(t,"a",function(){return K});var K=function(e){function t(){return u()(this,t),p()(this,f()(t).apply(this,arguments))}var n,r,a,s,c,h,d,g,y,T;return m()(t,e),l()(t,null,[{key:"generateUploadKey",value:function(e){return"".concat(t.UPLOAD_KEY_PREFIX,"_").concat(e)}},{key:"loadThumbnail",value:(T=o()(i.a.mark(function e(n,r){var a,o,s,u,c,l,h,p,d;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=new D,e.next=3,X(a);case 3:return o=t.generateUploadKey(r),t.map.set(o,a),e.next=7,t.makeImageData(n);case 7:if(s=e.sent,(c=B.a.convertMimetypeToCMFileType(n.type))!==N.a.USER_IMAGE){e.next=16;break}return l=U.a.createPhotoKey(r),e.next=13,G(s);case 13:u=e.sent,e.next=21;break;case 16:return l=r,M.a.addToThumbnailMap(r,s),u=s,e.next=21,_.a.setCacheFromFile(r,n);case 21:return e.next=23,x.b.setUrlImage(l,u);case 23:return e.next=25,this.getUserFileDimension(n,c);case 25:h=e.sent,p=I.a.getUser(),d={type:c,filename:n.name,uuidKey:r,fileSize:n.size,accountId:p.accountId,accountName:p.getName(),thumb300Url:null,originUrl:null,fileMeta:JSON.stringify(h)},P.c.addUserFilesDto(d);case 29:case"end":return e.stop()}},e,this)})),function(e,t){return T.apply(this,arguments)})},{key:"uploadUserFile",value:(y=o()(i.a.mark(function e(n,r,a){var o,s,u,c,l,h,p=this;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.generateUploadKey(r),e.prev=1,e.next=4,this.hasOrientation(n);case 4:if(!e.sent){e.next=8;break}return e.next=7,this.makeRenderedImageFileByBrowser(n);case 7:n=e.sent;case 8:if(s=P.c.selectedTeamData){e.next=13;break}return e.next=12,S.a.getDefaultSelectedTeamData(I.a.getUser().accountId);case 12:s=e.sent;case 13:return u=B.a.convertMimetypeToCMFileType(n.type),c=t.getUploadApiByType(u),(l=new FormData).append("file",n),l.append("key",r),l.append("teamIdx",String(s.teamIdx)),l.append("teamScope",s.teamScope),e.next=22,this.getUserFileDimension(n,u);case 22:(h=e.sent)&&l.append("extraData",JSON.stringify(h)),t.fileUpload(c,l).then(function(e){"SUCCESS"===e.resultCode?(P.c.fileUpdateComplete(n.name).moveImageToFolderWhenUploading(r,a).updateFileInfo(r),p.completeUpload(o)):p.failUpload(n,r,o,e.messageCode)}).catch(function(e){throw p.failUpload(n,r,o),e}),e.next=31;break;case 27:throw e.prev=27,e.t0=e.catch(1),this.failUpload(n,r,o),e.t0;case 31:case"end":return e.stop()}},e,this,[[1,27]])})),function(e,t,n){return y.apply(this,arguments)})},{key:"failUpload",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";"FILE_SIZE_TOO_LARGE"===r?alert("각 파일 크기는 ".concat(B.a.getSizeDescription(B.a.getMaxFileSize(e.type))," 미만이어야 합니다.\n파일 크기를 줄인 후 다시 업로드해주세요.\n\n").concat(e.name)):"NOT_ENOUGH_SPACE"===r?alert("사용할 수 있는 저장 공간을 초과했어요."):alert("미리캔버스와 호환할 수 없거나 손상된 파일입니다.\n파일 확장자 또는 파일이 깨지지 않았는지 확인해주세요.\n\n".concat(e.name)),this.removeUploadFailItems(t),W.a.updateCapacity(-e.size),P.c.loadListSync(),this.completeUpload(n)}},{key:"completeUpload",value:function(e){var n=t.map.get(e);n&&(n.remove(),t.map.delete(e)),0===t.map.size&&(W.a.isUploading=!1,C.a.saveQueuedLastSave())}},{key:"removeUploadFailItems",value:function(e){var t=U.a.createPhotoKey(e);L.a.instance.dispatch(new R.c(function(e,n,r){var i=!1;e.pages.forEach(function(e){var r=e.getAllSingleItems().filter(function(e){return e instanceof A.d&&e.props.getPhotoKey()===t});if(!E.a.isEmpty(r)){r.forEach(function(t){return e.removeItem(t)});var a=n.pageController.getPageRenderer(e);a.syncItemRenderers(),a.updateHoverLayer(),i=!0}}),i&&r.renderHandler(e,n)}))}},{key:"getUserFileDimension",value:(g=o()(i.a.mark(function e(t,n){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=n,e.next=e.t0===N.a.USER_IMAGE?3:e.t0===N.a.USER_SVG?6:7;break;case 3:return e.next=5,this.getUserImageDimension(t);case 5:return e.abrupt("return",e.sent);case 6:return e.abrupt("return",this.getUserSvgFileDimension(t));case 7:case"end":return e.stop()}},e,this)})),function(e,t){return g.apply(this,arguments)})},{key:"getUserImageDimension",value:(d=o()(i.a.mark(function e(t){var n,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.makeImageData(t);case 2:return n=e.sent,e.next=5,x.b.loadImageAsync(n);case 5:return r=e.sent,e.abrupt("return",new V.a(r.width,r.height));case 7:case"end":return e.stop()}},e,this)})),function(e){return d.apply(this,arguments)})},{key:"getUserSvgFileDimension",value:(h=o()(i.a.mark(function e(t){var n,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.convertFileToXmlDocument(t);case 2:return n=e.sent,e.next=5,_.a.makeSvgDataFromXml(n);case 5:return r=e.sent,e.abrupt("return",new V.a(r.width,r.height));case 7:case"end":return e.stop()}},e)})),function(e){return h.apply(this,arguments)})},{key:"fileUpload",value:(c=o()(i.a.mark(function e(t,n){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.b.post(t,{data:n,processData:!1,traditional:!0,contentType:!1});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),function(e,t){return c.apply(this,arguments)})},{key:"reserveFileKey",value:(s=o()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/v0/files/key",e.next=3,k.b.post("/api/v0/files/key");case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)})),function(){return s.apply(this,arguments)})},{key:"getUploadApiByType",value:function(e){var t="/api/v0/files/${type}";switch(e){case N.a.USER_IMAGE:return t.replace("${type}","user_image/");case N.a.USER_SVG:return t.replace("${type}","user_svg/")}}},{key:"hasOrientation",value:(a=o()(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.type,e.next="image/jpeg"===e.t0?3:"image/jpg"===e.t0?3:4;break;case 3:return e.abrupt("return",new Promise(function(e){var n=new FileReader;n.onload=function(){try{var t=b.a.readFromBinaryFile(n.result);e(t&&t.Orientation>0)}catch(t){e(!0)}},n.onerror=function(){n.abort(),e(!0)},n.readAsArrayBuffer(t)}));case 4:return e.abrupt("return",!1);case 5:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)})},{key:"makeRenderedImageFileByBrowser",value:(r=o()(i.a.mark(function e(n){var r,a,s,u;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u=function(){return(u=o()(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,t){try{a.toBlob(function(t){return e(t)},n.type)}catch(e){t(e)}}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)},s=function(e){return u.apply(this,arguments)},e.t0=x.b,e.next=5,t.makeImageData(n);case 5:return e.t1=e.sent,e.next=8,e.t0.loadImageAsync.call(e.t0,e.t1);case 8:return r=e.sent,(a=w.a.createCanvas()).width=r.width,a.height=r.height,a.getContext("2d").drawImage(r,0,0,r.width,r.height),e.t2=File,e.next=17,s(a);case 17:return e.t3=e.sent,e.t4=[e.t3],e.t5=n.name,e.t6={type:n.type},e.abrupt("return",new e.t2(e.t4,e.t5,e.t6));case 22:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)})},{key:"fetchUploadCapacity",value:(n=o()(i.a.mark(function e(n){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v()(f()(t),"requestV3",this).call(this,void 0,z.b.GET,"/api/v0/files/capacity",$.param(n),!0));case 1:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})}]),t}(z.a);function X(e){return Y.apply(this,arguments)}function Y(){return(Y=o()(i.a.mark(function e(t){var n,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=0,r=setInterval(function(){t.advance(),++n>=95&&clearInterval(r)},300);case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}K.map=new Map,K.UPLOAD_KEY_PREFIX="FILE_UPLOAD",K.makeImageData=function(e){var t=new FileReader;return new Promise(function(n,r){t.readAsDataURL(e),t.onprogress=function(e){if(e.lengthComputable)e.loaded,e.total},t.onload=function(e){n(t.result)},t.onerror=function(){t.abort(),r()}})}},,,function(e,t,n){"use strict";var r=n(2),i=n.n(r),a=n(4),o=n.n(a),s=n(0),u=n.n(s),c=n(1),l=n.n(c),h=n(44),p=function(){function e(){u()(this,e)}var t;return l()(e,null,[{key:"getBizhowsSvgElement",value:(t=o()(i.a.mark(function e(t){var n,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.getXml(t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r?r.getElementsByTagName("svg")[0]:null);case 5:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})}]),e}(),d=n(407),f=n(247),g=n(274),v=n(352),y=function(){function e(){u()(this,e)}var t;return l()(e,null,[{key:"getSvgElementByFormat",value:(t=o()(i.a.mark(function e(t,n){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==g.e.URL){e.next=6;break}return e.next=3,p.getBizhowsSvgElement(n);case 3:return e.abrupt("return",e.sent);case 6:return e.abrupt("return",this.parseSvgFromXml(n));case 7:case"end":return e.stop()}},e,this)})),function(e,n){return t.apply(this,arguments)})},{key:"parseSvgFromXml",value:function(e){return(new DOMParser).parseFromString(e,"image/svg+xml").getElementsByTagName("svg")[0]}},{key:"createRoundRectangleSvgWithPolygon",value:function(e,t,n){var r=e.getWidth(),i=e.getHeight(),a=document.createElementNS(f.a.SVG,"svg");return a.setAttribute("viewBox","0 0 ".concat(r," ").concat(i)),a.appendChild(v.a.convertPathStringToPolygonElement(d.a.createRoundRectangle(0,0,r,i,t,n),Math.max(r,i))),a}}]),e}();t.a=y},,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return y});var r=n(2),i=n.n(r),a=n(4),o=n.n(a),s=n(0),u=n.n(s),c=n(1),l=n.n(c),h=n(30),p=n(11),d=n(240),f=n(166),g=n(247),v=n(249),y=function(){function e(){u()(this,e)}var t;return l()(e,null,[{key:"makeImageframeThumbnail",value:(t=o()(i.a.mark(function e(t,n){var r,a,o,s,u,c,l,y,m;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return","data:image/svg+xml;base64,"+p.b.b64EncodeUnicode((new XMLSerializer).serializeToString(t)));case 2:if(r=t.cloneNode(!0),a=v.a.getFirstElementByOriginColor(r,n)){e.next=6;break}return e.abrupt("return",null);case 6:if(a.setAttribute("fill","none"),o=document.createElementNS(g.a.SVG,"image"),(s=a.parentElement)||(s=v.a.getParentElement(r,a)),s){e.next=12;break}return e.abrupt("return",null);case 12:if(s.insertBefore(o,a),s.removeChild(a),u=p.b.random(20),c=document.createElementNS(g.a.SVG,"defs"),(l=document.createElementNS(g.a.SVG,"clipPath")).id=u,l.appendChild(a),c.appendChild(l),s.appendChild(c),this.FRAME_SRC){e.next=32;break}if(f.b.hasData("imageframe_basic_png")){e.next=25;break}return e.next=25,f.b.setUrlImage("imageframe_basic_png","".concat(h.a.RESOURCE_DOMAIN,"image/imageframe_basic.png"));case 25:y=f.b.getData("imageframe_basic_png"),(m=d.a.createCanvas()).width=y.width,m.height=y.height,m.getContext("2d").drawImage(y,0,0),this.FRAME_SRC=m.toDataURL();case 32:return o.setAttributeNS(g.a.XLINK,"href",this.FRAME_SRC),o.setAttribute("preserveAspectRatio","xMidYMid slice"),o.setAttribute("clip-path","url(#".concat(u,")")),o.setAttribute("overflow","visible"),o.setAttribute("x","0px"),o.setAttribute("y","0px"),o.setAttribute("width","100%"),o.setAttribute("height","100%"),e.abrupt("return","data:image/svg+xml;base64,"+p.b.b64EncodeUnicode((new XMLSerializer).serializeToString(r)));case 41:case"end":return e.stop()}},e,this)})),function(e,n){return t.apply(this,arguments)})}]),e}()},,function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return u});var r=n(2),i=n.n(r),a=n(4),o=n.n(a),s=n(414);function u(){return new Promise(function(t){e.env.IMAGE_PROCESS&&t(),t(),Promise.all([n.e(7),n.e(0),n.e(4),n.e(8)]).then(n.bind(null,577)).then(function(){var e=o()(i.a.mark(function e(n){var r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n.AdminController,s.a.setAdminController(r),t();case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){alert("관리자 모듈 로드중 오류.. 동일한 현상이 반복되면 개발팀에 문의해주세요"),console.log(e),t()})})}}).call(this,n(291))}])]);